(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var mo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function VC(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function zy(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(t,i);return new s}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var pc={},zC={get exports(){return pc},set exports(e){pc=e}},Nh={},Ki={},qC={get exports(){return Ki},set exports(e){Ki=e}},Kr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uc=Symbol.for("react.element"),GC=Symbol.for("react.portal"),JC=Symbol.for("react.fragment"),QC=Symbol.for("react.strict_mode"),YC=Symbol.for("react.profiler"),XC=Symbol.for("react.provider"),ZC=Symbol.for("react.context"),eP=Symbol.for("react.forward_ref"),tP=Symbol.for("react.suspense"),rP=Symbol.for("react.memo"),nP=Symbol.for("react.lazy"),z_=Symbol.iterator;function iP(e){return e===null||typeof e!="object"?null:(e=z_&&e[z_]||e["@@iterator"],typeof e=="function"?e:null)}var iE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oE=Object.assign,sE={};function Wu(e,t,r){this.props=e,this.context=t,this.refs=sE,this.updater=r||iE}Wu.prototype.isReactComponent={};Wu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Wu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function aE(){}aE.prototype=Wu.prototype;function qy(e,t,r){this.props=e,this.context=t,this.refs=sE,this.updater=r||iE}var Gy=qy.prototype=new aE;Gy.constructor=qy;oE(Gy,Wu.prototype);Gy.isPureReactComponent=!0;var q_=Array.isArray,uE=Object.prototype.hasOwnProperty,Jy={current:null},lE={key:!0,ref:!0,__self:!0,__source:!0};function cE(e,t,r){var n,i={},s=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)uE.call(t,n)&&!lE.hasOwnProperty(n)&&(i[n]=t[n]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var y=Array(l),d=0;d<l;d++)y[d]=arguments[d+2];i.children=y}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:Uc,type:e,key:s,ref:a,props:i,_owner:Jy.current}}function oP(e,t){return{$$typeof:Uc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Qy(e){return typeof e=="object"&&e!==null&&e.$$typeof===Uc}function sP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var G_=/\/+/g;function Rg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?sP(""+e.key):t.toString(36)}function Mf(e,t,r,n,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Uc:case GC:a=!0}}if(a)return a=e,i=i(a),e=n===""?"."+Rg(a,0):n,q_(i)?(r="",e!=null&&(r=e.replace(G_,"$&/")+"/"),Mf(i,t,r,"",function(d){return d})):i!=null&&(Qy(i)&&(i=oP(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(G_,"$&/")+"/")+e)),t.push(i)),1;if(a=0,n=n===""?".":n+":",q_(e))for(var l=0;l<e.length;l++){s=e[l];var y=n+Rg(s,l);a+=Mf(s,t,r,y,i)}else if(y=iP(e),typeof y=="function")for(e=y.call(e),l=0;!(s=e.next()).done;)s=s.value,y=n+Rg(s,l++),a+=Mf(s,t,r,y,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function nf(e,t,r){if(e==null)return e;var n=[],i=0;return Mf(e,n,"","",function(s){return t.call(r,s,i++)}),n}function aP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _i={current:null},Bf={transition:null},uP={ReactCurrentDispatcher:_i,ReactCurrentBatchConfig:Bf,ReactCurrentOwner:Jy};Kr.Children={map:nf,forEach:function(e,t,r){nf(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return nf(e,function(){t++}),t},toArray:function(e){return nf(e,function(t){return t})||[]},only:function(e){if(!Qy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Kr.Component=Wu;Kr.Fragment=JC;Kr.Profiler=YC;Kr.PureComponent=qy;Kr.StrictMode=QC;Kr.Suspense=tP;Kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uP;Kr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=oE({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=Jy.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(y in t)uE.call(t,y)&&!lE.hasOwnProperty(y)&&(n[y]=t[y]===void 0&&l!==void 0?l[y]:t[y])}var y=arguments.length-2;if(y===1)n.children=r;else if(1<y){l=Array(y);for(var d=0;d<y;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Uc,type:e.type,key:i,ref:s,props:n,_owner:a}};Kr.createContext=function(e){return e={$$typeof:ZC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:XC,_context:e},e.Consumer=e};Kr.createElement=cE;Kr.createFactory=function(e){var t=cE.bind(null,e);return t.type=e,t};Kr.createRef=function(){return{current:null}};Kr.forwardRef=function(e){return{$$typeof:eP,render:e}};Kr.isValidElement=Qy;Kr.lazy=function(e){return{$$typeof:nP,_payload:{_status:-1,_result:e},_init:aP}};Kr.memo=function(e,t){return{$$typeof:rP,type:e,compare:t===void 0?null:t}};Kr.startTransition=function(e){var t=Bf.transition;Bf.transition={};try{e()}finally{Bf.transition=t}};Kr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Kr.useCallback=function(e,t){return _i.current.useCallback(e,t)};Kr.useContext=function(e){return _i.current.useContext(e)};Kr.useDebugValue=function(){};Kr.useDeferredValue=function(e){return _i.current.useDeferredValue(e)};Kr.useEffect=function(e,t){return _i.current.useEffect(e,t)};Kr.useId=function(){return _i.current.useId()};Kr.useImperativeHandle=function(e,t,r){return _i.current.useImperativeHandle(e,t,r)};Kr.useInsertionEffect=function(e,t){return _i.current.useInsertionEffect(e,t)};Kr.useLayoutEffect=function(e,t){return _i.current.useLayoutEffect(e,t)};Kr.useMemo=function(e,t){return _i.current.useMemo(e,t)};Kr.useReducer=function(e,t,r){return _i.current.useReducer(e,t,r)};Kr.useRef=function(e){return _i.current.useRef(e)};Kr.useState=function(e){return _i.current.useState(e)};Kr.useSyncExternalStore=function(e,t,r){return _i.current.useSyncExternalStore(e,t,r)};Kr.useTransition=function(){return _i.current.useTransition()};Kr.version="18.2.0";(function(e){e.exports=Kr})(qC);const lP=VC(Ki);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cP=Ki,dP=Symbol.for("react.element"),fP=Symbol.for("react.fragment"),hP=Object.prototype.hasOwnProperty,pP=cP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gP={key:!0,ref:!0,__self:!0,__source:!0};function dE(e,t,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)hP.call(t,n)&&!gP.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:dP,type:e,key:s,ref:a,props:i,_owner:pP.current}}Nh.Fragment=fP;Nh.jsx=dE;Nh.jsxs=dE;(function(e){e.exports=Nh})(zC);const fE=pc.Fragment,$t=pc.jsx,$r=pc.jsxs;var k0={},O0={},yP={get exports(){return O0},set exports(e){O0=e}},zi={},N0={},mP={get exports(){return N0},set exports(e){N0=e}},hE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($e,Je){var ke=$e.length;$e.push(Je);e:for(;0<ke;){var Xe=ke-1>>>1,vt=$e[Xe];if(0<i(vt,Je))$e[Xe]=Je,$e[ke]=vt,ke=Xe;else break e}}function r($e){return $e.length===0?null:$e[0]}function n($e){if($e.length===0)return null;var Je=$e[0],ke=$e.pop();if(ke!==Je){$e[0]=ke;e:for(var Xe=0,vt=$e.length,vr=vt>>>1;Xe<vr;){var pr=2*(Xe+1)-1,Nt=$e[pr],Fr=pr+1,ar=$e[Fr];if(0>i(Nt,ke))Fr<vt&&0>i(ar,Nt)?($e[Xe]=ar,$e[Fr]=ke,Xe=Fr):($e[Xe]=Nt,$e[pr]=ke,Xe=pr);else if(Fr<vt&&0>i(ar,ke))$e[Xe]=ar,$e[Fr]=ke,Xe=Fr;else break e}}return Je}function i($e,Je){var ke=$e.sortIndex-Je.sortIndex;return ke!==0?ke:$e.id-Je.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var y=[],d=[],m=1,g=null,E=3,b=!1,P=!1,I=!1,D=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N($e){for(var Je=r(d);Je!==null;){if(Je.callback===null)n(d);else if(Je.startTime<=$e)n(d),Je.sortIndex=Je.expirationTime,t(y,Je);else break;Je=r(d)}}function L($e){if(I=!1,N($e),!P)if(r(y)!==null)P=!0,st(W);else{var Je=r(d);Je!==null&&Ct(L,Je.startTime-$e)}}function W($e,Je){P=!1,I&&(I=!1,A(ve),ve=-1),b=!0;var ke=E;try{for(N(Je),g=r(y);g!==null&&(!(g.expirationTime>Je)||$e&&!De());){var Xe=g.callback;if(typeof Xe=="function"){g.callback=null,E=g.priorityLevel;var vt=Xe(g.expirationTime<=Je);Je=e.unstable_now(),typeof vt=="function"?g.callback=vt:g===r(y)&&n(y),N(Je)}else n(y);g=r(y)}if(g!==null)var vr=!0;else{var pr=r(d);pr!==null&&Ct(L,pr.startTime-Je),vr=!1}return vr}finally{g=null,E=ke,b=!1}}var q=!1,J=null,ve=-1,Fe=5,z=-1;function De(){return!(e.unstable_now()-z<Fe)}function xt(){if(J!==null){var $e=e.unstable_now();z=$e;var Je=!0;try{Je=J(!0,$e)}finally{Je?ft():(q=!1,J=null)}}else q=!1}var ft;if(typeof R=="function")ft=function(){R(xt)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,He=Te.port2;Te.port1.onmessage=xt,ft=function(){He.postMessage(null)}}else ft=function(){D(xt,0)};function st($e){J=$e,q||(q=!0,ft())}function Ct($e,Je){ve=D(function(){$e(e.unstable_now())},Je)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($e){$e.callback=null},e.unstable_continueExecution=function(){P||b||(P=!0,st(W))},e.unstable_forceFrameRate=function($e){0>$e||125<$e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Fe=0<$e?Math.floor(1e3/$e):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_getFirstCallbackNode=function(){return r(y)},e.unstable_next=function($e){switch(E){case 1:case 2:case 3:var Je=3;break;default:Je=E}var ke=E;E=Je;try{return $e()}finally{E=ke}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($e,Je){switch($e){case 1:case 2:case 3:case 4:case 5:break;default:$e=3}var ke=E;E=$e;try{return Je()}finally{E=ke}},e.unstable_scheduleCallback=function($e,Je,ke){var Xe=e.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?Xe+ke:Xe):ke=Xe,$e){case 1:var vt=-1;break;case 2:vt=250;break;case 5:vt=1073741823;break;case 4:vt=1e4;break;default:vt=5e3}return vt=ke+vt,$e={id:m++,callback:Je,priorityLevel:$e,startTime:ke,expirationTime:vt,sortIndex:-1},ke>Xe?($e.sortIndex=ke,t(d,$e),r(y)===null&&$e===r(d)&&(I?(A(ve),ve=-1):I=!0,Ct(L,ke-Xe))):($e.sortIndex=vt,t(y,$e),P||b||(P=!0,st(W))),$e},e.unstable_shouldYield=De,e.unstable_wrapCallback=function($e){var Je=E;return function(){var ke=E;E=Je;try{return $e.apply(this,arguments)}finally{E=ke}}}})(hE);(function(e){e.exports=hE})(mP);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pE=Ki,Vi=N0;function mt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gE=new Set,gc={};function ba(e,t){Nu(e,t),Nu(e+"Capture",t)}function Nu(e,t){for(gc[e]=t,e=0;e<t.length;e++)gE.add(t[e])}var rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),U0=Object.prototype.hasOwnProperty,vP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,J_={},Q_={};function wP(e){return U0.call(Q_,e)?!0:U0.call(J_,e)?!1:vP.test(e)?Q_[e]=!0:(J_[e]=!0,!1)}function _P(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function SP(e,t,r,n){if(t===null||typeof t>"u"||_P(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Si(e,t,r,n,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var oi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){oi[e]=new Si(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];oi[t]=new Si(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){oi[e]=new Si(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){oi[e]=new Si(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){oi[e]=new Si(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){oi[e]=new Si(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){oi[e]=new Si(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){oi[e]=new Si(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){oi[e]=new Si(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yy=/[\-:]([a-z])/g;function Xy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yy,Xy);oi[t]=new Si(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yy,Xy);oi[t]=new Si(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yy,Xy);oi[t]=new Si(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){oi[e]=new Si(e,1,!1,e.toLowerCase(),null,!1,!1)});oi.xlinkHref=new Si("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){oi[e]=new Si(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zy(e,t,r,n){var i=oi.hasOwnProperty(t)?oi[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(SP(t,r,i,n)&&(r=null),n||i===null?wP(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ls=pE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,of=Symbol.for("react.element"),pu=Symbol.for("react.portal"),gu=Symbol.for("react.fragment"),em=Symbol.for("react.strict_mode"),D0=Symbol.for("react.profiler"),yE=Symbol.for("react.provider"),mE=Symbol.for("react.context"),tm=Symbol.for("react.forward_ref"),L0=Symbol.for("react.suspense"),M0=Symbol.for("react.suspense_list"),rm=Symbol.for("react.memo"),ws=Symbol.for("react.lazy"),vE=Symbol.for("react.offscreen"),Y_=Symbol.iterator;function bl(e){return e===null||typeof e!="object"?null:(e=Y_&&e[Y_]||e["@@iterator"],typeof e=="function"?e:null)}var Pn=Object.assign,xg;function Ql(e){if(xg===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);xg=t&&t[1]||""}return`
`+xg+e}var Cg=!1;function Pg(e,t){if(!e||Cg)return"";Cg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var y=`
`+i[a].replace(" at new "," at ");return e.displayName&&y.includes("<anonymous>")&&(y=y.replace("<anonymous>",e.displayName)),y}while(1<=a&&0<=l);break}}}finally{Cg=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ql(e):""}function bP(e){switch(e.tag){case 5:return Ql(e.type);case 16:return Ql("Lazy");case 13:return Ql("Suspense");case 19:return Ql("SuspenseList");case 0:case 2:case 15:return e=Pg(e.type,!1),e;case 11:return e=Pg(e.type.render,!1),e;case 1:return e=Pg(e.type,!0),e;default:return""}}function B0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case gu:return"Fragment";case pu:return"Portal";case D0:return"Profiler";case em:return"StrictMode";case L0:return"Suspense";case M0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case mE:return(e.displayName||"Context")+".Consumer";case yE:return(e._context.displayName||"Context")+".Provider";case tm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case rm:return t=e.displayName||null,t!==null?t:B0(e.type)||"Memo";case ws:t=e._payload,e=e._init;try{return B0(e(t))}catch{}}return null}function EP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B0(t);case 8:return t===em?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ns(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function AP(e){var t=wE(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sf(e){e._valueTracker||(e._valueTracker=AP(e))}function _E(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=wE(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Zf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function j0(e,t){var r=t.checked;return Pn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function X_(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ns(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function SE(e,t){t=t.checked,t!=null&&Zy(e,"checked",t,!1)}function H0(e,t){SE(e,t);var r=Ns(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$0(e,t.type,r):t.hasOwnProperty("defaultValue")&&$0(e,t.type,Ns(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Z_(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function $0(e,t,r){(t!=="number"||Zf(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Yl=Array.isArray;function Cu(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ns(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function W0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(mt(91));return Pn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function e1(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(mt(92));if(Yl(r)){if(1<r.length)throw Error(mt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ns(r)}}function bE(e,t){var r=Ns(t.value),n=Ns(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function t1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function EE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function K0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?EE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var af,AE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(af=af||document.createElement("div"),af.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=af.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function yc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var tc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RP=["Webkit","ms","Moz","O"];Object.keys(tc).forEach(function(e){RP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),tc[t]=tc[e]})});function RE(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||tc.hasOwnProperty(e)&&tc[e]?(""+t).trim():t+"px"}function xE(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=RE(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var xP=Pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function V0(e,t){if(t){if(xP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(mt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(mt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(mt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(mt(62))}}function z0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var q0=null;function nm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var G0=null,Pu=null,Tu=null;function r1(e){if(e=Mc(e)){if(typeof G0!="function")throw Error(mt(280));var t=e.stateNode;t&&(t=Bh(t),G0(e.stateNode,e.type,t))}}function CE(e){Pu?Tu?Tu.push(e):Tu=[e]:Pu=e}function PE(){if(Pu){var e=Pu,t=Tu;if(Tu=Pu=null,r1(e),t)for(e=0;e<t.length;e++)r1(t[e])}}function TE(e,t){return e(t)}function FE(){}var Tg=!1;function IE(e,t,r){if(Tg)return e(t,r);Tg=!0;try{return TE(e,t,r)}finally{Tg=!1,(Pu!==null||Tu!==null)&&(FE(),PE())}}function mc(e,t){var r=e.stateNode;if(r===null)return null;var n=Bh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(mt(231,t,typeof r));return r}var J0=!1;if(rs)try{var El={};Object.defineProperty(El,"passive",{get:function(){J0=!0}}),window.addEventListener("test",El,El),window.removeEventListener("test",El,El)}catch{J0=!1}function CP(e,t,r,n,i,s,a,l,y){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(m){this.onError(m)}}var rc=!1,eh=null,th=!1,Q0=null,PP={onError:function(e){rc=!0,eh=e}};function TP(e,t,r,n,i,s,a,l,y){rc=!1,eh=null,CP.apply(PP,arguments)}function FP(e,t,r,n,i,s,a,l,y){if(TP.apply(this,arguments),rc){if(rc){var d=eh;rc=!1,eh=null}else throw Error(mt(198));th||(th=!0,Q0=d)}}function Ea(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function kE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function n1(e){if(Ea(e)!==e)throw Error(mt(188))}function IP(e){var t=e.alternate;if(!t){if(t=Ea(e),t===null)throw Error(mt(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return n1(i),e;if(s===n)return n1(i),t;s=s.sibling}throw Error(mt(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a)throw Error(mt(189))}}if(r.alternate!==n)throw Error(mt(190))}if(r.tag!==3)throw Error(mt(188));return r.stateNode.current===r?e:t}function OE(e){return e=IP(e),e!==null?NE(e):null}function NE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=NE(e);if(t!==null)return t;e=e.sibling}return null}var UE=Vi.unstable_scheduleCallback,i1=Vi.unstable_cancelCallback,kP=Vi.unstable_shouldYield,OP=Vi.unstable_requestPaint,On=Vi.unstable_now,NP=Vi.unstable_getCurrentPriorityLevel,im=Vi.unstable_ImmediatePriority,DE=Vi.unstable_UserBlockingPriority,rh=Vi.unstable_NormalPriority,UP=Vi.unstable_LowPriority,LE=Vi.unstable_IdlePriority,Uh=null,No=null;function DP(e){if(No&&typeof No.onCommitFiberRoot=="function")try{No.onCommitFiberRoot(Uh,e,void 0,(e.current.flags&128)===128)}catch{}}var vo=Math.clz32?Math.clz32:BP,LP=Math.log,MP=Math.LN2;function BP(e){return e>>>=0,e===0?32:31-(LP(e)/MP|0)|0}var uf=64,lf=4194304;function Xl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function nh(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~i;l!==0?n=Xl(l):(s&=a,s!==0&&(n=Xl(s)))}else a=r&~i,a!==0?n=Xl(a):s!==0&&(n=Xl(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-vo(t),i=1<<r,n|=e[r],t&=~i;return n}function jP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HP(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-vo(s),l=1<<a,y=i[a];y===-1?(!(l&r)||l&n)&&(i[a]=jP(l,t)):y<=t&&(e.expiredLanes|=l),s&=~l}}function Y0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ME(){var e=uf;return uf<<=1,!(uf&4194240)&&(uf=64),e}function Fg(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Dc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vo(t),e[t]=r}function $P(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-vo(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}function om(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-vo(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var ln=0;function BE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var jE,sm,HE,$E,WE,X0=!1,cf=[],Rs=null,xs=null,Cs=null,vc=new Map,wc=new Map,Ss=[],WP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function o1(e,t){switch(e){case"focusin":case"focusout":Rs=null;break;case"dragenter":case"dragleave":xs=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":vc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wc.delete(t.pointerId)}}function Al(e,t,r,n,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Mc(t),t!==null&&sm(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function KP(e,t,r,n,i){switch(t){case"focusin":return Rs=Al(Rs,e,t,r,n,i),!0;case"dragenter":return xs=Al(xs,e,t,r,n,i),!0;case"mouseover":return Cs=Al(Cs,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return vc.set(s,Al(vc.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,wc.set(s,Al(wc.get(s)||null,e,t,r,n,i)),!0}return!1}function KE(e){var t=la(e.target);if(t!==null){var r=Ea(t);if(r!==null){if(t=r.tag,t===13){if(t=kE(r),t!==null){e.blockedOn=t,WE(e.priority,function(){HE(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Z0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);q0=n,r.target.dispatchEvent(n),q0=null}else return t=Mc(r),t!==null&&sm(t),e.blockedOn=r,!1;t.shift()}return!0}function s1(e,t,r){jf(e)&&r.delete(t)}function VP(){X0=!1,Rs!==null&&jf(Rs)&&(Rs=null),xs!==null&&jf(xs)&&(xs=null),Cs!==null&&jf(Cs)&&(Cs=null),vc.forEach(s1),wc.forEach(s1)}function Rl(e,t){e.blockedOn===t&&(e.blockedOn=null,X0||(X0=!0,Vi.unstable_scheduleCallback(Vi.unstable_NormalPriority,VP)))}function _c(e){function t(i){return Rl(i,e)}if(0<cf.length){Rl(cf[0],e);for(var r=1;r<cf.length;r++){var n=cf[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Rs!==null&&Rl(Rs,e),xs!==null&&Rl(xs,e),Cs!==null&&Rl(Cs,e),vc.forEach(t),wc.forEach(t),r=0;r<Ss.length;r++)n=Ss[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ss.length&&(r=Ss[0],r.blockedOn===null);)KE(r),r.blockedOn===null&&Ss.shift()}var Fu=ls.ReactCurrentBatchConfig,ih=!0;function zP(e,t,r,n){var i=ln,s=Fu.transition;Fu.transition=null;try{ln=1,am(e,t,r,n)}finally{ln=i,Fu.transition=s}}function qP(e,t,r,n){var i=ln,s=Fu.transition;Fu.transition=null;try{ln=4,am(e,t,r,n)}finally{ln=i,Fu.transition=s}}function am(e,t,r,n){if(ih){var i=Z0(e,t,r,n);if(i===null)jg(e,t,n,oh,r),o1(e,n);else if(KP(i,e,t,r,n))n.stopPropagation();else if(o1(e,n),t&4&&-1<WP.indexOf(e)){for(;i!==null;){var s=Mc(i);if(s!==null&&jE(s),s=Z0(e,t,r,n),s===null&&jg(e,t,n,oh,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else jg(e,t,n,null,r)}}var oh=null;function Z0(e,t,r,n){if(oh=null,e=nm(n),e=la(e),e!==null)if(t=Ea(e),t===null)e=null;else if(r=t.tag,r===13){if(e=kE(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return oh=e,null}function VE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NP()){case im:return 1;case DE:return 4;case rh:case UP:return 16;case LE:return 536870912;default:return 16}default:return 16}}var Es=null,um=null,Hf=null;function zE(){if(Hf)return Hf;var e,t=um,r=t.length,n,i="value"in Es?Es.value:Es.textContent,s=i.length;for(e=0;e<r&&t[e]===i[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===i[s-n];n++);return Hf=i.slice(e,1<n?1-n:void 0)}function $f(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function df(){return!0}function a1(){return!1}function qi(e){function t(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?df:a1,this.isPropagationStopped=a1,this}return Pn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=df)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=df)},persist:function(){},isPersistent:df}),t}var Ku={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lm=qi(Ku),Lc=Pn({},Ku,{view:0,detail:0}),GP=qi(Lc),Ig,kg,xl,Dh=Pn({},Lc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xl&&(xl&&e.type==="mousemove"?(Ig=e.screenX-xl.screenX,kg=e.screenY-xl.screenY):kg=Ig=0,xl=e),Ig)},movementY:function(e){return"movementY"in e?e.movementY:kg}}),u1=qi(Dh),JP=Pn({},Dh,{dataTransfer:0}),QP=qi(JP),YP=Pn({},Lc,{relatedTarget:0}),Og=qi(YP),XP=Pn({},Ku,{animationName:0,elapsedTime:0,pseudoElement:0}),ZP=qi(XP),eT=Pn({},Ku,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tT=qi(eT),rT=Pn({},Ku,{data:0}),l1=qi(rT),nT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=oT[e])?!!t[e]:!1}function cm(){return sT}var aT=Pn({},Lc,{key:function(e){if(e.key){var t=nT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=$f(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?iT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cm,charCode:function(e){return e.type==="keypress"?$f(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$f(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),uT=qi(aT),lT=Pn({},Dh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c1=qi(lT),cT=Pn({},Lc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cm}),dT=qi(cT),fT=Pn({},Ku,{propertyName:0,elapsedTime:0,pseudoElement:0}),hT=qi(fT),pT=Pn({},Dh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gT=qi(pT),yT=[9,13,27,32],dm=rs&&"CompositionEvent"in window,nc=null;rs&&"documentMode"in document&&(nc=document.documentMode);var mT=rs&&"TextEvent"in window&&!nc,qE=rs&&(!dm||nc&&8<nc&&11>=nc),d1=String.fromCharCode(32),f1=!1;function GE(e,t){switch(e){case"keyup":return yT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yu=!1;function vT(e,t){switch(e){case"compositionend":return JE(t);case"keypress":return t.which!==32?null:(f1=!0,d1);case"textInput":return e=t.data,e===d1&&f1?null:e;default:return null}}function wT(e,t){if(yu)return e==="compositionend"||!dm&&GE(e,t)?(e=zE(),Hf=um=Es=null,yu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qE&&t.locale!=="ko"?null:t.data;default:return null}}var _T={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function h1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_T[e.type]:t==="textarea"}function QE(e,t,r,n){CE(n),t=sh(t,"onChange"),0<t.length&&(r=new lm("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ic=null,Sc=null;function ST(e){aA(e,0)}function Lh(e){var t=wu(e);if(_E(t))return e}function bT(e,t){if(e==="change")return t}var YE=!1;if(rs){var Ng;if(rs){var Ug="oninput"in document;if(!Ug){var p1=document.createElement("div");p1.setAttribute("oninput","return;"),Ug=typeof p1.oninput=="function"}Ng=Ug}else Ng=!1;YE=Ng&&(!document.documentMode||9<document.documentMode)}function g1(){ic&&(ic.detachEvent("onpropertychange",XE),Sc=ic=null)}function XE(e){if(e.propertyName==="value"&&Lh(Sc)){var t=[];QE(t,Sc,e,nm(e)),IE(ST,t)}}function ET(e,t,r){e==="focusin"?(g1(),ic=t,Sc=r,ic.attachEvent("onpropertychange",XE)):e==="focusout"&&g1()}function AT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Lh(Sc)}function RT(e,t){if(e==="click")return Lh(t)}function xT(e,t){if(e==="input"||e==="change")return Lh(t)}function CT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var So=typeof Object.is=="function"?Object.is:CT;function bc(e,t){if(So(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!U0.call(t,i)||!So(e[i],t[i]))return!1}return!0}function y1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function m1(e,t){var r=y1(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=y1(r)}}function ZE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ZE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function eA(){for(var e=window,t=Zf();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Zf(e.document)}return t}function fm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function PT(e){var t=eA(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ZE(r.ownerDocument.documentElement,r)){if(n!==null&&fm(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=m1(r,s);var a=m1(r,n);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var TT=rs&&"documentMode"in document&&11>=document.documentMode,mu=null,ey=null,oc=null,ty=!1;function v1(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ty||mu==null||mu!==Zf(n)||(n=mu,"selectionStart"in n&&fm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),oc&&bc(oc,n)||(oc=n,n=sh(ey,"onSelect"),0<n.length&&(t=new lm("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=mu)))}function ff(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var vu={animationend:ff("Animation","AnimationEnd"),animationiteration:ff("Animation","AnimationIteration"),animationstart:ff("Animation","AnimationStart"),transitionend:ff("Transition","TransitionEnd")},Dg={},tA={};rs&&(tA=document.createElement("div").style,"AnimationEvent"in window||(delete vu.animationend.animation,delete vu.animationiteration.animation,delete vu.animationstart.animation),"TransitionEvent"in window||delete vu.transitionend.transition);function Mh(e){if(Dg[e])return Dg[e];if(!vu[e])return e;var t=vu[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in tA)return Dg[e]=t[r];return e}var rA=Mh("animationend"),nA=Mh("animationiteration"),iA=Mh("animationstart"),oA=Mh("transitionend"),sA=new Map,w1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ms(e,t){sA.set(e,t),ba(t,[e])}for(var Lg=0;Lg<w1.length;Lg++){var Mg=w1[Lg],FT=Mg.toLowerCase(),IT=Mg[0].toUpperCase()+Mg.slice(1);Ms(FT,"on"+IT)}Ms(rA,"onAnimationEnd");Ms(nA,"onAnimationIteration");Ms(iA,"onAnimationStart");Ms("dblclick","onDoubleClick");Ms("focusin","onFocus");Ms("focusout","onBlur");Ms(oA,"onTransitionEnd");Nu("onMouseEnter",["mouseout","mouseover"]);Nu("onMouseLeave",["mouseout","mouseover"]);Nu("onPointerEnter",["pointerout","pointerover"]);Nu("onPointerLeave",["pointerout","pointerover"]);ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ba("onBeforeInput",["compositionend","keypress","textInput","paste"]);ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zl));function _1(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,FP(n,t,void 0,e),e.currentTarget=null}function aA(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],y=l.instance,d=l.currentTarget;if(l=l.listener,y!==s&&i.isPropagationStopped())break e;_1(i,l,d),s=y}else for(a=0;a<n.length;a++){if(l=n[a],y=l.instance,d=l.currentTarget,l=l.listener,y!==s&&i.isPropagationStopped())break e;_1(i,l,d),s=y}}}if(th)throw e=Q0,th=!1,Q0=null,e}function yn(e,t){var r=t[sy];r===void 0&&(r=t[sy]=new Set);var n=e+"__bubble";r.has(n)||(uA(t,e,2,!1),r.add(n))}function Bg(e,t,r){var n=0;t&&(n|=4),uA(r,e,n,t)}var hf="_reactListening"+Math.random().toString(36).slice(2);function Ec(e){if(!e[hf]){e[hf]=!0,gE.forEach(function(r){r!=="selectionchange"&&(kT.has(r)||Bg(r,!1,e),Bg(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hf]||(t[hf]=!0,Bg("selectionchange",!1,t))}}function uA(e,t,r,n){switch(VE(t)){case 1:var i=zP;break;case 4:i=qP;break;default:i=am}r=i.bind(null,t,r,e),i=void 0,!J0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function jg(e,t,r,n,i){var s=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var y=a.tag;if((y===3||y===4)&&(y=a.stateNode.containerInfo,y===i||y.nodeType===8&&y.parentNode===i))return;a=a.return}for(;l!==null;){if(a=la(l),a===null)return;if(y=a.tag,y===5||y===6){n=s=a;continue e}l=l.parentNode}}n=n.return}IE(function(){var d=s,m=nm(r),g=[];e:{var E=sA.get(e);if(E!==void 0){var b=lm,P=e;switch(e){case"keypress":if($f(r)===0)break e;case"keydown":case"keyup":b=uT;break;case"focusin":P="focus",b=Og;break;case"focusout":P="blur",b=Og;break;case"beforeblur":case"afterblur":b=Og;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=u1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=QP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=dT;break;case rA:case nA:case iA:b=ZP;break;case oA:b=hT;break;case"scroll":b=GP;break;case"wheel":b=gT;break;case"copy":case"cut":case"paste":b=tT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=c1}var I=(t&4)!==0,D=!I&&e==="scroll",A=I?E!==null?E+"Capture":null:E;I=[];for(var R=d,N;R!==null;){N=R;var L=N.stateNode;if(N.tag===5&&L!==null&&(N=L,A!==null&&(L=mc(R,A),L!=null&&I.push(Ac(R,L,N)))),D)break;R=R.return}0<I.length&&(E=new b(E,P,null,r,m),g.push({event:E,listeners:I}))}}if(!(t&7)){e:{if(E=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",E&&r!==q0&&(P=r.relatedTarget||r.fromElement)&&(la(P)||P[ns]))break e;if((b||E)&&(E=m.window===m?m:(E=m.ownerDocument)?E.defaultView||E.parentWindow:window,b?(P=r.relatedTarget||r.toElement,b=d,P=P?la(P):null,P!==null&&(D=Ea(P),P!==D||P.tag!==5&&P.tag!==6)&&(P=null)):(b=null,P=d),b!==P)){if(I=u1,L="onMouseLeave",A="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(I=c1,L="onPointerLeave",A="onPointerEnter",R="pointer"),D=b==null?E:wu(b),N=P==null?E:wu(P),E=new I(L,R+"leave",b,r,m),E.target=D,E.relatedTarget=N,L=null,la(m)===d&&(I=new I(A,R+"enter",P,r,m),I.target=N,I.relatedTarget=D,L=I),D=L,b&&P)t:{for(I=b,A=P,R=0,N=I;N;N=uu(N))R++;for(N=0,L=A;L;L=uu(L))N++;for(;0<R-N;)I=uu(I),R--;for(;0<N-R;)A=uu(A),N--;for(;R--;){if(I===A||A!==null&&I===A.alternate)break t;I=uu(I),A=uu(A)}I=null}else I=null;b!==null&&S1(g,E,b,I,!1),P!==null&&D!==null&&S1(g,D,P,I,!0)}}e:{if(E=d?wu(d):window,b=E.nodeName&&E.nodeName.toLowerCase(),b==="select"||b==="input"&&E.type==="file")var W=bT;else if(h1(E))if(YE)W=xT;else{W=AT;var q=ET}else(b=E.nodeName)&&b.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(W=RT);if(W&&(W=W(e,d))){QE(g,W,r,m);break e}q&&q(e,E,d),e==="focusout"&&(q=E._wrapperState)&&q.controlled&&E.type==="number"&&$0(E,"number",E.value)}switch(q=d?wu(d):window,e){case"focusin":(h1(q)||q.contentEditable==="true")&&(mu=q,ey=d,oc=null);break;case"focusout":oc=ey=mu=null;break;case"mousedown":ty=!0;break;case"contextmenu":case"mouseup":case"dragend":ty=!1,v1(g,r,m);break;case"selectionchange":if(TT)break;case"keydown":case"keyup":v1(g,r,m)}var J;if(dm)e:{switch(e){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else yu?GE(e,r)&&(ve="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ve="onCompositionStart");ve&&(qE&&r.locale!=="ko"&&(yu||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&yu&&(J=zE()):(Es=m,um="value"in Es?Es.value:Es.textContent,yu=!0)),q=sh(d,ve),0<q.length&&(ve=new l1(ve,e,null,r,m),g.push({event:ve,listeners:q}),J?ve.data=J:(J=JE(r),J!==null&&(ve.data=J)))),(J=mT?vT(e,r):wT(e,r))&&(d=sh(d,"onBeforeInput"),0<d.length&&(m=new l1("onBeforeInput","beforeinput",null,r,m),g.push({event:m,listeners:d}),m.data=J))}aA(g,t)})}function Ac(e,t,r){return{instance:e,listener:t,currentTarget:r}}function sh(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=mc(e,r),s!=null&&n.unshift(Ac(e,s,i)),s=mc(e,t),s!=null&&n.push(Ac(e,s,i))),e=e.return}return n}function uu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function S1(e,t,r,n,i){for(var s=t._reactName,a=[];r!==null&&r!==n;){var l=r,y=l.alternate,d=l.stateNode;if(y!==null&&y===n)break;l.tag===5&&d!==null&&(l=d,i?(y=mc(r,s),y!=null&&a.unshift(Ac(r,y,l))):i||(y=mc(r,s),y!=null&&a.push(Ac(r,y,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var OT=/\r\n?/g,NT=/\u0000|\uFFFD/g;function b1(e){return(typeof e=="string"?e:""+e).replace(OT,`
`).replace(NT,"")}function pf(e,t,r){if(t=b1(t),b1(e)!==t&&r)throw Error(mt(425))}function ah(){}var ry=null,ny=null;function iy(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var oy=typeof setTimeout=="function"?setTimeout:void 0,UT=typeof clearTimeout=="function"?clearTimeout:void 0,E1=typeof Promise=="function"?Promise:void 0,DT=typeof queueMicrotask=="function"?queueMicrotask:typeof E1<"u"?function(e){return E1.resolve(null).then(e).catch(LT)}:oy;function LT(e){setTimeout(function(){throw e})}function Hg(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),_c(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);_c(t)}function Ps(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function A1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Vu=Math.random().toString(36).slice(2),ko="__reactFiber$"+Vu,Rc="__reactProps$"+Vu,ns="__reactContainer$"+Vu,sy="__reactEvents$"+Vu,MT="__reactListeners$"+Vu,BT="__reactHandles$"+Vu;function la(e){var t=e[ko];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ns]||r[ko]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=A1(e);e!==null;){if(r=e[ko])return r;e=A1(e)}return t}e=r,r=e.parentNode}return null}function Mc(e){return e=e[ko]||e[ns],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(mt(33))}function Bh(e){return e[Rc]||null}var ay=[],_u=-1;function Bs(e){return{current:e}}function mn(e){0>_u||(e.current=ay[_u],ay[_u]=null,_u--)}function pn(e,t){_u++,ay[_u]=e.current,e.current=t}var Us={},pi=Bs(Us),Ti=Bs(!1),ya=Us;function Uu(e,t){var r=e.type.contextTypes;if(!r)return Us;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Fi(e){return e=e.childContextTypes,e!=null}function uh(){mn(Ti),mn(pi)}function R1(e,t,r){if(pi.current!==Us)throw Error(mt(168));pn(pi,t),pn(Ti,r)}function lA(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(mt(108,EP(e)||"Unknown",i));return Pn({},r,n)}function lh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Us,ya=pi.current,pn(pi,e),pn(Ti,Ti.current),!0}function x1(e,t,r){var n=e.stateNode;if(!n)throw Error(mt(169));r?(e=lA(e,t,ya),n.__reactInternalMemoizedMergedChildContext=e,mn(Ti),mn(pi),pn(pi,e)):mn(Ti),pn(Ti,r)}var Go=null,jh=!1,$g=!1;function cA(e){Go===null?Go=[e]:Go.push(e)}function jT(e){jh=!0,cA(e)}function js(){if(!$g&&Go!==null){$g=!0;var e=0,t=ln;try{var r=Go;for(ln=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Go=null,jh=!1}catch(i){throw Go!==null&&(Go=Go.slice(e+1)),UE(im,js),i}finally{ln=t,$g=!1}}return null}var Su=[],bu=0,ch=null,dh=0,Xi=[],Zi=0,ma=null,Qo=1,Yo="";function oa(e,t){Su[bu++]=dh,Su[bu++]=ch,ch=e,dh=t}function dA(e,t,r){Xi[Zi++]=Qo,Xi[Zi++]=Yo,Xi[Zi++]=ma,ma=e;var n=Qo;e=Yo;var i=32-vo(n)-1;n&=~(1<<i),r+=1;var s=32-vo(t)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Qo=1<<32-vo(t)+i|r<<i|n,Yo=s+e}else Qo=1<<s|r<<i|n,Yo=e}function hm(e){e.return!==null&&(oa(e,1),dA(e,1,0))}function pm(e){for(;e===ch;)ch=Su[--bu],Su[bu]=null,dh=Su[--bu],Su[bu]=null;for(;e===ma;)ma=Xi[--Zi],Xi[Zi]=null,Yo=Xi[--Zi],Xi[Zi]=null,Qo=Xi[--Zi],Xi[Zi]=null}var Wi=null,$i=null,Sn=!1,go=null;function fA(e,t){var r=eo(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function C1(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Wi=e,$i=Ps(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Wi=e,$i=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ma!==null?{id:Qo,overflow:Yo}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=eo(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Wi=e,$i=null,!0):!1;default:return!1}}function uy(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ly(e){if(Sn){var t=$i;if(t){var r=t;if(!C1(e,t)){if(uy(e))throw Error(mt(418));t=Ps(r.nextSibling);var n=Wi;t&&C1(e,t)?fA(n,r):(e.flags=e.flags&-4097|2,Sn=!1,Wi=e)}}else{if(uy(e))throw Error(mt(418));e.flags=e.flags&-4097|2,Sn=!1,Wi=e}}}function P1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wi=e}function gf(e){if(e!==Wi)return!1;if(!Sn)return P1(e),Sn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!iy(e.type,e.memoizedProps)),t&&(t=$i)){if(uy(e))throw hA(),Error(mt(418));for(;t;)fA(e,t),t=Ps(t.nextSibling)}if(P1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(mt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){$i=Ps(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}$i=null}}else $i=Wi?Ps(e.stateNode.nextSibling):null;return!0}function hA(){for(var e=$i;e;)e=Ps(e.nextSibling)}function Du(){$i=Wi=null,Sn=!1}function gm(e){go===null?go=[e]:go.push(e)}var HT=ls.ReactCurrentBatchConfig;function ho(e,t){if(e&&e.defaultProps){t=Pn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var fh=Bs(null),hh=null,Eu=null,ym=null;function mm(){ym=Eu=hh=null}function vm(e){var t=fh.current;mn(fh),e._currentValue=t}function cy(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Iu(e,t){hh=e,ym=Eu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Pi=!0),e.firstContext=null)}function ro(e){var t=e._currentValue;if(ym!==e)if(e={context:e,memoizedValue:t,next:null},Eu===null){if(hh===null)throw Error(mt(308));Eu=e,hh.dependencies={lanes:0,firstContext:e}}else Eu=Eu.next=e;return t}var ca=null;function wm(e){ca===null?ca=[e]:ca.push(e)}function pA(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,wm(t)):(r.next=i.next,i.next=r),t.interleaved=r,is(e,n)}function is(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var _s=!1;function _m(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gA(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ts(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Jr&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,is(e,r)}return i=n.interleaved,i===null?(t.next=t,wm(n)):(t.next=i.next,i.next=t),n.interleaved=t,is(e,r)}function Wf(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,om(e,r)}}function T1(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=t:s=s.next=t}else i=s=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ph(e,t,r,n){var i=e.updateQueue;_s=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var y=l,d=y.next;y.next=null,a===null?s=d:a.next=d,a=y;var m=e.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==a&&(l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=y))}if(s!==null){var g=i.baseState;a=0,m=d=y=null,l=s;do{var E=l.lane,b=l.eventTime;if((n&E)===E){m!==null&&(m=m.next={eventTime:b,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=e,I=l;switch(E=t,b=r,I.tag){case 1:if(P=I.payload,typeof P=="function"){g=P.call(b,g,E);break e}g=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=I.payload,E=typeof P=="function"?P.call(b,g,E):P,E==null)break e;g=Pn({},g,E);break e;case 2:_s=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,E=i.effects,E===null?i.effects=[l]:E.push(l))}else b={eventTime:b,lane:E,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(d=m=b,y=g):m=m.next=b,a|=E;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;E=l,l=E.next,E.next=null,i.lastBaseUpdate=E,i.shared.pending=null}}while(1);if(m===null&&(y=g),i.baseState=y,i.firstBaseUpdate=d,i.lastBaseUpdate=m,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);wa|=a,e.lanes=a,e.memoizedState=g}}function F1(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(mt(191,i));i.call(n)}}}var yA=new pE.Component().refs;function dy(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Pn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Hh={isMounted:function(e){return(e=e._reactInternals)?Ea(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=wi(),i=Is(e),s=Zo(n,i);s.payload=t,r!=null&&(s.callback=r),t=Ts(e,s,i),t!==null&&(wo(t,e,i,n),Wf(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=wi(),i=Is(e),s=Zo(n,i);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=Ts(e,s,i),t!==null&&(wo(t,e,i,n),Wf(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=wi(),n=Is(e),i=Zo(r,n);i.tag=2,t!=null&&(i.callback=t),t=Ts(e,i,n),t!==null&&(wo(t,e,n,r),Wf(t,e,n))}};function I1(e,t,r,n,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,a):t.prototype&&t.prototype.isPureReactComponent?!bc(r,n)||!bc(i,s):!0}function mA(e,t,r){var n=!1,i=Us,s=t.contextType;return typeof s=="object"&&s!==null?s=ro(s):(i=Fi(t)?ya:pi.current,n=t.contextTypes,s=(n=n!=null)?Uu(e,i):Us),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Hh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function k1(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Hh.enqueueReplaceState(t,t.state,null)}function fy(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=yA,_m(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=ro(s):(s=Fi(t)?ya:pi.current,i.context=Uu(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(dy(e,t,s,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Hh.enqueueReplaceState(i,i.state,null),ph(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Cl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(mt(309));var n=r.stateNode}if(!n)throw Error(mt(147,e));var i=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var l=i.refs;l===yA&&(l=i.refs={}),a===null?delete l[s]:l[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(mt(284));if(!r._owner)throw Error(mt(290,e))}return e}function yf(e,t){throw e=Object.prototype.toString.call(t),Error(mt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function O1(e){var t=e._init;return t(e._payload)}function vA(e){function t(A,R){if(e){var N=A.deletions;N===null?(A.deletions=[R],A.flags|=16):N.push(R)}}function r(A,R){if(!e)return null;for(;R!==null;)t(A,R),R=R.sibling;return null}function n(A,R){for(A=new Map;R!==null;)R.key!==null?A.set(R.key,R):A.set(R.index,R),R=R.sibling;return A}function i(A,R){return A=ks(A,R),A.index=0,A.sibling=null,A}function s(A,R,N){return A.index=N,e?(N=A.alternate,N!==null?(N=N.index,N<R?(A.flags|=2,R):N):(A.flags|=2,R)):(A.flags|=1048576,R)}function a(A){return e&&A.alternate===null&&(A.flags|=2),A}function l(A,R,N,L){return R===null||R.tag!==6?(R=Jg(N,A.mode,L),R.return=A,R):(R=i(R,N),R.return=A,R)}function y(A,R,N,L){var W=N.type;return W===gu?m(A,R,N.props.children,L,N.key):R!==null&&(R.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===ws&&O1(W)===R.type)?(L=i(R,N.props),L.ref=Cl(A,R,N),L.return=A,L):(L=Jf(N.type,N.key,N.props,null,A.mode,L),L.ref=Cl(A,R,N),L.return=A,L)}function d(A,R,N,L){return R===null||R.tag!==4||R.stateNode.containerInfo!==N.containerInfo||R.stateNode.implementation!==N.implementation?(R=Qg(N,A.mode,L),R.return=A,R):(R=i(R,N.children||[]),R.return=A,R)}function m(A,R,N,L,W){return R===null||R.tag!==7?(R=pa(N,A.mode,L,W),R.return=A,R):(R=i(R,N),R.return=A,R)}function g(A,R,N){if(typeof R=="string"&&R!==""||typeof R=="number")return R=Jg(""+R,A.mode,N),R.return=A,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case of:return N=Jf(R.type,R.key,R.props,null,A.mode,N),N.ref=Cl(A,null,R),N.return=A,N;case pu:return R=Qg(R,A.mode,N),R.return=A,R;case ws:var L=R._init;return g(A,L(R._payload),N)}if(Yl(R)||bl(R))return R=pa(R,A.mode,N,null),R.return=A,R;yf(A,R)}return null}function E(A,R,N,L){var W=R!==null?R.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return W!==null?null:l(A,R,""+N,L);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case of:return N.key===W?y(A,R,N,L):null;case pu:return N.key===W?d(A,R,N,L):null;case ws:return W=N._init,E(A,R,W(N._payload),L)}if(Yl(N)||bl(N))return W!==null?null:m(A,R,N,L,null);yf(A,N)}return null}function b(A,R,N,L,W){if(typeof L=="string"&&L!==""||typeof L=="number")return A=A.get(N)||null,l(R,A,""+L,W);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case of:return A=A.get(L.key===null?N:L.key)||null,y(R,A,L,W);case pu:return A=A.get(L.key===null?N:L.key)||null,d(R,A,L,W);case ws:var q=L._init;return b(A,R,N,q(L._payload),W)}if(Yl(L)||bl(L))return A=A.get(N)||null,m(R,A,L,W,null);yf(R,L)}return null}function P(A,R,N,L){for(var W=null,q=null,J=R,ve=R=0,Fe=null;J!==null&&ve<N.length;ve++){J.index>ve?(Fe=J,J=null):Fe=J.sibling;var z=E(A,J,N[ve],L);if(z===null){J===null&&(J=Fe);break}e&&J&&z.alternate===null&&t(A,J),R=s(z,R,ve),q===null?W=z:q.sibling=z,q=z,J=Fe}if(ve===N.length)return r(A,J),Sn&&oa(A,ve),W;if(J===null){for(;ve<N.length;ve++)J=g(A,N[ve],L),J!==null&&(R=s(J,R,ve),q===null?W=J:q.sibling=J,q=J);return Sn&&oa(A,ve),W}for(J=n(A,J);ve<N.length;ve++)Fe=b(J,A,ve,N[ve],L),Fe!==null&&(e&&Fe.alternate!==null&&J.delete(Fe.key===null?ve:Fe.key),R=s(Fe,R,ve),q===null?W=Fe:q.sibling=Fe,q=Fe);return e&&J.forEach(function(De){return t(A,De)}),Sn&&oa(A,ve),W}function I(A,R,N,L){var W=bl(N);if(typeof W!="function")throw Error(mt(150));if(N=W.call(N),N==null)throw Error(mt(151));for(var q=W=null,J=R,ve=R=0,Fe=null,z=N.next();J!==null&&!z.done;ve++,z=N.next()){J.index>ve?(Fe=J,J=null):Fe=J.sibling;var De=E(A,J,z.value,L);if(De===null){J===null&&(J=Fe);break}e&&J&&De.alternate===null&&t(A,J),R=s(De,R,ve),q===null?W=De:q.sibling=De,q=De,J=Fe}if(z.done)return r(A,J),Sn&&oa(A,ve),W;if(J===null){for(;!z.done;ve++,z=N.next())z=g(A,z.value,L),z!==null&&(R=s(z,R,ve),q===null?W=z:q.sibling=z,q=z);return Sn&&oa(A,ve),W}for(J=n(A,J);!z.done;ve++,z=N.next())z=b(J,A,ve,z.value,L),z!==null&&(e&&z.alternate!==null&&J.delete(z.key===null?ve:z.key),R=s(z,R,ve),q===null?W=z:q.sibling=z,q=z);return e&&J.forEach(function(xt){return t(A,xt)}),Sn&&oa(A,ve),W}function D(A,R,N,L){if(typeof N=="object"&&N!==null&&N.type===gu&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case of:e:{for(var W=N.key,q=R;q!==null;){if(q.key===W){if(W=N.type,W===gu){if(q.tag===7){r(A,q.sibling),R=i(q,N.props.children),R.return=A,A=R;break e}}else if(q.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===ws&&O1(W)===q.type){r(A,q.sibling),R=i(q,N.props),R.ref=Cl(A,q,N),R.return=A,A=R;break e}r(A,q);break}else t(A,q);q=q.sibling}N.type===gu?(R=pa(N.props.children,A.mode,L,N.key),R.return=A,A=R):(L=Jf(N.type,N.key,N.props,null,A.mode,L),L.ref=Cl(A,R,N),L.return=A,A=L)}return a(A);case pu:e:{for(q=N.key;R!==null;){if(R.key===q)if(R.tag===4&&R.stateNode.containerInfo===N.containerInfo&&R.stateNode.implementation===N.implementation){r(A,R.sibling),R=i(R,N.children||[]),R.return=A,A=R;break e}else{r(A,R);break}else t(A,R);R=R.sibling}R=Qg(N,A.mode,L),R.return=A,A=R}return a(A);case ws:return q=N._init,D(A,R,q(N._payload),L)}if(Yl(N))return P(A,R,N,L);if(bl(N))return I(A,R,N,L);yf(A,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,R!==null&&R.tag===6?(r(A,R.sibling),R=i(R,N),R.return=A,A=R):(r(A,R),R=Jg(N,A.mode,L),R.return=A,A=R),a(A)):r(A,R)}return D}var Lu=vA(!0),wA=vA(!1),Bc={},Uo=Bs(Bc),xc=Bs(Bc),Cc=Bs(Bc);function da(e){if(e===Bc)throw Error(mt(174));return e}function Sm(e,t){switch(pn(Cc,t),pn(xc,e),pn(Uo,Bc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:K0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=K0(t,e)}mn(Uo),pn(Uo,t)}function Mu(){mn(Uo),mn(xc),mn(Cc)}function _A(e){da(Cc.current);var t=da(Uo.current),r=K0(t,e.type);t!==r&&(pn(xc,e),pn(Uo,r))}function bm(e){xc.current===e&&(mn(Uo),mn(xc))}var xn=Bs(0);function gh(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wg=[];function Em(){for(var e=0;e<Wg.length;e++)Wg[e]._workInProgressVersionPrimary=null;Wg.length=0}var Kf=ls.ReactCurrentDispatcher,Kg=ls.ReactCurrentBatchConfig,va=0,Cn=null,Vn=null,Yn=null,yh=!1,sc=!1,Pc=0,$T=0;function ci(){throw Error(mt(321))}function Am(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!So(e[r],t[r]))return!1;return!0}function Rm(e,t,r,n,i,s){if(va=s,Cn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Kf.current=e===null||e.memoizedState===null?zT:qT,e=r(n,i),sc){s=0;do{if(sc=!1,Pc=0,25<=s)throw Error(mt(301));s+=1,Yn=Vn=null,t.updateQueue=null,Kf.current=GT,e=r(n,i)}while(sc)}if(Kf.current=mh,t=Vn!==null&&Vn.next!==null,va=0,Yn=Vn=Cn=null,yh=!1,t)throw Error(mt(300));return e}function xm(){var e=Pc!==0;return Pc=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yn===null?Cn.memoizedState=Yn=e:Yn=Yn.next=e,Yn}function no(){if(Vn===null){var e=Cn.alternate;e=e!==null?e.memoizedState:null}else e=Vn.next;var t=Yn===null?Cn.memoizedState:Yn.next;if(t!==null)Yn=t,Vn=e;else{if(e===null)throw Error(mt(310));Vn=e,e={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},Yn===null?Cn.memoizedState=Yn=e:Yn=Yn.next=e}return Yn}function Tc(e,t){return typeof t=="function"?t(e):t}function Vg(e){var t=no(),r=t.queue;if(r===null)throw Error(mt(311));r.lastRenderedReducer=e;var n=Vn,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var l=a=null,y=null,d=s;do{var m=d.lane;if((va&m)===m)y!==null&&(y=y.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var g={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};y===null?(l=y=g,a=n):y=y.next=g,Cn.lanes|=m,wa|=m}d=d.next}while(d!==null&&d!==s);y===null?a=n:y.next=l,So(n,t.memoizedState)||(Pi=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=y,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do s=i.lane,Cn.lanes|=s,wa|=s,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function zg(e){var t=no(),r=t.queue;if(r===null)throw Error(mt(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);So(s,t.memoizedState)||(Pi=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function SA(){}function bA(e,t){var r=Cn,n=no(),i=t(),s=!So(n.memoizedState,i);if(s&&(n.memoizedState=i,Pi=!0),n=n.queue,Cm(RA.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||Yn!==null&&Yn.memoizedState.tag&1){if(r.flags|=2048,Fc(9,AA.bind(null,r,n,i,t),void 0,null),Xn===null)throw Error(mt(349));va&30||EA(r,t,i)}return i}function EA(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Cn.updateQueue,t===null?(t={lastEffect:null,stores:null},Cn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function AA(e,t,r,n){t.value=r,t.getSnapshot=n,xA(t)&&CA(e)}function RA(e,t,r){return r(function(){xA(t)&&CA(e)})}function xA(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!So(e,r)}catch{return!0}}function CA(e){var t=is(e,1);t!==null&&wo(t,e,1,-1)}function N1(e){var t=To();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tc,lastRenderedState:e},t.queue=e,e=e.dispatch=VT.bind(null,Cn,e),[t.memoizedState,e]}function Fc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Cn.updateQueue,t===null?(t={lastEffect:null,stores:null},Cn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function PA(){return no().memoizedState}function Vf(e,t,r,n){var i=To();Cn.flags|=e,i.memoizedState=Fc(1|t,r,void 0,n===void 0?null:n)}function $h(e,t,r,n){var i=no();n=n===void 0?null:n;var s=void 0;if(Vn!==null){var a=Vn.memoizedState;if(s=a.destroy,n!==null&&Am(n,a.deps)){i.memoizedState=Fc(t,r,s,n);return}}Cn.flags|=e,i.memoizedState=Fc(1|t,r,s,n)}function U1(e,t){return Vf(8390656,8,e,t)}function Cm(e,t){return $h(2048,8,e,t)}function TA(e,t){return $h(4,2,e,t)}function FA(e,t){return $h(4,4,e,t)}function IA(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kA(e,t,r){return r=r!=null?r.concat([e]):null,$h(4,4,IA.bind(null,t,e),r)}function Pm(){}function OA(e,t){var r=no();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Am(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function NA(e,t){var r=no();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Am(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function UA(e,t,r){return va&21?(So(r,t)||(r=ME(),Cn.lanes|=r,wa|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Pi=!0),e.memoizedState=r)}function WT(e,t){var r=ln;ln=r!==0&&4>r?r:4,e(!0);var n=Kg.transition;Kg.transition={};try{e(!1),t()}finally{ln=r,Kg.transition=n}}function DA(){return no().memoizedState}function KT(e,t,r){var n=Is(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},LA(e))MA(t,r);else if(r=pA(e,t,r,n),r!==null){var i=wi();wo(r,e,n,i),BA(r,t,n)}}function VT(e,t,r){var n=Is(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(LA(e))MA(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,r);if(i.hasEagerState=!0,i.eagerState=l,So(l,a)){var y=t.interleaved;y===null?(i.next=i,wm(t)):(i.next=y.next,y.next=i),t.interleaved=i;return}}catch{}finally{}r=pA(e,t,i,n),r!==null&&(i=wi(),wo(r,e,n,i),BA(r,t,n))}}function LA(e){var t=e.alternate;return e===Cn||t!==null&&t===Cn}function MA(e,t){sc=yh=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function BA(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,om(e,r)}}var mh={readContext:ro,useCallback:ci,useContext:ci,useEffect:ci,useImperativeHandle:ci,useInsertionEffect:ci,useLayoutEffect:ci,useMemo:ci,useReducer:ci,useRef:ci,useState:ci,useDebugValue:ci,useDeferredValue:ci,useTransition:ci,useMutableSource:ci,useSyncExternalStore:ci,useId:ci,unstable_isNewReconciler:!1},zT={readContext:ro,useCallback:function(e,t){return To().memoizedState=[e,t===void 0?null:t],e},useContext:ro,useEffect:U1,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Vf(4194308,4,IA.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Vf(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vf(4,2,e,t)},useMemo:function(e,t){var r=To();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=To();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=KT.bind(null,Cn,e),[n.memoizedState,e]},useRef:function(e){var t=To();return e={current:e},t.memoizedState=e},useState:N1,useDebugValue:Pm,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=N1(!1),t=e[0];return e=WT.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Cn,i=To();if(Sn){if(r===void 0)throw Error(mt(407));r=r()}else{if(r=t(),Xn===null)throw Error(mt(349));va&30||EA(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,U1(RA.bind(null,n,s,e),[e]),n.flags|=2048,Fc(9,AA.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=To(),t=Xn.identifierPrefix;if(Sn){var r=Yo,n=Qo;r=(n&~(1<<32-vo(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Pc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=$T++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},qT={readContext:ro,useCallback:OA,useContext:ro,useEffect:Cm,useImperativeHandle:kA,useInsertionEffect:TA,useLayoutEffect:FA,useMemo:NA,useReducer:Vg,useRef:PA,useState:function(){return Vg(Tc)},useDebugValue:Pm,useDeferredValue:function(e){var t=no();return UA(t,Vn.memoizedState,e)},useTransition:function(){var e=Vg(Tc)[0],t=no().memoizedState;return[e,t]},useMutableSource:SA,useSyncExternalStore:bA,useId:DA,unstable_isNewReconciler:!1},GT={readContext:ro,useCallback:OA,useContext:ro,useEffect:Cm,useImperativeHandle:kA,useInsertionEffect:TA,useLayoutEffect:FA,useMemo:NA,useReducer:zg,useRef:PA,useState:function(){return zg(Tc)},useDebugValue:Pm,useDeferredValue:function(e){var t=no();return Vn===null?t.memoizedState=e:UA(t,Vn.memoizedState,e)},useTransition:function(){var e=zg(Tc)[0],t=no().memoizedState;return[e,t]},useMutableSource:SA,useSyncExternalStore:bA,useId:DA,unstable_isNewReconciler:!1};function Bu(e,t){try{var r="",n=t;do r+=bP(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function qg(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function hy(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var JT=typeof WeakMap=="function"?WeakMap:Map;function jA(e,t,r){r=Zo(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){wh||(wh=!0,Ey=n),hy(e,t)},r}function HA(e,t,r){r=Zo(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){hy(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){hy(e,t),typeof n!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function D1(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new JT;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=lF.bind(null,e,t,r),t.then(e,e))}function L1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function M1(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Zo(-1,1),t.tag=2,Ts(r,t,1))),r.lanes|=1),e)}var QT=ls.ReactCurrentOwner,Pi=!1;function vi(e,t,r,n){t.child=e===null?wA(t,null,r,n):Lu(t,e.child,r,n)}function B1(e,t,r,n,i){r=r.render;var s=t.ref;return Iu(t,i),n=Rm(e,t,r,n,s,i),r=xm(),e!==null&&!Pi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,os(e,t,i)):(Sn&&r&&hm(t),t.flags|=1,vi(e,t,n,i),t.child)}function j1(e,t,r,n,i){if(e===null){var s=r.type;return typeof s=="function"&&!Dm(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,$A(e,t,s,n,i)):(e=Jf(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:bc,r(a,n)&&e.ref===t.ref)return os(e,t,i)}return t.flags|=1,e=ks(s,n),e.ref=t.ref,e.return=t,t.child=e}function $A(e,t,r,n,i){if(e!==null){var s=e.memoizedProps;if(bc(s,n)&&e.ref===t.ref)if(Pi=!1,t.pendingProps=n=s,(e.lanes&i)!==0)e.flags&131072&&(Pi=!0);else return t.lanes=e.lanes,os(e,t,i)}return py(e,t,r,n,i)}function WA(e,t,r){var n=t.pendingProps,i=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},pn(Ru,Hi),Hi|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,pn(Ru,Hi),Hi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,pn(Ru,Hi),Hi|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,pn(Ru,Hi),Hi|=n;return vi(e,t,i,r),t.child}function KA(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function py(e,t,r,n,i){var s=Fi(r)?ya:pi.current;return s=Uu(t,s),Iu(t,i),r=Rm(e,t,r,n,s,i),n=xm(),e!==null&&!Pi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,os(e,t,i)):(Sn&&n&&hm(t),t.flags|=1,vi(e,t,r,i),t.child)}function H1(e,t,r,n,i){if(Fi(r)){var s=!0;lh(t)}else s=!1;if(Iu(t,i),t.stateNode===null)zf(e,t),mA(t,r,n),fy(t,r,n,i),n=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var y=a.context,d=r.contextType;typeof d=="object"&&d!==null?d=ro(d):(d=Fi(r)?ya:pi.current,d=Uu(t,d));var m=r.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||y!==d)&&k1(t,a,n,d),_s=!1;var E=t.memoizedState;a.state=E,ph(t,n,a,i),y=t.memoizedState,l!==n||E!==y||Ti.current||_s?(typeof m=="function"&&(dy(t,r,m,n),y=t.memoizedState),(l=_s||I1(t,r,l,n,E,y,d))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=y),a.props=n,a.state=y,a.context=d,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,gA(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:ho(t.type,l),a.props=d,g=t.pendingProps,E=a.context,y=r.contextType,typeof y=="object"&&y!==null?y=ro(y):(y=Fi(r)?ya:pi.current,y=Uu(t,y));var b=r.getDerivedStateFromProps;(m=typeof b=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==g||E!==y)&&k1(t,a,n,y),_s=!1,E=t.memoizedState,a.state=E,ph(t,n,a,i);var P=t.memoizedState;l!==g||E!==P||Ti.current||_s?(typeof b=="function"&&(dy(t,r,b,n),P=t.memoizedState),(d=_s||I1(t,r,d,n,E,P,y)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,P,y),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,P,y)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=P),a.props=n,a.state=P,a.context=y,n=d):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),n=!1)}return gy(e,t,r,n,s,i)}function gy(e,t,r,n,i,s){KA(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return i&&x1(t,r,!1),os(e,t,s);n=t.stateNode,QT.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=Lu(t,e.child,null,s),t.child=Lu(t,null,l,s)):vi(e,t,l,s),t.memoizedState=n.state,i&&x1(t,r,!0),t.child}function VA(e){var t=e.stateNode;t.pendingContext?R1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&R1(e,t.context,!1),Sm(e,t.containerInfo)}function $1(e,t,r,n,i){return Du(),gm(i),t.flags|=256,vi(e,t,r,n),t.child}var yy={dehydrated:null,treeContext:null,retryLane:0};function my(e){return{baseLanes:e,cachePool:null,transitions:null}}function zA(e,t,r){var n=t.pendingProps,i=xn.current,s=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),pn(xn,i&1),e===null)return ly(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,s?(n=t.mode,s=t.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Vh(a,n,0,null),e=pa(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=my(r),t.memoizedState=yy,e):Tm(t,a));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return YT(e,t,a,n,l,i,r);if(s){s=n.fallback,a=t.mode,i=e.child,l=i.sibling;var y={mode:"hidden",children:n.children};return!(a&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=y,t.deletions=null):(n=ks(i,y),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=ks(l,s):(s=pa(s,a,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,a=e.child.memoizedState,a=a===null?my(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~r,t.memoizedState=yy,n}return s=e.child,e=s.sibling,n=ks(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Tm(e,t){return t=Vh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mf(e,t,r,n){return n!==null&&gm(n),Lu(t,e.child,null,r),e=Tm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function YT(e,t,r,n,i,s,a){if(r)return t.flags&256?(t.flags&=-257,n=qg(Error(mt(422))),mf(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=Vh({mode:"visible",children:n.children},i,0,null),s=pa(s,i,a,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&Lu(t,e.child,null,a),t.child.memoizedState=my(a),t.memoizedState=yy,s);if(!(t.mode&1))return mf(e,t,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(mt(419)),n=qg(s,n,void 0),mf(e,t,a,n)}if(l=(a&e.childLanes)!==0,Pi||l){if(n=Xn,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,is(e,i),wo(n,e,i,-1))}return Um(),n=qg(Error(mt(421))),mf(e,t,a,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=cF.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,$i=Ps(i.nextSibling),Wi=t,Sn=!0,go=null,e!==null&&(Xi[Zi++]=Qo,Xi[Zi++]=Yo,Xi[Zi++]=ma,Qo=e.id,Yo=e.overflow,ma=t),t=Tm(t,n.children),t.flags|=4096,t)}function W1(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),cy(e.return,t,r)}function Gg(e,t,r,n,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function qA(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(vi(e,t,n.children,r),n=xn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&W1(e,r,t);else if(e.tag===19)W1(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(pn(xn,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&gh(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Gg(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&gh(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Gg(t,!0,r,null,s);break;case"together":Gg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function os(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),wa|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(mt(153));if(t.child!==null){for(e=t.child,r=ks(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ks(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function XT(e,t,r){switch(t.tag){case 3:VA(t),Du();break;case 5:_A(t);break;case 1:Fi(t.type)&&lh(t);break;case 4:Sm(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;pn(fh,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(pn(xn,xn.current&1),t.flags|=128,null):r&t.child.childLanes?zA(e,t,r):(pn(xn,xn.current&1),e=os(e,t,r),e!==null?e.sibling:null);pn(xn,xn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return qA(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),pn(xn,xn.current),n)break;return null;case 22:case 23:return t.lanes=0,WA(e,t,r)}return os(e,t,r)}var GA,vy,JA,QA;GA=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};vy=function(){};JA=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,da(Uo.current);var s=null;switch(r){case"input":i=j0(e,i),n=j0(e,n),s=[];break;case"select":i=Pn({},i,{value:void 0}),n=Pn({},n,{value:void 0}),s=[];break;case"textarea":i=W0(e,i),n=W0(e,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ah)}V0(r,n);var a;r=null;for(d in i)if(!n.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(gc.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in n){var y=n[d];if(l=i!=null?i[d]:void 0,n.hasOwnProperty(d)&&y!==l&&(y!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||y&&y.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in y)y.hasOwnProperty(a)&&l[a]!==y[a]&&(r||(r={}),r[a]=y[a])}else r||(s||(s=[]),s.push(d,r)),r=y;else d==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,l=l?l.__html:void 0,y!=null&&l!==y&&(s=s||[]).push(d,y)):d==="children"?typeof y!="string"&&typeof y!="number"||(s=s||[]).push(d,""+y):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(gc.hasOwnProperty(d)?(y!=null&&d==="onScroll"&&yn("scroll",e),s||l===y||(s=[])):(s=s||[]).push(d,y))}r&&(s=s||[]).push("style",r);var d=s;(t.updateQueue=d)&&(t.flags|=4)}};QA=function(e,t,r,n){r!==n&&(t.flags|=4)};function Pl(e,t){if(!Sn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function di(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function ZT(e,t,r){var n=t.pendingProps;switch(pm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return di(t),null;case 1:return Fi(t.type)&&uh(),di(t),null;case 3:return n=t.stateNode,Mu(),mn(Ti),mn(pi),Em(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(gf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,go!==null&&(xy(go),go=null))),vy(e,t),di(t),null;case 5:bm(t);var i=da(Cc.current);if(r=t.type,e!==null&&t.stateNode!=null)JA(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(mt(166));return di(t),null}if(e=da(Uo.current),gf(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[ko]=t,n[Rc]=s,e=(t.mode&1)!==0,r){case"dialog":yn("cancel",n),yn("close",n);break;case"iframe":case"object":case"embed":yn("load",n);break;case"video":case"audio":for(i=0;i<Zl.length;i++)yn(Zl[i],n);break;case"source":yn("error",n);break;case"img":case"image":case"link":yn("error",n),yn("load",n);break;case"details":yn("toggle",n);break;case"input":X_(n,s),yn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},yn("invalid",n);break;case"textarea":e1(n,s),yn("invalid",n)}V0(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&pf(n.textContent,l,e),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&pf(n.textContent,l,e),i=["children",""+l]):gc.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&yn("scroll",n)}switch(r){case"input":sf(n),Z_(n,s,!0);break;case"textarea":sf(n),t1(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=ah)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=EE(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[ko]=t,e[Rc]=n,GA(e,t,!1,!1),t.stateNode=e;e:{switch(a=z0(r,n),r){case"dialog":yn("cancel",e),yn("close",e),i=n;break;case"iframe":case"object":case"embed":yn("load",e),i=n;break;case"video":case"audio":for(i=0;i<Zl.length;i++)yn(Zl[i],e);i=n;break;case"source":yn("error",e),i=n;break;case"img":case"image":case"link":yn("error",e),yn("load",e),i=n;break;case"details":yn("toggle",e),i=n;break;case"input":X_(e,n),i=j0(e,n),yn("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Pn({},n,{value:void 0}),yn("invalid",e);break;case"textarea":e1(e,n),i=W0(e,n),yn("invalid",e);break;default:i=n}V0(r,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var y=l[s];s==="style"?xE(e,y):s==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,y!=null&&AE(e,y)):s==="children"?typeof y=="string"?(r!=="textarea"||y!=="")&&yc(e,y):typeof y=="number"&&yc(e,""+y):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(gc.hasOwnProperty(s)?y!=null&&s==="onScroll"&&yn("scroll",e):y!=null&&Zy(e,s,y,a))}switch(r){case"input":sf(e),Z_(e,n,!1);break;case"textarea":sf(e),t1(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ns(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?Cu(e,!!n.multiple,s,!1):n.defaultValue!=null&&Cu(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=ah)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return di(t),null;case 6:if(e&&t.stateNode!=null)QA(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(mt(166));if(r=da(Cc.current),da(Uo.current),gf(t)){if(n=t.stateNode,r=t.memoizedProps,n[ko]=t,(s=n.nodeValue!==r)&&(e=Wi,e!==null))switch(e.tag){case 3:pf(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&pf(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ko]=t,t.stateNode=n}return di(t),null;case 13:if(mn(xn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Sn&&$i!==null&&t.mode&1&&!(t.flags&128))hA(),Du(),t.flags|=98560,s=!1;else if(s=gf(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(mt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(mt(317));s[ko]=t}else Du(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;di(t),s=!1}else go!==null&&(xy(go),go=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||xn.current&1?qn===0&&(qn=3):Um())),t.updateQueue!==null&&(t.flags|=4),di(t),null);case 4:return Mu(),vy(e,t),e===null&&Ec(t.stateNode.containerInfo),di(t),null;case 10:return vm(t.type._context),di(t),null;case 17:return Fi(t.type)&&uh(),di(t),null;case 19:if(mn(xn),s=t.memoizedState,s===null)return di(t),null;if(n=(t.flags&128)!==0,a=s.rendering,a===null)if(n)Pl(s,!1);else{if(qn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=gh(e),a!==null){for(t.flags|=128,Pl(s,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return pn(xn,xn.current&1|2),t.child}e=e.sibling}s.tail!==null&&On()>ju&&(t.flags|=128,n=!0,Pl(s,!1),t.lanes=4194304)}else{if(!n)if(e=gh(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Pl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Sn)return di(t),null}else 2*On()-s.renderingStartTime>ju&&r!==1073741824&&(t.flags|=128,n=!0,Pl(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(r=s.last,r!==null?r.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=On(),t.sibling=null,r=xn.current,pn(xn,n?r&1|2:r&1),t):(di(t),null);case 22:case 23:return Nm(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Hi&1073741824&&(di(t),t.subtreeFlags&6&&(t.flags|=8192)):di(t),null;case 24:return null;case 25:return null}throw Error(mt(156,t.tag))}function eF(e,t){switch(pm(t),t.tag){case 1:return Fi(t.type)&&uh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Mu(),mn(Ti),mn(pi),Em(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return bm(t),null;case 13:if(mn(xn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(mt(340));Du()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return mn(xn),null;case 4:return Mu(),null;case 10:return vm(t.type._context),null;case 22:case 23:return Nm(),null;case 24:return null;default:return null}}var vf=!1,hi=!1,tF=typeof WeakSet=="function"?WeakSet:Set,jt=null;function Au(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){In(e,t,n)}else r.current=null}function wy(e,t,r){try{r()}catch(n){In(e,t,n)}}var K1=!1;function rF(e,t){if(ry=ih,e=eA(),fm(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,l=-1,y=-1,d=0,m=0,g=e,E=null;t:for(;;){for(var b;g!==r||i!==0&&g.nodeType!==3||(l=a+i),g!==s||n!==0&&g.nodeType!==3||(y=a+n),g.nodeType===3&&(a+=g.nodeValue.length),(b=g.firstChild)!==null;)E=g,g=b;for(;;){if(g===e)break t;if(E===r&&++d===i&&(l=a),E===s&&++m===n&&(y=a),(b=g.nextSibling)!==null)break;g=E,E=g.parentNode}g=b}r=l===-1||y===-1?null:{start:l,end:y}}else r=null}r=r||{start:0,end:0}}else r=null;for(ny={focusedElem:e,selectionRange:r},ih=!1,jt=t;jt!==null;)if(t=jt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,jt=e;else for(;jt!==null;){t=jt;try{var P=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var I=P.memoizedProps,D=P.memoizedState,A=t.stateNode,R=A.getSnapshotBeforeUpdate(t.elementType===t.type?I:ho(t.type,I),D);A.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(mt(163))}}catch(L){In(t,t.return,L)}if(e=t.sibling,e!==null){e.return=t.return,jt=e;break}jt=t.return}return P=K1,K1=!1,P}function ac(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&wy(t,r,s)}i=i.next}while(i!==n)}}function Wh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function _y(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function YA(e){var t=e.alternate;t!==null&&(e.alternate=null,YA(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ko],delete t[Rc],delete t[sy],delete t[MT],delete t[BT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function XA(e){return e.tag===5||e.tag===3||e.tag===4}function V1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||XA(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Sy(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ah));else if(n!==4&&(e=e.child,e!==null))for(Sy(e,t,r),e=e.sibling;e!==null;)Sy(e,t,r),e=e.sibling}function by(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(by(e,t,r),e=e.sibling;e!==null;)by(e,t,r),e=e.sibling}var ni=null,po=!1;function gs(e,t,r){for(r=r.child;r!==null;)ZA(e,t,r),r=r.sibling}function ZA(e,t,r){if(No&&typeof No.onCommitFiberUnmount=="function")try{No.onCommitFiberUnmount(Uh,r)}catch{}switch(r.tag){case 5:hi||Au(r,t);case 6:var n=ni,i=po;ni=null,gs(e,t,r),ni=n,po=i,ni!==null&&(po?(e=ni,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ni.removeChild(r.stateNode));break;case 18:ni!==null&&(po?(e=ni,r=r.stateNode,e.nodeType===8?Hg(e.parentNode,r):e.nodeType===1&&Hg(e,r),_c(e)):Hg(ni,r.stateNode));break;case 4:n=ni,i=po,ni=r.stateNode.containerInfo,po=!0,gs(e,t,r),ni=n,po=i;break;case 0:case 11:case 14:case 15:if(!hi&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&wy(r,t,a),i=i.next}while(i!==n)}gs(e,t,r);break;case 1:if(!hi&&(Au(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){In(r,t,l)}gs(e,t,r);break;case 21:gs(e,t,r);break;case 22:r.mode&1?(hi=(n=hi)||r.memoizedState!==null,gs(e,t,r),hi=n):gs(e,t,r);break;default:gs(e,t,r)}}function z1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new tF),t.forEach(function(n){var i=dF.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function fo(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:ni=l.stateNode,po=!1;break e;case 3:ni=l.stateNode.containerInfo,po=!0;break e;case 4:ni=l.stateNode.containerInfo,po=!0;break e}l=l.return}if(ni===null)throw Error(mt(160));ZA(s,a,i),ni=null,po=!1;var y=i.alternate;y!==null&&(y.return=null),i.return=null}catch(d){In(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)eR(t,e),t=t.sibling}function eR(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fo(t,e),Po(e),n&4){try{ac(3,e,e.return),Wh(3,e)}catch(I){In(e,e.return,I)}try{ac(5,e,e.return)}catch(I){In(e,e.return,I)}}break;case 1:fo(t,e),Po(e),n&512&&r!==null&&Au(r,r.return);break;case 5:if(fo(t,e),Po(e),n&512&&r!==null&&Au(r,r.return),e.flags&32){var i=e.stateNode;try{yc(i,"")}catch(I){In(e,e.return,I)}}if(n&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=r!==null?r.memoizedProps:s,l=e.type,y=e.updateQueue;if(e.updateQueue=null,y!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&SE(i,s),z0(l,a);var d=z0(l,s);for(a=0;a<y.length;a+=2){var m=y[a],g=y[a+1];m==="style"?xE(i,g):m==="dangerouslySetInnerHTML"?AE(i,g):m==="children"?yc(i,g):Zy(i,m,g,d)}switch(l){case"input":H0(i,s);break;case"textarea":bE(i,s);break;case"select":var E=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var b=s.value;b!=null?Cu(i,!!s.multiple,b,!1):E!==!!s.multiple&&(s.defaultValue!=null?Cu(i,!!s.multiple,s.defaultValue,!0):Cu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Rc]=s}catch(I){In(e,e.return,I)}}break;case 6:if(fo(t,e),Po(e),n&4){if(e.stateNode===null)throw Error(mt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(I){In(e,e.return,I)}}break;case 3:if(fo(t,e),Po(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{_c(t.containerInfo)}catch(I){In(e,e.return,I)}break;case 4:fo(t,e),Po(e);break;case 13:fo(t,e),Po(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(km=On())),n&4&&z1(e);break;case 22:if(m=r!==null&&r.memoizedState!==null,e.mode&1?(hi=(d=hi)||m,fo(t,e),hi=d):fo(t,e),Po(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!m&&e.mode&1)for(jt=e,m=e.child;m!==null;){for(g=jt=m;jt!==null;){switch(E=jt,b=E.child,E.tag){case 0:case 11:case 14:case 15:ac(4,E,E.return);break;case 1:Au(E,E.return);var P=E.stateNode;if(typeof P.componentWillUnmount=="function"){n=E,r=E.return;try{t=n,P.props=t.memoizedProps,P.state=t.memoizedState,P.componentWillUnmount()}catch(I){In(n,r,I)}}break;case 5:Au(E,E.return);break;case 22:if(E.memoizedState!==null){G1(g);continue}}b!==null?(b.return=E,jt=b):G1(g)}m=m.sibling}e:for(m=null,g=e;;){if(g.tag===5){if(m===null){m=g;try{i=g.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=g.stateNode,y=g.memoizedProps.style,a=y!=null&&y.hasOwnProperty("display")?y.display:null,l.style.display=RE("display",a))}catch(I){In(e,e.return,I)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(I){In(e,e.return,I)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:fo(t,e),Po(e),n&4&&z1(e);break;case 21:break;default:fo(t,e),Po(e)}}function Po(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(XA(r)){var n=r;break e}r=r.return}throw Error(mt(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(yc(i,""),n.flags&=-33);var s=V1(e);by(e,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,l=V1(e);Sy(e,l,a);break;default:throw Error(mt(161))}}catch(y){In(e,e.return,y)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function nF(e,t,r){jt=e,tR(e)}function tR(e,t,r){for(var n=(e.mode&1)!==0;jt!==null;){var i=jt,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||vf;if(!a){var l=i.alternate,y=l!==null&&l.memoizedState!==null||hi;l=vf;var d=hi;if(vf=a,(hi=y)&&!d)for(jt=i;jt!==null;)a=jt,y=a.child,a.tag===22&&a.memoizedState!==null?J1(i):y!==null?(y.return=a,jt=y):J1(i);for(;s!==null;)jt=s,tR(s),s=s.sibling;jt=i,vf=l,hi=d}q1(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,jt=s):q1(e)}}function q1(e){for(;jt!==null;){var t=jt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:hi||Wh(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!hi)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:ho(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&F1(t,s,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}F1(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var y=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":y.autoFocus&&r.focus();break;case"img":y.src&&(r.src=y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&_c(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(mt(163))}hi||t.flags&512&&_y(t)}catch(E){In(t,t.return,E)}}if(t===e){jt=null;break}if(r=t.sibling,r!==null){r.return=t.return,jt=r;break}jt=t.return}}function G1(e){for(;jt!==null;){var t=jt;if(t===e){jt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,jt=r;break}jt=t.return}}function J1(e){for(;jt!==null;){var t=jt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Wh(4,t)}catch(y){In(t,r,y)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(y){In(t,i,y)}}var s=t.return;try{_y(t)}catch(y){In(t,s,y)}break;case 5:var a=t.return;try{_y(t)}catch(y){In(t,a,y)}}}catch(y){In(t,t.return,y)}if(t===e){jt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,jt=l;break}jt=t.return}}var iF=Math.ceil,vh=ls.ReactCurrentDispatcher,Fm=ls.ReactCurrentOwner,to=ls.ReactCurrentBatchConfig,Jr=0,Xn=null,Hn=null,ii=0,Hi=0,Ru=Bs(0),qn=0,Ic=null,wa=0,Kh=0,Im=0,uc=null,xi=null,km=0,ju=1/0,qo=null,wh=!1,Ey=null,Fs=null,wf=!1,As=null,_h=0,lc=0,Ay=null,qf=-1,Gf=0;function wi(){return Jr&6?On():qf!==-1?qf:qf=On()}function Is(e){return e.mode&1?Jr&2&&ii!==0?ii&-ii:HT.transition!==null?(Gf===0&&(Gf=ME()),Gf):(e=ln,e!==0||(e=window.event,e=e===void 0?16:VE(e.type)),e):1}function wo(e,t,r,n){if(50<lc)throw lc=0,Ay=null,Error(mt(185));Dc(e,r,n),(!(Jr&2)||e!==Xn)&&(e===Xn&&(!(Jr&2)&&(Kh|=r),qn===4&&bs(e,ii)),Ii(e,n),r===1&&Jr===0&&!(t.mode&1)&&(ju=On()+500,jh&&js()))}function Ii(e,t){var r=e.callbackNode;HP(e,t);var n=nh(e,e===Xn?ii:0);if(n===0)r!==null&&i1(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&i1(r),t===1)e.tag===0?jT(Q1.bind(null,e)):cA(Q1.bind(null,e)),DT(function(){!(Jr&6)&&js()}),r=null;else{switch(BE(n)){case 1:r=im;break;case 4:r=DE;break;case 16:r=rh;break;case 536870912:r=LE;break;default:r=rh}r=lR(r,rR.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function rR(e,t){if(qf=-1,Gf=0,Jr&6)throw Error(mt(327));var r=e.callbackNode;if(ku()&&e.callbackNode!==r)return null;var n=nh(e,e===Xn?ii:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Sh(e,n);else{t=n;var i=Jr;Jr|=2;var s=iR();(Xn!==e||ii!==t)&&(qo=null,ju=On()+500,ha(e,t));do try{aF();break}catch(l){nR(e,l)}while(1);mm(),vh.current=s,Jr=i,Hn!==null?t=0:(Xn=null,ii=0,t=qn)}if(t!==0){if(t===2&&(i=Y0(e),i!==0&&(n=i,t=Ry(e,i))),t===1)throw r=Ic,ha(e,0),bs(e,n),Ii(e,On()),r;if(t===6)bs(e,n);else{if(i=e.current.alternate,!(n&30)&&!oF(i)&&(t=Sh(e,n),t===2&&(s=Y0(e),s!==0&&(n=s,t=Ry(e,s))),t===1))throw r=Ic,ha(e,0),bs(e,n),Ii(e,On()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(mt(345));case 2:sa(e,xi,qo);break;case 3:if(bs(e,n),(n&130023424)===n&&(t=km+500-On(),10<t)){if(nh(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){wi(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=oy(sa.bind(null,e,xi,qo),t);break}sa(e,xi,qo);break;case 4:if(bs(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var a=31-vo(n);s=1<<a,a=t[a],a>i&&(i=a),n&=~s}if(n=i,n=On()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*iF(n/1960))-n,10<n){e.timeoutHandle=oy(sa.bind(null,e,xi,qo),n);break}sa(e,xi,qo);break;case 5:sa(e,xi,qo);break;default:throw Error(mt(329))}}}return Ii(e,On()),e.callbackNode===r?rR.bind(null,e):null}function Ry(e,t){var r=uc;return e.current.memoizedState.isDehydrated&&(ha(e,t).flags|=256),e=Sh(e,t),e!==2&&(t=xi,xi=r,t!==null&&xy(t)),e}function xy(e){xi===null?xi=e:xi.push.apply(xi,e)}function oF(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!So(s(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bs(e,t){for(t&=~Im,t&=~Kh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-vo(t),n=1<<r;e[r]=-1,t&=~n}}function Q1(e){if(Jr&6)throw Error(mt(327));ku();var t=nh(e,0);if(!(t&1))return Ii(e,On()),null;var r=Sh(e,t);if(e.tag!==0&&r===2){var n=Y0(e);n!==0&&(t=n,r=Ry(e,n))}if(r===1)throw r=Ic,ha(e,0),bs(e,t),Ii(e,On()),r;if(r===6)throw Error(mt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sa(e,xi,qo),Ii(e,On()),null}function Om(e,t){var r=Jr;Jr|=1;try{return e(t)}finally{Jr=r,Jr===0&&(ju=On()+500,jh&&js())}}function _a(e){As!==null&&As.tag===0&&!(Jr&6)&&ku();var t=Jr;Jr|=1;var r=to.transition,n=ln;try{if(to.transition=null,ln=1,e)return e()}finally{ln=n,to.transition=r,Jr=t,!(Jr&6)&&js()}}function Nm(){Hi=Ru.current,mn(Ru)}function ha(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,UT(r)),Hn!==null)for(r=Hn.return;r!==null;){var n=r;switch(pm(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&uh();break;case 3:Mu(),mn(Ti),mn(pi),Em();break;case 5:bm(n);break;case 4:Mu();break;case 13:mn(xn);break;case 19:mn(xn);break;case 10:vm(n.type._context);break;case 22:case 23:Nm()}r=r.return}if(Xn=e,Hn=e=ks(e.current,null),ii=Hi=t,qn=0,Ic=null,Im=Kh=wa=0,xi=uc=null,ca!==null){for(t=0;t<ca.length;t++)if(r=ca[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}ca=null}return e}function nR(e,t){do{var r=Hn;try{if(mm(),Kf.current=mh,yh){for(var n=Cn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}yh=!1}if(va=0,Yn=Vn=Cn=null,sc=!1,Pc=0,Fm.current=null,r===null||r.return===null){qn=1,Ic=t,Hn=null;break}e:{var s=e,a=r.return,l=r,y=t;if(t=ii,l.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){var d=y,m=l,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var E=m.alternate;E?(m.updateQueue=E.updateQueue,m.memoizedState=E.memoizedState,m.lanes=E.lanes):(m.updateQueue=null,m.memoizedState=null)}var b=L1(a);if(b!==null){b.flags&=-257,M1(b,a,l,s,t),b.mode&1&&D1(s,d,t),t=b,y=d;var P=t.updateQueue;if(P===null){var I=new Set;I.add(y),t.updateQueue=I}else P.add(y);break e}else{if(!(t&1)){D1(s,d,t),Um();break e}y=Error(mt(426))}}else if(Sn&&l.mode&1){var D=L1(a);if(D!==null){!(D.flags&65536)&&(D.flags|=256),M1(D,a,l,s,t),gm(Bu(y,l));break e}}s=y=Bu(y,l),qn!==4&&(qn=2),uc===null?uc=[s]:uc.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var A=jA(s,y,t);T1(s,A);break e;case 1:l=y;var R=s.type,N=s.stateNode;if(!(s.flags&128)&&(typeof R.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Fs===null||!Fs.has(N)))){s.flags|=65536,t&=-t,s.lanes|=t;var L=HA(s,l,t);T1(s,L);break e}}s=s.return}while(s!==null)}sR(r)}catch(W){t=W,Hn===r&&r!==null&&(Hn=r=r.return);continue}break}while(1)}function iR(){var e=vh.current;return vh.current=mh,e===null?mh:e}function Um(){(qn===0||qn===3||qn===2)&&(qn=4),Xn===null||!(wa&268435455)&&!(Kh&268435455)||bs(Xn,ii)}function Sh(e,t){var r=Jr;Jr|=2;var n=iR();(Xn!==e||ii!==t)&&(qo=null,ha(e,t));do try{sF();break}catch(i){nR(e,i)}while(1);if(mm(),Jr=r,vh.current=n,Hn!==null)throw Error(mt(261));return Xn=null,ii=0,qn}function sF(){for(;Hn!==null;)oR(Hn)}function aF(){for(;Hn!==null&&!kP();)oR(Hn)}function oR(e){var t=uR(e.alternate,e,Hi);e.memoizedProps=e.pendingProps,t===null?sR(e):Hn=t,Fm.current=null}function sR(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=eF(r,t),r!==null){r.flags&=32767,Hn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qn=6,Hn=null;return}}else if(r=ZT(r,t,Hi),r!==null){Hn=r;return}if(t=t.sibling,t!==null){Hn=t;return}Hn=t=e}while(t!==null);qn===0&&(qn=5)}function sa(e,t,r){var n=ln,i=to.transition;try{to.transition=null,ln=1,uF(e,t,r,n)}finally{to.transition=i,ln=n}return null}function uF(e,t,r,n){do ku();while(As!==null);if(Jr&6)throw Error(mt(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(mt(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if($P(e,s),e===Xn&&(Hn=Xn=null,ii=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||wf||(wf=!0,lR(rh,function(){return ku(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=to.transition,to.transition=null;var a=ln;ln=1;var l=Jr;Jr|=4,Fm.current=null,rF(e,r),eR(r,e),PT(ny),ih=!!ry,ny=ry=null,e.current=r,nF(r),OP(),Jr=l,ln=a,to.transition=s}else e.current=r;if(wf&&(wf=!1,As=e,_h=i),s=e.pendingLanes,s===0&&(Fs=null),DP(r.stateNode),Ii(e,On()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(wh)throw wh=!1,e=Ey,Ey=null,e;return _h&1&&e.tag!==0&&ku(),s=e.pendingLanes,s&1?e===Ay?lc++:(lc=0,Ay=e):lc=0,js(),null}function ku(){if(As!==null){var e=BE(_h),t=to.transition,r=ln;try{if(to.transition=null,ln=16>e?16:e,As===null)var n=!1;else{if(e=As,As=null,_h=0,Jr&6)throw Error(mt(331));var i=Jr;for(Jr|=4,jt=e.current;jt!==null;){var s=jt,a=s.child;if(jt.flags&16){var l=s.deletions;if(l!==null){for(var y=0;y<l.length;y++){var d=l[y];for(jt=d;jt!==null;){var m=jt;switch(m.tag){case 0:case 11:case 15:ac(8,m,s)}var g=m.child;if(g!==null)g.return=m,jt=g;else for(;jt!==null;){m=jt;var E=m.sibling,b=m.return;if(YA(m),m===d){jt=null;break}if(E!==null){E.return=b,jt=E;break}jt=b}}}var P=s.alternate;if(P!==null){var I=P.child;if(I!==null){P.child=null;do{var D=I.sibling;I.sibling=null,I=D}while(I!==null)}}jt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,jt=a;else e:for(;jt!==null;){if(s=jt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ac(9,s,s.return)}var A=s.sibling;if(A!==null){A.return=s.return,jt=A;break e}jt=s.return}}var R=e.current;for(jt=R;jt!==null;){a=jt;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,jt=N;else e:for(a=R;jt!==null;){if(l=jt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Wh(9,l)}}catch(W){In(l,l.return,W)}if(l===a){jt=null;break e}var L=l.sibling;if(L!==null){L.return=l.return,jt=L;break e}jt=l.return}}if(Jr=i,js(),No&&typeof No.onPostCommitFiberRoot=="function")try{No.onPostCommitFiberRoot(Uh,e)}catch{}n=!0}return n}finally{ln=r,to.transition=t}}return!1}function Y1(e,t,r){t=Bu(r,t),t=jA(e,t,1),e=Ts(e,t,1),t=wi(),e!==null&&(Dc(e,1,t),Ii(e,t))}function In(e,t,r){if(e.tag===3)Y1(e,e,r);else for(;t!==null;){if(t.tag===3){Y1(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Fs===null||!Fs.has(n))){e=Bu(r,e),e=HA(t,e,1),t=Ts(t,e,1),e=wi(),t!==null&&(Dc(t,1,e),Ii(t,e));break}}t=t.return}}function lF(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=wi(),e.pingedLanes|=e.suspendedLanes&r,Xn===e&&(ii&r)===r&&(qn===4||qn===3&&(ii&130023424)===ii&&500>On()-km?ha(e,0):Im|=r),Ii(e,t)}function aR(e,t){t===0&&(e.mode&1?(t=lf,lf<<=1,!(lf&130023424)&&(lf=4194304)):t=1);var r=wi();e=is(e,t),e!==null&&(Dc(e,t,r),Ii(e,r))}function cF(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),aR(e,r)}function dF(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(mt(314))}n!==null&&n.delete(t),aR(e,r)}var uR;uR=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ti.current)Pi=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Pi=!1,XT(e,t,r);Pi=!!(e.flags&131072)}else Pi=!1,Sn&&t.flags&1048576&&dA(t,dh,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;zf(e,t),e=t.pendingProps;var i=Uu(t,pi.current);Iu(t,r),i=Rm(null,t,n,e,i,r);var s=xm();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fi(n)?(s=!0,lh(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_m(t),i.updater=Hh,t.stateNode=i,i._reactInternals=t,fy(t,n,e,r),t=gy(null,t,n,!0,s,r)):(t.tag=0,Sn&&s&&hm(t),vi(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(zf(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=hF(n),e=ho(n,e),i){case 0:t=py(null,t,n,e,r);break e;case 1:t=H1(null,t,n,e,r);break e;case 11:t=B1(null,t,n,e,r);break e;case 14:t=j1(null,t,n,ho(n.type,e),r);break e}throw Error(mt(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ho(n,i),py(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ho(n,i),H1(e,t,n,i,r);case 3:e:{if(VA(t),e===null)throw Error(mt(387));n=t.pendingProps,s=t.memoizedState,i=s.element,gA(e,t),ph(t,n,null,r);var a=t.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Bu(Error(mt(423)),t),t=$1(e,t,n,r,i);break e}else if(n!==i){i=Bu(Error(mt(424)),t),t=$1(e,t,n,r,i);break e}else for($i=Ps(t.stateNode.containerInfo.firstChild),Wi=t,Sn=!0,go=null,r=wA(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Du(),n===i){t=os(e,t,r);break e}vi(e,t,n,r)}t=t.child}return t;case 5:return _A(t),e===null&&ly(t),n=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,iy(n,i)?a=null:s!==null&&iy(n,s)&&(t.flags|=32),KA(e,t),vi(e,t,a,r),t.child;case 6:return e===null&&ly(t),null;case 13:return zA(e,t,r);case 4:return Sm(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Lu(t,null,n,r):vi(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ho(n,i),B1(e,t,n,i,r);case 7:return vi(e,t,t.pendingProps,r),t.child;case 8:return vi(e,t,t.pendingProps.children,r),t.child;case 12:return vi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,pn(fh,n._currentValue),n._currentValue=a,s!==null)if(So(s.value,a)){if(s.children===i.children&&!Ti.current){t=os(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var y=l.firstContext;y!==null;){if(y.context===n){if(s.tag===1){y=Zo(-1,r&-r),y.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?y.next=y:(y.next=m.next,m.next=y),d.pending=y}}s.lanes|=r,y=s.alternate,y!==null&&(y.lanes|=r),cy(s.return,r,t),l.lanes|=r;break}y=y.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(mt(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),cy(a,r,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}vi(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Iu(t,r),i=ro(i),n=n(i),t.flags|=1,vi(e,t,n,r),t.child;case 14:return n=t.type,i=ho(n,t.pendingProps),i=ho(n.type,i),j1(e,t,n,i,r);case 15:return $A(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ho(n,i),zf(e,t),t.tag=1,Fi(n)?(e=!0,lh(t)):e=!1,Iu(t,r),mA(t,n,i),fy(t,n,i,r),gy(null,t,n,!0,e,r);case 19:return qA(e,t,r);case 22:return WA(e,t,r)}throw Error(mt(156,t.tag))};function lR(e,t){return UE(e,t)}function fF(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function eo(e,t,r,n){return new fF(e,t,r,n)}function Dm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hF(e){if(typeof e=="function")return Dm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tm)return 11;if(e===rm)return 14}return 2}function ks(e,t){var r=e.alternate;return r===null?(r=eo(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Jf(e,t,r,n,i,s){var a=2;if(n=e,typeof e=="function")Dm(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case gu:return pa(r.children,i,s,t);case em:a=8,i|=8;break;case D0:return e=eo(12,r,t,i|2),e.elementType=D0,e.lanes=s,e;case L0:return e=eo(13,r,t,i),e.elementType=L0,e.lanes=s,e;case M0:return e=eo(19,r,t,i),e.elementType=M0,e.lanes=s,e;case vE:return Vh(r,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yE:a=10;break e;case mE:a=9;break e;case tm:a=11;break e;case rm:a=14;break e;case ws:a=16,n=null;break e}throw Error(mt(130,e==null?e:typeof e,""))}return t=eo(a,r,t,i),t.elementType=e,t.type=n,t.lanes=s,t}function pa(e,t,r,n){return e=eo(7,e,n,t),e.lanes=r,e}function Vh(e,t,r,n){return e=eo(22,e,n,t),e.elementType=vE,e.lanes=r,e.stateNode={isHidden:!1},e}function Jg(e,t,r){return e=eo(6,e,null,t),e.lanes=r,e}function Qg(e,t,r){return t=eo(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function pF(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fg(0),this.expirationTimes=Fg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fg(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Lm(e,t,r,n,i,s,a,l,y){return e=new pF(e,t,r,l,y),t===1?(t=1,s===!0&&(t|=8)):t=0,s=eo(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},_m(s),e}function gF(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pu,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function cR(e){if(!e)return Us;e=e._reactInternals;e:{if(Ea(e)!==e||e.tag!==1)throw Error(mt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(mt(171))}if(e.tag===1){var r=e.type;if(Fi(r))return lA(e,r,t)}return t}function dR(e,t,r,n,i,s,a,l,y){return e=Lm(r,n,!0,e,i,s,a,l,y),e.context=cR(null),r=e.current,n=wi(),i=Is(r),s=Zo(n,i),s.callback=t??null,Ts(r,s,i),e.current.lanes=i,Dc(e,i,n),Ii(e,n),e}function zh(e,t,r,n){var i=t.current,s=wi(),a=Is(i);return r=cR(r),t.context===null?t.context=r:t.pendingContext=r,t=Zo(s,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ts(i,t,a),e!==null&&(wo(e,i,a,s),Wf(e,i,a)),a}function bh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function X1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Mm(e,t){X1(e,t),(e=e.alternate)&&X1(e,t)}function yF(){return null}var fR=typeof reportError=="function"?reportError:function(e){console.error(e)};function Bm(e){this._internalRoot=e}qh.prototype.render=Bm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(mt(409));zh(e,t,null,null)};qh.prototype.unmount=Bm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_a(function(){zh(null,e,null,null)}),t[ns]=null}};function qh(e){this._internalRoot=e}qh.prototype.unstable_scheduleHydration=function(e){if(e){var t=$E();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ss.length&&t!==0&&t<Ss[r].priority;r++);Ss.splice(r,0,e),r===0&&KE(e)}};function jm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Z1(){}function mF(e,t,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var d=bh(a);s.call(d)}}var a=dR(t,n,e,0,null,!1,!1,"",Z1);return e._reactRootContainer=a,e[ns]=a.current,Ec(e.nodeType===8?e.parentNode:e),_a(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var d=bh(y);l.call(d)}}var y=Lm(e,0,!1,null,null,!1,!1,"",Z1);return e._reactRootContainer=y,e[ns]=y.current,Ec(e.nodeType===8?e.parentNode:e),_a(function(){zh(t,y,r,n)}),y}function Jh(e,t,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var y=bh(a);l.call(y)}}zh(t,a,e,i)}else a=mF(r,t,e,i,n);return bh(a)}jE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Xl(t.pendingLanes);r!==0&&(om(t,r|1),Ii(t,On()),!(Jr&6)&&(ju=On()+500,js()))}break;case 13:_a(function(){var n=is(e,1);if(n!==null){var i=wi();wo(n,e,1,i)}}),Mm(e,1)}};sm=function(e){if(e.tag===13){var t=is(e,134217728);if(t!==null){var r=wi();wo(t,e,134217728,r)}Mm(e,134217728)}};HE=function(e){if(e.tag===13){var t=Is(e),r=is(e,t);if(r!==null){var n=wi();wo(r,e,t,n)}Mm(e,t)}};$E=function(){return ln};WE=function(e,t){var r=ln;try{return ln=e,t()}finally{ln=r}};G0=function(e,t,r){switch(t){case"input":if(H0(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Bh(n);if(!i)throw Error(mt(90));_E(n),H0(n,i)}}}break;case"textarea":bE(e,r);break;case"select":t=r.value,t!=null&&Cu(e,!!r.multiple,t,!1)}};TE=Om;FE=_a;var vF={usingClientEntryPoint:!1,Events:[Mc,wu,Bh,CE,PE,Om]},Tl={findFiberByHostInstance:la,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},wF={bundleType:Tl.bundleType,version:Tl.version,rendererPackageName:Tl.rendererPackageName,rendererConfig:Tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ls.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=OE(e),e===null?null:e.stateNode},findFiberByHostInstance:Tl.findFiberByHostInstance||yF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_f.isDisabled&&_f.supportsFiber)try{Uh=_f.inject(wF),No=_f}catch{}}zi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vF;zi.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jm(t))throw Error(mt(200));return gF(e,t,null,r)};zi.createRoot=function(e,t){if(!jm(e))throw Error(mt(299));var r=!1,n="",i=fR;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Lm(e,1,!1,null,null,r,!1,n,i),e[ns]=t.current,Ec(e.nodeType===8?e.parentNode:e),new Bm(t)};zi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(mt(188)):(e=Object.keys(e).join(","),Error(mt(268,e)));return e=OE(t),e=e===null?null:e.stateNode,e};zi.flushSync=function(e){return _a(e)};zi.hydrate=function(e,t,r){if(!Gh(t))throw Error(mt(200));return Jh(null,e,t,!0,r)};zi.hydrateRoot=function(e,t,r){if(!jm(e))throw Error(mt(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=fR;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=dR(t,null,e,1,r??null,i,!1,s,a),e[ns]=t.current,Ec(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new qh(t)};zi.render=function(e,t,r){if(!Gh(t))throw Error(mt(200));return Jh(null,e,t,!1,r)};zi.unmountComponentAtNode=function(e){if(!Gh(e))throw Error(mt(40));return e._reactRootContainer?(_a(function(){Jh(null,null,e,!1,function(){e._reactRootContainer=null,e[ns]=null})}),!0):!1};zi.unstable_batchedUpdates=Om;zi.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Gh(r))throw Error(mt(200));if(e==null||e._reactInternals===void 0)throw Error(mt(38));return Jh(e,t,r,!1,n)};zi.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}t(),e.exports=zi})(yP);var eS=O0;k0.createRoot=eS.createRoot,k0.hydrateRoot=eS.hydrateRoot;var _o={},_F={get exports(){return _o},set exports(e){_o=e}};const SF="modulepreload",bF=function(e){return"/"+e},tS={},rS=function(t,r,n){if(!r||r.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=bF(s),s in tS)return;tS[s]=!0;const a=s.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!n)for(let m=i.length-1;m>=0;m--){const g=i[m];if(g.href===s&&(!a||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":SF,a||(d.as="script",d.crossOrigin=""),d.href=s,document.head.appendChild(d),a)return new Promise((m,g)=>{d.addEventListener("load",m),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())};function nS(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Oe={},Yg,iS;function EF(){if(iS)return Yg;iS=1;class e{constructor(r){this.value=r||"b"+ ++e.nextId}equals(r){return!!r&&r.termType===this.termType&&r.value===this.value}}return e.prototype.termType="BlankNode",e.nextId=0,Yg=e,Yg}var Xg,oS;function hR(){if(oS)return Xg;oS=1;class e{equals(r){return!!r&&r.termType===this.termType}}return e.prototype.termType="DefaultGraph",e.prototype.value="",Xg=e,Xg}var Zg,sS;function AF(){if(sS)return Zg;sS=1;function e(t){if(!t)return null;if(t.termType==="BlankNode")return this.blankNode(t.value);if(t.termType==="DefaultGraph")return this.defaultGraph();if(t.termType==="Literal")return this.literal(t.value,t.language||this.namedNode(t.datatype.value));if(t.termType==="NamedNode")return this.namedNode(t.value);if(t.termType==="Quad"){const r=this.fromTerm(t.subject),n=this.fromTerm(t.predicate),i=this.fromTerm(t.object),s=this.fromTerm(t.graph);return this.quad(r,n,i,s)}if(t.termType==="Variable")return this.variable(t.value);throw new Error(`unknown termType ${t.termType}`)}return Zg=e,Zg}var e0,aS;function pR(){if(aS)return e0;aS=1;class e{constructor(r){this.value=r}equals(r){return!!r&&r.termType===this.termType&&r.value===this.value}}return e.prototype.termType="NamedNode",e0=e,e0}var t0,uS;function RF(){if(uS)return t0;uS=1;const e=pR();class t{constructor(n,i,s){this.value=n,this.datatype=t.stringDatatype,this.language="",i?(this.language=i,this.datatype=t.langStringDatatype):s&&(this.datatype=s)}equals(n){return!!n&&n.termType===this.termType&&n.value===this.value&&n.language===this.language&&n.datatype.equals(this.datatype)}}return t.prototype.termType="Literal",t.langStringDatatype=new e("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.stringDatatype=new e("http://www.w3.org/2001/XMLSchema#string"),t0=t,t0}var r0,lS;function xF(){if(lS)return r0;lS=1;const e=hR();class t{constructor(n,i,s,a){this.subject=n,this.predicate=i,this.object=s,a?this.graph=a:this.graph=new e}equals(n){return!!n&&(n.termType==="Quad"||!n.termType)&&n.subject.equals(this.subject)&&n.predicate.equals(this.predicate)&&n.object.equals(this.object)&&n.graph.equals(this.graph)}}return t.prototype.termType="Quad",t.prototype.value="",r0=t,r0}var n0,cS;function CF(){if(cS)return n0;cS=1;class e{constructor(r){this.value=r}equals(r){return!!r&&r.termType===this.termType&&r.value===this.value}}return e.prototype.termType="Variable",n0=e,n0}var i0,dS;function PF(){if(dS)return i0;dS=1;const e=EF(),t=hR(),r=AF(),n=RF(),i=pR(),s=xF(),a=CF();function l(A){return new i(A)}function y(A){return new e(A)}function d(A,R){return typeof R=="string"?R.indexOf(":")===-1?new n(A,R):new n(A,null,D.namedNode(R)):new n(A,null,R)}function m(A){return new a(A)}function g(){return D.defaultGraphInstance}function E(A,R,N){return D.quad(A,R,N)}function b(A,R,N,L){return new s(A,R,N,L||D.defaultGraphInstance)}function P(A){return r.call(D,A)}function I(A){return r.call(D,A)}const D={namedNode:l,blankNode:y,literal:d,variable:m,defaultGraph:g,triple:E,quad:b,fromTerm:P,fromQuad:I,defaultGraphInstance:new t};return i0=D,i0}var o0,fS;function gR(){return fS||(fS=1,o0=PF()),o0}var s0,hS;function TF(){if(hS)return s0;hS=1;function e(a){return typeof a=="string"||a instanceof String}const t="http://www.w3.org/2001/XMLSchema#string";function r(a){if(typeof a=="string")return a;if(!a)return"";if(typeof a.id<"u"&&a.termType!=="Quad")return a.id;let l,y,d,m;switch(a.termType){case"NamedNode":return a.value;case"BlankNode":return`_:${a.value}`;case"Variable":return`?${a.value}`;case"DefaultGraph":return"";case"Literal":return a.language?`"${a.value}"@${a.language}`:`"${a.value}"${a.datatype&&a.datatype.value!==t?`^^${a.datatype.value}`:""}`;case"Quad":return l=i(r(a.subject)),y=i(r(a.predicate)),d=i(r(a.object)),m=a.graph.termType==="DefaultGraph"?"":` ${r(a.graph)}`,`<<${l} ${y} ${d}${m}>>`;default:throw new Error(`Unexpected termType: ${a.termType}`)}}const n=/^"(.*".*)(?="[^"]*$)/;function i(a){return a.replace(n,(l,y)=>`"${y.replace(/"/g,'""')}`)}class s{constructor(l){if(this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._quads=new Map,l)for(const y of l)this.add(y)}get size(){let l=this._size;if(l!==null)return l;l=0;const y=this._graphs;let d,m;for(const g in y)for(const E in d=y[g].subjects)for(const b in m=d[E])l+=Object.keys(m[b]).length;return this._size=l,this._size}add(l){let y=r(l.subject),d=r(l.predicate),m=r(l.object);const g=r(l.graph);let E=this._graphs[g];E||(E=this._graphs[g]={subjects:{},predicates:{},objects:{}},Object.freeze(E));const b=this._ids,P=this._entities;return y=b[y]||(b[P[++this._id]=y]=this._id),d=b[d]||(b[P[++this._id]=d]=this._id),m=b[m]||(b[P[++this._id]=m]=this._id),this._addToIndex(E.subjects,y,d,m),this._addToIndex(E.predicates,d,m,y),this._addToIndex(E.objects,m,y,d),this._setQuad(y,d,m,g,l),this._size=null,this}delete(l){let y=r(l.subject),d=r(l.predicate),m=r(l.object);const g=r(l.graph),E=this._ids,b=this._graphs;let P,I,D;if(!(y=E[y])||!(d=E[d])||!(m=E[m])||!(P=b[g])||!(I=P.subjects[y])||!(D=I[d])||!(m in D))return this;this._removeFromIndex(P.subjects,y,d,m),this._removeFromIndex(P.predicates,d,m,y),this._removeFromIndex(P.objects,m,y,d),this._size!==null&&this._size--,this._deleteQuad(y,d,m,g);for(y in P.subjects)return this;return delete b[g],this}has(l){const y=r(l.subject),d=r(l.predicate),m=r(l.object),g=r(l.graph),E=this._graphs[g];if(!E)return!1;const b=this._ids;let P,I,D;return e(y)&&!(P=b[y])||e(d)&&!(I=b[d])||e(m)&&!(D=b[m])?!1:this._countInIndex(E.objects,D,P,I)===1}match(l,y,d,m){return this._createDataset(this._match(l,y,d,m))}[Symbol.iterator](){return this._match()[Symbol.iterator]()}_addToIndex(l,y,d,m){const g=l[y]||(l[y]={}),E=g[d]||(g[d]={}),b=m in E;return b||(E[m]=null),!b}_removeFromIndex(l,y,d,m){const g=l[y],E=g[d];delete E[m];for(const b in E)return;delete g[d];for(const b in g)return;delete l[y]}_findInIndex(l,y,d,m,g,E,b,P,I,D){let A,R,N;y&&((A=l,l={})[y]=A[y]);for(const L in l)if(R=l[L],R){d&&((A=R,R={})[d]=A[d]);for(const W in R)if(N=R[W],N){const q=m?m in N?[m]:[]:Object.keys(N);for(let J=0;J<q.length;J++){const ve={[g]:L,[E]:W,[b]:q[J]},Fe=this._getQuad(ve.subject,ve.predicate,ve.object,P);if(D)D.push(Fe);else if(I(Fe))return!0}}}return D}_countInIndex(l,y,d,m){let g=0,E,b,P;y&&((E=l,l={})[y]=E[y]);for(const I in l)if(b=l[I],b){d&&((E=b,b={})[d]=E[d]);for(const D in b)P=b[D],P&&(m?m in P&&g++:g+=Object.keys(P).length)}return g}_getGraphs(l){return e(l)?{[l]:this._graphs[l]}:this._graphs}_match(l,y,d,m){l=l&&r(l),y=y&&r(y),d=d&&r(d),m=m&&r(m);const g=[],E=this._getGraphs(m),b=this._ids;let P,I,D,A;if(e(l)&&!(I=b[l])||e(y)&&!(D=b[y])||e(d)&&!(A=b[d]))return g;for(const R in E)P=E[R],P&&(I?A?this._findInIndex(P.objects,A,I,D,"object","subject","predicate",R,null,g):this._findInIndex(P.subjects,I,D,null,"subject","predicate","object",R,null,g):D?this._findInIndex(P.predicates,D,A,null,"predicate","object","subject",R,null,g):A?this._findInIndex(P.objects,A,null,null,"object","subject","predicate",R,null,g):this._findInIndex(P.subjects,null,null,null,"subject","predicate","object",R,null,g));return g}_getQuad(l,y,d,m){return this._quads.get(this._toId(l,y,d,m))}_setQuad(l,y,d,m,g){this._quads.set(this._toId(l,y,d,m),g)}_deleteQuad(l,y,d,m){this._quads.delete(this._toId(l,y,d,m))}_createDataset(l){return new this.constructor(l)}_toId(l,y,d,m){return`${l}:${y}:${d}:${m}`}}return s0=s,s0}var a0,pS;function FF(){if(pS)return a0;pS=1;const e=gR(),t=TF();function r(n){return new t(n)}return a0=Object.assign({dataset:r},e),a0}var u0,gS;function IF(){if(gS)return u0;gS=1;var e=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,r=/\s|\uFEFF|\xA0/,n=/\r?\n[\x20\x09]+/g,i=/[;,"]/,s=/[;,"]|\s/,a=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,l={IDLE:1<<0,URI:1<<1,ATTR:1<<2};function y(P){return P.replace(t,"")}function d(P){return r.test(P)}function m(P,I){for(;d(P[I]);)I++;return I}function g(P){return s.test(P)||!a.test(P)}function E(P,I){return Object.keys(P).length===Object.keys(I).length&&Object.keys(P).every(D=>D in I&&P[D]===I[D])}class b{constructor(I){this.refs=[],I&&this.parse(I)}rel(I){for(var D=[],A=I.toLowerCase(),R=0;R<this.refs.length;R++)this.refs[R].rel.toLowerCase()===A&&D.push(this.refs[R]);return D}get(I,D){I=I.toLowerCase();for(var A=[],R=0;R<this.refs.length;R++)this.refs[R][I]===D&&A.push(this.refs[R]);return A}set(I){return this.refs.push(I),this}setUnique(I){return this.refs.some(D=>E(D,I))||this.refs.push(I),this}has(I,D){I=I.toLowerCase();for(var A=0;A<this.refs.length;A++)if(this.refs[A][I]===D)return!0;return!1}parse(I,N){N=N||0,I=N?I.slice(N):I,I=y(I).replace(n,"");for(var A=l.IDLE,R=I.length,N=0,L=null;N<R;)if(A===l.IDLE){if(d(I[N])){N++;continue}else if(I[N]==="<"){L!=null&&(L.rel!=null?this.refs.push(...b.expandRelations(L)):this.refs.push(L));var W=I.indexOf(">",N);if(W===-1)throw new Error("Expected end of URI delimiter at offset "+N);L={uri:I.slice(N+1,W)},N=W,A=l.URI}else throw new Error('Unexpected character "'+I[N]+'" at offset '+N);N++}else if(A===l.URI)if(d(I[N])){N++;continue}else if(I[N]===";")A=l.ATTR,N++;else if(I[N]===",")A=l.IDLE,N++;else throw new Error('Unexpected character "'+I[N]+'" at offset '+N);else if(A===l.ATTR){if(I[N]===";"||d(I[N])){N++;continue}var W=I.indexOf("=",N);if(W===-1)throw new Error("Expected attribute delimiter at offset "+N);var q=y(I.slice(N,W)).toLowerCase(),J="";if(N=W+1,N=m(I,N),I[N]==='"')for(N++;N<R;){if(I[N]==='"'){N++;break}I[N]==="\\"&&N++,J+=I[N],N++}else{for(var W=N+1;!i.test(I[W])&&W<R;)W++;J=I.slice(N,W),N=W}switch(L[q]&&b.isSingleOccurenceAttr(q)||(q[q.length-1]==="*"?L[q]=b.parseExtendedValue(J):(J=q==="type"?J.toLowerCase():J,L[q]!=null?Array.isArray(L[q])?L[q].push(J):L[q]=[L[q],J]:L[q]=J)),I[N]){case",":A=l.IDLE;break;case";":A=l.ATTR;break}N++}else throw new Error('Unknown parser state "'+A+'"');return L!=null&&(L.rel!=null?this.refs.push(...b.expandRelations(L)):this.refs.push(L)),L=null,this}toString(){for(var I=[],D="",A=null,R=0;R<this.refs.length;R++)A=this.refs[R],D=Object.keys(this.refs[R]).reduce(function(N,L){return L==="uri"?N:N+"; "+b.formatAttribute(L,A[L])},"<"+A.uri+">"),I.push(D);return I.join(", ")}}return b.isCompatibleEncoding=function(P){return e.test(P)},b.parse=function(P,I){return new b().parse(P,I)},b.isSingleOccurenceAttr=function(P){return P==="rel"||P==="type"||P==="media"||P==="title"||P==="title*"},b.isTokenAttr=function(P){return P==="rel"||P==="type"||P==="anchor"},b.escapeQuotes=function(P){return P.replace(/"/g,'\\"')},b.expandRelations=function(P){var I=P.rel.split(" ");return I.map(function(D){var A=Object.assign({},P);return A.rel=D,A})},b.parseExtendedValue=function(P){var I=/([^']+)?(?:'([^']*)')?(.+)/.exec(P);return{language:I[2].toLowerCase(),encoding:b.isCompatibleEncoding(I[1])?null:I[1].toLowerCase(),value:b.isCompatibleEncoding(I[1])?decodeURIComponent(I[3]):I[3]}},b.formatExtendedAttribute=function(P,I){var D=(I.encoding||"utf-8").toUpperCase(),A=I.language||"en",R="";return Buffer.isBuffer(I.value)&&b.isCompatibleEncoding(D)?R=I.value.toString(D):Buffer.isBuffer(I.value)?R=I.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):R=encodeURIComponent(I.value),P+"="+D+"'"+A+"'"+R},b.formatAttribute=function(P,I){return Array.isArray(I)?I.map(D=>b.formatAttribute(P,D)).join("; "):P[P.length-1]==="*"||typeof I!="string"?b.formatExtendedAttribute(P,I):(b.isTokenAttr(P)?I=g(I)?'"'+b.escapeQuotes(I)+'"':b.escapeQuotes(I):g(I)&&(I=encodeURIComponent(I),I=I.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),I='"'+I+'"'),P+"="+I)},u0=b,u0}const Fl="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Il="http://www.w3.org/2001/XMLSchema#",l0="http://www.w3.org/2000/10/swap/",fi={xsd:{decimal:`${Il}decimal`,boolean:`${Il}boolean`,double:`${Il}double`,integer:`${Il}integer`,string:`${Il}string`},rdf:{type:`${Fl}type`,nil:`${Fl}nil`,first:`${Fl}first`,rest:`${Fl}rest`,langString:`${Fl}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${l0}reify#forSome`,forAll:`${l0}reify#forAll`},log:{implies:`${l0}log#implies`}};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let yS;var kF=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:mo):e=>(yS||(yS=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0));const OF=kF,{xsd:Sf}=fi,NF=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,mS={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},UF=/[\x00-\x20<>\\"\{\}\|\^\`]/,DF={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},LF=/$0^/;class Hm{constructor(t){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,t=t||{},this._lineMode=!!t.lineMode){this._n3Mode=!1;for(const r in this)!(r in DF)&&this[r]instanceof RegExp&&(this[r]=LF)}else this._n3Mode=t.n3!==!1;this._comments=!!t.comments,this._literalClosingPos=0}_tokenizeToEnd(t,r){let n=this._input,i=n.length;for(;;){let l,y;for(;l=this._newline.exec(n);)this._comments&&(y=this._comment.exec(l[0]))&&s("comment",y[1],"",this._line,l[0].length),n=n.substr(l[0].length,n.length),i=n.length,this._line++;if(!l&&(l=this._whitespace.exec(n))&&(n=n.substr(l[0].length,n.length)),this._endOfFile.test(n))return r&&(this._comments&&(y=this._comment.exec(n))&&s("comment",y[1],"",this._line,n.length),n=null,s("eof","","",this._line,0)),this._input=n;const d=this._line,m=n[0];let g="",E="",b="",P=null,I=0,D=!1;switch(m){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){D=!0;break}}else{this._n3Mode&&(I=1,g="^");break}case"<":if(P=this._unescapedIri.exec(n))g="IRI",E=P[1];else if(P=this._iri.exec(n)){if(E=this._unescape(P[1]),E===null||UF.test(E))return a(this);g="IRI"}else n.length>1&&n[1]==="<"?(g="<<",I=2):this._n3Mode&&n.length>1&&n[1]==="="&&(g="inverse",I=2,E=">");break;case">":n.length>1&&n[1]===">"&&(g=">>",I=2);break;case"_":((P=this._blank.exec(n))||r&&(P=this._blank.exec(`${n} `)))&&(g="blank",b="_",E=P[1]);break;case'"':if(P=this._simpleQuotedString.exec(n))E=P[1];else if({value:E,matchLength:I}=this._parseLiteral(n),E===null)return a(this);(P!==null||I!==0)&&(g="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(P=this._simpleApostropheString.exec(n))E=P[1];else if({value:E,matchLength:I}=this._parseLiteral(n),E===null)return a(this);(P!==null||I!==0)&&(g="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(P=this._variable.exec(n))&&(g="var",E=P[0]);break;case"@":this._previousMarker==="literal"&&(P=this._langcode.exec(n))?(g="langcode",E=P[1]):(P=this._keyword.exec(n))&&(g=P[0]);break;case".":if(n.length===1?r:n[1]<"0"||n[1]>"9"){g=".",I=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(P=this._number.exec(n)||r&&(P=this._number.exec(`${n} `)))&&(g="literal",E=P[0],b=typeof P[1]=="string"?Sf.double:typeof P[2]=="string"?Sf.decimal:Sf.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(P=this._sparqlKeyword.exec(n))?g=P[0].toUpperCase():D=!0;break;case"f":case"t":(P=this._boolean.exec(n))?(g="literal",E=P[0],b=Sf.boolean):D=!0;break;case"a":(P=this._shortPredicates.exec(n))?(g="abbreviation",E="a"):D=!0;break;case"=":this._n3Mode&&n.length>1&&(g="abbreviation",n[1]!==">"?(I=1,E="="):(I=2,E=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(I=1,g=m);break;default:D=!0}if(D&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(P=this._prefix.exec(n))?(g="prefix",E=P[1]||""):((P=this._prefixed.exec(n))||r&&(P=this._prefixed.exec(`${n} `)))&&(g="prefixed",b=P[1]||"",E=this._unescape(P[2]))),this._previousMarker==="^^")switch(g){case"prefixed":g="type";break;case"IRI":g="typeIRI";break;default:g=""}if(!g)return r||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?a(this):this._input=n;const A=I||P[0].length,R=s(g,E,b,d,A);this.previousToken=R,this._previousMarker=g,n=n.substr(A,n.length)}function s(l,y,d,m,g){const E=n?i-n.length:i,b=E+g,P={type:l,value:y,prefix:d,line:m,start:E,end:b};return t(null,P),P}function a(l){t(l._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(t){let r=!1;const n=t.replace(NF,(i,s,a,l)=>{if(typeof s=="string")return String.fromCharCode(Number.parseInt(s,16));if(typeof a=="string"){let y=Number.parseInt(a,16);return y<=65535?String.fromCharCode(Number.parseInt(a,16)):String.fromCharCode(55296+((y-=65536)>>10),56320+(y&1023))}return l in mS?mS[l]:(r=!0,"")});return r?null:n}_parseLiteral(t){if(t.length>=3){const r=t.match(/^(?:"""|"|'''|'|)/)[0],n=r.length;let i=Math.max(this._literalClosingPos,n);for(;(i=t.indexOf(r,i))>0;){let s=0;for(;t[i-s-1]==="\\";)s++;if(s%2===0){const a=t.substring(n,i),l=a.split(/\r\n|\r|\n/).length-1,y=i+n;if(n===1&&l!==0||n===3&&this._lineMode)break;return this._line+=l,{value:this._unescape(a),matchLength:y}}i++}this._literalClosingPos=t.length-n+1}return{value:"",matchLength:0}}_syntaxError(t){this._input=null;const r=new Error(`Unexpected "${t}" on line ${this._line}.`);return r.context={token:void 0,line:this._line,previousToken:this.previousToken},r}_readStartingBom(t){return t.startsWith("\uFEFF")?t.substr(1):t}tokenize(t,r){if(this._line=1,typeof t=="string")if(this._input=this._readStartingBom(t),typeof r=="function")OF(()=>this._tokenizeToEnd(r,!0));else{const n=[];let i;if(this._tokenizeToEnd((s,a)=>s?i=s:n.push(a),!0),i)throw i;return n}else this._pendingBuffer=null,typeof t.setEncoding=="function"&&t.setEncoding("utf8"),t.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(r,!1)))}),t.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(r,!0)}),t.on("error",r)}}function MF(e){return!!e&&e.termType==="NamedNode"}function BF(e){return!!e&&e.termType==="BlankNode"}function jF(e){return!!e&&e.termType==="Literal"}function HF(e){return!!e&&e.termType==="Variable"}function Qh(e){return!!e&&e.termType==="DefaultGraph"}function $F(e){return Qh(e.graph)}function WF(e,t){return yR({"":e.value||e},t)("")}function yR(e,t){const r=Object.create(null);for(const i in e)n(i,e[i]);t=t||zu;function n(i,s){if(typeof s=="string"){const a=Object.create(null);r[i]=l=>a[l]||(a[l]=t.namedNode(s+l))}else if(!(i in r))throw new Error(`Unknown prefix: ${i}`);return r[i]}return n}const mR=Object.freeze(Object.defineProperty({__proto__:null,inDefaultGraph:$F,isBlankNode:BF,isDefaultGraph:Qh,isLiteral:jF,isNamedNode:MF,isVariable:HF,prefix:WF,prefixes:yR},Symbol.toStringTag,{value:"Module"})),{rdf:KF,xsd:aa}=fi;let jc,VF=0;const vR=/^"(.*".*)(?="[^"]*$)/,zF=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,Cy={namedNode:qF,blankNode:GF,variable:QF,literal:JF,defaultGraph:YF,quad:vS,triple:vS},zu=Cy;class oo{constructor(t){this.id=t}get value(){return this.id}equals(t){return t instanceof oo?this.id===t.id:!!t&&this.termType===t.termType&&this.value===t.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class Yh extends oo{get termType(){return"NamedNode"}}class Os extends oo{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const t=this.id;let r=t.lastIndexOf('"')+1;return r<t.length&&t[r++]==="@"?t.substr(r).toLowerCase():""}get datatype(){return new Yh(this.datatypeString)}get datatypeString(){const t=this.id,r=t.lastIndexOf('"')+1,n=r<t.length?t[r]:"";return n==="^"?t.substr(r+2):n!=="@"?aa.string:KF.langString}equals(t){return t instanceof Os?this.id===t.id:!!t&&!!t.datatype&&this.termType===t.termType&&this.value===t.value&&this.language===t.language&&this.datatype.value===t.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class $m extends oo{constructor(t){super(`_:${t}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class Wm extends oo{constructor(t){super(`?${t}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class Km extends oo{constructor(){return super(""),jc||this}get termType(){return"DefaultGraph"}equals(t){return this===t||!!t&&this.termType===t.termType}}jc=new Km;function yo(e,t){if(t=t||Cy,!e)return t.defaultGraph();switch(e[0]){case"?":return t.variable(e.substr(1));case"_":return t.blankNode(e.substr(2));case'"':if(t===Cy)return new Os(e);if(e[e.length-1]==='"')return t.literal(e.substr(1,e.length-2));const r=e.lastIndexOf('"',e.length-1);return t.literal(e.substr(1,r-1),e[r+1]==="@"?e.substr(r+2):t.namedNode(e.substr(r+3)));case"<":const n=zF.exec(e);return t.quad(yo(bf(n[1]),t),yo(bf(n[2]),t),yo(bf(n[3]),t),n[4]&&yo(bf(n[4]),t));default:return t.namedNode(e)}}function rn(e){if(typeof e=="string")return e;if(e instanceof oo&&e.termType!=="Quad")return e.id;if(!e)return jc.id;switch(e.termType){case"NamedNode":return e.value;case"BlankNode":return`_:${e.value}`;case"Variable":return`?${e.value}`;case"DefaultGraph":return"";case"Literal":return`"${e.value}"${e.language?`@${e.language}`:e.datatype&&e.datatype.value!==aa.string?`^^${e.datatype.value}`:""}`;case"Quad":return`<<${c0(rn(e.subject))} ${c0(rn(e.predicate))} ${c0(rn(e.object))}${Qh(e.graph)?"":` ${rn(e.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${e.termType}`)}}class kc extends oo{constructor(t,r,n,i){super(""),this._subject=t,this._predicate=r,this._object=n,this._graph=i||jc}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(t){return!!t&&this._subject.equals(t.subject)&&this._predicate.equals(t.predicate)&&this._object.equals(t.object)&&this._graph.equals(t.graph)}}function c0(e){return e.replace(vR,(t,r)=>`"${r.replace(/"/g,'""')}`)}function bf(e){return e.replace(vR,(t,r)=>`"${r.replace(/""/g,'"')}`)}function qF(e){return new Yh(e)}function GF(e){return new $m(e||`n3-${VF++}`)}function JF(e,t){if(typeof t=="string")return new Os(`"${e}"@${t.toLowerCase()}`);let r=t?t.value:"";return r===""&&(typeof e=="boolean"?r=aa.boolean:typeof e=="number"&&(Number.isFinite(e)?r=Number.isInteger(e)?aa.integer:aa.double:(r=aa.double,Number.isNaN(e)||(e=e>0?"INF":"-INF")))),r===""||r===aa.string?new Os(`"${e}"`):new Os(`"${e}"^^${r}`)}function QF(e){return new Wm(e)}function YF(){return jc}function vS(e,t,r,n){return new kc(e,t,r,n)}let wS=0;class Xh{constructor(t){this._contextStack=[],this._graph=null,t=t||{},this._setBase(t.baseIRI),t.factory&&wR(this,t.factory);const r=typeof t.format=="string"?t.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(r),i=/trig/.test(r),s=/triple/.test(r),a=/quad/.test(r),l=this._n3Mode=/n3/.test(r),y=s||a;(this._supportsNamedGraphs=!(n||l))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||i||s||l),this._supportsRDFStar=r===""||/star|\*$/.test(r),y&&(this._resolveRelativeIRI=d=>null),this._blankNodePrefix=typeof t.blankNodePrefix!="string"?"":t.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=t.lexer||new Hm({lineMode:y,n3:l}),this._explicitQuantifiers=!!t.explicitQuantifiers}static _resetBlankNodePrefix(){wS=0}_setBase(t){if(!t)this._base="",this._basePath="";else{const r=t.indexOf("#");r>=0&&(t=t.substr(0,r)),this._base=t,this._basePath=t.indexOf("/")<0?t:t.replace(/[^\/?]*(?:\?.*)?$/,""),t=t.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=t[0],this._baseScheme=t[1]}}_saveContext(t,r,n,i,s){const a=this._n3Mode;this._contextStack.push({type:t,subject:n,predicate:i,object:s,graph:r,inverse:a?this._inversePredicate:!1,blankPrefix:a?this._prefixes._:"",quantified:a?this._quantified:null}),a&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.id.substr(2)}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(t,r){const n=this._contextStack.pop();if(!n||n.type!==t)return this._error(`Unexpected ${r.type}`,r);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(t){switch(t.type){case"eof":return this._graph!==null?this._error("Unclosed graph",t):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(t)}}_readEntity(t,r){let n;switch(t.type){case"IRI":case"typeIRI":const i=this._resolveIRI(t.value);if(i===null)return this._error("Invalid IRI",t);n=this._namedNode(i);break;case"type":case"prefixed":const s=this._prefixes[t.prefix];if(s===void 0)return this._error(`Undefined prefix "${t.prefix}:"`,t);n=this._namedNode(s+t.value);break;case"blank":n=this._blankNode(this._prefixes[t.prefix]+t.value);break;case"var":n=this._variable(t.value.substr(1));break;default:return this._error(`Expected entity but got ${t.type}`,t)}return!r&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(t){switch(this._predicate=null,t.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",t);case"}":return this._readPunctuation(t);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',t);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',t);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",t);if(t.prefix.length===0)return this._literalValue=t.value,this._completeSubjectLiteral;this._subject=this._literal(t.value,this._namedNode(t.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",t);default:if((this._subject=this._readEntity(t))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(t){const r=t.type;switch(r){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[t.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${r}`,t):(this._subject=null,r==="]"?this._readBlankNodeTail(t):this._readPunctuation(t));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",t);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",t);default:if((this._predicate=this._readEntity(t))===void 0)return}return this._readObject}_readObject(t){switch(t.type){case"literal":if(t.prefix.length===0)return this._literalValue=t.value,this._readDataTypeOrLang;this._object=this._literal(t.value,this._namedNode(t.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",t);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",t);default:if((this._object=this._readEntity(t))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(t){return t.type==="{"?this._readGraph(t):this._readPredicate(t)}_readGraph(t){return t.type!=="{"?this._error(`Expected graph but got ${t.type}`,t):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(t){return t.type==="]"?(this._subject=null,this._readBlankNodeTail(t)):(this._predicate=null,this._readPredicate(t))}_readBlankNodeTail(t){if(t.type!=="]")return this._readBlankNodePunctuation(t);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const r=this._predicate===null;return this._restoreContext("blank",t),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:r?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(t){switch(t.type){case".":case"}":return this._subject=null,this._readPunctuation(t);default:return this._readPredicate(t)}}_readListItem(t){let r=null,n=null,i=this._readListItem;const s=this._subject,a=this._contextStack,l=a[a.length-1];switch(t.type){case"[":this._saveContext("blank",this._graph,n=this._blankNode(),this.RDF_FIRST,this._subject=r=this._blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",t),a.length!==0&&a[a.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;n=this.RDF_NIL;break;case"literal":t.prefix.length===0?(this._literalValue=t.value,i=this._readListItemDataTypeOrLang):(r=this._literal(t.value,this._namedNode(t.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",t);default:if((r=this._readEntity(t))===void 0)return}if(n===null&&(this._subject=n=this._blankNode()),s===null?l.predicate===null?l.subject=n:l.object=n:this._emit(s,this.RDF_REST,n,this._graph),r!==null){if(this._n3Mode&&(t.type==="IRI"||t.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,r),this._subject=r,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,r,this._graph)}return i}_readDataTypeOrLang(t){return this._completeObjectLiteral(t,!1)}_readListItemDataTypeOrLang(t){return this._completeObjectLiteral(t,!0)}_completeLiteral(t){let r=this._literal(this._literalValue);switch(t.type){case"type":case"typeIRI":const n=this._readEntity(t);if(n===void 0)return;r=this._literal(this._literalValue,n),t=null;break;case"langcode":r=this._literal(this._literalValue,t.value),t=null;break}return{token:t,literal:r}}_completeSubjectLiteral(t){return this._subject=this._completeLiteral(t).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(t,r){const n=this._completeLiteral(t);if(n)return this._object=n.literal,r&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(t){return t.type!=="}"?this._readPunctuation(t):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",t),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(t){let r,n=this._graph;const i=this._subject,s=this._inversePredicate;switch(t.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",t);if(this._n3Mode)return this._readFormulaTail(t);this._graph=null;case".":this._subject=null,r=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(t))!==void 0){r=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,t)}if(i!==null){const a=this._predicate,l=this._object;s?this._emit(l,a,i,n):this._emit(i,a,l,n)}return r}_readBlankNodePunctuation(t){let r;switch(t.type){case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,t)}return this._emit(this._subject,this._predicate,this._object,this._graph),r}_readQuadPunctuation(t){return t.type!=="."?this._error("Expected dot to follow quad",t):this._readInTopContext}_readPrefix(t){return t.type!=="prefix"?this._error("Expected prefix to follow @prefix",t):(this._prefix=t.value,this._readPrefixIRI)}_readPrefixIRI(t){if(t.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,t);const r=this._readEntity(t);return this._prefixes[this._prefix]=r.value,this._prefixCallback(this._prefix,r),this._readDeclarationPunctuation}_readBaseIRI(t){const r=t.type==="IRI"&&this._resolveIRI(t.value);return r?(this._setBase(r),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",t)}_readNamedGraphLabel(t){switch(t.type){case"IRI":case"blank":case"prefixed":return this._readSubject(t),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",t)}}_readNamedGraphBlankLabel(t){return t.type!=="]"?this._error("Invalid graph label",t):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(t){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(t)):t.type!=="."?this._error("Expected declaration to end with a dot",t):this._readInTopContext}_readQuantifierList(t){let r;switch(t.type){case"IRI":case"prefixed":if((r=this._readEntity(t,!0))!==void 0)break;default:return this._error(`Unexpected ${t.type}`,t)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,r,this.QUANTIFIERS_GRAPH)):this._quantified[r.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(t){return t.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(t))}_getPathReader(t){return this._afterPath=t,this._readPath}_readPath(t){switch(t.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const r=this._contextStack,n=r.length&&r[r.length-1];if(n&&n.type==="item"){const i=this._subject;this._restoreContext("item",t),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(t)}}_readForwardPath(t){let r,n;const i=this._blankNode();if((n=this._readEntity(t))!==void 0)return this._predicate===null?(r=this._subject,this._subject=i):(r=this._object,this._object=i),this._emit(r,n,i,this._graph),this._readPath}_readBackwardPath(t){const r=this._blankNode();let n,i;if((n=this._readEntity(t))!==void 0)return this._predicate===null?(i=this._subject,this._subject=r):(i=this._object,this._object=r),this._emit(r,n,i,this._graph),this._readPath}_readRDFStarTailOrGraph(t){return t.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(t))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,t):this._readRDFStarTail(t)}_readRDFStarTail(t){if(t.type!==">>")return this._error(`Expected >> but got ${t.type}`,t);const r=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",t),this._subject===null?(this._subject=r,this._readPredicate):(this._object=r,this._getContextEndReader())}_getContextEndReader(){const t=this._contextStack;if(!t.length)return this._readPunctuation;switch(t[t.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(t,r,n,i){this._callback(null,this._quad(t,r,n,i||this.DEFAULTGRAPH))}_error(t,r){const n=new Error(`${t} on line ${r.line}.`);n.context={token:r,line:r.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=d0}_resolveIRI(t){return/^[a-z][a-z0-9+.-]*:/i.test(t)?t:this._resolveRelativeIRI(t)}_resolveRelativeIRI(t){if(!t.length)return this._base;switch(t[0]){case"#":return this._base+t;case"?":return this._base.replace(/(?:\?.*)?$/,t);case"/":return(t[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(t);default:return/^[^/:]*:/.test(t)?null:this._removeDotSegments(this._basePath+t)}}_removeDotSegments(t){if(!/(^|\/)\.\.?($|[/#?])/.test(t))return t;const r=t.length;let n="",i=-1,s=-1,a=0,l="/";for(;i<r;){switch(l){case":":if(s<0&&t[++i]==="/"&&t[++i]==="/")for(;(s=i+1)<r&&t[s]!=="/";)i=s;break;case"?":case"#":i=r;break;case"/":if(t[i+1]===".")switch(l=t[++i+1],l){case"/":n+=t.substring(a,i-1),a=i+1;break;case void 0:case"?":case"#":return n+t.substring(a,i)+t.substr(i+1);case".":if(l=t[++i+1],l===void 0||l==="/"||l==="?"||l==="#"){if(n+=t.substring(a,i-2),(a=n.lastIndexOf("/"))>=s&&(n=n.substr(0,a)),l!=="/")return`${n}/${t.substr(i+1)}`;a=i+1}}}l=t[++i]}return n+t.substring(a)}parse(t,r,n){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${wS++}_`,this._prefixCallback=n||d0,this._inversePredicate=!1,this._quantified=Object.create(null),!r){const i=[];let s;if(this._callback=(a,l)=>{a?s=a:l&&i.push(l)},this._lexer.tokenize(t).every(a=>this._readCallback=this._readCallback(a)),s)throw s;return i}this._callback=r,this._lexer.tokenize(t,(i,s)=>{i!==null?(this._callback(i),this._callback=d0):this._readCallback&&(this._readCallback=this._readCallback(s))})}}function d0(){}function wR(e,t){const r=t.namedNode;e._namedNode=r,e._blankNode=t.blankNode,e._literal=t.literal,e._variable=t.variable,e._quad=t.quad,e.DEFAULTGRAPH=t.defaultGraph(),e.RDF_FIRST=r(fi.rdf.first),e.RDF_REST=r(fi.rdf.rest),e.RDF_NIL=r(fi.rdf.nil),e.N3_FORALL=r(fi.r.forAll),e.N3_FORSOME=r(fi.r.forSome),e.ABBREVIATIONS={a:r(fi.rdf.type),"=":r(fi.owl.sameAs),">":r(fi.log.implies)},e.QUANTIFIERS_GRAPH=r("urn:n3:quantifiers")}wR(Xh.prototype,zu);const kl=zu.defaultGraph(),{rdf:XF,xsd:lu}=fi,_S=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,SS=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,ZF={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class Ol extends oo{equals(){return!1}}class Vm{constructor(t,r){if(this._prefixRegex=/$0^/,t&&typeof t.write!="function"&&(r=t,t=null),r=r||{},this._lists=r.lists,t)this._outputStream=t,this._endStream=r.end===void 0?!0:!!r.end;else{let n="";this._outputStream={write(i,s,a){n+=i,a&&a()},end:i=>{i&&i(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(r.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=kl,this._prefixIRIs=Object.create(null),r.prefixes&&this.addPrefixes(r.prefixes),r.baseIRI&&(this._baseMatcher=new RegExp(`^${ES(r.baseIRI)}${r.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=r.baseIRI.length))}get _inDefaultGraph(){return kl.equals(this._graph)}_write(t,r){this._outputStream.write(t,"utf8",r)}_writeQuad(t,r,n,i,s){try{i.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(kl.equals(i)?"":`${this._encodeIriOrBlank(i)} {
`)),this._graph=i,this._subject=null),t.equals(this._subject)?r.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,s):this._write(`;
    ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,s):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=t)} ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,s)}catch(a){s&&s(a)}}_writeQuadLine(t,r,n,i,s){delete this._prefixMatch,this._write(this.quadToString(t,r,n,i),s)}quadToString(t,r,n,i){return`${this._encodeSubject(t)} ${this._encodeIriOrBlank(r)} ${this._encodeObject(n)}${i&&i.value?` ${this._encodeIriOrBlank(i)} .
`:` .
`}`}quadsToString(t){return t.map(r=>this.quadToString(r.subject,r.predicate,r.object,r.graph)).join("")}_encodeSubject(t){return t.termType==="Quad"?this._encodeQuad(t):this._encodeIriOrBlank(t)}_encodeIriOrBlank(t){if(t.termType!=="NamedNode")return this._lists&&t.value in this._lists&&(t=this.list(this._lists[t.value])),"id"in t?t.id:`_:${t.value}`;let r=t.value;this._baseMatcher&&this._baseMatcher.test(r)&&(r=r.substr(this._baseLength)),_S.test(r)&&(r=r.replace(SS,bS));const n=this._prefixRegex.exec(r);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:r:`<${r}>`}_encodeLiteral(t){let r=t.value;if(_S.test(r)&&(r=r.replace(SS,bS)),t.language)return`"${r}"@${t.language}`;if(this._lineMode){if(t.datatype.value===lu.string)return`"${r}"`}else switch(t.datatype.value){case lu.string:return`"${r}"`;case lu.boolean:if(r==="true"||r==="false")return r;break;case lu.integer:if(/^[+-]?\d+$/.test(r))return r;break;case lu.decimal:if(/^[+-]?\d*\.\d+$/.test(r))return r;break;case lu.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(r))return r;break}return`"${r}"^^${this._encodeIriOrBlank(t.datatype)}`}_encodePredicate(t){return t.value===XF.type?"a":this._encodeIriOrBlank(t)}_encodeObject(t){switch(t.termType){case"Quad":return this._encodeQuad(t);case"Literal":return this._encodeLiteral(t);default:return this._encodeIriOrBlank(t)}}_encodeQuad({subject:t,predicate:r,object:n,graph:i}){return`<<${this._encodeSubject(t)} ${this._encodePredicate(r)} ${this._encodeObject(n)}${Qh(i)?"":` ${this._encodeIriOrBlank(i)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(t,r,n,i,s){n===void 0?this._writeQuad(t.subject,t.predicate,t.object,t.graph,r):typeof i=="function"?this._writeQuad(t,r,n,kl,i):this._writeQuad(t,r,n,i||kl,s)}addQuads(t){for(let r=0;r<t.length;r++)this.addQuad(t[r])}addPrefix(t,r,n){const i={};i[t]=r,this.addPrefixes(i,n)}addPrefixes(t,r){if(!this._prefixIRIs)return r&&r();let n=!1;for(let i in t){let s=t[i];typeof s!="string"&&(s=s.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[s]=i+=":",this._write(`@prefix ${i} <${s}>.
`)}if(n){let i="",s="";for(const a in this._prefixIRIs)i+=i?`|${a}`:a,s+=(s?"|":"")+this._prefixIRIs[a];i=ES(i),this._prefixRegex=new RegExp(`^(?:${s})[^/]*$|^(${i})([_a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",r)}blank(t,r){let n=t,i,s;switch(t===void 0?n=[]:t.termType?n=[{predicate:t,object:r}]:"length"in t||(n=[t]),s=n.length){case 0:return new Ol("[]");case 1:if(i=n[0],!(i.object instanceof Ol))return new Ol(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let a="[";for(let l=0;l<s;l++)i=n[l],i.predicate.equals(t)?a+=`, ${this._encodeObject(i.object)}`:(a+=`${(l?`;
  `:`
  `)+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,t=i.predicate);return new Ol(`${a}
]`)}}list(t){const r=t&&t.length||0,n=new Array(r);for(let i=0;i<r;i++)n[i]=this._encodeObject(t[i]);return new Ol(`(${n.join(" ")})`)}end(t){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let r=t&&((n,i)=>{r=null,t(n,i)});if(this._endStream)try{return this._outputStream.end(r)}catch{}r&&r()}}function bS(e){let t=ZF[e];return t===void 0&&(e.length===1?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=((e.charCodeAt(0)-55296)*1024+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}function ES(e){return e.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}var Hu={},eI={get exports(){return Hu},set exports(e){Hu=e}},Py={},tI={get exports(){return Py},set exports(e){Py=e}},Hs={},Hc={};Hc.byteLength=iI;Hc.toByteArray=sI;Hc.fromByteArray=lI;var Oo=[],Yi=[],rI=typeof Uint8Array<"u"?Uint8Array:Array,f0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var cu=0,nI=f0.length;cu<nI;++cu)Oo[cu]=f0[cu],Yi[f0.charCodeAt(cu)]=cu;Yi["-".charCodeAt(0)]=62;Yi["_".charCodeAt(0)]=63;function _R(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function iI(e){var t=_R(e),r=t[0],n=t[1];return(r+n)*3/4-n}function oI(e,t,r){return(t+r)*3/4-r}function sI(e){var t,r=_R(e),n=r[0],i=r[1],s=new rI(oI(e,n,i)),a=0,l=i>0?n-4:n,y;for(y=0;y<l;y+=4)t=Yi[e.charCodeAt(y)]<<18|Yi[e.charCodeAt(y+1)]<<12|Yi[e.charCodeAt(y+2)]<<6|Yi[e.charCodeAt(y+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=t&255;return i===2&&(t=Yi[e.charCodeAt(y)]<<2|Yi[e.charCodeAt(y+1)]>>4,s[a++]=t&255),i===1&&(t=Yi[e.charCodeAt(y)]<<10|Yi[e.charCodeAt(y+1)]<<4|Yi[e.charCodeAt(y+2)]>>2,s[a++]=t>>8&255,s[a++]=t&255),s}function aI(e){return Oo[e>>18&63]+Oo[e>>12&63]+Oo[e>>6&63]+Oo[e&63]}function uI(e,t,r){for(var n,i=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),i.push(aI(n));return i.join("")}function lI(e){for(var t,r=e.length,n=r%3,i=[],s=16383,a=0,l=r-n;a<l;a+=s)i.push(uI(e,a,a+s>l?l:a+s));return n===1?(t=e[r-1],i.push(Oo[t>>2]+Oo[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],i.push(Oo[t>>10]+Oo[t>>4&63]+Oo[t<<2&63]+"=")),i.join("")}var Zh={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Zh.read=function(e,t,r,n,i){var s,a,l=i*8-n-1,y=(1<<l)-1,d=y>>1,m=-7,g=r?i-1:0,E=r?-1:1,b=e[t+g];for(g+=E,s=b&(1<<-m)-1,b>>=-m,m+=l;m>0;s=s*256+e[t+g],g+=E,m-=8);for(a=s&(1<<-m)-1,s>>=-m,m+=n;m>0;a=a*256+e[t+g],g+=E,m-=8);if(s===0)s=1-d;else{if(s===y)return a?NaN:(b?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-d}return(b?-1:1)*a*Math.pow(2,s-n)};Zh.write=function(e,t,r,n,i,s){var a,l,y,d=s*8-i-1,m=(1<<d)-1,g=m>>1,E=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:s-1,P=n?1:-1,I=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,a=m):(a=Math.floor(Math.log(t)/Math.LN2),t*(y=Math.pow(2,-a))<1&&(a--,y*=2),a+g>=1?t+=E/y:t+=E*Math.pow(2,1-g),t*y>=2&&(a++,y/=2),a+g>=m?(l=0,a=m):a+g>=1?(l=(t*y-1)*Math.pow(2,i),a=a+g):(l=t*Math.pow(2,g-1)*Math.pow(2,i),a=0));i>=8;e[r+b]=l&255,b+=P,l/=256,i-=8);for(a=a<<i|l,d+=i;d>0;e[r+b]=a&255,b+=P,a/=256,d-=8);e[r+b-P]|=I*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Hc,r=Zh,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=R,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const j=new Uint8Array(1),S={foo:function(){return 42}};return Object.setPrototypeOf(S,Uint8Array.prototype),Object.setPrototypeOf(j,S),j.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function a(j){if(j>i)throw new RangeError('The value "'+j+'" is invalid for option "size"');const S=new Uint8Array(j);return Object.setPrototypeOf(S,l.prototype),S}function l(j,S,k){if(typeof j=="number"){if(typeof S=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(j)}return y(j,S,k)}l.poolSize=8192;function y(j,S,k){if(typeof j=="string")return E(j,S);if(ArrayBuffer.isView(j))return P(j);if(j==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(qe(j,ArrayBuffer)||j&&qe(j.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(qe(j,SharedArrayBuffer)||j&&qe(j.buffer,SharedArrayBuffer)))return I(j,S,k);if(typeof j=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const w=j.valueOf&&j.valueOf();if(w!=null&&w!==j)return l.from(w,S,k);const ce=D(j);if(ce)return ce;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof j[Symbol.toPrimitive]=="function")return l.from(j[Symbol.toPrimitive]("string"),S,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}l.from=function(j,S,k){return y(j,S,k)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function d(j){if(typeof j!="number")throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function m(j,S,k){return d(j),j<=0?a(j):S!==void 0?typeof k=="string"?a(j).fill(S,k):a(j).fill(S):a(j)}l.alloc=function(j,S,k){return m(j,S,k)};function g(j){return d(j),a(j<0?0:A(j)|0)}l.allocUnsafe=function(j){return g(j)},l.allocUnsafeSlow=function(j){return g(j)};function E(j,S){if((typeof S!="string"||S==="")&&(S="utf8"),!l.isEncoding(S))throw new TypeError("Unknown encoding: "+S);const k=N(j,S)|0;let w=a(k);const ce=w.write(j,S);return ce!==k&&(w=w.slice(0,ce)),w}function b(j){const S=j.length<0?0:A(j.length)|0,k=a(S);for(let w=0;w<S;w+=1)k[w]=j[w]&255;return k}function P(j){if(qe(j,Uint8Array)){const S=new Uint8Array(j);return I(S.buffer,S.byteOffset,S.byteLength)}return b(j)}function I(j,S,k){if(S<0||j.byteLength<S)throw new RangeError('"offset" is outside of buffer bounds');if(j.byteLength<S+(k||0))throw new RangeError('"length" is outside of buffer bounds');let w;return S===void 0&&k===void 0?w=new Uint8Array(j):k===void 0?w=new Uint8Array(j,S):w=new Uint8Array(j,S,k),Object.setPrototypeOf(w,l.prototype),w}function D(j){if(l.isBuffer(j)){const S=A(j.length)|0,k=a(S);return k.length===0||j.copy(k,0,0,S),k}if(j.length!==void 0)return typeof j.length!="number"||Et(j.length)?a(0):b(j);if(j.type==="Buffer"&&Array.isArray(j.data))return b(j.data)}function A(j){if(j>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return j|0}function R(j){return+j!=j&&(j=0),l.alloc(+j)}l.isBuffer=function(S){return S!=null&&S._isBuffer===!0&&S!==l.prototype},l.compare=function(S,k){if(qe(S,Uint8Array)&&(S=l.from(S,S.offset,S.byteLength)),qe(k,Uint8Array)&&(k=l.from(k,k.offset,k.byteLength)),!l.isBuffer(S)||!l.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(S===k)return 0;let w=S.length,ce=k.length;for(let Ae=0,de=Math.min(w,ce);Ae<de;++Ae)if(S[Ae]!==k[Ae]){w=S[Ae],ce=k[Ae];break}return w<ce?-1:ce<w?1:0},l.isEncoding=function(S){switch(String(S).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(S,k){if(!Array.isArray(S))throw new TypeError('"list" argument must be an Array of Buffers');if(S.length===0)return l.alloc(0);let w;if(k===void 0)for(k=0,w=0;w<S.length;++w)k+=S[w].length;const ce=l.allocUnsafe(k);let Ae=0;for(w=0;w<S.length;++w){let de=S[w];if(qe(de,Uint8Array))Ae+de.length>ce.length?(l.isBuffer(de)||(de=l.from(de)),de.copy(ce,Ae)):Uint8Array.prototype.set.call(ce,de,Ae);else if(l.isBuffer(de))de.copy(ce,Ae);else throw new TypeError('"list" argument must be an Array of Buffers');Ae+=de.length}return ce};function N(j,S){if(l.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||qe(j,ArrayBuffer))return j.byteLength;if(typeof j!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);const k=j.length,w=arguments.length>2&&arguments[2]===!0;if(!w&&k===0)return 0;let ce=!1;for(;;)switch(S){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return C(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k*2;case"hex":return k>>>1;case"base64":return Re(j).length;default:if(ce)return w?-1:C(j).length;S=(""+S).toLowerCase(),ce=!0}}l.byteLength=N;function L(j,S,k){let w=!1;if((S===void 0||S<0)&&(S=0),S>this.length||((k===void 0||k>this.length)&&(k=this.length),k<=0)||(k>>>=0,S>>>=0,k<=S))return"";for(j||(j="utf8");;)switch(j){case"hex":return Je(this,S,k);case"utf8":case"utf-8":return Te(this,S,k);case"ascii":return Ct(this,S,k);case"latin1":case"binary":return $e(this,S,k);case"base64":return ft(this,S,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ke(this,S,k);default:if(w)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),w=!0}}l.prototype._isBuffer=!0;function W(j,S,k){const w=j[S];j[S]=j[k],j[k]=w}l.prototype.swap16=function(){const S=this.length;if(S%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let k=0;k<S;k+=2)W(this,k,k+1);return this},l.prototype.swap32=function(){const S=this.length;if(S%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let k=0;k<S;k+=4)W(this,k,k+3),W(this,k+1,k+2);return this},l.prototype.swap64=function(){const S=this.length;if(S%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let k=0;k<S;k+=8)W(this,k,k+7),W(this,k+1,k+6),W(this,k+2,k+5),W(this,k+3,k+4);return this},l.prototype.toString=function(){const S=this.length;return S===0?"":arguments.length===0?Te(this,0,S):L.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(S){if(!l.isBuffer(S))throw new TypeError("Argument must be a Buffer");return this===S?!0:l.compare(this,S)===0},l.prototype.inspect=function(){let S="";const k=e.INSPECT_MAX_BYTES;return S=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&(S+=" ... "),"<Buffer "+S+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(S,k,w,ce,Ae){if(qe(S,Uint8Array)&&(S=l.from(S,S.offset,S.byteLength)),!l.isBuffer(S))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof S);if(k===void 0&&(k=0),w===void 0&&(w=S?S.length:0),ce===void 0&&(ce=0),Ae===void 0&&(Ae=this.length),k<0||w>S.length||ce<0||Ae>this.length)throw new RangeError("out of range index");if(ce>=Ae&&k>=w)return 0;if(ce>=Ae)return-1;if(k>=w)return 1;if(k>>>=0,w>>>=0,ce>>>=0,Ae>>>=0,this===S)return 0;let de=Ae-ce,je=w-k;const Tt=Math.min(de,je),Yt=this.slice(ce,Ae),wt=S.slice(k,w);for(let we=0;we<Tt;++we)if(Yt[we]!==wt[we]){de=Yt[we],je=wt[we];break}return de<je?-1:je<de?1:0};function q(j,S,k,w,ce){if(j.length===0)return-1;if(typeof k=="string"?(w=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,Et(k)&&(k=ce?0:j.length-1),k<0&&(k=j.length+k),k>=j.length){if(ce)return-1;k=j.length-1}else if(k<0)if(ce)k=0;else return-1;if(typeof S=="string"&&(S=l.from(S,w)),l.isBuffer(S))return S.length===0?-1:J(j,S,k,w,ce);if(typeof S=="number")return S=S&255,typeof Uint8Array.prototype.indexOf=="function"?ce?Uint8Array.prototype.indexOf.call(j,S,k):Uint8Array.prototype.lastIndexOf.call(j,S,k):J(j,[S],k,w,ce);throw new TypeError("val must be string, number or Buffer")}function J(j,S,k,w,ce){let Ae=1,de=j.length,je=S.length;if(w!==void 0&&(w=String(w).toLowerCase(),w==="ucs2"||w==="ucs-2"||w==="utf16le"||w==="utf-16le")){if(j.length<2||S.length<2)return-1;Ae=2,de/=2,je/=2,k/=2}function Tt(wt,we){return Ae===1?wt[we]:wt.readUInt16BE(we*Ae)}let Yt;if(ce){let wt=-1;for(Yt=k;Yt<de;Yt++)if(Tt(j,Yt)===Tt(S,wt===-1?0:Yt-wt)){if(wt===-1&&(wt=Yt),Yt-wt+1===je)return wt*Ae}else wt!==-1&&(Yt-=Yt-wt),wt=-1}else for(k+je>de&&(k=de-je),Yt=k;Yt>=0;Yt--){let wt=!0;for(let we=0;we<je;we++)if(Tt(j,Yt+we)!==Tt(S,we)){wt=!1;break}if(wt)return Yt}return-1}l.prototype.includes=function(S,k,w){return this.indexOf(S,k,w)!==-1},l.prototype.indexOf=function(S,k,w){return q(this,S,k,w,!0)},l.prototype.lastIndexOf=function(S,k,w){return q(this,S,k,w,!1)};function ve(j,S,k,w){k=Number(k)||0;const ce=j.length-k;w?(w=Number(w),w>ce&&(w=ce)):w=ce;const Ae=S.length;w>Ae/2&&(w=Ae/2);let de;for(de=0;de<w;++de){const je=parseInt(S.substr(de*2,2),16);if(Et(je))return de;j[k+de]=je}return de}function Fe(j,S,k,w){return Le(C(S,j.length-k),j,k,w)}function z(j,S,k,w){return Le(U(S),j,k,w)}function De(j,S,k,w){return Le(Re(S),j,k,w)}function xt(j,S,k,w){return Le(ne(S,j.length-k),j,k,w)}l.prototype.write=function(S,k,w,ce){if(k===void 0)ce="utf8",w=this.length,k=0;else if(w===void 0&&typeof k=="string")ce=k,w=this.length,k=0;else if(isFinite(k))k=k>>>0,isFinite(w)?(w=w>>>0,ce===void 0&&(ce="utf8")):(ce=w,w=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ae=this.length-k;if((w===void 0||w>Ae)&&(w=Ae),S.length>0&&(w<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");ce||(ce="utf8");let de=!1;for(;;)switch(ce){case"hex":return ve(this,S,k,w);case"utf8":case"utf-8":return Fe(this,S,k,w);case"ascii":case"latin1":case"binary":return z(this,S,k,w);case"base64":return De(this,S,k,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xt(this,S,k,w);default:if(de)throw new TypeError("Unknown encoding: "+ce);ce=(""+ce).toLowerCase(),de=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ft(j,S,k){return S===0&&k===j.length?t.fromByteArray(j):t.fromByteArray(j.slice(S,k))}function Te(j,S,k){k=Math.min(j.length,k);const w=[];let ce=S;for(;ce<k;){const Ae=j[ce];let de=null,je=Ae>239?4:Ae>223?3:Ae>191?2:1;if(ce+je<=k){let Tt,Yt,wt,we;switch(je){case 1:Ae<128&&(de=Ae);break;case 2:Tt=j[ce+1],(Tt&192)===128&&(we=(Ae&31)<<6|Tt&63,we>127&&(de=we));break;case 3:Tt=j[ce+1],Yt=j[ce+2],(Tt&192)===128&&(Yt&192)===128&&(we=(Ae&15)<<12|(Tt&63)<<6|Yt&63,we>2047&&(we<55296||we>57343)&&(de=we));break;case 4:Tt=j[ce+1],Yt=j[ce+2],wt=j[ce+3],(Tt&192)===128&&(Yt&192)===128&&(wt&192)===128&&(we=(Ae&15)<<18|(Tt&63)<<12|(Yt&63)<<6|wt&63,we>65535&&we<1114112&&(de=we))}}de===null?(de=65533,je=1):de>65535&&(de-=65536,w.push(de>>>10&1023|55296),de=56320|de&1023),w.push(de),ce+=je}return st(w)}const He=4096;function st(j){const S=j.length;if(S<=He)return String.fromCharCode.apply(String,j);let k="",w=0;for(;w<S;)k+=String.fromCharCode.apply(String,j.slice(w,w+=He));return k}function Ct(j,S,k){let w="";k=Math.min(j.length,k);for(let ce=S;ce<k;++ce)w+=String.fromCharCode(j[ce]&127);return w}function $e(j,S,k){let w="";k=Math.min(j.length,k);for(let ce=S;ce<k;++ce)w+=String.fromCharCode(j[ce]);return w}function Je(j,S,k){const w=j.length;(!S||S<0)&&(S=0),(!k||k<0||k>w)&&(k=w);let ce="";for(let Ae=S;Ae<k;++Ae)ce+=Wt[j[Ae]];return ce}function ke(j,S,k){const w=j.slice(S,k);let ce="";for(let Ae=0;Ae<w.length-1;Ae+=2)ce+=String.fromCharCode(w[Ae]+w[Ae+1]*256);return ce}l.prototype.slice=function(S,k){const w=this.length;S=~~S,k=k===void 0?w:~~k,S<0?(S+=w,S<0&&(S=0)):S>w&&(S=w),k<0?(k+=w,k<0&&(k=0)):k>w&&(k=w),k<S&&(k=S);const ce=this.subarray(S,k);return Object.setPrototypeOf(ce,l.prototype),ce};function Xe(j,S,k){if(j%1!==0||j<0)throw new RangeError("offset is not uint");if(j+S>k)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(S,k,w){S=S>>>0,k=k>>>0,w||Xe(S,k,this.length);let ce=this[S],Ae=1,de=0;for(;++de<k&&(Ae*=256);)ce+=this[S+de]*Ae;return ce},l.prototype.readUintBE=l.prototype.readUIntBE=function(S,k,w){S=S>>>0,k=k>>>0,w||Xe(S,k,this.length);let ce=this[S+--k],Ae=1;for(;k>0&&(Ae*=256);)ce+=this[S+--k]*Ae;return ce},l.prototype.readUint8=l.prototype.readUInt8=function(S,k){return S=S>>>0,k||Xe(S,1,this.length),this[S]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(S,k){return S=S>>>0,k||Xe(S,2,this.length),this[S]|this[S+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(S,k){return S=S>>>0,k||Xe(S,2,this.length),this[S]<<8|this[S+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(S,k){return S=S>>>0,k||Xe(S,4,this.length),(this[S]|this[S+1]<<8|this[S+2]<<16)+this[S+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(S,k){return S=S>>>0,k||Xe(S,4,this.length),this[S]*16777216+(this[S+1]<<16|this[S+2]<<8|this[S+3])},l.prototype.readBigUInt64LE=Y(function(S){S=S>>>0,F(S,"offset");const k=this[S],w=this[S+7];(k===void 0||w===void 0)&&K(S,this.length-8);const ce=k+this[++S]*2**8+this[++S]*2**16+this[++S]*2**24,Ae=this[++S]+this[++S]*2**8+this[++S]*2**16+w*2**24;return BigInt(ce)+(BigInt(Ae)<<BigInt(32))}),l.prototype.readBigUInt64BE=Y(function(S){S=S>>>0,F(S,"offset");const k=this[S],w=this[S+7];(k===void 0||w===void 0)&&K(S,this.length-8);const ce=k*2**24+this[++S]*2**16+this[++S]*2**8+this[++S],Ae=this[++S]*2**24+this[++S]*2**16+this[++S]*2**8+w;return(BigInt(ce)<<BigInt(32))+BigInt(Ae)}),l.prototype.readIntLE=function(S,k,w){S=S>>>0,k=k>>>0,w||Xe(S,k,this.length);let ce=this[S],Ae=1,de=0;for(;++de<k&&(Ae*=256);)ce+=this[S+de]*Ae;return Ae*=128,ce>=Ae&&(ce-=Math.pow(2,8*k)),ce},l.prototype.readIntBE=function(S,k,w){S=S>>>0,k=k>>>0,w||Xe(S,k,this.length);let ce=k,Ae=1,de=this[S+--ce];for(;ce>0&&(Ae*=256);)de+=this[S+--ce]*Ae;return Ae*=128,de>=Ae&&(de-=Math.pow(2,8*k)),de},l.prototype.readInt8=function(S,k){return S=S>>>0,k||Xe(S,1,this.length),this[S]&128?(255-this[S]+1)*-1:this[S]},l.prototype.readInt16LE=function(S,k){S=S>>>0,k||Xe(S,2,this.length);const w=this[S]|this[S+1]<<8;return w&32768?w|4294901760:w},l.prototype.readInt16BE=function(S,k){S=S>>>0,k||Xe(S,2,this.length);const w=this[S+1]|this[S]<<8;return w&32768?w|4294901760:w},l.prototype.readInt32LE=function(S,k){return S=S>>>0,k||Xe(S,4,this.length),this[S]|this[S+1]<<8|this[S+2]<<16|this[S+3]<<24},l.prototype.readInt32BE=function(S,k){return S=S>>>0,k||Xe(S,4,this.length),this[S]<<24|this[S+1]<<16|this[S+2]<<8|this[S+3]},l.prototype.readBigInt64LE=Y(function(S){S=S>>>0,F(S,"offset");const k=this[S],w=this[S+7];(k===void 0||w===void 0)&&K(S,this.length-8);const ce=this[S+4]+this[S+5]*2**8+this[S+6]*2**16+(w<<24);return(BigInt(ce)<<BigInt(32))+BigInt(k+this[++S]*2**8+this[++S]*2**16+this[++S]*2**24)}),l.prototype.readBigInt64BE=Y(function(S){S=S>>>0,F(S,"offset");const k=this[S],w=this[S+7];(k===void 0||w===void 0)&&K(S,this.length-8);const ce=(k<<24)+this[++S]*2**16+this[++S]*2**8+this[++S];return(BigInt(ce)<<BigInt(32))+BigInt(this[++S]*2**24+this[++S]*2**16+this[++S]*2**8+w)}),l.prototype.readFloatLE=function(S,k){return S=S>>>0,k||Xe(S,4,this.length),r.read(this,S,!0,23,4)},l.prototype.readFloatBE=function(S,k){return S=S>>>0,k||Xe(S,4,this.length),r.read(this,S,!1,23,4)},l.prototype.readDoubleLE=function(S,k){return S=S>>>0,k||Xe(S,8,this.length),r.read(this,S,!0,52,8)},l.prototype.readDoubleBE=function(S,k){return S=S>>>0,k||Xe(S,8,this.length),r.read(this,S,!1,52,8)};function vt(j,S,k,w,ce,Ae){if(!l.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(S>ce||S<Ae)throw new RangeError('"value" argument is out of bounds');if(k+w>j.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(S,k,w,ce){if(S=+S,k=k>>>0,w=w>>>0,!ce){const je=Math.pow(2,8*w)-1;vt(this,S,k,w,je,0)}let Ae=1,de=0;for(this[k]=S&255;++de<w&&(Ae*=256);)this[k+de]=S/Ae&255;return k+w},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(S,k,w,ce){if(S=+S,k=k>>>0,w=w>>>0,!ce){const je=Math.pow(2,8*w)-1;vt(this,S,k,w,je,0)}let Ae=w-1,de=1;for(this[k+Ae]=S&255;--Ae>=0&&(de*=256);)this[k+Ae]=S/de&255;return k+w},l.prototype.writeUint8=l.prototype.writeUInt8=function(S,k,w){return S=+S,k=k>>>0,w||vt(this,S,k,1,255,0),this[k]=S&255,k+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(S,k,w){return S=+S,k=k>>>0,w||vt(this,S,k,2,65535,0),this[k]=S&255,this[k+1]=S>>>8,k+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(S,k,w){return S=+S,k=k>>>0,w||vt(this,S,k,2,65535,0),this[k]=S>>>8,this[k+1]=S&255,k+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(S,k,w){return S=+S,k=k>>>0,w||vt(this,S,k,4,4294967295,0),this[k+3]=S>>>24,this[k+2]=S>>>16,this[k+1]=S>>>8,this[k]=S&255,k+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(S,k,w){return S=+S,k=k>>>0,w||vt(this,S,k,4,4294967295,0),this[k]=S>>>24,this[k+1]=S>>>16,this[k+2]=S>>>8,this[k+3]=S&255,k+4};function vr(j,S,k,w,ce){M(S,w,ce,j,k,7);let Ae=Number(S&BigInt(4294967295));j[k++]=Ae,Ae=Ae>>8,j[k++]=Ae,Ae=Ae>>8,j[k++]=Ae,Ae=Ae>>8,j[k++]=Ae;let de=Number(S>>BigInt(32)&BigInt(4294967295));return j[k++]=de,de=de>>8,j[k++]=de,de=de>>8,j[k++]=de,de=de>>8,j[k++]=de,k}function pr(j,S,k,w,ce){M(S,w,ce,j,k,7);let Ae=Number(S&BigInt(4294967295));j[k+7]=Ae,Ae=Ae>>8,j[k+6]=Ae,Ae=Ae>>8,j[k+5]=Ae,Ae=Ae>>8,j[k+4]=Ae;let de=Number(S>>BigInt(32)&BigInt(4294967295));return j[k+3]=de,de=de>>8,j[k+2]=de,de=de>>8,j[k+1]=de,de=de>>8,j[k]=de,k+8}l.prototype.writeBigUInt64LE=Y(function(S,k=0){return vr(this,S,k,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Y(function(S,k=0){return pr(this,S,k,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(S,k,w,ce){if(S=+S,k=k>>>0,!ce){const Tt=Math.pow(2,8*w-1);vt(this,S,k,w,Tt-1,-Tt)}let Ae=0,de=1,je=0;for(this[k]=S&255;++Ae<w&&(de*=256);)S<0&&je===0&&this[k+Ae-1]!==0&&(je=1),this[k+Ae]=(S/de>>0)-je&255;return k+w},l.prototype.writeIntBE=function(S,k,w,ce){if(S=+S,k=k>>>0,!ce){const Tt=Math.pow(2,8*w-1);vt(this,S,k,w,Tt-1,-Tt)}let Ae=w-1,de=1,je=0;for(this[k+Ae]=S&255;--Ae>=0&&(de*=256);)S<0&&je===0&&this[k+Ae+1]!==0&&(je=1),this[k+Ae]=(S/de>>0)-je&255;return k+w},l.prototype.writeInt8=function(S,k,w){return S=+S,k=k>>>0,w||vt(this,S,k,1,127,-128),S<0&&(S=255+S+1),this[k]=S&255,k+1},l.prototype.writeInt16LE=function(S,k,w){return S=+S,k=k>>>0,w||vt(this,S,k,2,32767,-32768),this[k]=S&255,this[k+1]=S>>>8,k+2},l.prototype.writeInt16BE=function(S,k,w){return S=+S,k=k>>>0,w||vt(this,S,k,2,32767,-32768),this[k]=S>>>8,this[k+1]=S&255,k+2},l.prototype.writeInt32LE=function(S,k,w){return S=+S,k=k>>>0,w||vt(this,S,k,4,2147483647,-2147483648),this[k]=S&255,this[k+1]=S>>>8,this[k+2]=S>>>16,this[k+3]=S>>>24,k+4},l.prototype.writeInt32BE=function(S,k,w){return S=+S,k=k>>>0,w||vt(this,S,k,4,2147483647,-2147483648),S<0&&(S=4294967295+S+1),this[k]=S>>>24,this[k+1]=S>>>16,this[k+2]=S>>>8,this[k+3]=S&255,k+4},l.prototype.writeBigInt64LE=Y(function(S,k=0){return vr(this,S,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Y(function(S,k=0){return pr(this,S,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Nt(j,S,k,w,ce,Ae){if(k+w>j.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function Fr(j,S,k,w,ce){return S=+S,k=k>>>0,ce||Nt(j,S,k,4),r.write(j,S,k,w,23,4),k+4}l.prototype.writeFloatLE=function(S,k,w){return Fr(this,S,k,!0,w)},l.prototype.writeFloatBE=function(S,k,w){return Fr(this,S,k,!1,w)};function ar(j,S,k,w,ce){return S=+S,k=k>>>0,ce||Nt(j,S,k,8),r.write(j,S,k,w,52,8),k+8}l.prototype.writeDoubleLE=function(S,k,w){return ar(this,S,k,!0,w)},l.prototype.writeDoubleBE=function(S,k,w){return ar(this,S,k,!1,w)},l.prototype.copy=function(S,k,w,ce){if(!l.isBuffer(S))throw new TypeError("argument should be a Buffer");if(w||(w=0),!ce&&ce!==0&&(ce=this.length),k>=S.length&&(k=S.length),k||(k=0),ce>0&&ce<w&&(ce=w),ce===w||S.length===0||this.length===0)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(w<0||w>=this.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("sourceEnd out of bounds");ce>this.length&&(ce=this.length),S.length-k<ce-w&&(ce=S.length-k+w);const Ae=ce-w;return this===S&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(k,w,ce):Uint8Array.prototype.set.call(S,this.subarray(w,ce),k),Ae},l.prototype.fill=function(S,k,w,ce){if(typeof S=="string"){if(typeof k=="string"?(ce=k,k=0,w=this.length):typeof w=="string"&&(ce=w,w=this.length),ce!==void 0&&typeof ce!="string")throw new TypeError("encoding must be a string");if(typeof ce=="string"&&!l.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);if(S.length===1){const de=S.charCodeAt(0);(ce==="utf8"&&de<128||ce==="latin1")&&(S=de)}}else typeof S=="number"?S=S&255:typeof S=="boolean"&&(S=Number(S));if(k<0||this.length<k||this.length<w)throw new RangeError("Out of range index");if(w<=k)return this;k=k>>>0,w=w===void 0?this.length:w>>>0,S||(S=0);let Ae;if(typeof S=="number")for(Ae=k;Ae<w;++Ae)this[Ae]=S;else{const de=l.isBuffer(S)?S:l.from(S,ce),je=de.length;if(je===0)throw new TypeError('The value "'+S+'" is invalid for argument "value"');for(Ae=0;Ae<w-k;++Ae)this[Ae+k]=de[Ae%je]}return this};const Pt={};function Ye(j,S,k){Pt[j]=class extends k{constructor(){super(),Object.defineProperty(this,"message",{value:S.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${j}]`,this.stack,delete this.name}get code(){return j}set code(ce){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ce,writable:!0})}toString(){return`${this.name} [${j}]: ${this.message}`}}}Ye("ERR_BUFFER_OUT_OF_BOUNDS",function(j){return j?`${j} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ye("ERR_INVALID_ARG_TYPE",function(j,S){return`The "${j}" argument must be of type number. Received type ${typeof S}`},TypeError),Ye("ERR_OUT_OF_RANGE",function(j,S,k){let w=`The value of "${j}" is out of range.`,ce=k;return Number.isInteger(k)&&Math.abs(k)>2**32?ce=We(String(k)):typeof k=="bigint"&&(ce=String(k),(k>BigInt(2)**BigInt(32)||k<-(BigInt(2)**BigInt(32)))&&(ce=We(ce)),ce+="n"),w+=` It must be ${S}. Received ${ce}`,w},RangeError);function We(j){let S="",k=j.length;const w=j[0]==="-"?1:0;for(;k>=w+4;k-=3)S=`_${j.slice(k-3,k)}${S}`;return`${j.slice(0,k)}${S}`}function ee(j,S,k){F(S,"offset"),(j[S]===void 0||j[S+k]===void 0)&&K(S,j.length-(k+1))}function M(j,S,k,w,ce,Ae){if(j>k||j<S){const de=typeof S=="bigint"?"n":"";let je;throw Ae>3?S===0||S===BigInt(0)?je=`>= 0${de} and < 2${de} ** ${(Ae+1)*8}${de}`:je=`>= -(2${de} ** ${(Ae+1)*8-1}${de}) and < 2 ** ${(Ae+1)*8-1}${de}`:je=`>= ${S}${de} and <= ${k}${de}`,new Pt.ERR_OUT_OF_RANGE("value",je,j)}ee(w,ce,Ae)}function F(j,S){if(typeof j!="number")throw new Pt.ERR_INVALID_ARG_TYPE(S,"number",j)}function K(j,S,k){throw Math.floor(j)!==j?(F(j,k),new Pt.ERR_OUT_OF_RANGE(k||"offset","an integer",j)):S<0?new Pt.ERR_BUFFER_OUT_OF_BOUNDS:new Pt.ERR_OUT_OF_RANGE(k||"offset",`>= ${k?1:0} and <= ${S}`,j)}const re=/[^+/0-9A-Za-z-_]/g;function B(j){if(j=j.split("=")[0],j=j.trim().replace(re,""),j.length<2)return"";for(;j.length%4!==0;)j=j+"=";return j}function C(j,S){S=S||1/0;let k;const w=j.length;let ce=null;const Ae=[];for(let de=0;de<w;++de){if(k=j.charCodeAt(de),k>55295&&k<57344){if(!ce){if(k>56319){(S-=3)>-1&&Ae.push(239,191,189);continue}else if(de+1===w){(S-=3)>-1&&Ae.push(239,191,189);continue}ce=k;continue}if(k<56320){(S-=3)>-1&&Ae.push(239,191,189),ce=k;continue}k=(ce-55296<<10|k-56320)+65536}else ce&&(S-=3)>-1&&Ae.push(239,191,189);if(ce=null,k<128){if((S-=1)<0)break;Ae.push(k)}else if(k<2048){if((S-=2)<0)break;Ae.push(k>>6|192,k&63|128)}else if(k<65536){if((S-=3)<0)break;Ae.push(k>>12|224,k>>6&63|128,k&63|128)}else if(k<1114112){if((S-=4)<0)break;Ae.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw new Error("Invalid code point")}return Ae}function U(j){const S=[];for(let k=0;k<j.length;++k)S.push(j.charCodeAt(k)&255);return S}function ne(j,S){let k,w,ce;const Ae=[];for(let de=0;de<j.length&&!((S-=2)<0);++de)k=j.charCodeAt(de),w=k>>8,ce=k%256,Ae.push(ce),Ae.push(w);return Ae}function Re(j){return t.toByteArray(B(j))}function Le(j,S,k,w){let ce;for(ce=0;ce<w&&!(ce+k>=S.length||ce>=j.length);++ce)S[ce+k]=j[ce];return ce}function qe(j,S){return j instanceof S||j!=null&&j.constructor!=null&&j.constructor.name!=null&&j.constructor.name===S.name}function Et(j){return j!==j}const Wt=function(){const j="0123456789abcdef",S=new Array(256);for(let k=0;k<16;++k){const w=k*16;for(let ce=0;ce<16;++ce)S[w+ce]=j[k]+j[ce]}return S}();function Y(j){return typeof BigInt>"u"?te:j}function te(){throw new Error("BigInt not supported")}})(Hs);var Gn={ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,r){return e.slice(t,r)},Error,FunctionPrototypeCall(e,t,...r){return e.call(t,...r)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,r){return Object.defineProperty(e,t,r)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,r){return e.then(t,r)},PromiseReject(e){return Promise.reject(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,r){return e.slice(t,r)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(e,t,r){return e.set(t,r)},Uint8Array},bo={},cI={get exports(){return bo},set exports(e){bo=e}};(function(e){const t=Hs,r=Object.getPrototypeOf(async function(){}).constructor,n=globalThis.Blob||t.Blob,i=typeof n<"u"?function(l){return l instanceof n}:function(l){return!1};class s extends Error{constructor(l){if(!Array.isArray(l))throw new TypeError(`Expected input to be an Array, got ${typeof l}`);let y="";for(let d=0;d<l.length;d++)y+=`    ${l[d].stack}
`;super(y),this.name="AggregateError",this.errors=l}}e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(a){let l=!1;return function(...y){l||(l=!0,a.apply(this,y))}},createDeferredPromise:function(){let a,l;return{promise:new Promise((d,m)=>{a=d,l=m}),resolve:a,reject:l}},promisify(a){return new Promise((l,y)=>{a((d,...m)=>d?y(d):l(...m))})},debuglog(){return function(){}},format(a,...l){return a.replace(/%([sdifj])/g,function(...[y,d]){const m=l.shift();return d==="f"?m.toFixed(6):d==="j"?JSON.stringify(m):d==="s"&&typeof m=="object"?`${m.constructor!==Object?m.constructor.name:""} {}`.trim():m.toString()})},inspect(a){switch(typeof a){case"string":if(a.includes("'"))if(a.includes('"')){if(!a.includes("`")&&!a.includes("${"))return`\`${a}\``}else return`"${a}"`;return`'${a}'`;case"number":return isNaN(a)?"NaN":Object.is(a,-0)?String(a):a;case"bigint":return`${String(a)}n`;case"boolean":case"undefined":return String(a);case"object":return"{}"}},types:{isAsyncFunction(a){return a instanceof r},isArrayBufferView(a){return ArrayBuffer.isView(a)}},isBlob:i},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(cI);var zm={},xu={},dI={get exports(){return xu},set exports(e){xu=e}},AS;function qm(){if(AS)return xu;AS=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return dI.exports=e,xu.AbortSignal=t,xu.default=e,xu}const{format:fI,inspect:Eh,AggregateError:hI}=bo,pI=globalThis.AggregateError||hI,gI=Symbol("kIsNodeError"),yI=["string","function","number","object","Function","Object","boolean","bigint","symbol"],mI=/^([A-Z][a-z0-9]*)+$/,vI="__node_internal_",ep={};function ga(e,t){if(!e)throw new ep.ERR_INTERNAL_ASSERTION(t)}function RS(e){let t="",r=e.length;const n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function wI(e,t,r){if(typeof t=="function")return ga(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);const n=(t.match(/%[dfijoOs]/g)||[]).length;return ga(n===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?t:fI(t,...r)}function ai(e,t,r){r||(r=Error);class n extends r{constructor(...s){super(wI(e,t,s))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=e,n.prototype[gI]=!0,ep[e]=n}function xS(e){const t=vI+e.name;return Object.defineProperty(e,"name",{value:t}),e}function _I(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const r=new pI([t,e],t.message);return r.code=t.code,r}return e||t}let SI=class extends Error{constructor(t="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new ep.ERR_INVALID_ARG_TYPE("options","Object",r);super(t,r),this.code="ABORT_ERR",this.name="AbortError"}};ai("ERR_ASSERTION","%s",Error);ai("ERR_INVALID_ARG_TYPE",(e,t,r)=>{ga(typeof e=="string","'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";const i=[],s=[],a=[];for(const y of t)ga(typeof y=="string","All expected entries have to be of type string"),yI.includes(y)?i.push(y.toLowerCase()):mI.test(y)?s.push(y):(ga(y!=="object",'The value "object" should be written as "Object"'),a.push(y));if(s.length>0){const y=i.indexOf("object");y!==-1&&(i.splice(i,y,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{const y=i.pop();n+=`one of type ${i.join(", ")}, or ${y}`}}(s.length>0||a.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{const y=s.pop();n+=`an instance of ${s.join(", ")}, or ${y}`}}a.length>0&&(n+=" or ")}switch(a.length){case 0:break;case 1:a[0].toLowerCase()!==a[0]&&(n+="an "),n+=`${a[0]}`;break;case 2:n+=`one of ${a[0]} or ${a[1]}`;break;default:{const y=a.pop();n+=`one of ${a.join(", ")}, or ${y}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var l;if((l=r.constructor)!==null&&l!==void 0&&l.name)n+=`. Received an instance of ${r.constructor.name}`;else{const y=Eh(r,{depth:-1});n+=`. Received ${y}`}}else{let y=Eh(r,{colors:!1});y.length>25&&(y=`${y.slice(0,25)}...`),n+=`. Received type ${typeof r} (${y})`}return n},TypeError);ai("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let n=Eh(t);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`},TypeError);ai("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var n;const i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${e} to be returned from the "${t}" function but got ${i}.`},TypeError);ai("ERR_MISSING_ARGS",(...e)=>{ga(e.length>0,"At least one arg needs to be specified");let t;const r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(n=>`"${n}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}break}return`${t} must be specified`},TypeError);ai("ERR_OUT_OF_RANGE",(e,t,r)=>{ga(t,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=RS(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=RS(n)),n+="n"):n=Eh(r),`The value of "${e}" is out of range. It must be ${t}. Received ${n}`},RangeError);ai("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);ai("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);ai("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);ai("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);ai("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);ai("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ai("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);ai("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);ai("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);ai("ERR_STREAM_WRITE_AFTER_END","write after end",Error);ai("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var Oi={AbortError:SI,aggregateTwoErrors:xS(_I),hideStackFrames:xS,codes:ep};const{ArrayIsArray:SR,ArrayPrototypeIncludes:bR,ArrayPrototypeJoin:ER,ArrayPrototypeMap:bI,NumberIsInteger:Gm,NumberIsNaN:EI,NumberMAX_SAFE_INTEGER:AI,NumberMIN_SAFE_INTEGER:RI,NumberParseInt:xI,ObjectPrototypeHasOwnProperty:CI,RegExpPrototypeExec:PI,String:TI,StringPrototypeToUpperCase:FI,StringPrototypeTrim:II}=Gn,{hideStackFrames:Eo,codes:{ERR_SOCKET_BAD_PORT:kI,ERR_INVALID_ARG_TYPE:Ni,ERR_INVALID_ARG_VALUE:tp,ERR_OUT_OF_RANGE:Sa,ERR_UNKNOWN_SIGNAL:CS}}=Oi,{normalizeEncoding:OI}=bo,{isAsyncFunction:NI,isArrayBufferView:UI}=bo.types,PS={};function DI(e){return e===(e|0)}function LI(e){return e===e>>>0}const MI=/^[0-7]+$/,BI="must be a 32-bit unsigned integer or an octal string";function jI(e,t,r){if(typeof e>"u"&&(e=r),typeof e=="string"){if(PI(MI,e)===null)throw new tp(t,e,BI);e=xI(e,8)}return AR(e,t),e}const HI=Eo((e,t,r=RI,n=AI)=>{if(typeof e!="number")throw new Ni(t,"number",e);if(!Gm(e))throw new Sa(t,"an integer",e);if(e<r||e>n)throw new Sa(t,`>= ${r} && <= ${n}`,e)}),$I=Eo((e,t,r=-2147483648,n=2147483647)=>{if(typeof e!="number")throw new Ni(t,"number",e);if(!Gm(e))throw new Sa(t,"an integer",e);if(e<r||e>n)throw new Sa(t,`>= ${r} && <= ${n}`,e)}),AR=Eo((e,t,r=!1)=>{if(typeof e!="number")throw new Ni(t,"number",e);if(!Gm(e))throw new Sa(t,"an integer",e);const n=r?1:0,i=4294967295;if(e<n||e>i)throw new Sa(t,`>= ${n} && <= ${i}`,e)});function RR(e,t){if(typeof e!="string")throw new Ni(t,"string",e)}function WI(e,t,r=void 0,n){if(typeof e!="number")throw new Ni(t,"number",e);if(r!=null&&e<r||n!=null&&e>n||(r!=null||n!=null)&&EI(e))throw new Sa(t,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,e)}const KI=Eo((e,t,r)=>{if(!bR(r,e)){const i="must be one of: "+ER(bI(r,s=>typeof s=="string"?`'${s}'`:TI(s)),", ");throw new tp(t,e,i)}});function VI(e,t){if(typeof e!="boolean")throw new Ni(t,"boolean",e)}function h0(e,t,r){return e==null||!CI(e,t)?r:e[t]}const zI=Eo((e,t,r=null)=>{const n=h0(r,"allowArray",!1),i=h0(r,"allowFunction",!1);if(!h0(r,"nullable",!1)&&e===null||!n&&SR(e)||typeof e!="object"&&(!i||typeof e!="function"))throw new Ni(t,"Object",e)}),qI=Eo((e,t,r=0)=>{if(!SR(e))throw new Ni(t,"Array",e);if(e.length<r){const n=`must be longer than ${r}`;throw new tp(t,e,n)}});function GI(e,t="signal"){if(RR(e,t),PS[e]===void 0)throw PS[FI(e)]!==void 0?new CS(e+" (signals must use all capital letters)"):new CS(e)}const JI=Eo((e,t="buffer")=>{if(!UI(e))throw new Ni(t,["Buffer","TypedArray","DataView"],e)});function QI(e,t){const r=OI(t),n=e.length;if(r==="hex"&&n%2!==0)throw new tp("encoding",t,`is invalid for data of length ${n}`)}function YI(e,t="Port",r=!0){if(typeof e!="number"&&typeof e!="string"||typeof e=="string"&&II(e).length===0||+e!==+e>>>0||e>65535||e===0&&!r)throw new kI(t,e,r);return e|0}const XI=Eo((e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new Ni(t,"AbortSignal",e)}),ZI=Eo((e,t)=>{if(typeof e!="function")throw new Ni(t,"Function",e)}),ek=Eo((e,t)=>{if(typeof e!="function"||NI(e))throw new Ni(t,"Function",e)}),tk=Eo((e,t)=>{if(e!==void 0)throw new Ni(t,"undefined",e)});function rk(e,t,r){if(!bR(r,e))throw new Ni(t,`('${ER(r,"|")}')`,e)}var rp={isInt32:DI,isUint32:LI,parseFileMode:jI,validateArray:qI,validateBoolean:VI,validateBuffer:JI,validateEncoding:QI,validateFunction:ZI,validateInt32:$I,validateInteger:HI,validateNumber:WI,validateObject:zI,validateOneOf:KI,validatePlainFunction:ek,validatePort:YI,validateSignalName:GI,validateString:RR,validateUint32:AR,validateUndefined:tk,validateUnion:rk,validateAbortSignal:XI},Do={},nk={get exports(){return Do},set exports(e){Do=e}},ss={},ik={get exports(){return ss},set exports(e){ss=e}},Dn=ik.exports={},Fo,Io;function Ty(){throw new Error("setTimeout has not been defined")}function Fy(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Fo=setTimeout:Fo=Ty}catch{Fo=Ty}try{typeof clearTimeout=="function"?Io=clearTimeout:Io=Fy}catch{Io=Fy}})();function xR(e){if(Fo===setTimeout)return setTimeout(e,0);if((Fo===Ty||!Fo)&&setTimeout)return Fo=setTimeout,setTimeout(e,0);try{return Fo(e,0)}catch{try{return Fo.call(null,e,0)}catch{return Fo.call(this,e,0)}}}function ok(e){if(Io===clearTimeout)return clearTimeout(e);if((Io===Fy||!Io)&&clearTimeout)return Io=clearTimeout,clearTimeout(e);try{return Io(e)}catch{try{return Io.call(null,e)}catch{return Io.call(this,e)}}}var Xo=[],Ou=!1,fa,Qf=-1;function sk(){!Ou||!fa||(Ou=!1,fa.length?Xo=fa.concat(Xo):Qf=-1,Xo.length&&CR())}function CR(){if(!Ou){var e=xR(sk);Ou=!0;for(var t=Xo.length;t;){for(fa=Xo,Xo=[];++Qf<t;)fa&&fa[Qf].run();Qf=-1,t=Xo.length}fa=null,Ou=!1,ok(e)}}Dn.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Xo.push(new PR(e,t)),Xo.length===1&&!Ou&&xR(CR)};function PR(e,t){this.fun=e,this.array=t}PR.prototype.run=function(){this.fun.apply(null,this.array)};Dn.title="browser";Dn.browser=!0;Dn.env={};Dn.argv=[];Dn.version="";Dn.versions={};function cs(){}Dn.on=cs;Dn.addListener=cs;Dn.once=cs;Dn.off=cs;Dn.removeListener=cs;Dn.removeAllListeners=cs;Dn.emit=cs;Dn.prependListener=cs;Dn.prependOnceListener=cs;Dn.listeners=function(e){return[]};Dn.binding=function(e){throw new Error("process.binding is not supported")};Dn.cwd=function(){return"/"};Dn.chdir=function(e){throw new Error("process.chdir is not supported")};Dn.umask=function(){return 0};const{Symbol:np,SymbolAsyncIterator:TS,SymbolIterator:FS}=Gn,TR=np("kDestroyed"),FR=np("kIsErrored"),Iy=np("kIsReadable"),IR=np("kIsDisturbed");function ip(e,t=!1){var r;return!!(e&&typeof e.pipe=="function"&&typeof e.on=="function"&&(!t||typeof e.pause=="function"&&typeof e.resume=="function")&&(!e._writableState||((r=e._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!e._writableState||e._readableState))}function op(e){var t;return!!(e&&typeof e.write=="function"&&typeof e.on=="function"&&(!e._readableState||((t=e._writableState)===null||t===void 0?void 0:t.writable)!==!1))}function ak(e){return!!(e&&typeof e.pipe=="function"&&e._readableState&&typeof e.on=="function"&&typeof e.write=="function")}function Aa(e){return e&&(e._readableState||e._writableState||typeof e.write=="function"&&typeof e.on=="function"||typeof e.pipe=="function"&&typeof e.on=="function")}function uk(e,t){return e==null?!1:t===!0?typeof e[TS]=="function":t===!1?typeof e[FS]=="function":typeof e[TS]=="function"||typeof e[FS]=="function"}function sp(e){if(!Aa(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[TR]||n!=null&&n.destroyed)}function kR(e){if(!op(e))return null;if(e.writableEnded===!0)return!0;const t=e._writableState;return t!=null&&t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function lk(e,t){if(!op(e))return null;if(e.writableFinished===!0)return!0;const r=e._writableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.finished)!="boolean"?null:!!(r.finished||t===!1&&r.ended===!0&&r.length===0)}function ck(e){if(!ip(e))return null;if(e.readableEnded===!0)return!0;const t=e._readableState;return!t||t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function OR(e,t){if(!ip(e))return null;const r=e._readableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.endEmitted)!="boolean"?null:!!(r.endEmitted||t===!1&&r.ended===!0&&r.length===0)}function NR(e){return e&&e[Iy]!=null?e[Iy]:typeof(e==null?void 0:e.readable)!="boolean"?null:sp(e)?!1:ip(e)&&e.readable&&!OR(e)}function UR(e){return typeof(e==null?void 0:e.writable)!="boolean"?null:sp(e)?!1:op(e)&&e.writable&&!kR(e)}function dk(e,t){return Aa(e)?sp(e)?!0:!((t==null?void 0:t.readable)!==!1&&NR(e)||(t==null?void 0:t.writable)!==!1&&UR(e)):null}function fk(e){var t,r;return Aa(e)?e.writableErrored?e.writableErrored:(t=(r=e._writableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function hk(e){var t,r;return Aa(e)?e.readableErrored?e.readableErrored:(t=(r=e._readableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function pk(e){if(!Aa(e))return null;if(typeof e.closed=="boolean")return e.closed;const t=e._writableState,r=e._readableState;return typeof(t==null?void 0:t.closed)=="boolean"||typeof(r==null?void 0:r.closed)=="boolean"?(t==null?void 0:t.closed)||(r==null?void 0:r.closed):typeof e._closed=="boolean"&&DR(e)?e._closed:null}function DR(e){return typeof e._closed=="boolean"&&typeof e._defaultKeepAlive=="boolean"&&typeof e._removedConnection=="boolean"&&typeof e._removedContLen=="boolean"}function LR(e){return typeof e._sent100=="boolean"&&DR(e)}function gk(e){var t;return typeof e._consuming=="boolean"&&typeof e._dumped=="boolean"&&((t=e.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function yk(e){if(!Aa(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!n&&LR(e)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function mk(e){var t;return!!(e&&((t=e[IR])!==null&&t!==void 0?t:e.readableDidRead||e.readableAborted))}function vk(e){var t,r,n,i,s,a,l,y,d,m;return!!(e&&((t=(r=(n=(i=(s=(a=e[FR])!==null&&a!==void 0?a:e.readableErrored)!==null&&s!==void 0?s:e.writableErrored)!==null&&i!==void 0?i:(l=e._readableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&n!==void 0?n:(y=e._writableState)===null||y===void 0?void 0:y.errorEmitted)!==null&&r!==void 0?r:(d=e._readableState)===null||d===void 0?void 0:d.errored)!==null&&t!==void 0?t:!((m=e._writableState)===null||m===void 0)&&m.errored))}var Ra={kDestroyed:TR,isDisturbed:mk,kIsDisturbed:IR,isErrored:vk,kIsErrored:FR,isReadable:NR,kIsReadable:Iy,isClosed:pk,isDestroyed:sp,isDuplexNodeStream:ak,isFinished:dk,isIterable:uk,isReadableNodeStream:ip,isReadableEnded:ck,isReadableFinished:OR,isReadableErrored:hk,isNodeStream:Aa,isWritable:UR,isWritableNodeStream:op,isWritableEnded:kR,isWritableFinished:lk,isWritableErrored:fk,isServerRequest:gk,isServerResponse:LR,willEmitClose:yk};const du=ss,{AbortError:wk,codes:_k}=Oi,{ERR_INVALID_ARG_TYPE:Sk,ERR_STREAM_PREMATURE_CLOSE:IS}=_k,{kEmptyObject:kS,once:OS}=bo,{validateAbortSignal:bk,validateFunction:Ek,validateObject:Ak}=rp,{Promise:Rk}=Gn,{isClosed:xk,isReadable:NS,isReadableNodeStream:p0,isReadableFinished:US,isReadableErrored:Ck,isWritable:DS,isWritableNodeStream:LS,isWritableFinished:MS,isWritableErrored:Pk,isNodeStream:Tk,willEmitClose:Fk}=Ra;function Ik(e){return e.setHeader&&typeof e.abort=="function"}const kk=()=>{};function MR(e,t,r){var n,i;arguments.length===2?(r=t,t=kS):t==null?t=kS:Ak(t,"options"),Ek(r,"callback"),bk(t.signal,"options.signal"),r=OS(r);const s=(n=t.readable)!==null&&n!==void 0?n:p0(e),a=(i=t.writable)!==null&&i!==void 0?i:LS(e);if(!Tk(e))throw new Sk("stream","Stream",e);const l=e._writableState,y=e._readableState,d=()=>{e.writable||E()};let m=Fk(e)&&p0(e)===s&&LS(e)===a,g=MS(e,!1);const E=()=>{g=!0,e.destroyed&&(m=!1),!(m&&(!e.readable||s))&&(!s||b)&&r.call(e)};let b=US(e,!1);const P=()=>{b=!0,e.destroyed&&(m=!1),!(m&&(!e.writable||a))&&(!a||g)&&r.call(e)},I=L=>{r.call(e,L)};let D=xk(e);const A=()=>{D=!0;const L=Pk(e)||Ck(e);if(L&&typeof L!="boolean")return r.call(e,L);if(s&&!b&&p0(e,!0)&&!US(e,!1))return r.call(e,new IS);if(a&&!g&&!MS(e,!1))return r.call(e,new IS);r.call(e)},R=()=>{e.req.on("finish",E)};Ik(e)?(e.on("complete",E),m||e.on("abort",A),e.req?R():e.on("request",R)):a&&!l&&(e.on("end",d),e.on("close",d)),!m&&typeof e.aborted=="boolean"&&e.on("aborted",A),e.on("end",P),e.on("finish",E),t.error!==!1&&e.on("error",I),e.on("close",A),D?du.nextTick(A):l!=null&&l.errorEmitted||y!=null&&y.errorEmitted?m||du.nextTick(A):(!s&&(!m||NS(e))&&(g||DS(e)===!1)||!a&&(!m||DS(e))&&(b||NS(e)===!1)||y&&e.req&&e.aborted)&&du.nextTick(A);const N=()=>{r=kk,e.removeListener("aborted",A),e.removeListener("complete",E),e.removeListener("abort",A),e.removeListener("request",R),e.req&&e.req.removeListener("finish",E),e.removeListener("end",d),e.removeListener("close",d),e.removeListener("finish",E),e.removeListener("end",P),e.removeListener("error",I),e.removeListener("close",A)};if(t.signal&&!D){const L=()=>{const W=r;N(),W.call(e,new wk(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)du.nextTick(L);else{const W=r;r=OS((...q)=>{t.signal.removeEventListener("abort",L),W.apply(e,q)}),t.signal.addEventListener("abort",L)}}return N}function Ok(e,t){return new Rk((r,n)=>{MR(e,t,i=>{i?n(i):r()})})}nk.exports=MR;Do.finished=Ok;const BR=globalThis.AbortController||qm().AbortController,{codes:{ERR_INVALID_ARG_TYPE:$c,ERR_MISSING_ARGS:Nk,ERR_OUT_OF_RANGE:Uk},AbortError:Lo}=Oi,{validateAbortSignal:qu,validateInteger:Dk,validateObject:Gu}=rp,Lk=Gn.Symbol("kWeak"),{finished:Mk}=Do,{ArrayPrototypePush:Bk,MathFloor:jk,Number:Hk,NumberIsNaN:$k,Promise:BS,PromiseReject:jS,PromisePrototypeThen:Wk,Symbol:jR}=Gn,Ah=jR("kEmpty"),HS=jR("kEof");function ap(e,t){if(typeof e!="function")throw new $c("fn",["Function","AsyncFunction"],e);t!=null&&Gu(t,"options"),(t==null?void 0:t.signal)!=null&&qu(t.signal,"options.signal");let r=1;return(t==null?void 0:t.concurrency)!=null&&(r=jk(t.concurrency)),Dk(r,"concurrency",1),async function*(){var i,s;const a=new BR,l=this,y=[],d=a.signal,m={signal:d},g=()=>a.abort();t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted&&g(),t==null||(s=t.signal)===null||s===void 0||s.addEventListener("abort",g);let E,b,P=!1;function I(){P=!0}async function D(){try{for await(let N of l){var A;if(P)return;if(d.aborted)throw new Lo;try{N=e(N,m)}catch(L){N=jS(L)}N!==Ah&&(typeof((A=N)===null||A===void 0?void 0:A.catch)=="function"&&N.catch(I),y.push(N),E&&(E(),E=null),!P&&y.length&&y.length>=r&&await new BS(L=>{b=L}))}y.push(HS)}catch(N){const L=jS(N);Wk(L,void 0,I),y.push(L)}finally{var R;P=!0,E&&(E(),E=null),t==null||(R=t.signal)===null||R===void 0||R.removeEventListener("abort",g)}}D();try{for(;;){for(;y.length>0;){const A=await y[0];if(A===HS)return;if(d.aborted)throw new Lo;A!==Ah&&(yield A),y.shift(),b&&(b(),b=null)}await new BS(A=>{E=A})}}finally{a.abort(),P=!0,b&&(b(),b=null)}}.call(this)}function Kk(e=void 0){return e!=null&&Gu(e,"options"),(e==null?void 0:e.signal)!=null&&qu(e.signal,"options.signal"),async function*(){let r=0;for await(const i of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Lo({cause:e.signal.reason});yield[r++,i]}}.call(this)}async function HR(e,t=void 0){for await(const r of Jm.call(this,e,t))return!0;return!1}async function Vk(e,t=void 0){if(typeof e!="function")throw new $c("fn",["Function","AsyncFunction"],e);return!await HR.call(this,async(...r)=>!await e(...r),t)}async function zk(e,t){for await(const r of Jm.call(this,e,t))return r}async function qk(e,t){if(typeof e!="function")throw new $c("fn",["Function","AsyncFunction"],e);async function r(n,i){return await e(n,i),Ah}for await(const n of ap.call(this,r,t));}function Jm(e,t){if(typeof e!="function")throw new $c("fn",["Function","AsyncFunction"],e);async function r(n,i){return await e(n,i)?n:Ah}return ap.call(this,r,t)}class Gk extends Nk{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Jk(e,t,r){var n;if(typeof e!="function")throw new $c("reducer",["Function","AsyncFunction"],e);r!=null&&Gu(r,"options"),(r==null?void 0:r.signal)!=null&&qu(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){const d=new Lo(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await Mk(this.destroy(d)),d}const s=new BR,a=s.signal;if(r!=null&&r.signal){const d={once:!0,[Lk]:this};r.signal.addEventListener("abort",()=>s.abort(),d)}let l=!1;try{for await(const d of this){var y;if(l=!0,r!=null&&(y=r.signal)!==null&&y!==void 0&&y.aborted)throw new Lo;i?t=await e(t,d,{signal:a}):(t=d,i=!0)}if(!l&&!i)throw new Gk}finally{s.abort()}return t}async function Qk(e){e!=null&&Gu(e,"options"),(e==null?void 0:e.signal)!=null&&qu(e.signal,"options.signal");const t=[];for await(const n of this){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Lo(void 0,{cause:e.signal.reason});Bk(t,n)}return t}function Yk(e,t){const r=ap.call(this,e,t);return async function*(){for await(const i of r)yield*i}.call(this)}function $R(e){if(e=Hk(e),$k(e))return 0;if(e<0)throw new Uk("number",">= 0",e);return e}function Xk(e,t=void 0){return t!=null&&Gu(t,"options"),(t==null?void 0:t.signal)!=null&&qu(t.signal,"options.signal"),e=$R(e),async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Lo;for await(const s of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new Lo;e--<=0&&(yield s)}}.call(this)}function Zk(e,t=void 0){return t!=null&&Gu(t,"options"),(t==null?void 0:t.signal)!=null&&qu(t.signal,"options.signal"),e=$R(e),async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Lo;for await(const s of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new Lo;if(e-- >0)yield s;else return}}.call(this)}zm.streamReturningOperators={asIndexedPairs:Kk,drop:Xk,filter:Jm,flatMap:Yk,map:ap,take:Zk};zm.promiseReturningOperators={every:Vk,forEach:qk,reduce:Jk,toArray:Qk,some:HR,find:zk};const Ds=ss,{aggregateTwoErrors:eO,codes:{ERR_MULTIPLE_CALLBACK:tO},AbortError:rO}=Oi,{Symbol:WR}=Gn,{kDestroyed:nO,isDestroyed:iO,isFinished:oO,isServerRequest:sO}=Ra,KR=WR("kDestroy"),ky=WR("kConstruct");function VR(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function aO(e,t){const r=this._readableState,n=this._writableState,i=n||r;return n&&n.destroyed||r&&r.destroyed?(typeof t=="function"&&t(),this):(VR(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?$S(this,e,t):this.once(KR,function(s){$S(this,eO(s,e),t)}),this)}function $S(e,t,r){let n=!1;function i(s){if(n)return;n=!0;const a=e._readableState,l=e._writableState;VR(s,l,a),l&&(l.closed=!0),a&&(a.closed=!0),typeof r=="function"&&r(s),s?Ds.nextTick(uO,e,s):Ds.nextTick(zR,e)}try{e._destroy(t||null,i)}catch(s){i(s)}}function uO(e,t){Oy(e,t),zR(e)}function zR(e){const t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(r&&r.emitClose||t&&t.emitClose)&&e.emit("close")}function Oy(e,t){const r=e._readableState,n=e._writableState;n&&n.errorEmitted||r&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function lO(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function Ny(e,t,r){const n=e._readableState,i=e._writableState;if(i&&i.destroyed||n&&n.destroyed)return this;n&&n.autoDestroy||i&&i.autoDestroy?e.destroy(t):t&&(t.stack,i&&!i.errored&&(i.errored=t),n&&!n.errored&&(n.errored=t),r?Ds.nextTick(Oy,e,t):Oy(e,t))}function cO(e,t){if(typeof e._construct!="function")return;const r=e._readableState,n=e._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),e.once(ky,t),!(e.listenerCount(ky)>1)&&Ds.nextTick(dO,e)}function dO(e){let t=!1;function r(n){if(t){Ny(e,n??new tO);return}t=!0;const i=e._readableState,s=e._writableState,a=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),a.destroyed?e.emit(KR,n):n?Ny(e,n,!0):Ds.nextTick(fO,e)}try{e._construct(r)}catch(n){r(n)}}function fO(e){e.emit(ky)}function WS(e){return e&&e.setHeader&&typeof e.abort=="function"}function qR(e){e.emit("close")}function hO(e,t){e.emit("error",t),Ds.nextTick(qR,e)}function pO(e,t){!e||iO(e)||(!t&&!oO(e)&&(t=new rO),sO(e)?(e.socket=null,e.destroy(t)):WS(e)?e.abort():WS(e.req)?e.req.abort():typeof e.destroy=="function"?e.destroy(t):typeof e.close=="function"?e.close():t?Ds.nextTick(hO,e,t):Ds.nextTick(qR,e),e.destroyed||(e[nO]=!0))}var Ju={construct:cO,destroyer:pO,destroy:aO,undestroy:lO,errorOrDestroy:Ny},cc={},gO={get exports(){return cc},set exports(e){cc=e}},KS;function up(){if(KS)return cc;KS=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(W,q,J){return Function.prototype.apply.call(W,q,J)},r;e&&typeof e.ownKeys=="function"?r=e.ownKeys:Object.getOwnPropertySymbols?r=function(W){return Object.getOwnPropertyNames(W).concat(Object.getOwnPropertySymbols(W))}:r=function(W){return Object.getOwnPropertyNames(W)};function n(L){console&&console.warn&&console.warn(L)}var i=Number.isNaN||function(W){return W!==W};function s(){s.init.call(this)}gO.exports=s,cc.once=A,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function l(L){if(typeof L!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof L)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(L){if(typeof L!="number"||L<0||i(L))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+L+".");a=L}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(W){if(typeof W!="number"||W<0||i(W))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+W+".");return this._maxListeners=W,this};function y(L){return L._maxListeners===void 0?s.defaultMaxListeners:L._maxListeners}s.prototype.getMaxListeners=function(){return y(this)},s.prototype.emit=function(W){for(var q=[],J=1;J<arguments.length;J++)q.push(arguments[J]);var ve=W==="error",Fe=this._events;if(Fe!==void 0)ve=ve&&Fe.error===void 0;else if(!ve)return!1;if(ve){var z;if(q.length>0&&(z=q[0]),z instanceof Error)throw z;var De=new Error("Unhandled error."+(z?" ("+z.message+")":""));throw De.context=z,De}var xt=Fe[W];if(xt===void 0)return!1;if(typeof xt=="function")t(xt,this,q);else for(var ft=xt.length,Te=P(xt,ft),J=0;J<ft;++J)t(Te[J],this,q);return!0};function d(L,W,q,J){var ve,Fe,z;if(l(q),Fe=L._events,Fe===void 0?(Fe=L._events=Object.create(null),L._eventsCount=0):(Fe.newListener!==void 0&&(L.emit("newListener",W,q.listener?q.listener:q),Fe=L._events),z=Fe[W]),z===void 0)z=Fe[W]=q,++L._eventsCount;else if(typeof z=="function"?z=Fe[W]=J?[q,z]:[z,q]:J?z.unshift(q):z.push(q),ve=y(L),ve>0&&z.length>ve&&!z.warned){z.warned=!0;var De=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(W)+" listeners added. Use emitter.setMaxListeners() to increase limit");De.name="MaxListenersExceededWarning",De.emitter=L,De.type=W,De.count=z.length,n(De)}return L}s.prototype.addListener=function(W,q){return d(this,W,q,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(W,q){return d(this,W,q,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(L,W,q){var J={fired:!1,wrapFn:void 0,target:L,type:W,listener:q},ve=m.bind(J);return ve.listener=q,J.wrapFn=ve,ve}s.prototype.once=function(W,q){return l(q),this.on(W,g(this,W,q)),this},s.prototype.prependOnceListener=function(W,q){return l(q),this.prependListener(W,g(this,W,q)),this},s.prototype.removeListener=function(W,q){var J,ve,Fe,z,De;if(l(q),ve=this._events,ve===void 0)return this;if(J=ve[W],J===void 0)return this;if(J===q||J.listener===q)--this._eventsCount===0?this._events=Object.create(null):(delete ve[W],ve.removeListener&&this.emit("removeListener",W,J.listener||q));else if(typeof J!="function"){for(Fe=-1,z=J.length-1;z>=0;z--)if(J[z]===q||J[z].listener===q){De=J[z].listener,Fe=z;break}if(Fe<0)return this;Fe===0?J.shift():I(J,Fe),J.length===1&&(ve[W]=J[0]),ve.removeListener!==void 0&&this.emit("removeListener",W,De||q)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(W){var q,J,ve;if(J=this._events,J===void 0)return this;if(J.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):J[W]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete J[W]),this;if(arguments.length===0){var Fe=Object.keys(J),z;for(ve=0;ve<Fe.length;++ve)z=Fe[ve],z!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(q=J[W],typeof q=="function")this.removeListener(W,q);else if(q!==void 0)for(ve=q.length-1;ve>=0;ve--)this.removeListener(W,q[ve]);return this};function E(L,W,q){var J=L._events;if(J===void 0)return[];var ve=J[W];return ve===void 0?[]:typeof ve=="function"?q?[ve.listener||ve]:[ve]:q?D(ve):P(ve,ve.length)}s.prototype.listeners=function(W){return E(this,W,!0)},s.prototype.rawListeners=function(W){return E(this,W,!1)},s.listenerCount=function(L,W){return typeof L.listenerCount=="function"?L.listenerCount(W):b.call(L,W)},s.prototype.listenerCount=b;function b(L){var W=this._events;if(W!==void 0){var q=W[L];if(typeof q=="function")return 1;if(q!==void 0)return q.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function P(L,W){for(var q=new Array(W),J=0;J<W;++J)q[J]=L[J];return q}function I(L,W){for(;W+1<L.length;W++)L[W]=L[W+1];L.pop()}function D(L){for(var W=new Array(L.length),q=0;q<W.length;++q)W[q]=L[q].listener||L[q];return W}function A(L,W){return new Promise(function(q,J){function ve(z){L.removeListener(W,Fe),J(z)}function Fe(){typeof L.removeListener=="function"&&L.removeListener("error",ve),q([].slice.call(arguments))}N(L,W,Fe,{once:!0}),W!=="error"&&R(L,ve,{once:!0})})}function R(L,W,q){typeof L.on=="function"&&N(L,"error",W,q)}function N(L,W,q,J){if(typeof L.on=="function")J.once?L.once(W,q):L.on(W,q);else if(typeof L.addEventListener=="function")L.addEventListener(W,function ve(Fe){J.once&&L.removeEventListener(W,ve),q(Fe)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof L)}return cc}const{ArrayIsArray:yO,ObjectSetPrototypeOf:GR}=Gn,{EventEmitter:lp}=up();function cp(e){lp.call(this,e)}GR(cp.prototype,lp.prototype);GR(cp,lp);cp.prototype.pipe=function(e,t){const r=this;function n(m){e.writable&&e.write(m)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}e.on("drain",i),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",a),r.on("close",l));let s=!1;function a(){s||(s=!0,e.end())}function l(){s||(s=!0,typeof e.destroy=="function"&&e.destroy())}function y(m){d(),lp.listenerCount(this,"error")===0&&this.emit("error",m)}Uy(r,"error",y),Uy(e,"error",y);function d(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",a),r.removeListener("close",l),r.removeListener("error",y),e.removeListener("error",y),r.removeListener("end",d),r.removeListener("close",d),e.removeListener("close",d)}return r.on("end",d),r.on("close",d),e.on("close",d),e.emit("pipe",r),e};function Uy(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):yO(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}var Qm={Stream:cp,prependListener:Uy},Oc={},mO={get exports(){return Oc},set exports(e){Oc=e}};(function(e){const{AbortError:t,codes:r}=Oi,n=Do,{ERR_INVALID_ARG_TYPE:i}=r,s=(l,y)=>{if(typeof l!="object"||!("aborted"in l))throw new i(y,"AbortSignal",l)};function a(l){return!!(l&&typeof l.pipe=="function")}e.exports.addAbortSignal=function(y,d){if(s(y,"signal"),!a(d))throw new i("stream","stream.Stream",d);return e.exports.addAbortSignalNoValidate(y,d)},e.exports.addAbortSignalNoValidate=function(l,y){if(typeof l!="object"||!("aborted"in l))return y;const d=()=>{y.destroy(new t(void 0,{cause:l.reason}))};return l.aborted?d():(l.addEventListener("abort",d),n(y,()=>l.removeEventListener("abort",d))),y}})(mO);const{StringPrototypeSlice:VS,SymbolIterator:vO,TypedArrayPrototypeSet:Ef,Uint8Array:wO}=Gn,{Buffer:g0}=Hs,{inspect:_O}=bo;var SO=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){const r={data:t,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(t){const r={data:t,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;const t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=t+r.data;return n}concat(t){if(this.length===0)return g0.alloc(0);const r=g0.allocUnsafe(t>>>0);let n=this.head,i=0;for(;n;)Ef(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(t,r){const n=this.head.data;if(t<n.length){const i=n.slice(0,t);return this.head.data=n.slice(t),i}return t===n.length?this.shift():r?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[vO](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let r="",n=this.head,i=0;do{const s=n.data;if(t>s.length)r+=s,t-=s.length;else{t===s.length?(r+=s,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=VS(s,0,t),this.head=n,n.data=VS(s,t));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(t){const r=g0.allocUnsafe(t),n=t;let i=this.head,s=0;do{const a=i.data;if(t>a.length)Ef(r,a,n-t),t-=a.length;else{t===a.length?(Ef(r,a,n-t),++s,i.next?this.head=i.next:this.head=this.tail=null):(Ef(r,new wO(a.buffer,a.byteOffset,t),n-t),this.head=i,i.data=a.slice(t));break}++s}while((i=i.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](t,r){return _O(this,{...r,depth:0,customInspect:!1})}};const{MathFloor:bO,NumberIsInteger:EO}=Gn,{ERR_INVALID_ARG_VALUE:AO}=Oi.codes;function RO(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function JR(e){return e?16:16*1024}function xO(e,t,r,n){const i=RO(t,n,r);if(i!=null){if(!EO(i)||i<0){const s=n?`options.${r}`:"options.highWaterMark";throw new AO(s,i)}return bO(i)}return JR(e.objectMode)}var Ym={getHighWaterMark:xO,getDefaultHighWaterMark:JR},QR={},Rh={},CO={get exports(){return Rh},set exports(e){Rh=e}},YR={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){var t=Hc,r=Zh,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=R,e.INSPECT_MAX_BYTES=50;var i=2147483647;e.kMaxLength=i,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var B=new Uint8Array(1),C={foo:function(){return 42}};return Object.setPrototypeOf(C,Uint8Array.prototype),Object.setPrototypeOf(B,C),B.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function a(B){if(B>i)throw new RangeError('The value "'+B+'" is invalid for option "size"');var C=new Uint8Array(B);return Object.setPrototypeOf(C,l.prototype),C}function l(B,C,U){if(typeof B=="number"){if(typeof C=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(B)}return y(B,C,U)}l.poolSize=8192;function y(B,C,U){if(typeof B=="string")return E(B,C);if(ArrayBuffer.isView(B))return P(B);if(B==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B);if(F(B,ArrayBuffer)||B&&F(B.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(F(B,SharedArrayBuffer)||B&&F(B.buffer,SharedArrayBuffer)))return I(B,C,U);if(typeof B=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ne=B.valueOf&&B.valueOf();if(ne!=null&&ne!==B)return l.from(ne,C,U);var Re=D(B);if(Re)return Re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof B[Symbol.toPrimitive]=="function")return l.from(B[Symbol.toPrimitive]("string"),C,U);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B)}l.from=function(B,C,U){return y(B,C,U)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function d(B){if(typeof B!="number")throw new TypeError('"size" argument must be of type number');if(B<0)throw new RangeError('The value "'+B+'" is invalid for option "size"')}function m(B,C,U){return d(B),B<=0?a(B):C!==void 0?typeof U=="string"?a(B).fill(C,U):a(B).fill(C):a(B)}l.alloc=function(B,C,U){return m(B,C,U)};function g(B){return d(B),a(B<0?0:A(B)|0)}l.allocUnsafe=function(B){return g(B)},l.allocUnsafeSlow=function(B){return g(B)};function E(B,C){if((typeof C!="string"||C==="")&&(C="utf8"),!l.isEncoding(C))throw new TypeError("Unknown encoding: "+C);var U=N(B,C)|0,ne=a(U),Re=ne.write(B,C);return Re!==U&&(ne=ne.slice(0,Re)),ne}function b(B){for(var C=B.length<0?0:A(B.length)|0,U=a(C),ne=0;ne<C;ne+=1)U[ne]=B[ne]&255;return U}function P(B){if(F(B,Uint8Array)){var C=new Uint8Array(B);return I(C.buffer,C.byteOffset,C.byteLength)}return b(B)}function I(B,C,U){if(C<0||B.byteLength<C)throw new RangeError('"offset" is outside of buffer bounds');if(B.byteLength<C+(U||0))throw new RangeError('"length" is outside of buffer bounds');var ne;return C===void 0&&U===void 0?ne=new Uint8Array(B):U===void 0?ne=new Uint8Array(B,C):ne=new Uint8Array(B,C,U),Object.setPrototypeOf(ne,l.prototype),ne}function D(B){if(l.isBuffer(B)){var C=A(B.length)|0,U=a(C);return U.length===0||B.copy(U,0,0,C),U}if(B.length!==void 0)return typeof B.length!="number"||K(B.length)?a(0):b(B);if(B.type==="Buffer"&&Array.isArray(B.data))return b(B.data)}function A(B){if(B>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return B|0}function R(B){return+B!=B&&(B=0),l.alloc(+B)}l.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==l.prototype},l.compare=function(C,U){if(F(C,Uint8Array)&&(C=l.from(C,C.offset,C.byteLength)),F(U,Uint8Array)&&(U=l.from(U,U.offset,U.byteLength)),!l.isBuffer(C)||!l.isBuffer(U))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===U)return 0;for(var ne=C.length,Re=U.length,Le=0,qe=Math.min(ne,Re);Le<qe;++Le)if(C[Le]!==U[Le]){ne=C[Le],Re=U[Le];break}return ne<Re?-1:Re<ne?1:0},l.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(C,U){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return l.alloc(0);var ne;if(U===void 0)for(U=0,ne=0;ne<C.length;++ne)U+=C[ne].length;var Re=l.allocUnsafe(U),Le=0;for(ne=0;ne<C.length;++ne){var qe=C[ne];if(F(qe,Uint8Array))Le+qe.length>Re.length?l.from(qe).copy(Re,Le):Uint8Array.prototype.set.call(Re,qe,Le);else if(l.isBuffer(qe))qe.copy(Re,Le);else throw new TypeError('"list" argument must be an Array of Buffers');Le+=qe.length}return Re};function N(B,C){if(l.isBuffer(B))return B.length;if(ArrayBuffer.isView(B)||F(B,ArrayBuffer))return B.byteLength;if(typeof B!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof B);var U=B.length,ne=arguments.length>2&&arguments[2]===!0;if(!ne&&U===0)return 0;for(var Re=!1;;)switch(C){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":return Pt(B).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U*2;case"hex":return U>>>1;case"base64":return ee(B).length;default:if(Re)return ne?-1:Pt(B).length;C=(""+C).toLowerCase(),Re=!0}}l.byteLength=N;function L(B,C,U){var ne=!1;if((C===void 0||C<0)&&(C=0),C>this.length||((U===void 0||U>this.length)&&(U=this.length),U<=0)||(U>>>=0,C>>>=0,U<=C))return"";for(B||(B="utf8");;)switch(B){case"hex":return Je(this,C,U);case"utf8":case"utf-8":return Te(this,C,U);case"ascii":return Ct(this,C,U);case"latin1":case"binary":return $e(this,C,U);case"base64":return ft(this,C,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ke(this,C,U);default:if(ne)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),ne=!0}}l.prototype._isBuffer=!0;function W(B,C,U){var ne=B[C];B[C]=B[U],B[U]=ne}l.prototype.swap16=function(){var C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var U=0;U<C;U+=2)W(this,U,U+1);return this},l.prototype.swap32=function(){var C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var U=0;U<C;U+=4)W(this,U,U+3),W(this,U+1,U+2);return this},l.prototype.swap64=function(){var C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var U=0;U<C;U+=8)W(this,U,U+7),W(this,U+1,U+6),W(this,U+2,U+5),W(this,U+3,U+4);return this},l.prototype.toString=function(){var C=this.length;return C===0?"":arguments.length===0?Te(this,0,C):L.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(C){if(!l.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:l.compare(this,C)===0},l.prototype.inspect=function(){var C="",U=e.INSPECT_MAX_BYTES;return C=this.toString("hex",0,U).replace(/(.{2})/g,"$1 ").trim(),this.length>U&&(C+=" ... "),"<Buffer "+C+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(C,U,ne,Re,Le){if(F(C,Uint8Array)&&(C=l.from(C,C.offset,C.byteLength)),!l.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(U===void 0&&(U=0),ne===void 0&&(ne=C?C.length:0),Re===void 0&&(Re=0),Le===void 0&&(Le=this.length),U<0||ne>C.length||Re<0||Le>this.length)throw new RangeError("out of range index");if(Re>=Le&&U>=ne)return 0;if(Re>=Le)return-1;if(U>=ne)return 1;if(U>>>=0,ne>>>=0,Re>>>=0,Le>>>=0,this===C)return 0;for(var qe=Le-Re,Et=ne-U,Wt=Math.min(qe,Et),Y=this.slice(Re,Le),te=C.slice(U,ne),j=0;j<Wt;++j)if(Y[j]!==te[j]){qe=Y[j],Et=te[j];break}return qe<Et?-1:Et<qe?1:0};function q(B,C,U,ne,Re){if(B.length===0)return-1;if(typeof U=="string"?(ne=U,U=0):U>2147483647?U=2147483647:U<-2147483648&&(U=-2147483648),U=+U,K(U)&&(U=Re?0:B.length-1),U<0&&(U=B.length+U),U>=B.length){if(Re)return-1;U=B.length-1}else if(U<0)if(Re)U=0;else return-1;if(typeof C=="string"&&(C=l.from(C,ne)),l.isBuffer(C))return C.length===0?-1:J(B,C,U,ne,Re);if(typeof C=="number")return C=C&255,typeof Uint8Array.prototype.indexOf=="function"?Re?Uint8Array.prototype.indexOf.call(B,C,U):Uint8Array.prototype.lastIndexOf.call(B,C,U):J(B,[C],U,ne,Re);throw new TypeError("val must be string, number or Buffer")}function J(B,C,U,ne,Re){var Le=1,qe=B.length,Et=C.length;if(ne!==void 0&&(ne=String(ne).toLowerCase(),ne==="ucs2"||ne==="ucs-2"||ne==="utf16le"||ne==="utf-16le")){if(B.length<2||C.length<2)return-1;Le=2,qe/=2,Et/=2,U/=2}function Wt(k,w){return Le===1?k[w]:k.readUInt16BE(w*Le)}var Y;if(Re){var te=-1;for(Y=U;Y<qe;Y++)if(Wt(B,Y)===Wt(C,te===-1?0:Y-te)){if(te===-1&&(te=Y),Y-te+1===Et)return te*Le}else te!==-1&&(Y-=Y-te),te=-1}else for(U+Et>qe&&(U=qe-Et),Y=U;Y>=0;Y--){for(var j=!0,S=0;S<Et;S++)if(Wt(B,Y+S)!==Wt(C,S)){j=!1;break}if(j)return Y}return-1}l.prototype.includes=function(C,U,ne){return this.indexOf(C,U,ne)!==-1},l.prototype.indexOf=function(C,U,ne){return q(this,C,U,ne,!0)},l.prototype.lastIndexOf=function(C,U,ne){return q(this,C,U,ne,!1)};function ve(B,C,U,ne){U=Number(U)||0;var Re=B.length-U;ne?(ne=Number(ne),ne>Re&&(ne=Re)):ne=Re;var Le=C.length;ne>Le/2&&(ne=Le/2);for(var qe=0;qe<ne;++qe){var Et=parseInt(C.substr(qe*2,2),16);if(K(Et))return qe;B[U+qe]=Et}return qe}function Fe(B,C,U,ne){return M(Pt(C,B.length-U),B,U,ne)}function z(B,C,U,ne){return M(Ye(C),B,U,ne)}function De(B,C,U,ne){return M(ee(C),B,U,ne)}function xt(B,C,U,ne){return M(We(C,B.length-U),B,U,ne)}l.prototype.write=function(C,U,ne,Re){if(U===void 0)Re="utf8",ne=this.length,U=0;else if(ne===void 0&&typeof U=="string")Re=U,ne=this.length,U=0;else if(isFinite(U))U=U>>>0,isFinite(ne)?(ne=ne>>>0,Re===void 0&&(Re="utf8")):(Re=ne,ne=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Le=this.length-U;if((ne===void 0||ne>Le)&&(ne=Le),C.length>0&&(ne<0||U<0)||U>this.length)throw new RangeError("Attempt to write outside buffer bounds");Re||(Re="utf8");for(var qe=!1;;)switch(Re){case"hex":return ve(this,C,U,ne);case"utf8":case"utf-8":return Fe(this,C,U,ne);case"ascii":case"latin1":case"binary":return z(this,C,U,ne);case"base64":return De(this,C,U,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xt(this,C,U,ne);default:if(qe)throw new TypeError("Unknown encoding: "+Re);Re=(""+Re).toLowerCase(),qe=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ft(B,C,U){return C===0&&U===B.length?t.fromByteArray(B):t.fromByteArray(B.slice(C,U))}function Te(B,C,U){U=Math.min(B.length,U);for(var ne=[],Re=C;Re<U;){var Le=B[Re],qe=null,Et=Le>239?4:Le>223?3:Le>191?2:1;if(Re+Et<=U){var Wt,Y,te,j;switch(Et){case 1:Le<128&&(qe=Le);break;case 2:Wt=B[Re+1],(Wt&192)===128&&(j=(Le&31)<<6|Wt&63,j>127&&(qe=j));break;case 3:Wt=B[Re+1],Y=B[Re+2],(Wt&192)===128&&(Y&192)===128&&(j=(Le&15)<<12|(Wt&63)<<6|Y&63,j>2047&&(j<55296||j>57343)&&(qe=j));break;case 4:Wt=B[Re+1],Y=B[Re+2],te=B[Re+3],(Wt&192)===128&&(Y&192)===128&&(te&192)===128&&(j=(Le&15)<<18|(Wt&63)<<12|(Y&63)<<6|te&63,j>65535&&j<1114112&&(qe=j))}}qe===null?(qe=65533,Et=1):qe>65535&&(qe-=65536,ne.push(qe>>>10&1023|55296),qe=56320|qe&1023),ne.push(qe),Re+=Et}return st(ne)}var He=4096;function st(B){var C=B.length;if(C<=He)return String.fromCharCode.apply(String,B);for(var U="",ne=0;ne<C;)U+=String.fromCharCode.apply(String,B.slice(ne,ne+=He));return U}function Ct(B,C,U){var ne="";U=Math.min(B.length,U);for(var Re=C;Re<U;++Re)ne+=String.fromCharCode(B[Re]&127);return ne}function $e(B,C,U){var ne="";U=Math.min(B.length,U);for(var Re=C;Re<U;++Re)ne+=String.fromCharCode(B[Re]);return ne}function Je(B,C,U){var ne=B.length;(!C||C<0)&&(C=0),(!U||U<0||U>ne)&&(U=ne);for(var Re="",Le=C;Le<U;++Le)Re+=re[B[Le]];return Re}function ke(B,C,U){for(var ne=B.slice(C,U),Re="",Le=0;Le<ne.length-1;Le+=2)Re+=String.fromCharCode(ne[Le]+ne[Le+1]*256);return Re}l.prototype.slice=function(C,U){var ne=this.length;C=~~C,U=U===void 0?ne:~~U,C<0?(C+=ne,C<0&&(C=0)):C>ne&&(C=ne),U<0?(U+=ne,U<0&&(U=0)):U>ne&&(U=ne),U<C&&(U=C);var Re=this.subarray(C,U);return Object.setPrototypeOf(Re,l.prototype),Re};function Xe(B,C,U){if(B%1!==0||B<0)throw new RangeError("offset is not uint");if(B+C>U)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(C,U,ne){C=C>>>0,U=U>>>0,ne||Xe(C,U,this.length);for(var Re=this[C],Le=1,qe=0;++qe<U&&(Le*=256);)Re+=this[C+qe]*Le;return Re},l.prototype.readUintBE=l.prototype.readUIntBE=function(C,U,ne){C=C>>>0,U=U>>>0,ne||Xe(C,U,this.length);for(var Re=this[C+--U],Le=1;U>0&&(Le*=256);)Re+=this[C+--U]*Le;return Re},l.prototype.readUint8=l.prototype.readUInt8=function(C,U){return C=C>>>0,U||Xe(C,1,this.length),this[C]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(C,U){return C=C>>>0,U||Xe(C,2,this.length),this[C]|this[C+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(C,U){return C=C>>>0,U||Xe(C,2,this.length),this[C]<<8|this[C+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(C,U){return C=C>>>0,U||Xe(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(C,U){return C=C>>>0,U||Xe(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},l.prototype.readIntLE=function(C,U,ne){C=C>>>0,U=U>>>0,ne||Xe(C,U,this.length);for(var Re=this[C],Le=1,qe=0;++qe<U&&(Le*=256);)Re+=this[C+qe]*Le;return Le*=128,Re>=Le&&(Re-=Math.pow(2,8*U)),Re},l.prototype.readIntBE=function(C,U,ne){C=C>>>0,U=U>>>0,ne||Xe(C,U,this.length);for(var Re=U,Le=1,qe=this[C+--Re];Re>0&&(Le*=256);)qe+=this[C+--Re]*Le;return Le*=128,qe>=Le&&(qe-=Math.pow(2,8*U)),qe},l.prototype.readInt8=function(C,U){return C=C>>>0,U||Xe(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},l.prototype.readInt16LE=function(C,U){C=C>>>0,U||Xe(C,2,this.length);var ne=this[C]|this[C+1]<<8;return ne&32768?ne|4294901760:ne},l.prototype.readInt16BE=function(C,U){C=C>>>0,U||Xe(C,2,this.length);var ne=this[C+1]|this[C]<<8;return ne&32768?ne|4294901760:ne},l.prototype.readInt32LE=function(C,U){return C=C>>>0,U||Xe(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},l.prototype.readInt32BE=function(C,U){return C=C>>>0,U||Xe(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},l.prototype.readFloatLE=function(C,U){return C=C>>>0,U||Xe(C,4,this.length),r.read(this,C,!0,23,4)},l.prototype.readFloatBE=function(C,U){return C=C>>>0,U||Xe(C,4,this.length),r.read(this,C,!1,23,4)},l.prototype.readDoubleLE=function(C,U){return C=C>>>0,U||Xe(C,8,this.length),r.read(this,C,!0,52,8)},l.prototype.readDoubleBE=function(C,U){return C=C>>>0,U||Xe(C,8,this.length),r.read(this,C,!1,52,8)};function vt(B,C,U,ne,Re,Le){if(!l.isBuffer(B))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>Re||C<Le)throw new RangeError('"value" argument is out of bounds');if(U+ne>B.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(C,U,ne,Re){if(C=+C,U=U>>>0,ne=ne>>>0,!Re){var Le=Math.pow(2,8*ne)-1;vt(this,C,U,ne,Le,0)}var qe=1,Et=0;for(this[U]=C&255;++Et<ne&&(qe*=256);)this[U+Et]=C/qe&255;return U+ne},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(C,U,ne,Re){if(C=+C,U=U>>>0,ne=ne>>>0,!Re){var Le=Math.pow(2,8*ne)-1;vt(this,C,U,ne,Le,0)}var qe=ne-1,Et=1;for(this[U+qe]=C&255;--qe>=0&&(Et*=256);)this[U+qe]=C/Et&255;return U+ne},l.prototype.writeUint8=l.prototype.writeUInt8=function(C,U,ne){return C=+C,U=U>>>0,ne||vt(this,C,U,1,255,0),this[U]=C&255,U+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(C,U,ne){return C=+C,U=U>>>0,ne||vt(this,C,U,2,65535,0),this[U]=C&255,this[U+1]=C>>>8,U+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(C,U,ne){return C=+C,U=U>>>0,ne||vt(this,C,U,2,65535,0),this[U]=C>>>8,this[U+1]=C&255,U+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(C,U,ne){return C=+C,U=U>>>0,ne||vt(this,C,U,4,4294967295,0),this[U+3]=C>>>24,this[U+2]=C>>>16,this[U+1]=C>>>8,this[U]=C&255,U+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(C,U,ne){return C=+C,U=U>>>0,ne||vt(this,C,U,4,4294967295,0),this[U]=C>>>24,this[U+1]=C>>>16,this[U+2]=C>>>8,this[U+3]=C&255,U+4},l.prototype.writeIntLE=function(C,U,ne,Re){if(C=+C,U=U>>>0,!Re){var Le=Math.pow(2,8*ne-1);vt(this,C,U,ne,Le-1,-Le)}var qe=0,Et=1,Wt=0;for(this[U]=C&255;++qe<ne&&(Et*=256);)C<0&&Wt===0&&this[U+qe-1]!==0&&(Wt=1),this[U+qe]=(C/Et>>0)-Wt&255;return U+ne},l.prototype.writeIntBE=function(C,U,ne,Re){if(C=+C,U=U>>>0,!Re){var Le=Math.pow(2,8*ne-1);vt(this,C,U,ne,Le-1,-Le)}var qe=ne-1,Et=1,Wt=0;for(this[U+qe]=C&255;--qe>=0&&(Et*=256);)C<0&&Wt===0&&this[U+qe+1]!==0&&(Wt=1),this[U+qe]=(C/Et>>0)-Wt&255;return U+ne},l.prototype.writeInt8=function(C,U,ne){return C=+C,U=U>>>0,ne||vt(this,C,U,1,127,-128),C<0&&(C=255+C+1),this[U]=C&255,U+1},l.prototype.writeInt16LE=function(C,U,ne){return C=+C,U=U>>>0,ne||vt(this,C,U,2,32767,-32768),this[U]=C&255,this[U+1]=C>>>8,U+2},l.prototype.writeInt16BE=function(C,U,ne){return C=+C,U=U>>>0,ne||vt(this,C,U,2,32767,-32768),this[U]=C>>>8,this[U+1]=C&255,U+2},l.prototype.writeInt32LE=function(C,U,ne){return C=+C,U=U>>>0,ne||vt(this,C,U,4,2147483647,-2147483648),this[U]=C&255,this[U+1]=C>>>8,this[U+2]=C>>>16,this[U+3]=C>>>24,U+4},l.prototype.writeInt32BE=function(C,U,ne){return C=+C,U=U>>>0,ne||vt(this,C,U,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[U]=C>>>24,this[U+1]=C>>>16,this[U+2]=C>>>8,this[U+3]=C&255,U+4};function vr(B,C,U,ne,Re,Le){if(U+ne>B.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function pr(B,C,U,ne,Re){return C=+C,U=U>>>0,Re||vr(B,C,U,4),r.write(B,C,U,ne,23,4),U+4}l.prototype.writeFloatLE=function(C,U,ne){return pr(this,C,U,!0,ne)},l.prototype.writeFloatBE=function(C,U,ne){return pr(this,C,U,!1,ne)};function Nt(B,C,U,ne,Re){return C=+C,U=U>>>0,Re||vr(B,C,U,8),r.write(B,C,U,ne,52,8),U+8}l.prototype.writeDoubleLE=function(C,U,ne){return Nt(this,C,U,!0,ne)},l.prototype.writeDoubleBE=function(C,U,ne){return Nt(this,C,U,!1,ne)},l.prototype.copy=function(C,U,ne,Re){if(!l.isBuffer(C))throw new TypeError("argument should be a Buffer");if(ne||(ne=0),!Re&&Re!==0&&(Re=this.length),U>=C.length&&(U=C.length),U||(U=0),Re>0&&Re<ne&&(Re=ne),Re===ne||C.length===0||this.length===0)return 0;if(U<0)throw new RangeError("targetStart out of bounds");if(ne<0||ne>=this.length)throw new RangeError("Index out of range");if(Re<0)throw new RangeError("sourceEnd out of bounds");Re>this.length&&(Re=this.length),C.length-U<Re-ne&&(Re=C.length-U+ne);var Le=Re-ne;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(U,ne,Re):Uint8Array.prototype.set.call(C,this.subarray(ne,Re),U),Le},l.prototype.fill=function(C,U,ne,Re){if(typeof C=="string"){if(typeof U=="string"?(Re=U,U=0,ne=this.length):typeof ne=="string"&&(Re=ne,ne=this.length),Re!==void 0&&typeof Re!="string")throw new TypeError("encoding must be a string");if(typeof Re=="string"&&!l.isEncoding(Re))throw new TypeError("Unknown encoding: "+Re);if(C.length===1){var Le=C.charCodeAt(0);(Re==="utf8"&&Le<128||Re==="latin1")&&(C=Le)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(U<0||this.length<U||this.length<ne)throw new RangeError("Out of range index");if(ne<=U)return this;U=U>>>0,ne=ne===void 0?this.length:ne>>>0,C||(C=0);var qe;if(typeof C=="number")for(qe=U;qe<ne;++qe)this[qe]=C;else{var Et=l.isBuffer(C)?C:l.from(C,Re),Wt=Et.length;if(Wt===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(qe=0;qe<ne-U;++qe)this[qe+U]=Et[qe%Wt]}return this};var Fr=/[^+/0-9A-Za-z-_]/g;function ar(B){if(B=B.split("=")[0],B=B.trim().replace(Fr,""),B.length<2)return"";for(;B.length%4!==0;)B=B+"=";return B}function Pt(B,C){C=C||1/0;for(var U,ne=B.length,Re=null,Le=[],qe=0;qe<ne;++qe){if(U=B.charCodeAt(qe),U>55295&&U<57344){if(!Re){if(U>56319){(C-=3)>-1&&Le.push(239,191,189);continue}else if(qe+1===ne){(C-=3)>-1&&Le.push(239,191,189);continue}Re=U;continue}if(U<56320){(C-=3)>-1&&Le.push(239,191,189),Re=U;continue}U=(Re-55296<<10|U-56320)+65536}else Re&&(C-=3)>-1&&Le.push(239,191,189);if(Re=null,U<128){if((C-=1)<0)break;Le.push(U)}else if(U<2048){if((C-=2)<0)break;Le.push(U>>6|192,U&63|128)}else if(U<65536){if((C-=3)<0)break;Le.push(U>>12|224,U>>6&63|128,U&63|128)}else if(U<1114112){if((C-=4)<0)break;Le.push(U>>18|240,U>>12&63|128,U>>6&63|128,U&63|128)}else throw new Error("Invalid code point")}return Le}function Ye(B){for(var C=[],U=0;U<B.length;++U)C.push(B.charCodeAt(U)&255);return C}function We(B,C){for(var U,ne,Re,Le=[],qe=0;qe<B.length&&!((C-=2)<0);++qe)U=B.charCodeAt(qe),ne=U>>8,Re=U%256,Le.push(Re),Le.push(ne);return Le}function ee(B){return t.toByteArray(ar(B))}function M(B,C,U,ne){for(var Re=0;Re<ne&&!(Re+U>=C.length||Re>=B.length);++Re)C[Re+U]=B[Re];return Re}function F(B,C){return B instanceof C||B!=null&&B.constructor!=null&&B.constructor.name!=null&&B.constructor.name===C.name}function K(B){return B!==B}var re=function(){for(var B="0123456789abcdef",C=new Array(256),U=0;U<16;++U)for(var ne=U*16,Re=0;Re<16;++Re)C[ne+Re]=B[U]+B[Re];return C}()})(YR);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(e,t){var r=YR,n=r.Buffer;function i(a,l){for(var y in a)l[y]=a[y]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=s);function s(a,l,y){return n(a,l,y)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(a,l,y){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,l,y)},s.alloc=function(a,l,y){if(typeof a!="number")throw new TypeError("Argument must be a number");var d=n(a);return l!==void 0?typeof y=="string"?d.fill(l,y):d.fill(l):d.fill(0),d},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}})(CO,Rh);var Xm=Rh.Buffer,zS=Xm.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function PO(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function TO(e){var t=PO(e);if(typeof t!="string"&&(Xm.isEncoding===zS||!zS(e)))throw new Error("Unknown encoding: "+e);return t||e}QR.StringDecoder=Wc;function Wc(e){this.encoding=TO(e);var t;switch(this.encoding){case"utf16le":this.text=UO,this.end=DO,t=4;break;case"utf8":this.fillLast=kO,t=4;break;case"base64":this.text=LO,this.end=MO,t=3;break;default:this.write=BO,this.end=jO;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Xm.allocUnsafe(t)}Wc.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};Wc.prototype.end=NO;Wc.prototype.text=OO;Wc.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function y0(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function FO(e,t,r){var n=t.length-1;if(n<r)return 0;var i=y0(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||i===-2?0:(i=y0(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||i===-2?0:(i=y0(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function IO(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,""}}function kO(e){var t=this.lastTotal-this.lastNeed,r=IO(this,e);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function OO(e,t){var r=FO(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function NO(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function UO(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function DO(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function LO(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function MO(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function BO(e){return e.toString(this.encoding)}function jO(e){return e&&e.length?this.write(e):""}const qS=ss,{PromisePrototypeThen:HO,SymbolAsyncIterator:GS,SymbolIterator:JS}=Gn,{Buffer:$O}=Hs,{ERR_INVALID_ARG_TYPE:WO,ERR_STREAM_NULL_VALUES:KO}=Oi.codes;function VO(e,t,r){let n;if(typeof t=="string"||t instanceof $O)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});let i;if(t&&t[GS])i=!0,n=t[GS]();else if(t&&t[JS])i=!1,n=t[JS]();else throw new WO("iterable",["Iterable"],t);const s=new e({objectMode:!0,highWaterMark:1,...r});let a=!1;s._read=function(){a||(a=!0,y())},s._destroy=function(d,m){HO(l(d),()=>qS.nextTick(m,d),g=>qS.nextTick(m,g||d))};async function l(d){const m=d!=null,g=typeof n.throw=="function";if(m&&g){const{value:E,done:b}=await n.throw(d);if(await E,b)return}if(typeof n.return=="function"){const{value:E}=await n.return();await E}}async function y(){for(;;){try{const{value:d,done:m}=i?await n.next():n.next();if(m)s.push(null);else{const g=d&&typeof d.then=="function"?await d:d;if(g===null)throw a=!1,new KO;if(s.push(g))continue;a=!1}}catch(d){s.destroy(d)}break}}return s}var XR=VO,m0,QS;function dp(){if(QS)return m0;QS=1;const e=ss,{ArrayPrototypeIndexOf:t,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:i,ObjectDefineProperties:s,ObjectKeys:a,ObjectSetPrototypeOf:l,Promise:y,SafeSet:d,SymbolAsyncIterator:m,Symbol:g}=Gn;m0=ke,ke.ReadableState=Je;const{EventEmitter:E}=up(),{Stream:b,prependListener:P}=Qm,{Buffer:I}=Hs,{addAbortSignal:D}=Oc,A=Do;let R=bo.debuglog("stream",Y=>{R=Y});const N=SO,L=Ju,{getHighWaterMark:W,getDefaultHighWaterMark:q}=Ym,{aggregateTwoErrors:J,codes:{ERR_INVALID_ARG_TYPE:ve,ERR_METHOD_NOT_IMPLEMENTED:Fe,ERR_OUT_OF_RANGE:z,ERR_STREAM_PUSH_AFTER_EOF:De,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:xt}}=Oi,{validateObject:ft}=rp,Te=g("kPaused"),{StringDecoder:He}=QR,st=XR;l(ke.prototype,b.prototype),l(ke,b);const Ct=()=>{},{errorOrDestroy:$e}=L;function Je(Y,te,j){typeof j!="boolean"&&(j=te instanceof as()),this.objectMode=!!(Y&&Y.objectMode),j&&(this.objectMode=this.objectMode||!!(Y&&Y.readableObjectMode)),this.highWaterMark=Y?W(this,Y,"readableHighWaterMark",j):q(!1),this.buffer=new N,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[Te]=null,this.errorEmitted=!1,this.emitClose=!Y||Y.emitClose!==!1,this.autoDestroy=!Y||Y.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=Y&&Y.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,Y&&Y.encoding&&(this.decoder=new He(Y.encoding),this.encoding=Y.encoding)}function ke(Y){if(!(this instanceof ke))return new ke(Y);const te=this instanceof as();this._readableState=new Je(Y,this,te),Y&&(typeof Y.read=="function"&&(this._read=Y.read),typeof Y.destroy=="function"&&(this._destroy=Y.destroy),typeof Y.construct=="function"&&(this._construct=Y.construct),Y.signal&&!te&&D(Y.signal,this)),b.call(this,Y),L.construct(this,()=>{this._readableState.needReadable&&Ye(this,this._readableState)})}ke.prototype.destroy=L.destroy,ke.prototype._undestroy=L.undestroy,ke.prototype._destroy=function(Y,te){te(Y)},ke.prototype[E.captureRejectionSymbol]=function(Y){this.destroy(Y)},ke.prototype.push=function(Y,te){return Xe(this,Y,te,!1)},ke.prototype.unshift=function(Y,te){return Xe(this,Y,te,!0)};function Xe(Y,te,j,S){R("readableAddChunk",te);const k=Y._readableState;let w;if(k.objectMode||(typeof te=="string"?(j=j||k.defaultEncoding,k.encoding!==j&&(S&&k.encoding?te=I.from(te,j).toString(k.encoding):(te=I.from(te,j),j=""))):te instanceof I?j="":b._isUint8Array(te)?(te=b._uint8ArrayToBuffer(te),j=""):te!=null&&(w=new ve("chunk",["string","Buffer","Uint8Array"],te))),w)$e(Y,w);else if(te===null)k.reading=!1,Fr(Y,k);else if(k.objectMode||te&&te.length>0)if(S)if(k.endEmitted)$e(Y,new xt);else{if(k.destroyed||k.errored)return!1;vt(Y,k,te,!0)}else if(k.ended)$e(Y,new De);else{if(k.destroyed||k.errored)return!1;k.reading=!1,k.decoder&&!j?(te=k.decoder.write(te),k.objectMode||te.length!==0?vt(Y,k,te,!1):Ye(Y,k)):vt(Y,k,te,!1)}else S||(k.reading=!1,Ye(Y,k));return!k.ended&&(k.length<k.highWaterMark||k.length===0)}function vt(Y,te,j,S){te.flowing&&te.length===0&&!te.sync&&Y.listenerCount("data")>0?(te.multiAwaitDrain?te.awaitDrainWriters.clear():te.awaitDrainWriters=null,te.dataEmitted=!0,Y.emit("data",j)):(te.length+=te.objectMode?1:j.length,S?te.buffer.unshift(j):te.buffer.push(j),te.needReadable&&ar(Y)),Ye(Y,te)}ke.prototype.isPaused=function(){const Y=this._readableState;return Y[Te]===!0||Y.flowing===!1},ke.prototype.setEncoding=function(Y){const te=new He(Y);this._readableState.decoder=te,this._readableState.encoding=this._readableState.decoder.encoding;const j=this._readableState.buffer;let S="";for(const k of j)S+=te.write(k);return j.clear(),S!==""&&j.push(S),this._readableState.length=S.length,this};const vr=1073741824;function pr(Y){if(Y>vr)throw new z("size","<= 1GiB",Y);return Y--,Y|=Y>>>1,Y|=Y>>>2,Y|=Y>>>4,Y|=Y>>>8,Y|=Y>>>16,Y++,Y}function Nt(Y,te){return Y<=0||te.length===0&&te.ended?0:te.objectMode?1:n(Y)?te.flowing&&te.length?te.buffer.first().length:te.length:Y<=te.length?Y:te.ended?te.length:0}ke.prototype.read=function(Y){R("read",Y),Y===void 0?Y=NaN:r(Y)||(Y=i(Y,10));const te=this._readableState,j=Y;if(Y>te.highWaterMark&&(te.highWaterMark=pr(Y)),Y!==0&&(te.emittedReadable=!1),Y===0&&te.needReadable&&((te.highWaterMark!==0?te.length>=te.highWaterMark:te.length>0)||te.ended))return R("read: emitReadable",te.length,te.ended),te.length===0&&te.ended?Re(this):ar(this),null;if(Y=Nt(Y,te),Y===0&&te.ended)return te.length===0&&Re(this),null;let S=te.needReadable;if(R("need readable",S),(te.length===0||te.length-Y<te.highWaterMark)&&(S=!0,R("length less than watermark",S)),te.ended||te.reading||te.destroyed||te.errored||!te.constructed)S=!1,R("reading, ended or constructing",S);else if(S){R("do read"),te.reading=!0,te.sync=!0,te.length===0&&(te.needReadable=!0);try{this._read(te.highWaterMark)}catch(w){$e(this,w)}te.sync=!1,te.reading||(Y=Nt(j,te))}let k;return Y>0?k=ne(Y,te):k=null,k===null?(te.needReadable=te.length<=te.highWaterMark,Y=0):(te.length-=Y,te.multiAwaitDrain?te.awaitDrainWriters.clear():te.awaitDrainWriters=null),te.length===0&&(te.ended||(te.needReadable=!0),j!==Y&&te.ended&&Re(this)),k!==null&&!te.errorEmitted&&!te.closeEmitted&&(te.dataEmitted=!0,this.emit("data",k)),k};function Fr(Y,te){if(R("onEofChunk"),!te.ended){if(te.decoder){const j=te.decoder.end();j&&j.length&&(te.buffer.push(j),te.length+=te.objectMode?1:j.length)}te.ended=!0,te.sync?ar(Y):(te.needReadable=!1,te.emittedReadable=!0,Pt(Y))}}function ar(Y){const te=Y._readableState;R("emitReadable",te.needReadable,te.emittedReadable),te.needReadable=!1,te.emittedReadable||(R("emitReadable",te.flowing),te.emittedReadable=!0,e.nextTick(Pt,Y))}function Pt(Y){const te=Y._readableState;R("emitReadable_",te.destroyed,te.length,te.ended),!te.destroyed&&!te.errored&&(te.length||te.ended)&&(Y.emit("readable"),te.emittedReadable=!1),te.needReadable=!te.flowing&&!te.ended&&te.length<=te.highWaterMark,B(Y)}function Ye(Y,te){!te.readingMore&&te.constructed&&(te.readingMore=!0,e.nextTick(We,Y,te))}function We(Y,te){for(;!te.reading&&!te.ended&&(te.length<te.highWaterMark||te.flowing&&te.length===0);){const j=te.length;if(R("maybeReadMore read 0"),Y.read(0),j===te.length)break}te.readingMore=!1}ke.prototype._read=function(Y){throw new Fe("_read()")},ke.prototype.pipe=function(Y,te){const j=this,S=this._readableState;S.pipes.length===1&&(S.multiAwaitDrain||(S.multiAwaitDrain=!0,S.awaitDrainWriters=new d(S.awaitDrainWriters?[S.awaitDrainWriters]:[]))),S.pipes.push(Y),R("pipe count=%d opts=%j",S.pipes.length,te);const w=(!te||te.end!==!1)&&Y!==e.stdout&&Y!==e.stderr?Ae:pe;S.endEmitted?e.nextTick(w):j.once("end",w),Y.on("unpipe",ce);function ce(Me,at){R("onunpipe"),Me===j&&at&&at.hasUnpiped===!1&&(at.hasUnpiped=!0,Tt())}function Ae(){R("onend"),Y.end()}let de,je=!1;function Tt(){R("cleanup"),Y.removeListener("close",Ue),Y.removeListener("finish",ge),de&&Y.removeListener("drain",de),Y.removeListener("error",we),Y.removeListener("unpipe",ce),j.removeListener("end",Ae),j.removeListener("end",pe),j.removeListener("data",wt),je=!0,de&&S.awaitDrainWriters&&(!Y._writableState||Y._writableState.needDrain)&&de()}function Yt(){je||(S.pipes.length===1&&S.pipes[0]===Y?(R("false write response, pause",0),S.awaitDrainWriters=Y,S.multiAwaitDrain=!1):S.pipes.length>1&&S.pipes.includes(Y)&&(R("false write response, pause",S.awaitDrainWriters.size),S.awaitDrainWriters.add(Y)),j.pause()),de||(de=ee(j,Y),Y.on("drain",de))}j.on("data",wt);function wt(Me){R("ondata");const at=Y.write(Me);R("dest.write",at),at===!1&&Yt()}function we(Me){if(R("onerror",Me),pe(),Y.removeListener("error",we),Y.listenerCount("error")===0){const at=Y._writableState||Y._readableState;at&&!at.errorEmitted?$e(Y,Me):Y.emit("error",Me)}}P(Y,"error",we);function Ue(){Y.removeListener("finish",ge),pe()}Y.once("close",Ue);function ge(){R("onfinish"),Y.removeListener("close",Ue),pe()}Y.once("finish",ge);function pe(){R("unpipe"),j.unpipe(Y)}return Y.emit("pipe",j),Y.writableNeedDrain===!0?S.flowing&&Yt():S.flowing||(R("pipe resume"),j.resume()),Y};function ee(Y,te){return function(){const S=Y._readableState;S.awaitDrainWriters===te?(R("pipeOnDrain",1),S.awaitDrainWriters=null):S.multiAwaitDrain&&(R("pipeOnDrain",S.awaitDrainWriters.size),S.awaitDrainWriters.delete(te)),(!S.awaitDrainWriters||S.awaitDrainWriters.size===0)&&Y.listenerCount("data")&&Y.resume()}}ke.prototype.unpipe=function(Y){const te=this._readableState,j={hasUnpiped:!1};if(te.pipes.length===0)return this;if(!Y){const k=te.pipes;te.pipes=[],this.pause();for(let w=0;w<k.length;w++)k[w].emit("unpipe",this,{hasUnpiped:!1});return this}const S=t(te.pipes,Y);return S===-1?this:(te.pipes.splice(S,1),te.pipes.length===0&&this.pause(),Y.emit("unpipe",this,j),this)},ke.prototype.on=function(Y,te){const j=b.prototype.on.call(this,Y,te),S=this._readableState;return Y==="data"?(S.readableListening=this.listenerCount("readable")>0,S.flowing!==!1&&this.resume()):Y==="readable"&&!S.endEmitted&&!S.readableListening&&(S.readableListening=S.needReadable=!0,S.flowing=!1,S.emittedReadable=!1,R("on readable",S.length,S.reading),S.length?ar(this):S.reading||e.nextTick(F,this)),j},ke.prototype.addListener=ke.prototype.on,ke.prototype.removeListener=function(Y,te){const j=b.prototype.removeListener.call(this,Y,te);return Y==="readable"&&e.nextTick(M,this),j},ke.prototype.off=ke.prototype.removeListener,ke.prototype.removeAllListeners=function(Y){const te=b.prototype.removeAllListeners.apply(this,arguments);return(Y==="readable"||Y===void 0)&&e.nextTick(M,this),te};function M(Y){const te=Y._readableState;te.readableListening=Y.listenerCount("readable")>0,te.resumeScheduled&&te[Te]===!1?te.flowing=!0:Y.listenerCount("data")>0?Y.resume():te.readableListening||(te.flowing=null)}function F(Y){R("readable nexttick read 0"),Y.read(0)}ke.prototype.resume=function(){const Y=this._readableState;return Y.flowing||(R("resume"),Y.flowing=!Y.readableListening,K(this,Y)),Y[Te]=!1,this};function K(Y,te){te.resumeScheduled||(te.resumeScheduled=!0,e.nextTick(re,Y,te))}function re(Y,te){R("resume",te.reading),te.reading||Y.read(0),te.resumeScheduled=!1,Y.emit("resume"),B(Y),te.flowing&&!te.reading&&Y.read(0)}ke.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Te]=!0,this};function B(Y){const te=Y._readableState;for(R("flow",te.flowing);te.flowing&&Y.read()!==null;);}ke.prototype.wrap=function(Y){let te=!1;Y.on("data",S=>{!this.push(S)&&Y.pause&&(te=!0,Y.pause())}),Y.on("end",()=>{this.push(null)}),Y.on("error",S=>{$e(this,S)}),Y.on("close",()=>{this.destroy()}),Y.on("destroy",()=>{this.destroy()}),this._read=()=>{te&&Y.resume&&(te=!1,Y.resume())};const j=a(Y);for(let S=1;S<j.length;S++){const k=j[S];this[k]===void 0&&typeof Y[k]=="function"&&(this[k]=Y[k].bind(Y))}return this},ke.prototype[m]=function(){return C(this)},ke.prototype.iterator=function(Y){return Y!==void 0&&ft(Y,"options"),C(this,Y)};function C(Y,te){typeof Y.read!="function"&&(Y=ke.wrap(Y,{objectMode:!0}));const j=U(Y,te);return j.stream=Y,j}async function*U(Y,te){let j=Ct;function S(ce){this===Y?(j(),j=Ct):j=ce}Y.on("readable",S);let k;const w=A(Y,{writable:!1},ce=>{k=ce?J(k,ce):null,j(),j=Ct});try{for(;;){const ce=Y.destroyed?null:Y.read();if(ce!==null)yield ce;else{if(k)throw k;if(k===null)return;await new y(S)}}}catch(ce){throw k=J(k,ce),k}finally{(k||(te==null?void 0:te.destroyOnReturn)!==!1)&&(k===void 0||Y._readableState.autoDestroy)?L.destroyer(Y,null):(Y.off("readable",S),w())}}s(ke.prototype,{readable:{__proto__:null,get(){const Y=this._readableState;return!!Y&&Y.readable!==!1&&!Y.destroyed&&!Y.errorEmitted&&!Y.endEmitted},set(Y){this._readableState&&(this._readableState.readable=!!Y)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(Y){this._readableState&&(this._readableState.flowing=Y)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(Y){this._readableState&&(this._readableState.destroyed=Y)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(Je.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Te]!==!1},set(Y){this[Te]=!!Y}}}),ke._fromList=ne;function ne(Y,te){if(te.length===0)return null;let j;return te.objectMode?j=te.buffer.shift():!Y||Y>=te.length?(te.decoder?j=te.buffer.join(""):te.buffer.length===1?j=te.buffer.first():j=te.buffer.concat(te.length),te.buffer.clear()):j=te.buffer.consume(Y,te.decoder),j}function Re(Y){const te=Y._readableState;R("endReadable",te.endEmitted),te.endEmitted||(te.ended=!0,e.nextTick(Le,te,Y))}function Le(Y,te){if(R("endReadableNT",Y.endEmitted,Y.length),!Y.errored&&!Y.closeEmitted&&!Y.endEmitted&&Y.length===0){if(Y.endEmitted=!0,te.emit("end"),te.writable&&te.allowHalfOpen===!1)e.nextTick(qe,te);else if(Y.autoDestroy){const j=te._writableState;(!j||j.autoDestroy&&(j.finished||j.writable===!1))&&te.destroy()}}}function qe(Y){Y.writable&&!Y.writableEnded&&!Y.destroyed&&Y.end()}ke.from=function(Y,te){return st(ke,Y,te)};let Et;function Wt(){return Et===void 0&&(Et={}),Et}return ke.fromWeb=function(Y,te){return Wt().newStreamReadableFromReadableStream(Y,te)},ke.toWeb=function(Y,te){return Wt().newReadableStreamFromStreamReadable(Y,te)},ke.wrap=function(Y,te){var j,S;return new ke({objectMode:(j=(S=Y.readableObjectMode)!==null&&S!==void 0?S:Y.objectMode)!==null&&j!==void 0?j:!0,...te,destroy(k,w){L.destroyer(Y,k),w(k)}}).wrap(Y)},m0}var v0,YS;function ZR(){if(YS)return v0;YS=1;const e=ss,{ArrayPrototypeSlice:t,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:i,ObjectDefineProperties:s,ObjectSetPrototypeOf:a,StringPrototypeToLowerCase:l,Symbol:y,SymbolHasInstance:d}=Gn;v0=He,He.WritableState=ft;const{EventEmitter:m}=up(),g=Qm.Stream,{Buffer:E}=Hs,b=Ju,{addAbortSignal:P}=Oc,{getHighWaterMark:I,getDefaultHighWaterMark:D}=Ym,{ERR_INVALID_ARG_TYPE:A,ERR_METHOD_NOT_IMPLEMENTED:R,ERR_MULTIPLE_CALLBACK:N,ERR_STREAM_CANNOT_PIPE:L,ERR_STREAM_DESTROYED:W,ERR_STREAM_ALREADY_FINISHED:q,ERR_STREAM_NULL_VALUES:J,ERR_STREAM_WRITE_AFTER_END:ve,ERR_UNKNOWN_ENCODING:Fe}=Oi.codes,{errorOrDestroy:z}=b;a(He.prototype,g.prototype),a(He,g);function De(){}const xt=y("kOnFinished");function ft(F,K,re){typeof re!="boolean"&&(re=K instanceof as()),this.objectMode=!!(F&&F.objectMode),re&&(this.objectMode=this.objectMode||!!(F&&F.writableObjectMode)),this.highWaterMark=F?I(this,F,"writableHighWaterMark",re):D(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const B=!!(F&&F.decodeStrings===!1);this.decodeStrings=!B,this.defaultEncoding=F&&F.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=ke.bind(void 0,K),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Te(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!F||F.emitClose!==!1,this.autoDestroy=!F||F.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[xt]=[]}function Te(F){F.buffered=[],F.bufferedIndex=0,F.allBuffers=!0,F.allNoop=!0}ft.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},i(ft.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function He(F){const K=this instanceof as();if(!K&&!n(He,this))return new He(F);this._writableState=new ft(F,this,K),F&&(typeof F.write=="function"&&(this._write=F.write),typeof F.writev=="function"&&(this._writev=F.writev),typeof F.destroy=="function"&&(this._destroy=F.destroy),typeof F.final=="function"&&(this._final=F.final),typeof F.construct=="function"&&(this._construct=F.construct),F.signal&&P(F.signal,this)),g.call(this,F),b.construct(this,()=>{const re=this._writableState;re.writing||pr(this,re),Pt(this,re)})}i(He,d,{__proto__:null,value:function(F){return n(this,F)?!0:this!==He?!1:F&&F._writableState instanceof ft}}),He.prototype.pipe=function(){z(this,new L)};function st(F,K,re,B){const C=F._writableState;if(typeof re=="function")B=re,re=C.defaultEncoding;else{if(!re)re=C.defaultEncoding;else if(re!=="buffer"&&!E.isEncoding(re))throw new Fe(re);typeof B!="function"&&(B=De)}if(K===null)throw new J;if(!C.objectMode)if(typeof K=="string")C.decodeStrings!==!1&&(K=E.from(K,re),re="buffer");else if(K instanceof E)re="buffer";else if(g._isUint8Array(K))K=g._uint8ArrayToBuffer(K),re="buffer";else throw new A("chunk",["string","Buffer","Uint8Array"],K);let U;return C.ending?U=new ve:C.destroyed&&(U=new W("write")),U?(e.nextTick(B,U),z(F,U,!0),U):(C.pendingcb++,Ct(F,C,K,re,B))}He.prototype.write=function(F,K,re){return st(this,F,K,re)===!0},He.prototype.cork=function(){this._writableState.corked++},He.prototype.uncork=function(){const F=this._writableState;F.corked&&(F.corked--,F.writing||pr(this,F))},He.prototype.setDefaultEncoding=function(K){if(typeof K=="string"&&(K=l(K)),!E.isEncoding(K))throw new Fe(K);return this._writableState.defaultEncoding=K,this};function Ct(F,K,re,B,C){const U=K.objectMode?1:re.length;K.length+=U;const ne=K.length<K.highWaterMark;return ne||(K.needDrain=!0),K.writing||K.corked||K.errored||!K.constructed?(K.buffered.push({chunk:re,encoding:B,callback:C}),K.allBuffers&&B!=="buffer"&&(K.allBuffers=!1),K.allNoop&&C!==De&&(K.allNoop=!1)):(K.writelen=U,K.writecb=C,K.writing=!0,K.sync=!0,F._write(re,B,K.onwrite),K.sync=!1),ne&&!K.errored&&!K.destroyed}function $e(F,K,re,B,C,U,ne){K.writelen=B,K.writecb=ne,K.writing=!0,K.sync=!0,K.destroyed?K.onwrite(new W("write")):re?F._writev(C,K.onwrite):F._write(C,U,K.onwrite),K.sync=!1}function Je(F,K,re,B){--K.pendingcb,B(re),vr(K),z(F,re)}function ke(F,K){const re=F._writableState,B=re.sync,C=re.writecb;if(typeof C!="function"){z(F,new N);return}re.writing=!1,re.writecb=null,re.length-=re.writelen,re.writelen=0,K?(K.stack,re.errored||(re.errored=K),F._readableState&&!F._readableState.errored&&(F._readableState.errored=K),B?e.nextTick(Je,F,re,K,C):Je(F,re,K,C)):(re.buffered.length>re.bufferedIndex&&pr(F,re),B?re.afterWriteTickInfo!==null&&re.afterWriteTickInfo.cb===C?re.afterWriteTickInfo.count++:(re.afterWriteTickInfo={count:1,cb:C,stream:F,state:re},e.nextTick(Xe,re.afterWriteTickInfo)):vt(F,re,1,C))}function Xe({stream:F,state:K,count:re,cb:B}){return K.afterWriteTickInfo=null,vt(F,K,re,B)}function vt(F,K,re,B){for(!K.ending&&!F.destroyed&&K.length===0&&K.needDrain&&(K.needDrain=!1,F.emit("drain"));re-- >0;)K.pendingcb--,B();K.destroyed&&vr(K),Pt(F,K)}function vr(F){if(F.writing)return;for(let C=F.bufferedIndex;C<F.buffered.length;++C){var K;const{chunk:U,callback:ne}=F.buffered[C],Re=F.objectMode?1:U.length;F.length-=Re,ne((K=F.errored)!==null&&K!==void 0?K:new W("write"))}const re=F[xt].splice(0);for(let C=0;C<re.length;C++){var B;re[C]((B=F.errored)!==null&&B!==void 0?B:new W("end"))}Te(F)}function pr(F,K){if(K.corked||K.bufferProcessing||K.destroyed||!K.constructed)return;const{buffered:re,bufferedIndex:B,objectMode:C}=K,U=re.length-B;if(!U)return;let ne=B;if(K.bufferProcessing=!0,U>1&&F._writev){K.pendingcb-=U-1;const Re=K.allNoop?De:qe=>{for(let Et=ne;Et<re.length;++Et)re[Et].callback(qe)},Le=K.allNoop&&ne===0?re:t(re,ne);Le.allBuffers=K.allBuffers,$e(F,K,!0,K.length,Le,"",Re),Te(K)}else{do{const{chunk:Re,encoding:Le,callback:qe}=re[ne];re[ne++]=null;const Et=C?1:Re.length;$e(F,K,!1,Et,Re,Le,qe)}while(ne<re.length&&!K.writing);ne===re.length?Te(K):ne>256?(re.splice(0,ne),K.bufferedIndex=0):K.bufferedIndex=ne}K.bufferProcessing=!1}He.prototype._write=function(F,K,re){if(this._writev)this._writev([{chunk:F,encoding:K}],re);else throw new R("_write()")},He.prototype._writev=null,He.prototype.end=function(F,K,re){const B=this._writableState;typeof F=="function"?(re=F,F=null,K=null):typeof K=="function"&&(re=K,K=null);let C;if(F!=null){const U=st(this,F,K);U instanceof r&&(C=U)}return B.corked&&(B.corked=1,this.uncork()),C||(!B.errored&&!B.ending?(B.ending=!0,Pt(this,B,!0),B.ended=!0):B.finished?C=new q("end"):B.destroyed&&(C=new W("end"))),typeof re=="function"&&(C||B.finished?e.nextTick(re,C):B[xt].push(re)),this};function Nt(F){return F.ending&&!F.destroyed&&F.constructed&&F.length===0&&!F.errored&&F.buffered.length===0&&!F.finished&&!F.writing&&!F.errorEmitted&&!F.closeEmitted}function Fr(F,K){let re=!1;function B(C){if(re){z(F,C??N());return}if(re=!0,K.pendingcb--,C){const U=K[xt].splice(0);for(let ne=0;ne<U.length;ne++)U[ne](C);z(F,C,K.sync)}else Nt(K)&&(K.prefinished=!0,F.emit("prefinish"),K.pendingcb++,e.nextTick(Ye,F,K))}K.sync=!0,K.pendingcb++;try{F._final(B)}catch(C){B(C)}K.sync=!1}function ar(F,K){!K.prefinished&&!K.finalCalled&&(typeof F._final=="function"&&!K.destroyed?(K.finalCalled=!0,Fr(F,K)):(K.prefinished=!0,F.emit("prefinish")))}function Pt(F,K,re){Nt(K)&&(ar(F,K),K.pendingcb===0&&(re?(K.pendingcb++,e.nextTick((B,C)=>{Nt(C)?Ye(B,C):C.pendingcb--},F,K)):Nt(K)&&(K.pendingcb++,Ye(F,K))))}function Ye(F,K){K.pendingcb--,K.finished=!0;const re=K[xt].splice(0);for(let B=0;B<re.length;B++)re[B]();if(F.emit("finish"),K.autoDestroy){const B=F._readableState;(!B||B.autoDestroy&&(B.endEmitted||B.readable===!1))&&F.destroy()}}s(He.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(F){this._writableState&&(this._writableState.destroyed=F)}},writable:{__proto__:null,get(){const F=this._writableState;return!!F&&F.writable!==!1&&!F.destroyed&&!F.errored&&!F.ending&&!F.ended},set(F){this._writableState&&(this._writableState.writable=!!F)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const F=this._writableState;return F?!F.destroyed&&!F.ending&&F.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const We=b.destroy;He.prototype.destroy=function(F,K){const re=this._writableState;return!re.destroyed&&(re.bufferedIndex<re.buffered.length||re[xt].length)&&e.nextTick(vr,re),We.call(this,F,K),this},He.prototype._undestroy=b.undestroy,He.prototype._destroy=function(F,K){K(F)},He.prototype[m.captureRejectionSymbol]=function(F){this.destroy(F)};let ee;function M(){return ee===void 0&&(ee={}),ee}return He.fromWeb=function(F,K){return M().newStreamWritableFromWritableStream(F,K)},He.toWeb=function(F){return M().newWritableStreamFromStreamWritable(F)},v0}var w0,XS;function zO(){if(XS)return w0;XS=1;const e=ss,t=Hs,{isReadable:r,isWritable:n,isIterable:i,isNodeStream:s,isReadableNodeStream:a,isWritableNodeStream:l,isDuplexNodeStream:y}=Ra,d=Do,{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:E}}=Oi,{destroyer:b}=Ju,P=as(),I=dp(),{createDeferredPromise:D}=bo,A=XR,R=globalThis.Blob||t.Blob,N=typeof R<"u"?function(z){return z instanceof R}:function(z){return!1},L=globalThis.AbortController||qm().AbortController,{FunctionPrototypeCall:W}=Gn;class q extends P{constructor(z){super(z),(z==null?void 0:z.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(z==null?void 0:z.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}w0=function Fe(z,De){if(y(z))return z;if(a(z))return ve({readable:z});if(l(z))return ve({writable:z});if(s(z))return ve({writable:!1,readable:!1});if(typeof z=="function"){const{value:ft,write:Te,final:He,destroy:st}=J(z);if(i(ft))return A(q,ft,{objectMode:!0,write:Te,final:He,destroy:st});const Ct=ft==null?void 0:ft.then;if(typeof Ct=="function"){let $e;const Je=W(Ct,ft,ke=>{if(ke!=null)throw new E("nully","body",ke)},ke=>{b($e,ke)});return $e=new q({objectMode:!0,readable:!1,write:Te,final(ke){He(async()=>{try{await Je,e.nextTick(ke,null)}catch(Xe){e.nextTick(ke,Xe)}})},destroy:st})}throw new E("Iterable, AsyncIterable or AsyncFunction",De,ft)}if(N(z))return Fe(z.arrayBuffer());if(i(z))return A(q,z,{objectMode:!0,writable:!1});if(typeof(z==null?void 0:z.writable)=="object"||typeof(z==null?void 0:z.readable)=="object"){const ft=z!=null&&z.readable?a(z==null?void 0:z.readable)?z==null?void 0:z.readable:Fe(z.readable):void 0,Te=z!=null&&z.writable?l(z==null?void 0:z.writable)?z==null?void 0:z.writable:Fe(z.writable):void 0;return ve({readable:ft,writable:Te})}const xt=z==null?void 0:z.then;if(typeof xt=="function"){let ft;return W(xt,z,Te=>{Te!=null&&ft.push(Te),ft.push(null)},Te=>{b(ft,Te)}),ft=new q({objectMode:!0,writable:!1,read(){}})}throw new g(De,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],z)};function J(Fe){let{promise:z,resolve:De}=D();const xt=new L,ft=xt.signal;return{value:Fe(async function*(){for(;;){const He=z;z=null;const{chunk:st,done:Ct,cb:$e}=await He;if(e.nextTick($e),Ct)return;if(ft.aborted)throw new m(void 0,{cause:ft.reason});({promise:z,resolve:De}=D()),yield st}}(),{signal:ft}),write(He,st,Ct){const $e=De;De=null,$e({chunk:He,done:!1,cb:Ct})},final(He){const st=De;De=null,st({done:!0,cb:He})},destroy(He,st){xt.abort(),st(He)}}}function ve(Fe){const z=Fe.readable&&typeof Fe.readable.read!="function"?I.wrap(Fe.readable):Fe.readable,De=Fe.writable;let xt=!!r(z),ft=!!n(De),Te,He,st,Ct,$e;function Je(ke){const Xe=Ct;Ct=null,Xe?Xe(ke):ke?$e.destroy(ke):!xt&&!ft&&$e.destroy()}return $e=new q({readableObjectMode:!!(z!=null&&z.readableObjectMode),writableObjectMode:!!(De!=null&&De.writableObjectMode),readable:xt,writable:ft}),ft&&(d(De,ke=>{ft=!1,ke&&b(z,ke),Je(ke)}),$e._write=function(ke,Xe,vt){De.write(ke,Xe)?vt():Te=vt},$e._final=function(ke){De.end(),He=ke},De.on("drain",function(){if(Te){const ke=Te;Te=null,ke()}}),De.on("finish",function(){if(He){const ke=He;He=null,ke()}})),xt&&(d(z,ke=>{xt=!1,ke&&b(z,ke),Je(ke)}),z.on("readable",function(){if(st){const ke=st;st=null,ke()}}),z.on("end",function(){$e.push(null)}),$e._read=function(){for(;;){const ke=z.read();if(ke===null){st=$e._read;return}if(!$e.push(ke))return}}),$e._destroy=function(ke,Xe){!ke&&Ct!==null&&(ke=new m),st=null,Te=null,He=null,Ct===null?Xe(ke):(Ct=Xe,b(De,ke),b(z,ke))},$e}return w0}var _0,ZS;function as(){if(ZS)return _0;ZS=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:r,ObjectSetPrototypeOf:n}=Gn;_0=a;const i=dp(),s=ZR();n(a.prototype,i.prototype),n(a,i);{const m=r(s.prototype);for(let g=0;g<m.length;g++){const E=m[g];a.prototype[E]||(a.prototype[E]=s.prototype[E])}}function a(m){if(!(this instanceof a))return new a(m);i.call(this,m),s.call(this,m),m?(this.allowHalfOpen=m.allowHalfOpen!==!1,m.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),m.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(a.prototype,{writable:{__proto__:null,...t(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(s.prototype,"writableLength")},writableFinished:{__proto__:null,...t(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(m){this._readableState&&this._writableState&&(this._readableState.destroyed=m,this._writableState.destroyed=m)}}});let l;function y(){return l===void 0&&(l={}),l}a.fromWeb=function(m,g){return y().newStreamDuplexFromReadableWritablePair(m,g)},a.toWeb=function(m){return y().newReadableWritablePairFromDuplex(m)};let d;return a.from=function(m){return d||(d=zO()),d(m,"body")},_0}const{ObjectSetPrototypeOf:e2,Symbol:qO}=Gn;var t2=us;const{ERR_METHOD_NOT_IMPLEMENTED:GO}=Oi.codes,Zm=as(),{getHighWaterMark:JO}=Ym;e2(us.prototype,Zm.prototype);e2(us,Zm);const dc=qO("kCallback");function us(e){if(!(this instanceof us))return new us(e);const t=e?JO(this,e,"readableHighWaterMark",!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),Zm.call(this,e),this._readableState.sync=!1,this[dc]=null,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",QO)}function Dy(e){typeof this._flush=="function"&&!this.destroyed?this._flush((t,r)=>{if(t){e?e(t):this.destroy(t);return}r!=null&&this.push(r),this.push(null),e&&e()}):(this.push(null),e&&e())}function QO(){this._final!==Dy&&Dy.call(this)}us.prototype._final=Dy;us.prototype._transform=function(e,t,r){throw new GO("_transform()")};us.prototype._write=function(e,t,r){const n=this._readableState,i=this._writableState,s=n.length;this._transform(e,t,(a,l)=>{if(a){r(a);return}l!=null&&this.push(l),i.ended||s===n.length||n.length<n.highWaterMark?r():this[dc]=r})};us.prototype._read=function(){if(this[dc]){const e=this[dc];this[dc]=null,e()}};const{ObjectSetPrototypeOf:r2}=Gn;var n2=$u;const ev=t2;r2($u.prototype,ev.prototype);r2($u,ev);function $u(e){if(!(this instanceof $u))return new $u(e);ev.call(this,e)}$u.prototype._transform=function(e,t,r){r(null,e)};const Af=ss,{ArrayIsArray:YO,Promise:XO,SymbolAsyncIterator:ZO}=Gn,xh=Do,{once:eN}=bo,tN=Ju,eb=as(),{aggregateTwoErrors:rN,codes:{ERR_INVALID_ARG_TYPE:i2,ERR_INVALID_RETURN_VALUE:S0,ERR_MISSING_ARGS:nN,ERR_STREAM_DESTROYED:iN,ERR_STREAM_PREMATURE_CLOSE:oN},AbortError:sN}=Oi,{validateFunction:aN,validateAbortSignal:uN}=rp,{isIterable:hu,isReadable:b0,isReadableNodeStream:Ly,isNodeStream:tb}=Ra,lN=globalThis.AbortController||qm().AbortController;let E0,A0;function rb(e,t,r){let n=!1;e.on("close",()=>{n=!0});const i=xh(e,{readable:t,writable:r},s=>{n=!s});return{destroy:s=>{n||(n=!0,tN.destroyer(e,s||new iN("pipe")))},cleanup:i}}function cN(e){return aN(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function dN(e){if(hu(e))return e;if(Ly(e))return fN(e);throw new i2("val",["Readable","Iterable","AsyncIterable"],e)}async function*fN(e){A0||(A0=dp()),yield*A0.prototype[ZO].call(e)}async function nb(e,t,r,{end:n}){let i,s=null;const a=d=>{if(d&&(i=d),s){const m=s;s=null,m()}},l=()=>new XO((d,m)=>{i?m(i):s=()=>{i?m(i):d()}});t.on("drain",a);const y=xh(t,{readable:!1},a);try{t.writableNeedDrain&&await l();for await(const d of e)t.write(d)||await l();n&&t.end(),await l(),r()}catch(d){r(i!==d?rN(i,d):d)}finally{y(),t.off("drain",a)}}function hN(...e){return o2(e,eN(cN(e)))}function o2(e,t,r){if(e.length===1&&YO(e[0])&&(e=e[0]),e.length<2)throw new nN("streams");const n=new lN,i=n.signal,s=r==null?void 0:r.signal,a=[];uN(s,"options.signal");function l(){b(new sN)}s==null||s.addEventListener("abort",l);let y,d;const m=[];let g=0;function E(D){b(D,--g===0)}function b(D,A){if(D&&(!y||y.code==="ERR_STREAM_PREMATURE_CLOSE")&&(y=D),!(!y&&!A)){for(;m.length;)m.shift()(y);s==null||s.removeEventListener("abort",l),n.abort(),A&&(y||a.forEach(R=>R()),Af.nextTick(t,y,d))}}let P;for(let D=0;D<e.length;D++){const A=e[D],R=D<e.length-1,N=D>0,L=R||(r==null?void 0:r.end)!==!1,W=D===e.length-1;if(tb(A)){let q=function(J){J&&J.name!=="AbortError"&&J.code!=="ERR_STREAM_PREMATURE_CLOSE"&&E(J)};if(L){const{destroy:J,cleanup:ve}=rb(A,R,N);m.push(J),b0(A)&&W&&a.push(ve)}A.on("error",q),b0(A)&&W&&a.push(()=>{A.removeListener("error",q)})}if(D===0)if(typeof A=="function"){if(P=A({signal:i}),!hu(P))throw new S0("Iterable, AsyncIterable or Stream","source",P)}else hu(A)||Ly(A)?P=A:P=eb.from(A);else if(typeof A=="function")if(P=dN(P),P=A(P,{signal:i}),R){if(!hu(P,!0))throw new S0("AsyncIterable",`transform[${D-1}]`,P)}else{var I;E0||(E0=n2);const q=new E0({objectMode:!0}),J=(I=P)===null||I===void 0?void 0:I.then;if(typeof J=="function")g++,J.call(P,z=>{d=z,z!=null&&q.write(z),L&&q.end(),Af.nextTick(E)},z=>{q.destroy(z),Af.nextTick(E,z)});else if(hu(P,!0))g++,nb(P,q,E,{end:L});else throw new S0("AsyncIterable or Promise","destination",P);P=q;const{destroy:ve,cleanup:Fe}=rb(P,!1,!0);m.push(ve),W&&a.push(Fe)}else if(tb(A)){if(Ly(P)){g+=2;const q=pN(P,A,E,{end:L});b0(A)&&W&&a.push(q)}else if(hu(P))g++,nb(P,A,E,{end:L});else throw new i2("val",["Readable","Iterable","AsyncIterable"],P);P=A}else P=eb.from(A)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&Af.nextTick(l),P}function pN(e,t,r,{end:n}){let i=!1;return t.on("close",()=>{i||r(new oN)}),e.pipe(t,{end:n}),n?e.once("end",()=>{i=!0,t.end()}):r(),xh(e,{readable:!0,writable:!1},s=>{const a=e._readableState;s&&s.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?e.once("end",r).once("error",r):r(s)}),xh(t,{readable:!1,writable:!0},r)}var tv={pipelineImpl:o2,pipeline:hN};const{pipeline:gN}=tv,Rf=as(),{destroyer:yN}=Ju,{isNodeStream:mN,isReadable:ib,isWritable:ob}=Ra,{AbortError:vN,codes:{ERR_INVALID_ARG_VALUE:sb,ERR_MISSING_ARGS:wN}}=Oi;var _N=function(...t){if(t.length===0)throw new wN("streams");if(t.length===1)return Rf.from(t[0]);const r=[...t];if(typeof t[0]=="function"&&(t[0]=Rf.from(t[0])),typeof t[t.length-1]=="function"){const b=t.length-1;t[b]=Rf.from(t[b])}for(let b=0;b<t.length;++b)if(mN(t[b])){if(b<t.length-1&&!ib(t[b]))throw new sb(`streams[${b}]`,r[b],"must be readable");if(b>0&&!ob(t[b]))throw new sb(`streams[${b}]`,r[b],"must be writable")}let n,i,s,a,l;function y(b){const P=a;a=null,P?P(b):b?l.destroy(b):!E&&!g&&l.destroy()}const d=t[0],m=gN(t,y),g=!!ob(d),E=!!ib(m);return l=new Rf({writableObjectMode:!!(d!=null&&d.writableObjectMode),readableObjectMode:!!(m!=null&&m.writableObjectMode),writable:g,readable:E}),g&&(l._write=function(b,P,I){d.write(b,P)?I():n=I},l._final=function(b){d.end(),i=b},d.on("drain",function(){if(n){const b=n;n=null,b()}}),m.on("finish",function(){if(i){const b=i;i=null,b()}})),E&&(m.on("readable",function(){if(s){const b=s;s=null,b()}}),m.on("end",function(){l.push(null)}),l._read=function(){for(;;){const b=m.read();if(b===null){s=l._read;return}if(!l.push(b))return}}),l._destroy=function(b,P){!b&&a!==null&&(b=new vN),s=null,n=null,i=null,a===null?P(b):(a=P,yN(m,b))},l};const{ArrayPrototypePop:SN,Promise:bN}=Gn,{isIterable:EN,isNodeStream:AN}=Ra,{pipelineImpl:RN}=tv,{finished:xN}=Do;function CN(...e){return new bN((t,r)=>{let n,i;const s=e[e.length-1];if(s&&typeof s=="object"&&!AN(s)&&!EN(s)){const a=SN(e);n=a.signal,i=a.end}RN(e,(a,l)=>{a?r(a):t(l)},{signal:n,end:i})})}var s2={finished:xN,pipeline:CN};const{Buffer:PN}=Hs,{ObjectDefineProperty:es,ObjectKeys:a2,ReflectApply:u2}=Gn,{promisify:{custom:l2}}=bo,{streamReturningOperators:ab,promiseReturningOperators:ub}=zm,{codes:{ERR_ILLEGAL_CONSTRUCTOR:c2}}=Oi,TN=_N,{pipeline:d2}=tv,{destroyer:FN}=Ju,f2=Do,rv=s2,nv=Ra,Un=tI.exports=Qm.Stream;Un.isDisturbed=nv.isDisturbed;Un.isErrored=nv.isErrored;Un.isReadable=nv.isReadable;Un.Readable=dp();for(const e of a2(ab)){let r=function(...n){if(new.target)throw c2();return Un.Readable.from(u2(t,this,n))};const t=ab[e];es(r,"name",{__proto__:null,value:t.name}),es(r,"length",{__proto__:null,value:t.length}),es(Un.Readable.prototype,e,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}for(const e of a2(ub)){let r=function(...n){if(new.target)throw c2();return u2(t,this,n)};const t=ub[e];es(r,"name",{__proto__:null,value:t.name}),es(r,"length",{__proto__:null,value:t.length}),es(Un.Readable.prototype,e,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}Un.Writable=ZR();Un.Duplex=as();Un.Transform=t2;Un.PassThrough=n2;Un.pipeline=d2;const{addAbortSignal:IN}=Oc;Un.addAbortSignal=IN;Un.finished=f2;Un.destroy=FN;Un.compose=TN;es(Un,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return rv}});es(d2,l2,{__proto__:null,enumerable:!0,get(){return rv.pipeline}});es(f2,l2,{__proto__:null,enumerable:!0,get(){return rv.finished}});Un.Stream=Un;Un._isUint8Array=function(t){return t instanceof Uint8Array};Un._uint8ArrayToBuffer=function(t){return PN.from(t.buffer,t.byteOffset,t.byteLength)};(function(e){const t=Py,r=s2,n=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=n,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return r}}),e.exports.Stream=t.Stream,e.exports.default=e.exports})(eI);class iv{constructor(t,r){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,!r&&t&&!t[0]&&(r=t,t=null),r=r||{},this._factory=r.factory||zu,t&&this.addQuads(t)}get size(){let t=this._size;if(t!==null)return t;t=0;const r=this._graphs;let n,i;for(const s in r)for(const a in n=r[s].subjects)for(const l in i=n[a])t+=Object.keys(i[l]).length;return this._size=t}_addToIndex(t,r,n,i){const s=t[r]||(t[r]={}),a=s[n]||(s[n]={}),l=i in a;return l||(a[i]=null),!l}_removeFromIndex(t,r,n,i){const s=t[r],a=s[n];delete a[i];for(const l in a)return;delete s[n];for(const l in s)return;delete t[r]}*_findInIndex(t,r,n,i,s,a,l,y){let d,m,g;const E=this._entities,b=yo(y,this._factory),P={subject:null,predicate:null,object:null};r&&((d=t,t={})[r]=d[r]);for(const I in t)if(m=t[I]){P[s]=yo(E[I],this._factory),n&&((d=m,m={})[n]=d[n]);for(const D in m)if(g=m[D]){P[a]=yo(E[D],this._factory);const A=i?i in g?[i]:[]:Object.keys(g);for(let R=0;R<A.length;R++)P[l]=yo(E[A[R]],this._factory),yield this._factory.quad(P.subject,P.predicate,P.object,b)}}}_loop(t,r){for(const n in t)r(n)}_loopByKey0(t,r,n){let i,s;if(i=t[r])for(s in i)n(s)}_loopByKey1(t,r,n){let i,s;for(i in t)s=t[i],s[r]&&n(i)}_loopBy2Keys(t,r,n,i){let s,a,l;if((s=t[r])&&(a=s[n]))for(l in a)i(l)}_countInIndex(t,r,n,i){let s=0,a,l,y;r&&((a=t,t={})[r]=a[r]);for(const d in t)if(l=t[d]){n&&((a=l,l={})[n]=a[n]);for(const m in l)(y=l[m])&&(i?i in y&&s++:s+=Object.keys(y).length)}return s}_getGraphs(t){if(!Bi(t))return this._graphs;const r={};return r[t]=this._graphs[t],r}_uniqueEntities(t){const r=Object.create(null);return n=>{n in r||(r[n]=!0,t(yo(this._entities[n],this._factory)))}}add(t){return this.addQuad(t),this}addQuad(t,r,n,i){r||(i=t.graph,n=t.object,r=t.predicate,t=t.subject),t=rn(t),r=rn(r),n=rn(n),i=rn(i);let s=this._graphs[i];s||(s=this._graphs[i]={subjects:{},predicates:{},objects:{}},Object.freeze(s));const a=this._ids,l=this._entities;t=a[t]||(a[l[++this._id]=t]=this._id),r=a[r]||(a[l[++this._id]=r]=this._id),n=a[n]||(a[l[++this._id]=n]=this._id);const y=this._addToIndex(s.subjects,t,r,n);return this._addToIndex(s.predicates,r,n,t),this._addToIndex(s.objects,n,t,r),this._size=null,y}addQuads(t){for(let r=0;r<t.length;r++)this.addQuad(t[r])}delete(t){return this.removeQuad(t),this}has(t,r,n,i){return t&&t.subject&&({subject:t,predicate:r,object:n,graph:i}=t),!this.readQuads(t,r,n,i).next().done}import(t){return t.on("data",r=>{this.addQuad(r)}),t}removeQuad(t,r,n,i){r||(i=t.graph,n=t.object,r=t.predicate,t=t.subject),t=rn(t),r=rn(r),n=rn(n),i=rn(i);const s=this._ids,a=this._graphs;let l,y,d;if(!(t=s[t])||!(r=s[r])||!(n=s[n])||!(l=a[i])||!(y=l.subjects[t])||!(d=y[r])||!(n in d))return!1;this._removeFromIndex(l.subjects,t,r,n),this._removeFromIndex(l.predicates,r,n,t),this._removeFromIndex(l.objects,n,t,r),this._size!==null&&this._size--;for(t in l.subjects)return!0;return delete a[i],!0}removeQuads(t){for(let r=0;r<t.length;r++)this.removeQuad(t[r])}remove(t){return t.on("data",r=>{this.removeQuad(r)}),t}removeMatches(t,r,n,i){const s=new Hu.Readable({objectMode:!0});return s._read=()=>{for(const a of this.readQuads(t,r,n,i))s.push(a);s.push(null)},this.remove(s)}deleteGraph(t){return this.removeMatches(null,null,null,t)}getQuads(t,r,n,i){return[...this.readQuads(t,r,n,i)]}*readQuads(t,r,n,i){t=t&&rn(t),r=r&&rn(r),n=n&&rn(n),i=i&&rn(i);const s=this._getGraphs(i),a=this._ids;let l,y,d,m;if(!(Bi(t)&&!(y=a[t])||Bi(r)&&!(d=a[r])||Bi(n)&&!(m=a[n])))for(const g in s)(l=s[g])&&(y?m?yield*this._findInIndex(l.objects,m,y,d,"object","subject","predicate",g):yield*this._findInIndex(l.subjects,y,d,null,"subject","predicate","object",g):d?yield*this._findInIndex(l.predicates,d,m,null,"predicate","object","subject",g):m?yield*this._findInIndex(l.objects,m,null,null,"object","subject","predicate",g):yield*this._findInIndex(l.subjects,null,null,null,"subject","predicate","object",g))}match(t,r,n,i){return new ov(this,t,r,n,i)}countQuads(t,r,n,i){t=t&&rn(t),r=r&&rn(r),n=n&&rn(n),i=i&&rn(i);const s=this._getGraphs(i),a=this._ids;let l=0,y,d,m,g;if(Bi(t)&&!(d=a[t])||Bi(r)&&!(m=a[r])||Bi(n)&&!(g=a[n]))return 0;for(const E in s)(y=s[E])&&(t?n?l+=this._countInIndex(y.objects,g,d,m):l+=this._countInIndex(y.subjects,d,m,g):r?l+=this._countInIndex(y.predicates,m,g,d):l+=this._countInIndex(y.objects,g,d,m));return l}forEach(t,r,n,i,s){this.some(a=>(t(a),!1),r,n,i,s)}every(t,r,n,i,s){let a=!1;const l=!this.some(y=>(a=!0,!t(y)),r,n,i,s);return a&&l}some(t,r,n,i,s){for(const a of this.readQuads(r,n,i,s))if(t(a))return!0;return!1}getSubjects(t,r,n){const i=[];return this.forSubjects(s=>{i.push(s)},t,r,n),i}forSubjects(t,r,n,i){r=r&&rn(r),n=n&&rn(n),i=i&&rn(i);const s=this._ids,a=this._getGraphs(i);let l,y,d;if(t=this._uniqueEntities(t),!(Bi(r)&&!(y=s[r])||Bi(n)&&!(d=s[n])))for(i in a)(l=a[i])&&(y?d?this._loopBy2Keys(l.predicates,y,d,t):this._loopByKey1(l.subjects,y,t):d?this._loopByKey0(l.objects,d,t):this._loop(l.subjects,t))}getPredicates(t,r,n){const i=[];return this.forPredicates(s=>{i.push(s)},t,r,n),i}forPredicates(t,r,n,i){r=r&&rn(r),n=n&&rn(n),i=i&&rn(i);const s=this._ids,a=this._getGraphs(i);let l,y,d;if(t=this._uniqueEntities(t),!(Bi(r)&&!(y=s[r])||Bi(n)&&!(d=s[n])))for(i in a)(l=a[i])&&(y?d?this._loopBy2Keys(l.objects,d,y,t):this._loopByKey0(l.subjects,y,t):d?this._loopByKey1(l.predicates,d,t):this._loop(l.predicates,t))}getObjects(t,r,n){const i=[];return this.forObjects(s=>{i.push(s)},t,r,n),i}forObjects(t,r,n,i){r=r&&rn(r),n=n&&rn(n),i=i&&rn(i);const s=this._ids,a=this._getGraphs(i);let l,y,d;if(t=this._uniqueEntities(t),!(Bi(r)&&!(y=s[r])||Bi(n)&&!(d=s[n])))for(i in a)(l=a[i])&&(y?d?this._loopBy2Keys(l.subjects,y,d,t):this._loopByKey1(l.objects,y,t):d?this._loopByKey0(l.predicates,d,t):this._loop(l.objects,t))}getGraphs(t,r,n){const i=[];return this.forGraphs(s=>{i.push(s)},t,r,n),i}forGraphs(t,r,n,i){for(const s in this._graphs)this.some(a=>(t(a.graph),!0),r,n,i,s)}createBlankNode(t){let r,n;if(t)for(r=t=`_:${t}`,n=1;this._ids[r];)r=t+n++;else do r=`_:b${this._blankNodeIndex++}`;while(this._ids[r]);return this._ids[r]=++this._id,this._entities[this._id]=r,this._factory.blankNode(r.substr(2))}extractLists({remove:t=!1,ignoreErrors:r=!1}={}){const n={},i=r?()=>!0:(l,y)=>{throw new Error(`${l.value} ${y}`)},s=this.getQuads(null,fi.rdf.rest,fi.rdf.nil,null),a=t?[...s]:[];return s.forEach(l=>{const y=[];let d=!1,m,g;const E=l.graph;let b=l.subject;for(;b&&!d;){const P=this.getQuads(null,null,b,null),I=this.getQuads(b,null,null,null);let D,A=null,R=null,N=null;for(let L=0;L<I.length&&!d;L++)D=I[L],D.graph.equals(E)?m?d=i(b,"has non-list arcs out"):D.predicate.value===fi.rdf.first?A?d=i(b,"has multiple rdf:first arcs"):a.push(A=D):D.predicate.value===fi.rdf.rest?R?d=i(b,"has multiple rdf:rest arcs"):a.push(R=D):P.length?d=i(b,"can't be subject and object"):(m=D,g="subject"):d=i(b,"not confined to single graph");for(let L=0;L<P.length&&!d;++L)D=P[L],m?d=i(b,"can't have coreferences"):D.predicate.value===fi.rdf.rest?N?d=i(b,"has incoming rdf:rest arcs"):N=D:(m=D,g="object");A?y.unshift(A.object):d=i(b,"has no list head"),b=N&&N.subject}d?t=!1:m&&(n[m[g].value]=y)}),t&&this.removeQuads(a),n}*[Symbol.iterator](){yield*this.readQuads()}}function Bi(e){return typeof e=="string"||e instanceof String}class ov extends Hu.Readable{constructor(t,r,n,i,s){super({objectMode:!0}),Object.assign(this,{n3Store:t,subject:r,predicate:n,object:i,graph:s})}get filtered(){if(!this._filtered){const{n3Store:t,graph:r,object:n,predicate:i,subject:s}=this,a=this._filtered=new iv({factory:t._factory});for(const l of t.readQuads(s,i,n,r))a.addQuad(l)}return this._filtered}get size(){return this.filtered.size}_read(){for(const t of this)this.push(t);this.push(null)}add(t){return this.filtered.add(t)}delete(t){return this.filtered.delete(t)}has(t){return this.filtered.has(t)}match(t,r,n,i){return new ov(this.filtered,t,r,n,i)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}class h2 extends Hu.Transform{constructor(t){super({decodeStrings:!0}),this._readableState.objectMode=!0;const r=new Xh(t);let n,i;r.parse({on:(s,a)=>{switch(s){case"data":n=a;break;case"end":i=a;break}}},(s,a)=>{s&&this.emit("error",s)||a&&this.push(a)},(s,a)=>{this.emit("prefix",s,a)}),this._transform=(s,a,l)=>{n(s),l()},this._flush=s=>{i(),s()}}import(t){return t.on("data",r=>{this.write(r)}),t.on("end",()=>{this.end()}),t.on("error",r=>{this.emit("error",r)}),this}}class p2 extends Hu.Transform{constructor(t){super({encoding:"utf8",writableObjectMode:!0});const r=this._writer=new Vm({write:(n,i,s)=>{this.push(n),s&&s()},end:n=>{this.push(null),n&&n()}},t);this._transform=(n,i,s)=>{r.addQuad(n,s)},this._flush=n=>{r.end(n)}}import(t){return t.on("data",r=>{this.write(r)}),t.on("end",()=>{this.end()}),t.on("error",r=>{this.emit("error",r)}),t.on("prefix",(r,n)=>{this._writer.addPrefix(r,n)}),this}}const kN={Lexer:Hm,Parser:Xh,Writer:Vm,Store:iv,StreamParser:h2,StreamWriter:p2,Util:mR,DataFactory:zu,Term:oo,NamedNode:Yh,Literal:Os,BlankNode:$m,Variable:Wm,DefaultGraph:Km,Quad:kc,Triple:kc,termFromId:yo,termToId:rn},ON=Object.freeze(Object.defineProperty({__proto__:null,BlankNode:$m,DataFactory:zu,DefaultGraph:Km,Lexer:Hm,Literal:Os,NamedNode:Yh,Parser:Xh,Quad:kc,Store:iv,StreamParser:h2,StreamWriter:p2,Term:oo,Triple:kc,Util:mR,Variable:Wm,Writer:Vm,default:kN,termFromId:yo,termToId:rn},Symbol.toStringTag,{value:"Module"})),NN=zy(ON);var R0={},Nl={},xf={},lb;function g2(){if(lb)return xf;lb=1,Object.defineProperty(xf,"__esModule",{value:!0}),xf.default=r;let e;const t=new Uint8Array(16);function r(){if(!e&&(e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}return xf}var fu={},Ul={},Dl={},cb;function UN(){if(cb)return Dl;cb=1,Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.default=void 0;var e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return Dl.default=e,Dl}var db;function fp(){if(db)return Ul;db=1,Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.default=void 0;var e=t(UN());function t(i){return i&&i.__esModule?i:{default:i}}function r(i){return typeof i=="string"&&e.default.test(i)}var n=r;return Ul.default=n,Ul}var fb;function hp(){if(fb)return fu;fb=1,Object.defineProperty(fu,"__esModule",{value:!0}),fu.default=void 0,fu.unsafeStringify=n;var e=t(fp());function t(a){return a&&a.__esModule?a:{default:a}}const r=[];for(let a=0;a<256;++a)r.push((a+256).toString(16).slice(1));function n(a,l=0){return(r[a[l+0]]+r[a[l+1]]+r[a[l+2]]+r[a[l+3]]+"-"+r[a[l+4]]+r[a[l+5]]+"-"+r[a[l+6]]+r[a[l+7]]+"-"+r[a[l+8]]+r[a[l+9]]+"-"+r[a[l+10]]+r[a[l+11]]+r[a[l+12]]+r[a[l+13]]+r[a[l+14]]+r[a[l+15]]).toLowerCase()}function i(a,l=0){const y=n(a,l);if(!(0,e.default)(y))throw TypeError("Stringified UUID is invalid");return y}var s=i;return fu.default=s,fu}var hb;function DN(){if(hb)return Nl;hb=1,Object.defineProperty(Nl,"__esModule",{value:!0}),Nl.default=void 0;var e=r(g2()),t=hp();function r(d){return d&&d.__esModule?d:{default:d}}let n,i,s=0,a=0;function l(d,m,g){let E=m&&g||0;const b=m||new Array(16);d=d||{};let P=d.node||n,I=d.clockseq!==void 0?d.clockseq:i;if(P==null||I==null){const W=d.random||(d.rng||e.default)();P==null&&(P=n=[W[0]|1,W[1],W[2],W[3],W[4],W[5]]),I==null&&(I=i=(W[6]<<8|W[7])&16383)}let D=d.msecs!==void 0?d.msecs:Date.now(),A=d.nsecs!==void 0?d.nsecs:a+1;const R=D-s+(A-a)/1e4;if(R<0&&d.clockseq===void 0&&(I=I+1&16383),(R<0||D>s)&&d.nsecs===void 0&&(A=0),A>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=D,a=A,i=I,D+=122192928e5;const N=((D&268435455)*1e4+A)%4294967296;b[E++]=N>>>24&255,b[E++]=N>>>16&255,b[E++]=N>>>8&255,b[E++]=N&255;const L=D/4294967296*1e4&268435455;b[E++]=L>>>8&255,b[E++]=L&255,b[E++]=L>>>24&15|16,b[E++]=L>>>16&255,b[E++]=I>>>8|128,b[E++]=I&255;for(let W=0;W<6;++W)b[E+W]=P[W];return m||(0,t.unsafeStringify)(b)}var y=l;return Nl.default=y,Nl}var Ll={},ys={},Ml={},pb;function y2(){if(pb)return Ml;pb=1,Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.default=void 0;var e=t(fp());function t(i){return i&&i.__esModule?i:{default:i}}function r(i){if(!(0,e.default)(i))throw TypeError("Invalid UUID");let s;const a=new Uint8Array(16);return a[0]=(s=parseInt(i.slice(0,8),16))>>>24,a[1]=s>>>16&255,a[2]=s>>>8&255,a[3]=s&255,a[4]=(s=parseInt(i.slice(9,13),16))>>>8,a[5]=s&255,a[6]=(s=parseInt(i.slice(14,18),16))>>>8,a[7]=s&255,a[8]=(s=parseInt(i.slice(19,23),16))>>>8,a[9]=s&255,a[10]=(s=parseInt(i.slice(24,36),16))/1099511627776&255,a[11]=s/4294967296&255,a[12]=s>>>24&255,a[13]=s>>>16&255,a[14]=s>>>8&255,a[15]=s&255,a}var n=r;return Ml.default=n,Ml}var gb;function m2(){if(gb)return ys;gb=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.URL=ys.DNS=void 0,ys.default=a;var e=hp(),t=r(y2());function r(l){return l&&l.__esModule?l:{default:l}}function n(l){l=unescape(encodeURIComponent(l));const y=[];for(let d=0;d<l.length;++d)y.push(l.charCodeAt(d));return y}const i="6ba7b810-9dad-11d1-80b4-00c04fd430c8";ys.DNS=i;const s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";ys.URL=s;function a(l,y,d){function m(g,E,b,P){var I;if(typeof g=="string"&&(g=n(g)),typeof E=="string"&&(E=(0,t.default)(E)),((I=E)===null||I===void 0?void 0:I.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let D=new Uint8Array(16+g.length);if(D.set(E),D.set(g,E.length),D=d(D),D[6]=D[6]&15|y,D[8]=D[8]&63|128,b){P=P||0;for(let A=0;A<16;++A)b[P+A]=D[A];return b}return(0,e.unsafeStringify)(D)}try{m.name=l}catch{}return m.DNS=i,m.URL=s,m}return ys}var Bl={},yb;function LN(){if(yb)return Bl;yb=1,Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.default=void 0;function e(b){if(typeof b=="string"){const P=unescape(encodeURIComponent(b));b=new Uint8Array(P.length);for(let I=0;I<P.length;++I)b[I]=P.charCodeAt(I)}return t(n(i(b),b.length*8))}function t(b){const P=[],I=b.length*32,D="0123456789abcdef";for(let A=0;A<I;A+=8){const R=b[A>>5]>>>A%32&255,N=parseInt(D.charAt(R>>>4&15)+D.charAt(R&15),16);P.push(N)}return P}function r(b){return(b+64>>>9<<4)+14+1}function n(b,P){b[P>>5]|=128<<P%32,b[r(P)-1]=P;let I=1732584193,D=-271733879,A=-1732584194,R=271733878;for(let N=0;N<b.length;N+=16){const L=I,W=D,q=A,J=R;I=y(I,D,A,R,b[N],7,-680876936),R=y(R,I,D,A,b[N+1],12,-389564586),A=y(A,R,I,D,b[N+2],17,606105819),D=y(D,A,R,I,b[N+3],22,-1044525330),I=y(I,D,A,R,b[N+4],7,-176418897),R=y(R,I,D,A,b[N+5],12,1200080426),A=y(A,R,I,D,b[N+6],17,-1473231341),D=y(D,A,R,I,b[N+7],22,-45705983),I=y(I,D,A,R,b[N+8],7,1770035416),R=y(R,I,D,A,b[N+9],12,-1958414417),A=y(A,R,I,D,b[N+10],17,-42063),D=y(D,A,R,I,b[N+11],22,-1990404162),I=y(I,D,A,R,b[N+12],7,1804603682),R=y(R,I,D,A,b[N+13],12,-40341101),A=y(A,R,I,D,b[N+14],17,-1502002290),D=y(D,A,R,I,b[N+15],22,1236535329),I=d(I,D,A,R,b[N+1],5,-165796510),R=d(R,I,D,A,b[N+6],9,-1069501632),A=d(A,R,I,D,b[N+11],14,643717713),D=d(D,A,R,I,b[N],20,-373897302),I=d(I,D,A,R,b[N+5],5,-701558691),R=d(R,I,D,A,b[N+10],9,38016083),A=d(A,R,I,D,b[N+15],14,-660478335),D=d(D,A,R,I,b[N+4],20,-405537848),I=d(I,D,A,R,b[N+9],5,568446438),R=d(R,I,D,A,b[N+14],9,-1019803690),A=d(A,R,I,D,b[N+3],14,-187363961),D=d(D,A,R,I,b[N+8],20,1163531501),I=d(I,D,A,R,b[N+13],5,-1444681467),R=d(R,I,D,A,b[N+2],9,-51403784),A=d(A,R,I,D,b[N+7],14,1735328473),D=d(D,A,R,I,b[N+12],20,-1926607734),I=m(I,D,A,R,b[N+5],4,-378558),R=m(R,I,D,A,b[N+8],11,-2022574463),A=m(A,R,I,D,b[N+11],16,1839030562),D=m(D,A,R,I,b[N+14],23,-35309556),I=m(I,D,A,R,b[N+1],4,-1530992060),R=m(R,I,D,A,b[N+4],11,1272893353),A=m(A,R,I,D,b[N+7],16,-155497632),D=m(D,A,R,I,b[N+10],23,-1094730640),I=m(I,D,A,R,b[N+13],4,681279174),R=m(R,I,D,A,b[N],11,-358537222),A=m(A,R,I,D,b[N+3],16,-722521979),D=m(D,A,R,I,b[N+6],23,76029189),I=m(I,D,A,R,b[N+9],4,-640364487),R=m(R,I,D,A,b[N+12],11,-421815835),A=m(A,R,I,D,b[N+15],16,530742520),D=m(D,A,R,I,b[N+2],23,-995338651),I=g(I,D,A,R,b[N],6,-198630844),R=g(R,I,D,A,b[N+7],10,1126891415),A=g(A,R,I,D,b[N+14],15,-1416354905),D=g(D,A,R,I,b[N+5],21,-57434055),I=g(I,D,A,R,b[N+12],6,1700485571),R=g(R,I,D,A,b[N+3],10,-1894986606),A=g(A,R,I,D,b[N+10],15,-1051523),D=g(D,A,R,I,b[N+1],21,-2054922799),I=g(I,D,A,R,b[N+8],6,1873313359),R=g(R,I,D,A,b[N+15],10,-30611744),A=g(A,R,I,D,b[N+6],15,-1560198380),D=g(D,A,R,I,b[N+13],21,1309151649),I=g(I,D,A,R,b[N+4],6,-145523070),R=g(R,I,D,A,b[N+11],10,-1120210379),A=g(A,R,I,D,b[N+2],15,718787259),D=g(D,A,R,I,b[N+9],21,-343485551),I=s(I,L),D=s(D,W),A=s(A,q),R=s(R,J)}return[I,D,A,R]}function i(b){if(b.length===0)return[];const P=b.length*8,I=new Uint32Array(r(P));for(let D=0;D<P;D+=8)I[D>>5]|=(b[D/8]&255)<<D%32;return I}function s(b,P){const I=(b&65535)+(P&65535);return(b>>16)+(P>>16)+(I>>16)<<16|I&65535}function a(b,P){return b<<P|b>>>32-P}function l(b,P,I,D,A,R){return s(a(s(s(P,b),s(D,R)),A),I)}function y(b,P,I,D,A,R,N){return l(P&I|~P&D,b,P,A,R,N)}function d(b,P,I,D,A,R,N){return l(P&D|I&~D,b,P,A,R,N)}function m(b,P,I,D,A,R,N){return l(P^I^D,b,P,A,R,N)}function g(b,P,I,D,A,R,N){return l(I^(P|~D),b,P,A,R,N)}var E=e;return Bl.default=E,Bl}var mb;function MN(){if(mb)return Ll;mb=1,Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.default=void 0;var e=r(m2()),t=r(LN());function r(s){return s&&s.__esModule?s:{default:s}}var i=(0,e.default)("v3",48,t.default);return Ll.default=i,Ll}var jl={},Hl={},vb;function BN(){if(vb)return Hl;vb=1,Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.default=void 0;var t={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return Hl.default=t,Hl}var wb;function jN(){if(wb)return jl;wb=1,Object.defineProperty(jl,"__esModule",{value:!0}),jl.default=void 0;var e=n(BN()),t=n(g2()),r=hp();function n(a){return a&&a.__esModule?a:{default:a}}function i(a,l,y){if(e.default.randomUUID&&!l&&!a)return e.default.randomUUID();a=a||{};const d=a.random||(a.rng||t.default)();if(d[6]=d[6]&15|64,d[8]=d[8]&63|128,l){y=y||0;for(let m=0;m<16;++m)l[y+m]=d[m];return l}return(0,r.unsafeStringify)(d)}var s=i;return jl.default=s,jl}var $l={},Wl={},_b;function HN(){if(_b)return Wl;_b=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.default=void 0;function e(i,s,a,l){switch(i){case 0:return s&a^~s&l;case 1:return s^a^l;case 2:return s&a^s&l^a&l;case 3:return s^a^l}}function t(i,s){return i<<s|i>>>32-s}function r(i){const s=[1518500249,1859775393,2400959708,3395469782],a=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof i=="string"){const m=unescape(encodeURIComponent(i));i=[];for(let g=0;g<m.length;++g)i.push(m.charCodeAt(g))}else Array.isArray(i)||(i=Array.prototype.slice.call(i));i.push(128);const l=i.length/4+2,y=Math.ceil(l/16),d=new Array(y);for(let m=0;m<y;++m){const g=new Uint32Array(16);for(let E=0;E<16;++E)g[E]=i[m*64+E*4]<<24|i[m*64+E*4+1]<<16|i[m*64+E*4+2]<<8|i[m*64+E*4+3];d[m]=g}d[y-1][14]=(i.length-1)*8/Math.pow(2,32),d[y-1][14]=Math.floor(d[y-1][14]),d[y-1][15]=(i.length-1)*8&4294967295;for(let m=0;m<y;++m){const g=new Uint32Array(80);for(let A=0;A<16;++A)g[A]=d[m][A];for(let A=16;A<80;++A)g[A]=t(g[A-3]^g[A-8]^g[A-14]^g[A-16],1);let E=a[0],b=a[1],P=a[2],I=a[3],D=a[4];for(let A=0;A<80;++A){const R=Math.floor(A/20),N=t(E,5)+e(R,b,P,I)+D+s[R]+g[A]>>>0;D=I,I=P,P=t(b,30)>>>0,b=E,E=N}a[0]=a[0]+E>>>0,a[1]=a[1]+b>>>0,a[2]=a[2]+P>>>0,a[3]=a[3]+I>>>0,a[4]=a[4]+D>>>0}return[a[0]>>24&255,a[0]>>16&255,a[0]>>8&255,a[0]&255,a[1]>>24&255,a[1]>>16&255,a[1]>>8&255,a[1]&255,a[2]>>24&255,a[2]>>16&255,a[2]>>8&255,a[2]&255,a[3]>>24&255,a[3]>>16&255,a[3]>>8&255,a[3]&255,a[4]>>24&255,a[4]>>16&255,a[4]>>8&255,a[4]&255]}var n=r;return Wl.default=n,Wl}var Sb;function $N(){if(Sb)return $l;Sb=1,Object.defineProperty($l,"__esModule",{value:!0}),$l.default=void 0;var e=r(m2()),t=r(HN());function r(s){return s&&s.__esModule?s:{default:s}}var i=(0,e.default)("v5",80,t.default);return $l.default=i,$l}var Kl={},bb;function WN(){if(bb)return Kl;bb=1,Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.default=void 0;var e="00000000-0000-0000-0000-000000000000";return Kl.default=e,Kl}var Vl={},Eb;function KN(){if(Eb)return Vl;Eb=1,Object.defineProperty(Vl,"__esModule",{value:!0}),Vl.default=void 0;var e=t(fp());function t(i){return i&&i.__esModule?i:{default:i}}function r(i){if(!(0,e.default)(i))throw TypeError("Invalid UUID");return parseInt(i.slice(14,15),16)}var n=r;return Vl.default=n,Vl}var Ab;function pp(){return Ab||(Ab=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return a.default}});var t=m(DN()),r=m(MN()),n=m(jN()),i=m($N()),s=m(WN()),a=m(KN()),l=m(fp()),y=m(hp()),d=m(y2());function m(g){return g&&g.__esModule?g:{default:g}}}(R0)),R0}var fc={},VN={get exports(){return fc},set exports(e){fc=e}},Rb;function My(){return Rb||(Rb=1,function(e,t){var r=typeof self<"u"?self:mo,n=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(a){var l={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function y(Te){return Te&&DataView.prototype.isPrototypeOf(Te)}if(l.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=ArrayBuffer.isView||function(Te){return Te&&d.indexOf(Object.prototype.toString.call(Te))>-1};function g(Te){if(typeof Te!="string"&&(Te=String(Te)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(Te))throw new TypeError("Invalid character in header field name");return Te.toLowerCase()}function E(Te){return typeof Te!="string"&&(Te=String(Te)),Te}function b(Te){var He={next:function(){var st=Te.shift();return{done:st===void 0,value:st}}};return l.iterable&&(He[Symbol.iterator]=function(){return He}),He}function P(Te){this.map={},Te instanceof P?Te.forEach(function(He,st){this.append(st,He)},this):Array.isArray(Te)?Te.forEach(function(He){this.append(He[0],He[1])},this):Te&&Object.getOwnPropertyNames(Te).forEach(function(He){this.append(He,Te[He])},this)}P.prototype.append=function(Te,He){Te=g(Te),He=E(He);var st=this.map[Te];this.map[Te]=st?st+", "+He:He},P.prototype.delete=function(Te){delete this.map[g(Te)]},P.prototype.get=function(Te){return Te=g(Te),this.has(Te)?this.map[Te]:null},P.prototype.has=function(Te){return this.map.hasOwnProperty(g(Te))},P.prototype.set=function(Te,He){this.map[g(Te)]=E(He)},P.prototype.forEach=function(Te,He){for(var st in this.map)this.map.hasOwnProperty(st)&&Te.call(He,this.map[st],st,this)},P.prototype.keys=function(){var Te=[];return this.forEach(function(He,st){Te.push(st)}),b(Te)},P.prototype.values=function(){var Te=[];return this.forEach(function(He){Te.push(He)}),b(Te)},P.prototype.entries=function(){var Te=[];return this.forEach(function(He,st){Te.push([st,He])}),b(Te)},l.iterable&&(P.prototype[Symbol.iterator]=P.prototype.entries);function I(Te){if(Te.bodyUsed)return Promise.reject(new TypeError("Already read"));Te.bodyUsed=!0}function D(Te){return new Promise(function(He,st){Te.onload=function(){He(Te.result)},Te.onerror=function(){st(Te.error)}})}function A(Te){var He=new FileReader,st=D(He);return He.readAsArrayBuffer(Te),st}function R(Te){var He=new FileReader,st=D(He);return He.readAsText(Te),st}function N(Te){for(var He=new Uint8Array(Te),st=new Array(He.length),Ct=0;Ct<He.length;Ct++)st[Ct]=String.fromCharCode(He[Ct]);return st.join("")}function L(Te){if(Te.slice)return Te.slice(0);var He=new Uint8Array(Te.byteLength);return He.set(new Uint8Array(Te)),He.buffer}function W(){return this.bodyUsed=!1,this._initBody=function(Te){this._bodyInit=Te,Te?typeof Te=="string"?this._bodyText=Te:l.blob&&Blob.prototype.isPrototypeOf(Te)?this._bodyBlob=Te:l.formData&&FormData.prototype.isPrototypeOf(Te)?this._bodyFormData=Te:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(Te)?this._bodyText=Te.toString():l.arrayBuffer&&l.blob&&y(Te)?(this._bodyArrayBuffer=L(Te.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(Te)||m(Te))?this._bodyArrayBuffer=L(Te):this._bodyText=Te=Object.prototype.toString.call(Te):this._bodyText="",this.headers.get("content-type")||(typeof Te=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(Te)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var Te=I(this);if(Te)return Te;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?I(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(A)}),this.text=function(){var Te=I(this);if(Te)return Te;if(this._bodyBlob)return R(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(N(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(Fe)}),this.json=function(){return this.text().then(JSON.parse)},this}var q=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function J(Te){var He=Te.toUpperCase();return q.indexOf(He)>-1?He:Te}function ve(Te,He){He=He||{};var st=He.body;if(Te instanceof ve){if(Te.bodyUsed)throw new TypeError("Already read");this.url=Te.url,this.credentials=Te.credentials,He.headers||(this.headers=new P(Te.headers)),this.method=Te.method,this.mode=Te.mode,this.signal=Te.signal,!st&&Te._bodyInit!=null&&(st=Te._bodyInit,Te.bodyUsed=!0)}else this.url=String(Te);if(this.credentials=He.credentials||this.credentials||"same-origin",(He.headers||!this.headers)&&(this.headers=new P(He.headers)),this.method=J(He.method||this.method||"GET"),this.mode=He.mode||this.mode||null,this.signal=He.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&st)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(st)}ve.prototype.clone=function(){return new ve(this,{body:this._bodyInit})};function Fe(Te){var He=new FormData;return Te.trim().split("&").forEach(function(st){if(st){var Ct=st.split("="),$e=Ct.shift().replace(/\+/g," "),Je=Ct.join("=").replace(/\+/g," ");He.append(decodeURIComponent($e),decodeURIComponent(Je))}}),He}function z(Te){var He=new P,st=Te.replace(/\r?\n[\t ]+/g," ");return st.split(/\r?\n/).forEach(function(Ct){var $e=Ct.split(":"),Je=$e.shift().trim();if(Je){var ke=$e.join(":").trim();He.append(Je,ke)}}),He}W.call(ve.prototype);function De(Te,He){He||(He={}),this.type="default",this.status=He.status===void 0?200:He.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in He?He.statusText:"OK",this.headers=new P(He.headers),this.url=He.url||"",this._initBody(Te)}W.call(De.prototype),De.prototype.clone=function(){return new De(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new P(this.headers),url:this.url})},De.error=function(){var Te=new De(null,{status:0,statusText:""});return Te.type="error",Te};var xt=[301,302,303,307,308];De.redirect=function(Te,He){if(xt.indexOf(He)===-1)throw new RangeError("Invalid status code");return new De(null,{status:He,headers:{location:Te}})},a.DOMException=s.DOMException;try{new a.DOMException}catch{a.DOMException=function(He,st){this.message=He,this.name=st;var Ct=Error(He);this.stack=Ct.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function ft(Te,He){return new Promise(function(st,Ct){var $e=new ve(Te,He);if($e.signal&&$e.signal.aborted)return Ct(new a.DOMException("Aborted","AbortError"));var Je=new XMLHttpRequest;function ke(){Je.abort()}Je.onload=function(){var Xe={status:Je.status,statusText:Je.statusText,headers:z(Je.getAllResponseHeaders()||"")};Xe.url="responseURL"in Je?Je.responseURL:Xe.headers.get("X-Request-URL");var vt="response"in Je?Je.response:Je.responseText;st(new De(vt,Xe))},Je.onerror=function(){Ct(new TypeError("Network request failed"))},Je.ontimeout=function(){Ct(new TypeError("Network request failed"))},Je.onabort=function(){Ct(new a.DOMException("Aborted","AbortError"))},Je.open($e.method,$e.url,!0),$e.credentials==="include"?Je.withCredentials=!0:$e.credentials==="omit"&&(Je.withCredentials=!1),"responseType"in Je&&l.blob&&(Je.responseType="blob"),$e.headers.forEach(function(Xe,vt){Je.setRequestHeader(vt,Xe)}),$e.signal&&($e.signal.addEventListener("abort",ke),Je.onreadystatechange=function(){Je.readyState===4&&$e.signal.removeEventListener("abort",ke)}),Je.send(typeof $e._bodyInit>"u"?null:$e._bodyInit)})}return ft.polyfill=!0,s.fetch||(s.fetch=ft,s.Headers=P,s.Request=ve,s.Response=De),a.Headers=P,a.Request=ve,a.Response=De,a.fetch=ft,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t}(VN,fc)),fc}var xb;function v2(){if(xb)return Oe;xb=1;var e=gR(),t=FF(),r=IF(),n=NN,i=pp(),s=My();function a(o){var u=Object.create(null);return o&&Object.keys(o).forEach(function(h){if(h!=="default"){var _=Object.getOwnPropertyDescriptor(o,h);Object.defineProperty(u,h,_.get?_:{enumerable:!0,get:function(){return o[h]}})}}),u.default=o,Object.freeze(u)}var l=a(s);t.dataset;const y="https://inrupt.com/.well-known/sdk-local-node/",{freeze:d}=Object;function m(o){return o.substring(0,y.length)===y}function g(o){return o.substring(y.length)}function E(o){return`${y}${o}`}function b(o){return typeof o=="string"&&o.substring(0,2)==="_:"}function P(o){return o.substring(2)}function I(o){return`_:${o.value}`}function D(o){const u=o;return typeof u=="object"&&typeof u.internal_resourceInfo=="object"}function A(o){const u=o;return typeof u=="object"&&typeof u.internal_resourceInfo=="object"&&typeof u.internal_resourceInfo.linkedResources=="object"}function R(o){const u=o;return typeof u.internal_changeLog=="object"&&Array.isArray(u.internal_changeLog.additions)&&Array.isArray(u.internal_changeLog.deletions)}class N extends Error{}function L(o){return typeof o=="string"?o:o.value}const W={boolean:"http://www.w3.org/2001/XMLSchema#boolean",dateTime:"http://www.w3.org/2001/XMLSchema#dateTime",date:"http://www.w3.org/2001/XMLSchema#date",time:"http://www.w3.org/2001/XMLSchema#time",decimal:"http://www.w3.org/2001/XMLSchema#decimal",integer:"http://www.w3.org/2001/XMLSchema#integer",string:"http://www.w3.org/2001/XMLSchema#string",langString:"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"};function q(o){return o?"true":"false"}function J(o){return o==="true"||o==="1"?!0:o==="false"||o==="0"?!1:null}function ve(o){let u,h;if(o.millisecond&&(o.millisecond<10?u=`00${o.millisecond}`:o.millisecond<100?u=`0${o.millisecond}`:u=o.millisecond),typeof o.timezoneHourOffset=="number"){const _=Math.abs(o.timezoneHourOffset)<10?`0${Math.abs(o.timezoneHourOffset)}`:Math.abs(o.timezoneHourOffset);h=o.timezoneHourOffset>=0?`+${_}`:`-${_}`,o.timezoneMinuteOffset?h=`${h}:${o.timezoneMinuteOffset<10?`0${o.timezoneMinuteOffset}`:o.timezoneMinuteOffset}`:h+=":00"}return`${o.hour<10?`0${o.hour}`:o.hour}:${o.minute<10?`0${o.minute}`:o.minute}:${o.second<10?`0${o.second}`:o.second}${o.millisecond?`.${u}`:""}${h||""}`}function Fe(o){if(!/\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(o))return null;const[h,_]=Te(o),[T,H,G]=h.split(":");let oe=Number.parseInt(T,10),xe=Number.parseInt(H,10);const[Pe,Ie]=G.split("."),ot=Number.parseInt(Pe,10),dt=Ie?Number.parseInt(Ie,10):void 0;xe>=60&&(oe+=1,xe-=60);const At={hour:oe,minute:xe,second:ot};if(typeof dt=="number"&&(At.millisecond=dt),typeof _=="string"){const[ur,Lr]=He(_);if(typeof ur!="number"||ur>24||typeof Lr!="number"||Lr>59)return null;At.timezoneHourOffset=ur,At.timezoneMinuteOffset=Lr}return At}function z(o){return o.toISOString()}function De(o){if(!/-?\d{4,}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(o))return null;const[h,_]=o.split("T"),[T,H]=h.charAt(0)==="-"?[-1,h.substring(1)]:[1,h],[G,oe,xe]=H.split("-"),Pe=Number.parseInt(G,10)*T,Ie=Number.parseInt(oe,10)-1,ot=Number.parseInt(xe,10),[dt,At]=Te(_),[ur,Lr]=typeof At=="string"?He(At):[0,0],[Pr,Qi,dn]=dt.split(":"),er=Number.parseInt(Pr,10)+ur,yi=Number.parseInt(Qi,10)+Lr,[Bn,Ai]=dn.split("."),Ko=Number.parseInt(Bn,10),ta=Ai?Number.parseInt(Ai,10):0,Vo=new Date(Date.UTC(Pe,Ie,ot,er,yi,Ko,ta));return Pe>=0&&Pe<100&&Vo.setUTCFullYear(Vo.getUTCFullYear()-1900),Vo}function xt(o){const u=o.getFullYear(),h=o.getMonth()+1,_=o.getDate(),[T,H]=Te(o.toISOString());return`${u}-${String(h).padStart(2,"0")}-${String(_).padStart(2,"0")}${H}`}function ft(o){if(!/-?\d{4,}-\d\d-\d\d(Z|(\+|-)\d\d:\d\d)?/.test(o))return null;const h=o,[_,T]=h.charAt(0)==="-"?[-1,h.substring(1)]:[1,h],[H,G,oe]=T.split("-"),xe=oe.length>2?oe.substring(0,2):oe,Pe=Number.parseInt(H,10)*_,Ie=Number.parseInt(G,10)-1,ot=Number.parseInt(xe,10),dt=12,At=new Date(Date.UTC(Pe,Ie,ot,dt));return Pe>=0&&Pe<100&&At.setUTCFullYear(At.getUTCFullYear()-1900),At}function Te(o){if(o.endsWith("Z"))return[o.substring(0,o.length-1),"Z"];const u=o.split("+"),h=o.split("-");return u.length===1&&h.length===1?[u[0],void 0]:u.length>h.length?[u[0],`+${u[1]}`]:[h[0],`-${h[1]}`]}function He(o){if(o==="Z")return[0,0];const u=o.charAt(0)==="+"?1:-1,[h,_]=o.substring(1).split(":"),T=Number.parseInt(h,10),H=Number.parseInt(_,10);return[T*u,H*u]}function st(o){return o.toString()}function Ct(o){const u=Number.parseFloat(o);return Number.isNaN(u)?null:u}function $e(o){return o.toString()}function Je(o){const u=Number.parseInt(o,10);return Number.isNaN(u)?null:u}function ke(o){return o.toLowerCase()}function Xe(o){return vr(o)&&o.termType==="NamedNode"}function vt(o){return vr(o)&&o.termType==="Literal"}function vr(o){return o!==null&&typeof o=="object"&&typeof o.termType=="string"&&typeof o.value=="string"&&typeof o.equals=="function"}function pr(o){return Xe(o)&&m(o.value)}function Nt(o){const u=L(o);if(typeof URL!="function")return!0;try{const h=new URL(u);return!0}catch{return!1}}function Fr(o,u){return Pt.namedNode(ar(g(o.value),u))}function ar(o,u){if(typeof URL!="function")throw new Error("The URL interface is not available, so an IRI cannot be determined.");const h=new URL(u);return h.hash=o,h.href}const Pt=e;function Ye(o,u,h={}){var _;if(!["NamedNode","DefaultGraph"].includes(u.graph.termType))throw new Error(`Cannot parse Quads with nodes of type [${u.graph.termType}] as their Graph node.`);const H=u.graph.termType==="DefaultGraph"?"default":u.graph.value,G=(_=o.graphs[H])!==null&&_!==void 0?_:{};return d({...o,graphs:d({...o.graphs,[H]:We(G,u,h)})})}function We(o,u,h){var _;if(!["NamedNode","BlankNode"].includes(u.subject.termType))throw new Error(`Cannot parse Quads with nodes of type [${u.subject.termType}] as their Subject node.`);const H=u.subject.termType==="BlankNode"?`_:${u.subject.value}`:u.subject.value,G=(_=o[H])!==null&&_!==void 0?_:{type:"Subject",url:H,predicates:{}};return d({...o,[H]:ee(G,u,h)})}function ee(o,u,h){return d({...o,predicates:M(o.predicates,u,h)})}function M(o,u,h){var _;if(!["NamedNode"].includes(u.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${u.predicate.termType}] as their Predicate node.`);const H=u.predicate.value,G=(_=o[H])!==null&&_!==void 0?_:{};return d({...o,[H]:F(G,u,h)})}function F(o,u,h){var _,T,H,G,oe,xe,Pe,Ie;if(u.object.termType==="NamedNode"){const ot=d([...(_=o.namedNodes)!==null&&_!==void 0?_:[],u.object.value]);return d({...o,namedNodes:ot})}if(u.object.termType==="Literal"){if(u.object.datatype.value===W.langString){const At=u.object.language.toLowerCase(),ur=d([...(H=(T=o.langStrings)===null||T===void 0?void 0:T[At])!==null&&H!==void 0?H:[],u.object.value]),Lr=d({...(G=o.langStrings)!==null&&G!==void 0?G:{},[At]:ur});return d({...o,langStrings:Lr})}const ot=d([...(xe=(oe=o.literals)===null||oe===void 0?void 0:oe[u.object.datatype.value])!==null&&xe!==void 0?xe:[],u.object.value]),dt=d({...(Pe=o.literals)!==null&&Pe!==void 0?Pe:{},[u.object.datatype.value]:ot});return d({...o,literals:dt})}if(u.object.termType==="BlankNode"){const ot=K(u.object,h),dt=d([...(Ie=o.blankNodes)!==null&&Ie!==void 0?Ie:[],ot]);return d({...o,blankNodes:dt})}throw new Error(`Objects of type [${u.object.termType}] are not supported.`)}function K(o,u){var h,_;if(((h=u.chainBlankNodes)!==null&&h!==void 0?h:[]).find(Pe=>Pe.equals(o))===void 0)return I(o);const G=((_=u.otherQuads)!==null&&_!==void 0?_:[]).filter(Pe=>Pe.subject.equals(o)),oe=G.filter(Pe=>!ne(Pe.object)).reduce((Pe,Ie)=>{var ot;if(!["NamedNode"].includes(Ie.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${Ie.predicate.termType}] as their Predicate node.`);const At=(ot=Pe[Ie.predicate.value])!==null&&ot!==void 0?ot:{};return d({...Pe,[Ie.predicate.value]:F(At,Ie,u)})},{});return G.filter(Pe=>ne(Pe.object)).reduce((Pe,Ie)=>{var ot,dt;if(!["NamedNode"].includes(Ie.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${Ie.predicate.termType}] as their Predicate node.`);const ur=(ot=Pe[Ie.predicate.value])!==null&&ot!==void 0?ot:{},Lr=(dt=ur.blankNodes)!==null&&dt!==void 0?dt:[];return d({...Pe,[Ie.predicate.value]:{...ur,blankNodes:[...Lr,K(Ie.object,u)]}})},oe)}function re(o){const u=o.map(G=>G.subject).filter(ne),h=o.map(G=>G.object).filter(ne);function _(G){return G.every(oe=>G.every(xe=>oe.equals(xe)))}const T=[];return h.forEach(G=>{T.push(...U(G,o))}),u.concat(h).filter(G=>{if(T.some(xe=>xe.equals(G)))return!1;const oe=o.filter(xe=>xe.object.equals(G)).map(xe=>xe.subject);return oe.length>0&&_(oe)})}function B(o,u={}){var h;const _=[],T=(h=u.dataFactory)!==null&&h!==void 0?h:e;return Object.keys(o.graphs).forEach(H=>{const G=o.graphs[H],oe=H==="default"?T.defaultGraph():T.namedNode(H);Object.keys(G).forEach(xe=>{const{predicates:Pe}=G[xe],Ie=b(xe)?T.blankNode(P(xe)):T.namedNode(xe);_.push(...C(Pe,Ie,oe,u))})}),_}function C(o,u,h,_={}){var T;const H=[],G=(T=_.dataFactory)!==null&&T!==void 0?T:e;return Object.keys(o).forEach(oe=>{var xe,Pe,Ie,ot;const dt=G.namedNode(oe),At=(xe=o[oe].langStrings)!==null&&xe!==void 0?xe:{},ur=(Pe=o[oe].namedNodes)!==null&&Pe!==void 0?Pe:[],Lr=(Ie=o[oe].literals)!==null&&Ie!==void 0?Ie:{},Pr=(ot=o[oe].blankNodes)!==null&&ot!==void 0?ot:[];Object.keys(Lr).forEach(er=>{const yi=G.namedNode(er);Lr[er].forEach(Ai=>{const Ko=G.literal(Ai,yi);H.push(G.quad(u,dt,Ko,h))})}),Object.keys(At).forEach(er=>{At[er].forEach(Bn=>{const Ai=G.literal(Bn,er);H.push(G.quad(u,dt,Ai,h))})}),ur.forEach(er=>{const yi=G.namedNode(er);H.push(G.quad(u,dt,yi,h))}),Pr.forEach(er=>{if(b(er)){const yi=G.blankNode(P(er));H.push(G.quad(u,dt,yi,h))}else{const yi=G.blankNode(),Bn=G.quad(u,dt,yi,h),Ai=C(er,yi,h);H.push(Bn),H.push(...Ai)}})}),H}function U(o,u,h=[]){if(h.find(oe=>oe.equals(o))!==void 0)return h;const _=u.filter(oe=>oe.subject.equals(o)&&ne(oe.object)).map(oe=>oe.object);if(_.length===0)return[];const T=[...h,o],H=_.map(oe=>U(oe,u,T)),G=[];for(const oe of H)G.push(...oe);return G}function ne(o){return o.termType==="BlankNode"}const Re=async(o,u)=>{if(typeof window=="object"&&typeof nS!="function")return window.fetch(o,u);if(typeof nS!="function"){const T=(await rS(()=>import("./browser-ponyfill-3d2d5a43.js").then(H=>H.b),[])).default;return T(o,u)}return My()(o,u)};function Le(o){var u,h,_,T,H;const G=(h=(u=o.headers.get("Content-Type"))===null||u===void 0?void 0:u.split(";"))!==null&&h!==void 0?h:[],oe=G.length>0&&["text/turtle","application/ld+json"].includes(G[0]),xe={sourceIri:o.url,isRawData:!oe,contentLocation:(_=o.headers.get("Content-Location"))!==null&&_!==void 0?_:void 0,contentType:(T=o.headers.get("Content-Type"))!==null&&T!==void 0?T:void 0,linkedResources:{},location:(H=o.headers.get("Location"))!==null&&H!==void 0?H:void 0},Pe=o.headers.get("Link");if(Pe){const ot=r.parse(Pe),dt=ot.get("rel","acl");dt.length===1&&(xe.aclUrl=new URL(dt[0].uri,xe.sourceIri).href),xe.linkedResources=ot.refs.reduce((At,ur)=>{var Lr,Pr;return(Lr=At[Pr=ur.rel])!==null&&Lr!==void 0||(At[Pr]=[]),At[ur.rel].push(new URL(ur.uri,xe.sourceIri).href),At},xe.linkedResources)}const Ie=o.headers.get("WAC-Allow");return Ie&&(xe.permissions=qe(Ie)),xe}function qe(o){function u(_){const T=_.split(" ");return T.includes("write")?{read:T.includes("read"),append:!0,write:!0,control:T.includes("control")}:{read:T.includes("read"),append:T.includes("append"),write:!1,control:T.includes("control")}}function h(_,T){const H=_.split(",").map(oe=>oe.split("=")).filter(oe=>oe.length===2&&oe[0].trim()===T);if(H.length!==1)return"";const G=H[0][1].trim();return G.charAt(0)!=='"'||G.charAt(G.length-1)!=='"'?"":G.substring(1,G.length-1)}return{user:u(h(o,"user")),public:u(h(o,"public"))}}function Et(o){let u;return typeof o.slice=="function"?u=Object.assign(o.slice(),{...o}):u={...o},u}function Wt(o){return!o.ok}function Y(o){return o.status===401||o.status===403}const te={Authorization:"http://www.w3.org/ns/auth/acl#Authorization",AuthenticatedAgent:"http://www.w3.org/ns/auth/acl#AuthenticatedAgent",accessTo:"http://www.w3.org/ns/auth/acl#accessTo",agent:"http://www.w3.org/ns/auth/acl#agent",agentGroup:"http://www.w3.org/ns/auth/acl#agentGroup",agentClass:"http://www.w3.org/ns/auth/acl#agentClass",default:"http://www.w3.org/ns/auth/acl#default",defaultForNew:"http://www.w3.org/ns/auth/acl#defaultForNew",mode:"http://www.w3.org/ns/auth/acl#mode",origin:"http://www.w3.org/ns/auth/acl#origin"},j={type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"},S={BasicContainer:"http://www.w3.org/ns/ldp#BasicContainer",Container:"http://www.w3.org/ns/ldp#Container",Resource:"http://www.w3.org/ns/ldp#Resource",contains:"http://www.w3.org/ns/ldp#contains"},k={Agent:"http://xmlns.com/foaf/0.1/Agent",primaryTopic:"http://xmlns.com/foaf/0.1/primaryTopic",isPrimaryTopicOf:"http://xmlns.com/foaf/0.1/isPrimaryTopicOf"},w={AccessControlResource:"http://www.w3.org/ns/solid/acp#AccessControlResource",Policy:"http://www.w3.org/ns/solid/acp#Policy",AccessControl:"http://www.w3.org/ns/solid/acp#AccessControl",Read:"http://www.w3.org/ns/solid/acp#Read",Append:"http://www.w3.org/ns/solid/acp#Append",Write:"http://www.w3.org/ns/solid/acp#Write",Rule:"http://www.w3.org/ns/solid/acp#Rule",Matcher:"http://www.w3.org/ns/solid/acp#Matcher",accessControl:"http://www.w3.org/ns/solid/acp#accessControl",memberAccessControl:"http://www.w3.org/ns/solid/acp#memberAccessControl",apply:"http://www.w3.org/ns/solid/acp#apply",applyMembers:"http://www.w3.org/ns/solid/acp#applyMembers",allow:"http://www.w3.org/ns/solid/acp#allow",deny:"http://www.w3.org/ns/solid/acp#deny",allOf:"http://www.w3.org/ns/solid/acp#allOf",anyOf:"http://www.w3.org/ns/solid/acp#anyOf",noneOf:"http://www.w3.org/ns/solid/acp#noneOf",access:"http://www.w3.org/ns/solid/acp#access",accessMembers:"http://www.w3.org/ns/solid/acp#accessMembers",agent:"http://www.w3.org/ns/solid/acp#agent",group:"http://www.w3.org/ns/solid/acp#group",client:"http://www.w3.org/ns/solid/acp#client",PublicAgent:"http://www.w3.org/ns/solid/acp#PublicAgent",AuthenticatedAgent:"http://www.w3.org/ns/solid/acp#AuthenticatedAgent",CreatorAgent:"http://www.w3.org/ns/solid/acp#CreatorAgent"},ce={PublicOidcClient:"http://www.w3.org/ns/solid/terms#PublicOidcClient"},Ae={publicKey:"https://w3id.org/security#publicKey"},de={storage:"http://www.w3.org/ns/pim/space#storage"},je={fetch:Re};async function Tt(o,u={...je,ignoreAuthenticationErrors:!1}){var h;const T=await{...je,...u}.fetch(o,{method:"HEAD"});return Yt(T,{ignoreAuthenticationErrors:(h=u.ignoreAuthenticationErrors)!==null&&h!==void 0?h:!1})}function Yt(o,u={ignoreAuthenticationErrors:!1}){if(Wt(o)&&(!Y(o)||!u.ignoreAuthenticationErrors))throw new it(`Fetching the metadata of the Resource at [${o.url}] failed: [${o.status}] [${o.statusText}].`,o);return{internal_resourceInfo:Le(o)}}function wt(o){return(D(o)?ge(o):L(o)).endsWith("/")}function we(o){return o.internal_resourceInfo.isRawData}function Ue(o){var u;return(u=o.internal_resourceInfo.contentType)!==null&&u!==void 0?u:null}function ge(o){return D(o)?o.internal_resourceInfo.sourceIri:null}const pe=ge;function Me(o){var u;if(!A(o))return null;const h=(u=rt(o)["http://www.w3.org/ns/solid/terms#podOwner"])!==null&&u!==void 0?u:[];return h.length===1?h[0]:null}function at(o,u){const h=Me(u);return typeof h!="string"?null:h===o}function rt(o){return o.internal_resourceInfo.linkedResources}function et(o){var u,h,_,T,H,G,oe;if(typeof o.internal_resourceInfo.permissions=="object")return{user:{read:o.internal_resourceInfo.permissions.user.read,append:o.internal_resourceInfo.permissions.user.append,write:o.internal_resourceInfo.permissions.user.write},public:{read:o.internal_resourceInfo.permissions.public.read,append:o.internal_resourceInfo.permissions.public.append,write:o.internal_resourceInfo.permissions.public.write}};const xe=rt(o);return{user:{read:(h=(u=xe[w.allow])===null||u===void 0?void 0:u.includes(w.Read))!==null&&h!==void 0?h:!1,append:(H=((_=xe[w.allow])===null||_===void 0?void 0:_.includes(w.Append))||((T=xe[w.allow])===null||T===void 0?void 0:T.includes(w.Write)))!==null&&H!==void 0?H:!1,write:(oe=(G=xe[w.allow])===null||G===void 0?void 0:G.includes(w.Write))!==null&&oe!==void 0?oe:!1}}}class it extends N{get statusCode(){return this.response.status}get statusText(){return this.response.statusText}constructor(u,h){super(u),this.response=h}}const Lt=async o=>{const u=await Re(o);return{contextUrl:void 0,documentUrl:o,document:await u.json()}},Ht=()=>{const o=[],u=[],h=[];return{onQuad:_=>{o.push(_)},onError:_=>{h.push(_)},onComplete:_=>{u.push(_)},parse:async(_,T)=>{const H=(await rS(()=>import("./jsonld-23149a8a.js").then(oe=>oe.j),[])).default;let G=[];try{const oe=await H.toRDF(JSON.parse(_),{base:ge(T),documentLoader:Lt});G=Bt(oe)}catch(oe){h.forEach(xe=>xe(oe))}G.forEach(oe=>{o.forEach(xe=>xe(oe))}),u.forEach(oe=>oe())}}};function Bt(o){return o.map(h=>Pt.quad(qt(h.subject),qt(h.predicate),qt(h.object),qt(h.graph)))}function qt(o){switch(o.termType){case"NamedNode":return Pt.namedNode(o.value);case"BlankNode":return Pt.blankNode(o.value.substr(2));case"Literal":return Pt.literal(o.value,o.language||o.datatype);case"DefaultGraph":return Pt.defaultGraph();default:throw Error(`unknown termType: ${o.termType}`)}}const sr=()=>{const o=[],u=[],h=[];return{onQuad:_=>{o.push(_)},onError:_=>{h.push(_)},onComplete:_=>{u.push(_)},parse:async(_,T)=>{(await Vt(ge(T))).parse(_,(G,oe)=>{G?h.forEach(xe=>xe(G)):oe?o.forEach(xe=>xe(oe)):u.forEach(xe=>xe())})}}};async function Vt(o){return new n.Parser({format:"text/turtle",baseIRI:o})}async function _t(o){const u="text/turtle",h=new n.Writer({format:u}),_=o.map(G=>Pt.quad(G.subject,G.predicate,G.object,void 0));return h.addQuads(_),await new Promise((G,oe)=>{h.end((xe,Pe)=>{xe?oe(xe):G(Pe)})})}const cr={acl:"http://www.w3.org/ns/auth/acl#",acp:"http://www.w3.org/ns/solid/acp#",cc:"http://creativecommons.org/ns#",cert:"http://www.w3.org/ns/auth/cert#",csvw:"http://www.w3.org/ns/csvw#",current:"#",dc:"http://purl.org/dc/terms/",dcam:"http://purl.org/dc/dcam/",dcat:"http://www.w3.org/ns/dcat#",dctype:"http://purl.org/dc/dcmitype/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",owl:"http://www.w3.org/2002/07/owl#",posixstat:"http://www.w3.org/ns/posix/stat#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",shacl:"http://www.w3.org/ns/shacl#",skos:"http://www.w3.org/2004/02/skos/core#",skosxl:"http://www.w3.org/2008/05/skos-xl#",solid:"http://www.w3.org/ns/solid/terms#",swapdoc:"http://www.w3.org/2000/10/swap/pim/doc#",ui:"http://www.w3.org/ns/ui#",vann:"http://purl.org/vocab/vann/",vcard:"http://www.w3.org/2006/vcard/ns#",ws:"http://www.w3.org/ns/pim/space#",xsd:"http://www.w3.org/2001/XMLSchema#"},ht=t.dataset;function bt(o){const u={graphs:{default:{}},type:"Dataset"},h=Array.from(o),_=re(h);return h.filter(H=>_.every(G=>!G.equals(H.subject))).reduce((H,G)=>Ye(H,G,{otherQuads:h,chainBlankNodes:_}),u)}function Kt(o,u={}){var h,_;return((_=(h=u.datasetFactory)===null||h===void 0?void 0:h.dataset)!==null&&_!==void 0?_:ht)(B(o,u))}async function Ft(o,u){const{prefixes:h=cr,thing:_}={...u},T=new n.Writer({format:"application/turtle",prefixes:h}),H=_?new n.NamedNode(_):void 0;for(const G of Kt(o).match(H))T.addQuad(G);return new Promise((G,oe)=>{T.end((xe,Pe)=>{xe?oe(xe):G(Pe)})})}var gr=Object.freeze({__proto__:null,getJsonLdParser:Ht,getTurtleParser:sr,solidDatasetAsTurtle:Ft});const zt={fetch:Re},Ur=["Slug","If-None-Match","Content-Type"];function Xt(o){return Ur.some(u=>o[u]!==void 0)}async function Ut(o,u=zt){const h={...zt,...u},_=L(o),T=await h.fetch(_,h.init);if(Wt(T))throw new it(`Fetching the File failed: [${T.status}] [${T.statusText}].`,T);const H=Le(T),G=await T.blob();return Object.assign(G,{internal_resourceInfo:H})}async function It(o,u=zt){const h={...zt,...u},_=D(o)?L(pe(o)):L(o),T=await h.fetch(_,{...h.init,method:"DELETE"});if(Wt(T))throw new it(`Deleting the file at [${_}] failed: [${T.status}] [${T.statusText}].`,T)}async function Wr(o,u,h=zt){const _=L(o),T=await nn(_,u,"POST",h);if(Wt(T))throw new it(`Saving the file in [${o}] failed: [${T.status}] [${T.statusText}].`,T);const H=T.headers.get("Location");if(H===null)throw new Error("Could not determine the location of the newly saved file.");const G=new URL(H,new URL(_).origin).href,oe=Et(u),xe={internal_resourceInfo:{isRawData:!0,sourceIri:G,contentType:Xr(u,h.contentType)}};return Object.assign(oe,xe)}async function Or(o,u,h=zt){const _=L(o),T=await nn(_,u,"PUT",h);if(Wt(T))throw new it(`Overwriting the file at [${_}] failed: [${T.status}] [${T.statusText}].`,T);const H=Et(u),G=Le(T);return G.sourceIri=_,G.isRawData=!0,Object.assign(H,{internal_resourceInfo:G})}function Mr(o){return Array.isArray(o)}function dr(o){return typeof o.forEach=="function"}function Rr(o){if(typeof o>"u")return{};let u={};return Mr(o)?o.forEach(([h,_])=>{u[h]=_}):dr(o)?o.forEach((h,_)=>{u[_]=h}):u=o,u}async function nn(o,u,h,_){var T,H;const G={...zt,..._},oe=Rr((H=(T=G.init)===null||T===void 0?void 0:T.headers)!==null&&H!==void 0?H:{});if(Xt(oe))throw new Error(`No reserved header (${Ur.join(", ")}) should be set in the optional RequestInit.`);G.slug!==void 0&&(oe.Slug=G.slug),oe["Content-Type"]=Xr(u,_.contentType);const xe=L(o);return G.fetch(xe,{...G.init,headers:oe,method:h,body:u})}function Xr(o,u){if(typeof u=="string")return u;const h=typeof o=="object"&&o!==null&&typeof o.type=="string"&&o.type.length>0?o.type:void 0;return h??"application/octet-stream"}function Br(o){var u,h,_,T,H,G,oe,xe;if(Xe(o))return`<${o.value}> (URL)`;if(vt(o)){if(!Xe(o.datatype))return`[${o.value}] (RDF/JS Literal of unknown type)`;let Pe;switch(o.datatype.value){case W.boolean:return Pe=(h=(u=J(o.value))===null||u===void 0?void 0:u.valueOf())!==null&&h!==void 0?h:`Invalid data: \`${o.value}\``,`${Pe} (boolean)`;case W.dateTime:return Pe=(T=(_=De(o.value))===null||_===void 0?void 0:_.toUTCString())!==null&&T!==void 0?T:`Invalid data: \`${o.value}\``,`${Pe} (datetime)`;case W.decimal:return Pe=(G=(H=Ct(o.value))===null||H===void 0?void 0:H.toString())!==null&&G!==void 0?G:`Invalid data: \`${o.value}\``,`${Pe} (decimal)`;case W.integer:return Pe=(xe=(oe=Je(o.value))===null||oe===void 0?void 0:oe.toString())!==null&&xe!==void 0?xe:`Invalid data: \`${o.value}\``,`${Pe} (integer)`;case W.langString:return`"${o.value}" (${o.language} string)`;case W.string:return`"${o.value}" (string)`;default:return`[${o.value}] (RDF/JS Literal of type: \`${o.datatype.value}\`)`}}return o.termType==="BlankNode"?`[${o.value}] (RDF/JS BlankNode)`:o.termType==="Quad"?"??? (nested RDF* Quad)":o.termType==="Variable"?`?${o.value} (RDF/JS Variable)`:o}function ct(o){if(!on(o))throw new ao(o)}function vn(o,u){const h=R(o)?o.internal_changeLog:{additions:[],deletions:[]},[_,T]=u.filter(H=>!Tn(H)).reduce(([H,G],oe)=>typeof G.find(Pe=>Pe.equals(oe))<"u"?[H,G.filter(Pe=>!Pe.equals(oe))]:[H.concat(oe),G],[h.additions,h.deletions]);return d({...o,internal_changeLog:{additions:_,deletions:T}})}function Ln(o,u){const h=R(o)?o.internal_changeLog:{additions:[],deletions:[]},[_,T]=u.filter(H=>!Tn(H)).reduce(([H,G],oe)=>typeof H.find(Pe=>Pe.equals(oe))<"u"?[H.filter(Pe=>!Pe.equals(oe)),G]:[H,G.concat(oe)],[h.additions,h.deletions]);return d({...o,internal_changeLog:{additions:_,deletions:T}})}function ui(o){return R(o)?o:d({...o,internal_changeLog:{additions:[],deletions:[]}})}function Tn(o){return o.subject.termType==="BlankNode"||o.object.termType==="BlankNode"}function bn(o){return Object.keys(o.predicates).filter(u=>Zt(o,u)!==null)}function f(o,u){var h,_,T;if(ct(o),!Nt(u))throw new fn(u);const H=L(u),G=(T=(_=(h=o.predicates[H])===null||h===void 0?void 0:h.namedNodes)===null||_===void 0?void 0:_[0])!==null&&T!==void 0?T:null;return G===null?null:m(G)?`#${g(G)}`:G}const c=f;function p(o,u){var h,_,T;if(ct(o),!Nt(u))throw new fn(u);const H=L(u);return(T=(_=(h=o.predicates[H])===null||h===void 0?void 0:h.namedNodes)===null||_===void 0?void 0:_.map(G=>m(G)?`#${g(G)}`:G))!==null&&T!==void 0?T:[]}const v=p;function O(o,u){ct(o);const h=zr(o,u,W.boolean);return h===null?null:J(h)}function $(o,u){return ct(o),Vr(o,u,W.boolean).map(J).filter(_=>_!==null)}function X(o,u){ct(o);const h=zr(o,u,W.dateTime);return h===null?null:De(h)}function ue(o,u){return ct(o),Vr(o,u,W.dateTime).map(De).filter(_=>_!==null)}function se(o,u){ct(o);const h=zr(o,u,W.date);return h===null?null:ft(h)}function le(o,u){return ct(o),Vr(o,u,W.date).map(ft).filter(_=>_!==null)}function fe(o,u){ct(o);const h=zr(o,u,W.time);return h===null?null:Fe(h)}function ye(o,u){return ct(o),Vr(o,u,W.time).map(Fe).filter(_=>_!==null)}function Se(o,u){ct(o);const h=zr(o,u,W.decimal);return h===null?null:Ct(h)}function Ce(o,u){return ct(o),Vr(o,u,W.decimal).map(_=>Ct(_)).filter(_=>_!==null)}function Ne(o,u){ct(o);const h=zr(o,u,W.integer);return h===null?null:Je(h)}function Ke(o,u){return ct(o),Vr(o,u,W.integer).map(_=>Je(_)).filter(_=>_!==null)}function ze(o,u){return Z(o,u,"en")}function Z(o,u,h){var _,T;if(ct(o),!Nt(u))throw new fn(u);const H=L(u),G=(T=(_=o.predicates[H])===null||_===void 0?void 0:_.langStrings)!==null&&T!==void 0?T:{},xe=Object.keys(G).find(Pe=>Pe.toLowerCase()===h.toLowerCase()&&Array.isArray(G[Pe])&&G[Pe].length>0);return typeof xe=="string"?G[xe][0]:null}function he(o,u){return me(o,u,"en")}function me(o,u,h){var _,T;if(ct(o),!Nt(u))throw new fn(u);const H=L(u),G=(T=(_=o.predicates[H])===null||_===void 0?void 0:_.langStrings)!==null&&T!==void 0?T:{},xe=Object.keys(G).find(Pe=>Pe.toLowerCase()===h.toLowerCase()&&Array.isArray(G[Pe])&&G[Pe].length>0);return typeof xe=="string"?[...G[xe]]:[]}function _e(o,u){var h,_;if(ct(o),!Nt(u))throw new fn(u);const T=L(u),H=(_=(h=o.predicates[T])===null||h===void 0?void 0:h.langStrings)!==null&&_!==void 0?_:{};return new Map(Object.entries(H).map(([G,oe])=>[G,[...oe]]))}function Be(o,u){return ct(o),zr(o,u,W.string)}function Ge(o,u){return ct(o),Vr(o,u,W.string)}function Dt(o,u){const h=c(o,u);return h===null?null:Pt.namedNode(h)}function ut(o,u){return v(o,u).map(_=>Pt.namedNode(_))}function Ar(o,u){var h,_,T,H;if(ct(o),!Nt(u))throw new fn(u);const G=L(u),oe=(_=(h=o.predicates[G])===null||h===void 0?void 0:h.langStrings)!==null&&_!==void 0?_:{},xe=Object.keys(oe);if(xe.length>0){const ot=xe.find(dt=>Array.isArray(oe[dt])&&oe[dt].length>0);if(typeof ot=="string")return Pt.literal(oe[ot][0],ot)}const Pe=(H=(T=o.predicates[G])===null||T===void 0?void 0:T.literals)!==null&&H!==void 0?H:{},Ie=Object.keys(Pe);if(Ie.length>0){const ot=Ie.find(dt=>Array.isArray(Pe[dt])&&Pe[dt].length>0);if(typeof ot=="string")return Pt.literal(Pe[ot][0],Pt.namedNode(ot))}return null}function kt(o,u){var h,_,T,H;if(ct(o),!Nt(u))throw new fn(u);const G=L(u);let oe=[];const xe=(_=(h=o.predicates[G])===null||h===void 0?void 0:h.langStrings)!==null&&_!==void 0?_:{},Pe=Object.keys(xe);for(const dt of Pe){const ur=xe[dt].map(Lr=>Pt.literal(Lr,dt));oe=oe.concat(ur)}const Ie=(H=(T=o.predicates[G])===null||T===void 0?void 0:T.literals)!==null&&H!==void 0?H:{},ot=Object.keys(Ie);for(const dt of ot){const At=Ie[dt],ur=Pt.namedNode(dt),Lr=At.map(Pr=>Pt.literal(Pr,ur));oe=oe.concat(Lr)}return oe}function Zt(o,u){var h,_;ct(o);const T=Dt(o,u);if(T!==null)return T;const H=Ar(o,u);if(H!==null)return H;const G=L(u),oe=(_=(h=o.predicates[G])===null||h===void 0?void 0:h.blankNodes)!==null&&_!==void 0?_:[];if(oe.length>0){const xe=b(oe[0])?P(oe[0]):void 0;return Pt.blankNode(xe)}return null}function Zr(o,u){var h,_;ct(o);const T=ut(o,u),H=kt(o,u),G=L(u),xe=((_=(h=o.predicates[G])===null||h===void 0?void 0:h.blankNodes)!==null&&_!==void 0?_:[]).map(Ie=>{const ot=b(Ie)?P(Ie):void 0;return Pt.blankNode(ot)});return T.concat(H).concat(xe)}function zr(o,u,h){var _,T,H,G;if(!Nt(u))throw new fn(u);const oe=L(u);return(G=(H=(T=(_=o.predicates[oe])===null||_===void 0?void 0:_.literals)===null||T===void 0?void 0:T[h])===null||H===void 0?void 0:H[0])!==null&&G!==void 0?G:null}function Vr(o,u,h){var _,T,H;if(!Nt(u))throw new fn(u);const G=L(u);return[...(H=(T=(_=o.predicates[G])===null||_===void 0?void 0:_.literals)===null||T===void 0?void 0:T[h])!==null&&H!==void 0?H:[]]}function nr(o,u,h={}){var _;if(!Nt(u))throw new ti(u);const T=typeof h.scope<"u"?L(h.scope):"default",H=(_=o.graphs[T])!==null&&_!==void 0?_:{},G=L(u),oe=m(G)&&A(o)?ar(g(G),ge(o)):G,xe=H[oe];return typeof xe>"u"?null:xe}function Gr(o,u={acceptBlankNodes:!1}){var h;const _=typeof u.scope<"u"?L(u.scope):"default",T=(h=o.graphs[_])!==null&&h!==void 0?h:{};return Object.values(T).filter(H=>!b(H.url)||u.acceptBlankNodes)}function xr(o,u){var h;const _=ei(u)&&A(o)?ar(g(u.url),ge(o)):u.url,T=o.graphs.default,H=d({...T,[_]:d({...u,url:_})}),G=d({...o.graphs,default:H}),oe=Pt.namedNode(_),xe=(h=o.graphs.default[_])===null||h===void 0?void 0:h.predicates,Pe=typeof xe<"u"?C(xe,oe,Pt.defaultGraph()):[],Ie=C(u.predicates,oe,Pt.defaultGraph());return vn(Ln(d({...o,graphs:G}),Pe),Ie)}function jr(o,u){var h;let _;Xe(u)?_=u.value:typeof u=="string"?_=m(u)&&A(o)?ar(g(u),ge(o)):u:ei(u)?_=u.url:_=Tr(u);const H={...o.graphs.default};delete H[_];const G=d({...o.graphs,default:d(H)}),oe=Pt.namedNode(_),xe=(h=o.graphs.default[_])===null||h===void 0?void 0:h.predicates,Pe=typeof xe<"u"?C(xe,oe,Pt.defaultGraph()):[];return Ln(d({...o,graphs:G}),Pe)}function br(o={}){var u;if(typeof o.url<"u"){const{url:H}=o;if(!Nt(H))throw new ti(H);return d({type:"Subject",predicates:d({}),url:H})}const h=(u=o.name)!==null&&u!==void 0?u:li(),_=E(h);return d({type:"Subject",predicates:d({}),url:_})}function on(o){return typeof o=="object"&&o!==null&&typeof o.type=="string"&&o.type==="Subject"}function sn(o,u){if(ei(o)){if(typeof u>"u")throw new Error("The URL of a Thing that has not been persisted cannot be determined without a base URL.");return ar(g(o.url),u)}return o.url}const Tr=sn;function so(o){let u="";ei(o)?u+=`## Thing (no URL yet  identifier: \`#${g(o.url)}\`)
`:u+=`## Thing: ${o.url}
`;const h=Object.keys(o.predicates);if(h.length===0)u+=`
<empty>
`;else for(const _ of h){u+=`
Property: ${_}
`;const T=Zr(o,_);u+=T.reduce((H,G)=>`${H}- ${Br(G)}
`,"")}return u}function ei(o){return m(o.url)}class ao extends N{constructor(u){const h=`Expected a Thing, but received: [${u}].`;super(h),this.receivedValue=u}}class fn extends N{constructor(u){const h=Xe(u)?u.value:u,_=`Expected a valid URL to identify a property, but received: [${h}].`;super(_),this.receivedProperty=h}}class uo extends N{constructor(u){const h=Xe(u)?u.value:u,_=`Expected a valid URL value, but received: [${h}].`;super(_),this.receivedValue=h}}class ti extends N{constructor(u){const h=Xe(u)?u.value:u,_=`Expected a valid URL to identify a Thing, but received: [${h}].`;super(_),this.receivedValue=h}}const li=()=>i.v4();function Ui(o){const u=new URL(o);return u.hash="",u.href}function Ei(){return d({type:"Dataset",graphs:{default:{}}})}async function Bo(o,u={}){if(Wt(o))throw new it(`Fetching the SolidDataset at [${o.url}] failed: [${o.status}] [${o.statusText}].`,o);const h=Yt(o),_={"text/turtle":sr(),...u.parsers},T=Ue(h);if(T===null)throw new Error(`Could not determine the content type of the Resource at [${ge(h)}].`);const H=T.split(";")[0],G=_[H];if(typeof G>"u")throw new Error(`The Resource at [${ge(h)}] has a MIME type of [${H}], but the only parsers available are for the following MIME types: [${Object.keys(_).join(", ")}].`);const oe=await o.text();return new Promise((Pe,Ie)=>{let ot=d({graphs:d({default:d({})}),type:"Dataset"});const dt=[],At=[];G.onError(ur=>{Ie(new Error(`Encountered an error parsing the Resource at [${ge(h)}] with content type [${T}]: ${ur}`))}),G.onQuad(ur=>{At.push(ur),ur.subject.termType==="BlankNode"||ur.object.termType==="BlankNode"?dt.push(ur):ot=Ye(ot,ur)}),G.onComplete(async()=>{const Lr=dt.length<=20?re(dt):[];ot=dt.filter(dn=>Lr.every(er=>!er.equals(dn.subject))).reduce((dn,er)=>Ye(dn,er,{otherQuads:At,chainBlankNodes:Lr}),ot);const Qi=d({...ot,...h});Pe(Qi)}),G.parse(oe,h)})}async function gn(o,u=je){var h;o=L(o);const _={...je,...u},T=Object.keys((h=u.parsers)!==null&&h!==void 0?h:{}),H=T.length>0?T.join(", "):"text/turtle",G=await _.fetch(o,{headers:{Accept:H}});if(Wt(G))throw new it(`Fetching the Resource at [${o}] failed: [${G.status}] [${G.statusText}].`,G);return await Bo(G,u)}async function x(o){const u=o.internal_changeLog.deletions.length>0?`DELETE DATA {${(await _t(o.internal_changeLog.deletions.map(Rt))).trim()}};`:"",h=o.internal_changeLog.additions.length>0?`INSERT DATA {${(await _t(o.internal_changeLog.additions.map(Rt))).trim()}};`:"";return{method:"PATCH",body:`${u} ${h}`,headers:{"Content-Type":"application/sparql-update"}}}async function V(o){return{method:"PUT",body:await _t(B(o).map(Rt)),headers:{"Content-Type":"text/turtle","If-None-Match":"*",Link:`<${S.Resource}>; rel="type"`}}}async function Q(o,u,h=je){o=L(o);const _={...je,...h},T=ui(u),H=Ee(T,o)?await x(T):await V(T),G=await _.fetch(o,H);if(Wt(G)){const Ie=Ee(T,o)?`The changes that were sent to the Pod are listed below.

${gt(T)}`:`The SolidDataset that was sent to the Pod is listed below.

${lt(T)}`;throw new it(`Storing the Resource at [${o}] failed: [${G.status}] [${G.statusText}].

${Ie}`,G)}const oe={...Le(G),isRawData:!1},xe=d({...u,internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:oe});return Gt(xe)}async function ie(o,u=je){const h={...je,...u},_=D(o)?L(ge(o)):L(o),T=await h.fetch(_,{method:"DELETE"});if(Wt(T))throw new it(`Deleting the SolidDataset at [${_}] failed: [${T.status}] [${T.statusText}].`,T)}async function be(o,u=je){var h;o=L(o),o=o.endsWith("/")?o:`${o}/`;const _={...je,...u},T=await _.fetch(o,{method:"PUT",body:_.initialContent?await _t(B(_.initialContent).map(Rt)):void 0,headers:{Accept:"text/turtle","Content-Type":"text/turtle","If-None-Match":"*",Link:`<${S.BasicContainer}>; rel="type"`}});if(Wt(T)){const oe=_.initialContent===void 0?"empty":"non-empty";throw new it(`Creating the ${oe} Container at [${o}] failed: [${T.status}] [${T.statusText}].`,T)}const H=Le(T);return d({...(h=u.initialContent)!==null&&h!==void 0?h:Ei(),internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:H})}function ae(o,u){return Ui(o.internal_resourceInfo.sourceIri)===Ui(u)}function Ee(o,u){return R(o)&&D(o)&&typeof o.internal_resourceInfo.sourceIri=="string"&&ae(o,u)}async function Qe(o,u,h=je){const _={...je,...h};o=L(o);const T=await _t(B(u).map(Rt)),H={"Content-Type":"text/turtle",Link:`<${S.Resource}>; rel="type"`};h.slugSuggestion&&(H.slug=h.slugSuggestion);const G=await _.fetch(o,{method:"POST",body:T,headers:H});if(Wt(G))throw new it(`Storing the Resource in the Container at [${o}] failed: [${G.status}] [${G.statusText}].

The SolidDataset that was sent to the Pod is listed below.

${lt(u)}`,G);const oe=Le(G);if(!oe.location)throw new Error("Could not determine the location of the newly saved SolidDataset.");let xe;try{xe=new URL(oe.location).href}catch{xe=new URL(oe.location,G.url).href}const Ie=d({...u,...{internal_resourceInfo:{isRawData:!1,sourceIri:xe}}});return Gt(Ie)}async function Ve(o,u=je){o=L(o);const h={...je,...u},_={"Content-Type":"text/turtle",Link:`<${S.BasicContainer}>; rel="type"`};u.slugSuggestion&&(_.slug=u.slugSuggestion);const T=await h.fetch(o,{method:"POST",headers:_});if(Wt(T))throw new it(`Creating an empty Container in the Container at [${o}] failed: [${T.status}] [${T.statusText}].`,T);const H=Le(T);if(!H.location)throw new Error("Could not determine the location of the newly created Container.");try{const G=new URL(H.location).toString();return d({...Ei(),internal_resourceInfo:{...H,sourceIri:G}})}catch{}return d({...Ei(),internal_resourceInfo:{...H,sourceIri:new URL(H.location,T.url).href}})}async function Ze(o,u=je){const h=D(o)?L(ge(o)):L(o);if(!wt(o))throw new Error(`You're trying to delete the Container at [${h}], but Container URLs should end in a \`/\`. Are you sure this is a Container?`);const T=await{...je,...u}.fetch(h,{method:"DELETE"});if(Wt(T))throw new it(`Deleting the Container at [${h}] failed: [${T.status}] [${T.statusText}].`,T)}function pt(o){const u=nr(o,ge(o));return u!==null?v(u,S.contains):[]}function lt(o){let u="";D(o)?u+=`# SolidDataset: ${ge(o)}
`:u+=`# SolidDataset (no URL yet)
`;const h=Gr(o);return h.length===0?u+=`
<empty>
`:h.forEach(_=>{u+=`
${so(_)}`,R(o)&&(u+=`
${yt(o,_)}
`)}),u}function gt(o){if(!D(o))return"This is a newly initialized SolidDataset, so there is no source to compare it to.";if(!R(o)||o.internal_changeLog.additions.length===0&&o.internal_changeLog.deletions.length===0)return`## Changes compared to ${ge(o)}

This SolidDataset has not been modified since it was fetched from ${ge(o)}.
`;let u=`## Changes compared to ${ge(o)}
`;const h=nt(o);return Object.keys(h).forEach(_=>{u+=`
### Thing: ${_}
`;const T=h[_];Object.keys(T).forEach(H=>{u+=`
Property: ${H}
`;const{deleted:G}=T[H],{added:oe}=T[H];G.length>0&&(u+=`- Removed:
`,u+=G.reduce((xe,Pe)=>`${xe}  - ${Br(Pe)}
`,"")),oe.length>0&&(u+=`- Added:
`,u+=oe.reduce((xe,Pe)=>`${xe}  - ${Br(Pe)}
`,""))})}),u}function nt(o){const u=Object.create(null);return o.internal_changeLog.deletions.forEach(h=>{var _,T,H;const G=pr(h.subject)?Fr(h.subject,ge(o)):h.subject;if(!Xe(G)||!Xe(h.predicate))return;const oe=L(G),xe=L(h.predicate);(_=u[oe])!==null&&_!==void 0||(u[oe]=Object.create(null)),(T=(H=u[oe])[xe])!==null&&T!==void 0||(H[xe]={added:[],deleted:[]}),u[oe][xe].deleted.push(h.object)}),o.internal_changeLog.additions.forEach(h=>{var _,T,H;const G=pr(h.subject)?Fr(h.subject,ge(o)):h.subject;if(!Xe(G)||!Xe(h.predicate))return;const oe=L(G),xe=L(h.predicate);(_=u[oe])!==null&&_!==void 0||(u[oe]=Object.create(null)),(T=(H=u[oe])[xe])!==null&&T!==void 0||(H[xe]={added:[],deleted:[]}),u[oe][xe].added.push(h.object)}),u}function yt(o,u){const h=Pt.namedNode(u.url),_=o.internal_changeLog.additions.reduce((oe,xe)=>xe.subject.equals(h)?oe+1:oe,0),T=o.internal_changeLog.deletions.reduce((oe,xe)=>xe.subject.equals(h)?oe+1:oe,0),H=_===1?"1 new value added":`${_} new values added`,G=T===1?"1 value removed":`${T} values removed`;return`(${H} / ${G})`}function Rt(o){const u=Xe(o.subject)?Ot(o.subject):o.subject,h=Xe(o.object)?Ot(o.object):o.object;return Pt.quad(u,o.predicate,h,o.graph)}function Ot(o){return m(o.value)?Pt.namedNode(`#${g(o.value)}`):o}function Gt(o){const u=ge(o),h=o.graphs.default,T=Object.keys(h).reduce((G,oe)=>{const xe=_r(G[oe],u),Pe=m(oe)?`${u}#${g(oe)}`:oe,Ie={...G};return delete Ie[oe],Ie[Pe]=xe,d(Ie)},h),H=d({...o.graphs,default:T});return d({...o,graphs:H})}function _r(o,u){const _=Object.keys(o.predicates).reduce((T,H)=>{var G;const oe=(G=T[H].namedNodes)!==null&&G!==void 0?G:[];if(oe.every(Ie=>!m(Ie)))return T;const xe=d(oe.map(Ie=>m(Ie)?`${u}#${g(Ie)}`:Ie)),Pe=d({...T[H],namedNodes:xe});return d({...T,[H]:Pe})},o.predicates);return d({...o,predicates:_,url:m(o.url)?`${u}#${g(o.url)}`:o.url})}async function Jt(o,u=je){const h=L(o);try{const oe=new URL("/.well-known/solid",new URL(h).origin).href;return await gn(oe,{fetch:u.fetch})}catch{}const _=await Tt(h,{fetch:u.fetch,ignoreAuthenticationErrors:!0}),H=rt(_)[de.storage],G=(H==null?void 0:H.length)===1?H[0]:null;if(G!==null){const oe=new URL(".well-known/solid",G.endsWith("/")?G:`${G}/`).href;return gn(oe,{...u,parsers:{"application/ld+json":Ht()}})}throw new Error("Could not determine storage root or well-known solid resource.")}const{Response:St}=l;function fr(o){return{...Ei(),internal_resourceInfo:{sourceIri:L(o),isRawData:!1,contentType:"text/turtle",linkedResources:{}}}}function Mt(o){const u=L(o);if(!u.endsWith("/"))throw new Error("A Container's URL should end in a slash. Please update your tests.");return fr(u)}function hr(o,u){const h=new Blob;return Object.assign(h,{internal_resourceInfo:{sourceIri:L(o),isRawData:!0,contentType:u==null?void 0:u.contentType,linkedResources:{}}})}function Ir(o,u=404){const h=new St(void 0,{status:u});return new it(`Fetching the Resource at [${o}] failed: [${h.status}] [${h.statusText}].`,h)}const tr=(o,u,h)=>{var _,T;if(ct(o),!Nt(u))throw new fn(u);if(!on(h)&&!Nt(h))throw new uo(h);const H=L(u),G=(_=o.predicates[H])!==null&&_!==void 0?_:{},oe=(T=G.namedNodes)!==null&&T!==void 0?T:[];let xe;Xe(h)?xe=h.value:typeof h=="string"?xe=h:ei(h)?xe=h.url:xe=Tr(h);const Pe=d(oe.concat(L(xe))),Ie=d({...G,namedNodes:Pe}),ot=d({...o.predicates,[H]:Ie});return d({...o,predicates:ot})},tt=tr,Hr=(o,u,h)=>(ct(o),_n(o,u,q(h),W.boolean)),lr=(o,u,h)=>(ct(o),_n(o,u,z(h),W.dateTime)),Dr=(o,u,h)=>(ct(o),_n(o,u,xt(h),W.date)),kr=(o,u,h)=>(ct(o),_n(o,u,ve(h),W.time)),Qr=(o,u,h)=>(ct(o),_n(o,u,st(h),W.decimal)),Qt=(o,u,h)=>(ct(o),_n(o,u,$e(h),W.integer));function Nr(o,u,h){return an(o,u,h,"en")}function an(o,u,h,_){var T,H,G;if(ct(o),!Nt(u))throw new fn(u);const oe=L(u),xe=ke(_),Pe=(T=o.predicates[oe])!==null&&T!==void 0?T:{},Ie=(H=Pe.langStrings)!==null&&H!==void 0?H:{},ot=(G=Ie[xe])!==null&&G!==void 0?G:[],dt=d(ot.concat(h)),At=d({...Ie,[xe]:dt}),ur=d({...Pe,langStrings:At}),Lr=d({...o.predicates,[oe]:ur});return d({...o,predicates:Lr})}const Mn=(o,u,h)=>(ct(o),_n(o,u,h,W.string));function rr(o,u,h){return tr(o,u,h.value)}function un(o,u,h){if(ct(o),!Nt(u))throw new fn(u);return h.datatype.value===W.langString?an(o,u,h.value,h.language):_n(o,u,h.value,h.datatype.value)}function wn(o,u,h){var _,T;if(h.termType==="NamedNode")return rr(o,u,h);if(h.termType==="Literal")return un(o,u,h);if(h.termType==="BlankNode"){if(ct(o),!Nt(u))throw new fn(u);const H=L(u),G=(_=o.predicates[H])!==null&&_!==void 0?_:{},oe=(T=G.blankNodes)!==null&&T!==void 0?T:[],xe=d(oe.concat(I(h))),Pe=d({...G,blankNodes:xe}),Ie=d({...o.predicates,[H]:Pe});return d({...o,predicates:Ie})}throw new Error(`Term type [${h.termType}] is not supported by @inrupt/solid-client.`)}function _n(o,u,h,_){var T,H,G;if(ct(o),!Nt(u))throw new fn(u);const oe=L(u),xe=(T=o.predicates[oe])!==null&&T!==void 0?T:{},Pe=(H=xe.literals)!==null&&H!==void 0?H:{},Ie=(G=Pe[_])!==null&&G!==void 0?G:[],ot=d(Ie.concat(h)),dt=d({...Pe,[_]:ot}),At=d({...xe,literals:dt}),ur=d({...o.predicates,[oe]:At});return d({...o,predicates:ur})}function Sr(o,u){if(ct(o),!Nt(u))throw new fn(u);const h=L(u),_={...o.predicates};return delete _[h],d({...o,predicates:d(_)})}const Di=(o,u,h)=>{var _,T,H;if(ct(o),!Nt(u))throw new fn(u);const G=L(u);if(!on(h)&&!Nt(h))throw new uo(h);const oe=on(h)?Tr(h):L(h),xe=d((H=(T=(_=o.predicates[G])===null||_===void 0?void 0:_.namedNodes)===null||T===void 0?void 0:T.filter(ot=>ot.toLowerCase()!==oe.toLowerCase()))!==null&&H!==void 0?H:[]),Pe=d({...o.predicates[G],namedNodes:xe}),Ie=d({...o.predicates,[G]:Pe});return d({...o,predicates:Ie})},Cr=Di,Xu=(o,u,h)=>(ct(o),jo(o,u,W.boolean,_=>J(_)===h)),xa=(o,u,h)=>(ct(o),jo(o,u,W.dateTime,_=>{var T;return((T=De(_))===null||T===void 0?void 0:T.getTime())===h.getTime()})),Gc=(o,u,h)=>(ct(o),jo(o,u,W.date,function(_){const T=ft(_);return T?T.getFullYear()===h.getFullYear()&&T.getMonth()===h.getMonth()&&T.getDate()===h.getDate():!1})),$s=(o,u,h)=>(ct(o),jo(o,u,W.time,function(_){const T=Fe(_);return T?T.hour===h.hour&&T.minute===h.minute&&T.second===h.second&&T.millisecond===h.millisecond&&T.timezoneHourOffset===h.timezoneHourOffset&&T.timezoneMinuteOffset===h.timezoneMinuteOffset:!1})),Jc=(o,u,h)=>(ct(o),jo(o,u,W.decimal,_=>Ct(_)===h)),Zu=(o,u,h)=>(ct(o),jo(o,u,W.integer,_=>Je(_)===h));function Ca(o,u,h){return Ao(o,u,h,"en")}function Ao(o,u,h,_){var T,H;if(ct(o),!Nt(u))throw new fn(u);const G=L(u),oe=(H=(T=o.predicates[G])===null||T===void 0?void 0:T.langStrings)!==null&&H!==void 0?H:{},xe=Object.keys(oe).find(ur=>ke(ur)===ke(_)&&Array.isArray(oe[ur])&&oe[ur].length>0);if(typeof xe!="string")return o;const Pe=oe[xe],Ie=d(Pe.filter(ur=>ur!==h)),ot=d({...oe,[xe]:Ie}),dt=d({...o.predicates[G],langStrings:ot}),At=d({...o.predicates,[G]:dt});return d({...o,predicates:At})}const Pa=(o,u,h)=>(ct(o),jo(o,u,W.string,_=>_===h));function el(o,u,h){return Di(o,u,h.value)}function Qc(o,u,h){var _,T,H;if(ct(o),!Nt(u))throw new fn(u);const G=h.datatype.value;if(G===W.langString)return Ao(o,u,h.value,h.language);const oe=L(u),xe=(_=o.predicates[oe])!==null&&_!==void 0?_:{},Pe=(T=xe.literals)!==null&&T!==void 0?T:{},Ie=(H=Pe[G])!==null&&H!==void 0?H:[],ot=d(Ie.filter(Pr=>Pr!==h.value)),dt=d({...Pe,[G]:ot}),At=d({...xe,literals:dt}),ur=d({...o.predicates,[oe]:At});return d({...o,predicates:ur})}function jo(o,u,h,_){var T,H,G;if(!Nt(u))throw new fn(u);const oe=L(u),xe=(T=o.predicates[oe])!==null&&T!==void 0?T:{},Pe=(H=xe.literals)!==null&&H!==void 0?H:{},Ie=(G=Pe[h])!==null&&G!==void 0?G:[],ot=d(Ie.filter(Pr=>!_(Pr))),dt=d({...Pe,[h]:ot}),At=d({...xe,literals:dt}),ur=d({...o.predicates,[oe]:At});return d({...o,predicates:ur})}const Fn=(o,u,h)=>{if(ct(o),!Nt(u))throw new fn(u);if(!on(h)&&!Nt(h))throw new uo(h);return tr(Sr(o,u),u,h)},cn=Fn,Yc=(o,u,h)=>(ct(o),Hr(Sr(o,u),u,h)),Ws=(o,u,h)=>(ct(o),lr(Sr(o,u),u,h)),En=(o,u,h)=>(ct(o),Dr(Sr(o,u),u,h)),tl=(o,u,h)=>(ct(o),kr(Sr(o,u),u,h)),Xc=(o,u,h)=>(ct(o),Qr(Sr(o,u),u,h)),Zc=(o,u,h)=>(ct(o),Qt(Sr(o,u),u,h));function ds(o,u,h,_){return ct(o),an(Sr(o,u),u,h,_)}const Ta=(o,u,h)=>(ct(o),Mn(Sr(o,u),u,h));function rl(o,u,h){return ct(o),rr(Sr(o,u),u,h)}function _v(o,u,h){return ct(o),un(Sr(o,u),u,h)}function Sv(o,u,h){if(ct(o),!Nt(u))throw new fn(u);return wn(Sr(o,u),u,h)}function lo(o=br()){let u=on(o)?o:br(o);function h(G){return(oe,xe)=>(u=G(u,oe,xe),H)}function _(G){return(oe,xe)=>(u=G(u,oe,xe),H)}function T(G){return(oe,xe)=>(u=G(u,oe,xe),H)}const H={build:()=>u,addUrl:h(tr),addIri:h(tt),addBoolean:h(Hr),addDatetime:h(lr),addDate:h(Dr),addTime:h(kr),addDecimal:h(Qr),addInteger:h(Qt),addStringNoLocale:h(Mn),addStringEnglish:(G,oe)=>(u=an(u,G,oe,"en"),H),addStringWithLocale:(G,oe,xe)=>(u=an(u,G,oe,xe),H),addNamedNode:h(rr),addLiteral:h(un),addTerm:h(wn),setUrl:_(Fn),setIri:_(cn),setBoolean:_(Yc),setDatetime:_(Ws),setDate:_(En),setTime:_(tl),setDecimal:_(Xc),setInteger:_(Zc),setStringNoLocale:_(Ta),setStringEnglish:(G,oe)=>(u=ds(u,G,oe,"en"),H),setStringWithLocale:(G,oe,xe)=>(u=ds(u,G,oe,xe),H),setNamedNode:_(rl),setLiteral:_(_v),setTerm:_(Sv),removeAll:G=>(u=Sr(u,G),H),removeUrl:T(Di),removeIri:T(Cr),removeBoolean:T(Xu),removeDatetime:T(xa),removeDate:T(Gc),removeTime:T($s),removeDecimal:T(Jc),removeInteger:T(Zu),removeStringNoLocale:T(Pa),removeStringEnglish:(G,oe)=>lo(Ao(u,G,oe,"en")),removeStringWithLocale:(G,oe,xe)=>lo(Ao(u,G,oe,xe)),removeNamedNode:T(el),removeLiteral:T(Qc)};return H}function ux(o){const u=L(o);return{type:"Subject",predicates:{},url:u}}function bv(o){const u=rt(o).type;return Array.isArray(u)&&u.includes(w.AccessControlResource)}async function Ro(o,u=je){if(!An(o))return{resourceAcl:null,fallbackAcl:null};try{const h=await Ev(o,u);return h===null?{resourceAcl:null,fallbackAcl:await Av(o,u)}:{resourceAcl:h,fallbackAcl:null}}catch(h){if(h instanceof Sp)return{resourceAcl:null,fallbackAcl:null};throw h}}async function Ev(o,u=je){if(!An(o))return null;try{const h=await gn(o.internal_resourceInfo.aclUrl,u);if(bv(h))throw new Sp(o,h);return d({...h,internal_accessTo:ge(o)})}catch(h){if(h instanceof Sp)throw h;return null}}async function Av(o,u=je){const h=new URL(ge(o)),_=h.pathname;if(_==="/")return null;const T=Rv(_),H=new URL(T,h.origin).href,G=await Tt(H,u);if(!An(G))return null;const oe=await Ev(G,u);return oe===null?Av(G,u):oe}function Rv(o){const u=o.substring(o.length-1)==="/"?o.substring(0,o.length-1):o;return`${o.substring(0,u.lastIndexOf("/"))}/`}function Gi(o){return Gr(o).filter(lx)}function lx(o){return v(o,j.type).includes(te.Authorization)}function nl(o,u){return o.filter(h=>cx(h,u))}function cx(o,u){return v(o,te.accessTo).includes(u)}function Fa(o,u){return o.filter(h=>dx(h,u))}function dx(o,u){return v(o,te.default).includes(u)||v(o,te.defaultForNew).includes(u)}function Ks(o){const u=v(o,te.mode);return u.includes(Yr.write)?{read:u.includes(Yr.read),append:!0,write:!0,control:u.includes(Yr.control)}:{read:u.includes(Yr.read),append:u.includes(Yr.append),write:!1,control:u.includes(Yr.control)}}function Vs(o){return o.reduce((u,h)=>u.write||h.write?{read:u.read||h.read,append:!0,write:!0,control:u.control||h.control}:{read:u.read||h.read,append:u.append||h.append,write:!1,control:u.control||h.control},{read:!1,append:!1,write:!1,control:!1})}function fx(o){return Gi(o).filter(hx).reduce(jr,o)}function hx(o){return C(o.predicates,Pt.namedNode(o.url),Pt.defaultGraph()).some(u=>!px(u))?!1:c(o,te.accessTo)===null&&c(o,te.default)===null&&c(o,te.defaultForNew)===null||c(o,te.mode)===null||c(o,te.agent)===null&&c(o,te.agentGroup)===null&&c(o,te.agentClass)===null}function px(o){const{predicate:u}=o,{object:h}=o;return!!(u.equals(Pt.namedNode(j.type))&&h.equals(Pt.namedNode(te.Authorization))||u.equals(Pt.namedNode(te.accessTo))||u.equals(Pt.namedNode(te.default))||u.equals(Pt.namedNode(te.defaultForNew))||u.equals(Pt.namedNode(te.mode))&&Object.values(Yr).some(_=>h.equals(Pt.namedNode(_)))||u.equals(Pt.namedNode(te.agent))||u.equals(Pt.namedNode(te.agentGroup))||u.equals(Pt.namedNode(te.agentClass))||u.equals(Pt.namedNode(te.origin)))}const Yr={read:"http://www.w3.org/ns/auth/acl#Read",append:"http://www.w3.org/ns/auth/acl#Append",write:"http://www.w3.org/ns/auth/acl#Write",control:"http://www.w3.org/ns/auth/acl#Control"};function xv(o,u,h){return o.filter(_=>v(_,h).includes(u))}function Cv(o,u){const h={};return o.forEach(_=>{const T=v(_,u),H=Ks(_);T.forEach(G=>{h[G]=typeof h[G]>"u"?H:Vs([h[G],H])})}),h}function Pv(o){let u=br();return u=cn(u,j.type,te.Authorization),o.read&&(u=tt(u,te.mode,Yr.read)),o.append&&!o.write&&(u=tt(u,te.mode,Yr.append)),o.write&&(u=tt(u,te.mode,Yr.write)),o.control&&(u=tt(u,te.mode,Yr.control)),u}function gx(o){let u=br();u=cn(u,j.type,te.Authorization);function h(_,T,H){return v(_,H).reduce((G,oe)=>tt(G,H,oe),T)}return u=h(o,u,te.accessTo),u=h(o,u,te.default),u=h(o,u,te.defaultForNew),u=h(o,u,te.agent),u=h(o,u,te.agentGroup),u=h(o,u,te.agentClass),u=h(o,u,te.origin),u=h(o,u,te.mode),u}function Li(o,u){return Object.assign(Et(o),{internal_acl:u})}const yx=[te.agent,te.agentClass,te.agentGroup,te.origin];function mx(o,u,h,_,T){if(!v(o,h).includes(u)){const oe=Pv({read:!1,append:!1,write:!1,control:!1});return[o,oe]}const H=Cr(o,h,u);let G=gx(o);return G=Cr(G,T==="resource"?te.accessTo:te.default,_),T==="default"&&(G=Cr(G,te.defaultForNew,_)),G=cn(G,h,u),yx.filter(oe=>oe!==h).forEach(oe=>{G=Sr(G,oe)}),[H,G]}function Ia(o,u,h,_,T){let H=o;Gr(o).forEach(xe=>{const[Pe,Ie]=mx(xe,T,h,o.internal_accessTo,_);H=xr(H,Pe),H=xr(H,Ie)});let G=Pv(u);G=cn(G,_==="resource"?te.accessTo:te.default,o.internal_accessTo),G=cn(G,h,T);const oe=xr(H,G);return fx(oe)}function Tv(o,u){return Li(o,{resourceAcl:u,fallbackAcl:null})}function vx(o){return o.internal_acl.resourceAcl}class Sp extends Error{constructor(u,h){super(`[${pe(u)}] is governed by Access Control Policies in [${pe(h)}] rather than by Web Access Control.`)}}function wx(o){return typeof o.internal_acl=="object"}function fs(o){return o.internal_acl.resourceAcl!==null&&ge(o)===o.internal_acl.resourceAcl.internal_accessTo&&o.internal_resourceInfo.aclUrl===ge(o.internal_acl.resourceAcl)}async function _x(o,u=je){const h=await gn(o,u),_=await Ro(h,u);return Li(h,_)}async function Sx(o,u=je){const h=await Ut(o,u),_=await Ro(h,u);return Li(h,_)}async function bx(o,u=je){const h=await Tt(o,u),_=await Ro(h,u);return Li(h,_)}function il(o){return fs(o)?o.internal_acl.resourceAcl:null}function hs(o){return o.internal_acl.fallbackAcl!==null}function bp(o){return hs(o)?o.internal_acl.fallbackAcl:null}function ed(o){return d({...Ei(),internal_accessTo:ge(o),internal_resourceInfo:{sourceIri:o.internal_resourceInfo.aclUrl,isRawData:!1,linkedResources:{}}})}function Fv(o){const u=ed(o),h=Gi(o.internal_acl.fallbackAcl);return Fa(h,o.internal_acl.fallbackAcl.internal_accessTo).map(G=>(G=Sr(G,te.default),G=Sr(G,te.defaultForNew),G=cn(G,te.accessTo,ge(o)),G=cn(G,te.default,ge(o)),G)).reduce(xr,u)}async function Iv(o,u,h=je){if(!An(o))throw new Error(`Could not determine the location of the ACL for the Resource at [${ge(o)}]; possibly the current user does not have Control access to that Resource. Try calling \`hasAccessibleAcl()\` before calling \`saveAclFor()\`.`);return{...await Q(o.internal_resourceInfo.aclUrl,u,h),internal_accessTo:ge(o)}}async function Ex(o,u=je){const _=await{...je,...u}.fetch(o.internal_resourceInfo.aclUrl,{method:"DELETE"});if(!_.ok)throw new Error(`Deleting the ACL of the Resource at [${ge(o)}] failed: [${_.status}] [${_.statusText}].`);return Object.assign(Et(o),{acl:{resourceAcl:null}})}function An(o){return typeof o.internal_resourceInfo.aclUrl=="string"}function Ep(o,u){return fs(o)?Ov(o.internal_acl.resourceAcl,u):hs(o)?Dv(o.internal_acl.fallbackAcl,u):null}function kv(o){if(fs(o)){const u=il(o);return Nv(u)}if(hs(o)){const u=bp(o);return Lv(u)}return null}function Ov(o,u){const h=Gi(o),_=nl(h,o.internal_accessTo),H=Mv(_,u).map(Ks);return Vs(H)}function Nv(o){const u=Gi(o),h=nl(u,o.internal_accessTo),_=Bv(h);return jv(_)}function Uv(o,u,h){return Ia(o,h,te.agent,"resource",u)}function Dv(o,u){const h=Gi(o),_=Fa(h,o.internal_accessTo),H=Mv(_,u).map(Ks);return Vs(H)}function Lv(o){const u=Gi(o),h=Fa(u,o.internal_accessTo),_=Bv(h);return jv(_)}function Ax(o,u,h){return Ia(o,h,te.agent,"default",u)}function Mv(o,u){return xv(o,u,te.agent)}function Bv(o){return o.filter(Rx)}function Rx(o){return c(o,te.agent)!==null}function jv(o){return Cv(o,te.agent)}function Ap(o,u){return fs(o)?$v(o.internal_acl.resourceAcl,u):hs(o)?Kv(o.internal_acl.fallbackAcl,u):null}function Hv(o){if(fs(o)){const u=il(o);return Wv(u)}if(hs(o)){const u=bp(o);return Vv(u)}return null}function $v(o,u){const h=Gi(o),_=nl(h,o.internal_accessTo),H=zv(_,u).map(Ks);return Vs(H)}function Wv(o){const u=Gi(o),h=nl(u,o.internal_accessTo);return qv(h)}function Kv(o,u){const h=Gi(o),_=Fa(h,o.internal_accessTo),H=zv(_,u).map(Ks);return Vs(H)}function Vv(o){const u=Gi(o),h=Fa(u,o.internal_accessTo);return qv(h)}function zv(o,u){return xv(o,u,te.agentGroup)}function qv(o){return Cv(o,te.agentGroup)}function Gv(o,u,h){return Ia(o,h,te.agentGroup,"resource",u)}function xx(o,u,h){return Ia(o,h,te.agentGroup,"default",u)}function Rp(o){return fs(o)?Jv(o.internal_acl.resourceAcl):hs(o)?Qv(o.internal_acl.fallbackAcl):null}function Jv(o){const u=Gi(o),h=nl(u,o.internal_accessTo),T=Xv(h,k.Agent).map(Ks);return Vs(T)}function Qv(o){const u=Gi(o),h=Fa(u,o.internal_accessTo),T=Xv(h,k.Agent).map(Ks);return Vs(T)}function Yv(o,u){return Ia(o,u,te.agentClass,"resource",k.Agent)}function Cx(o,u){return Ia(o,u,te.agentClass,"default",k.Agent)}function Xv(o,u){return o.filter(h=>Px(h,u))}function Px(o,u){return v(o,te.agentClass).includes(u)}function Tx(o,u){return Object.assign(Et(o),{internal_resourceInfo:{...o.internal_resourceInfo,aclUrl:u}})}function Fx(o){var u;const h=(u=o.internal_resourceInfo.aclUrl)!==null&&u!==void 0?u:"https://your.pod/mock-acl.ttl",_=Object.assign(Et(o),{internal_resourceInfo:{...o.internal_resourceInfo,aclUrl:h}}),T=ed(_);return Li(_,{resourceAcl:T,fallbackAcl:null})}function Ix(o){const u=Rv(pe(o)),h=`${u}.acl`,_=Tx(Mt(u),h),T=ed(_);return Li(Et(o),{resourceAcl:null,fallbackAcl:T})}function Zv(o,u){const h=nr(o,u);if(h===null)throw new Error(`Profile document [${ge(o)}] does not include WebID [${u}]`);return h}function kx(o,u,h){return xr(o,cn(Zv(o,u),Ae.publicKey,h))}function ew(o,u){return f(Zv(o,u),Ae.publicKey)}const Ox=o=>typeof o.keys<"u";async function tw(o,u,h=je){const T=await{...je,...h}.fetch(u);if(!T.ok)throw new Error(`Fetching [${u}] returned an error: ${T.status} ${T.statusText}`);try{const H=await T.json();if(!Ox(H))throw new Error(`[${u}] does not dereference to a valid JWKS: ${JSON.stringify(H)}`);return{keys:[...H.keys,o]}}catch(H){throw new Error(`Parsing the document at [${u}] failed: ${H}`)}}async function Nx(o,u,h=je){const _=await gn(u,{fetch:h.fetch});if(_===null)throw new Error(`The profile document associated with WebID [${u}] could not be retrieved.`);const T=ew(_,u);if(T===null)throw new Error(`No key set is declared for the property [${Ae.publicKey}] in the profile of [${u}]`);const H=await tw(o,T,h);return Or(T,new Blob([JSON.stringify(H)]),{contentType:"application/json",fetch:h.fetch})}function rw(o,u){const h=nr(u,o),_=Gr(u).filter(T=>v(T,k.primaryTopic).length>0).map(Tr).concat(h?v(h,k.isPrimaryTopicOf):[]).filter(T=>T!==pe(u));return Array.from(new Set(_))}async function nw(o,u=je){var h,_;const T=(h=u.fetch)!==null&&h!==void 0?h:Re,H=(_=u.webIdProfile)!==null&&_!==void 0?_:await gn(o,{fetch:s.fetch}),G=(await Promise.allSettled(rw(o,H).map(oe=>gn(oe,{fetch:T})))).filter(oe=>oe.status==="fulfilled").map(oe=>oe.value);return{webIdProfile:H,altProfileAll:G}}async function Ux(o,u=je){const h=await nw(o,u);return iw(h,o)}function iw(o,u){const h=new Set;return[o.webIdProfile,...o.altProfileAll].forEach(_=>{const T=nr(_,u);T!==null&&v(T,de.storage).forEach(H=>h.add(H))}),Array.from(h)}async function Dx(o){return gn(o,{fetch:s.fetch})}function mr(o){if(!Rn(o))throw new Error(`An Access Control Resource for [${ge(o)}] is not available. This could be because the current user is not allowed to see it, or because their Pod Server does not support Access Control Resources.`);return o.internal_acp.acr}function ri(o,u){return Object.assign(Et(o),{internal_acp:{...o.internal_acp,acr:u}})}function ow(o){let u=br(o);return u=cn(u,j.type,w.AccessControl),u}function Lx(o,u,h){const _=mr(o),T=nr(_,u,h);return T===null||!v(T,j.type).includes(w.AccessControl)?null:T}function Ho(o,u){const h=mr(o),_=Gr(h,u),T=_.filter(G=>v(G,j.type).includes(w.AccessControl)),H=_.filter(G=>v(G,w.accessControl).length>0).map(G=>{const oe=v(G,w.accessControl)[0];return br({url:oe})});return T.concat(H)}function zs(o,u){const h=mr(o),_=xr(h,u);return ri(o,_)}function sw(o,u){return tt(o,w.apply,u)}function aw(o){return v(o,w.apply)}function uw(o,u){return Cr(o,w.apply,u)}function lw(o){return Sr(o,w.apply)}function cw(o,u){return tt(o,w.applyMembers,u)}function xp(o){return v(o,w.applyMembers)}function Mx(o,u){return Cr(o,w.applyMembers,u)}function dw(o){return Sr(o,w.applyMembers)}function fw(o){const u=Ho(o);return u.length===0?ow():u[0]}function qs(o){return A(o)&&Array.isArray(o.internal_resourceInfo.linkedResources[w.accessControl])&&o.internal_resourceInfo.linkedResources[w.accessControl].length===1}function ol(o,u){var h;const _=mr(o),T=ge(_);let H=(h=nr(_,T))!==null&&h!==void 0?h:br({url:T});H=tt(H,w.access,u);const G=xr(_,H);return ri(o,G)}function td(o,u){var h;const _=mr(o),T=ge(_);let H=(h=nr(_,T))!==null&&h!==void 0?h:br({url:T});H=tt(H,w.accessMembers,u);const G=xr(_,H);return ri(o,G)}function xo(o){const u=mr(o),h=ge(u),_=nr(u,h);return _===null?[]:v(_,w.access)}function ka(o){const u=mr(o),h=ge(u),_=nr(u,h);return _===null?[]:v(_,w.accessMembers)}function Gs(o,u){const h=mr(o),_=ge(h),T=nr(h,_);if(T===null)return o;const H=Cr(T,w.access,u),G=xr(h,H);return ri(o,G)}function rd(o,u){const h=mr(o),_=ge(h),T=nr(h,_);if(T===null)return o;const H=Cr(T,w.accessMembers,u),G=xr(h,H);return ri(o,G)}function Oa(o){const u=mr(o),h=ge(u),_=nr(u,h);if(_===null)return o;const T=Sr(_,w.access),H=xr(u,T);return ri(o,H)}function Na(o){const u=mr(o),h=ge(u),_=nr(u,h);if(_===null)return o;const T=Sr(_,w.accessMembers),H=xr(u,T);return ri(o,H)}function nd(o,u){const h=fw(o),_=sw(h,u);return zs(o,_)}function Cp(o,u){const h=fw(o),_=cw(h,u);return zs(o,_)}function $o(o){const h=Ho(o).map(T=>aw(T)),_=new Set;return h.forEach(T=>{T.forEach(H=>_.add(H))}),Array.from(_)}function sl(o){const h=Ho(o).map(T=>xp(T)),_=new Set;return h.forEach(T=>{T.forEach(H=>_.add(H))}),Array.from(_)}function Ua(o,u){return Ho(o).map(H=>uw(H,u)).reduce(zs,o)}function Pp(o,u){return Ho(o).map(H=>Mx(H,u)).reduce(zs,o)}function al(o){return Ho(o).map(T=>lw(T)).reduce(zs,o)}function ul(o){return Ho(o).map(T=>dw(T)).reduce(zs,o)}function Tp(o){let u=`# Access controls for ${ge(o)}
`;const h=$o(o),_=sl(o),T=xo(o),H=ka(o);return h.length===0&&_.length===0&&T.length===0&&H.length===0&&(u+=`
<no policies specified yet>
`),h.length>0&&(u+=`
The following policies apply to this resource:
- `,u+=`${h.join(`
- `)}
`),T.length>0&&(u+=`
The following policies apply to the access control resource for this resource:
- `,u+=`${T.join(`
- `)}
`),_.length>0&&(u+=`
The following policies apply to the children of this resource:
- `,u+=`${_.join(`
- `)}
`),H.length>0&&(u+=`
The following policies apply to the access control resources for children of this resource:
- `,u+=`${H.join(`
- `)}
`),u}const $n="http://www.w3.org/ns/solid/acp#",yr={AccessControl:$n.concat("AccessControl"),AccessControlResource:$n.concat("AccessControlResource"),AuthenticatedAgent:$n.concat("AuthenticatedAgent"),CreatorAgent:$n.concat("CreatorAgent"),Matcher:$n.concat("Matcher"),Policy:$n.concat("Policy"),PublicAgent:$n.concat("PublicAgent"),access:$n.concat("access"),accessControl:$n.concat("accessControl"),agent:$n.concat("agent"),allOf:$n.concat("allOf"),allow:$n.concat("allow"),anyOf:$n.concat("anyOf"),apply:$n.concat("apply"),client:$n.concat("client"),deny:$n.concat("deny"),memberAccessControl:$n.concat("memberAccessControl"),noneOf:$n.concat("noneOf"),vc:$n.concat("vc")},id="http://www.w3.org/ns/auth/acl#",Da={Append:id.concat("Append"),Control:id.concat("Control"),Read:id.concat("Read"),Write:id.concat("Write")},Bx="http://www.w3.org/ns/solid/vc#SolidAccessGrant";function ll(o){const u=mr(o),h=ge(u);return nr(u,h)}const La="defaultAccessControl",cl="defaultAcrAccessControl",Fp="defaultMemberAccessControl",Ip="defaultMemberAcrAccessControl";function kp(o,u){const h=mr(o);return ge(h).concat("#").concat(u)}function co(o,u){const h=mr(o),_=kp(o,u),T=nr(h,_);return T===null||typeof T>"u"?br({url:_}):T}function od(o,u){const h=v(o,u);return{read:h.includes(Da.Read),append:h.includes(Da.Append),write:h.includes(Da.Write),controlRead:!1,controlWrite:!1}}function jx(o,u){return Object.assign(Et(o),{internal_acp:{acr:u}})}function hw(o,u,h){let _=Sr(o,h);return(u.read||u.controlRead)&&(_=tt(_,h,Da.Read)),u.append&&(_=tt(_,h,Da.Append)),(u.write||u.controlWrite)&&(_=tt(_,h,Da.Write)),_}const pw="defaultVcPolicy",gw="defaultVcMatcher";function Hx(o,u,h,_){var T;let H=nr(o,u);H===null&&(H=lo({url:u}).addIri(j.type,yr.Policy).addIri(yr.anyOf,h).build());const G=(T=nr(o,h))!==null&&T!==void 0?T:lo({url:h}).addIri(j.type,yr.Matcher).addIri(yr.vc,Bx).build(),oe=od(H,yr.allow);return H=hw(H,{...oe,..._},yr.allow),{matcher:G,policy:H}}function yw(o,u,h={inherit:!1}){var _;let T=mr(o);const H=`${pe(T)}#${pw}`,G=`${pe(T)}#${gw}`,{policy:oe,matcher:xe}=Hx(T,H,G,u);let Pe=co(o,"defaultAccessControl");v(Pe,yr.apply).includes(Tr(oe))||(Pe=tt(Pe,yr.apply,oe));let Ie=co(o,"defaultMemberAccessControl"),ot=(_=ll(o))!==null&&_!==void 0?_:br({url:pe(T)});return v(ot,yr.accessControl).includes(Tr(Pe))||(ot=tt(ot,yr.accessControl,Pe)),T=[ot,Pe,oe,xe].reduce(xr,T),h.inherit&&(v(Ie,yr.apply).includes(Tr(oe))||(Ie=tt(Ie,yr.apply,oe)),v(ot,yr.memberAccessControl).includes(Tr(Ie))||(ot=tt(ot,yr.memberAccessControl,Ie)),T=[ot,Ie].reduce(xr,T)),jx(o,T)}const Op={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},Np=(o,u,h)=>v(o,u).includes(Tr(h));function mw(o){const u=mr(o),h=co(o,"defaultAccessControl"),_=ll(o);if(_===null||!Np(_,yr.accessControl,h))return Op;const T=`${pe(u)}#${pw}`,H=nr(u,T);if(H===null||!Np(h,yr.apply,H))return Op;const G=`${pe(u)}#${gw}`,oe=nr(u,G);return oe===null||!Np(H,yr.anyOf,oe)?Op:od(H,yr.allow)}async function Ma(o,u=je){const h=L(o),_={...je,...u},T=await gn(h,_),H=await Js(T,_);return{...T,...H}}async function Ba(o,u=je){const h=L(o),_={...je,...u},T=await Ut(h,_),H=await Js(T,_);return Object.assign(T,H)}async function Wn(o,u=je){const h=L(o),_={...je,...u},T=await Tt(h,_),H=await Js(T,_);return{...T,...H}}async function ja(o,u=je){const h=L(o),_={...je,...u},T=await gn(h,_);if(An(T)){const G=await Ro(T,_);return Li(T,G)}const H=await Js(T,_);return{...T,...H}}async function Ha(o,u=je){const h=L(o),_={...je,...u},T=await Ut(h,_);if(An(T)){const G=await Ro(T,_);return Li(T,G)}const H=await Js(T,_);return Object.assign(T,H)}async function $a(o,u=je){const h=L(o),_={...je,...u},T=await Tt(h,_);if(An(T)){const G=await Ro(T,_);return Li(T,G)}const H=await Js(T,_);return{...T,...H}}async function Mi(o,u=je){const h=mr(o),_={...je,...u},T=await Q(ge(h),h,_);return ri(o,T)}function Rn(o){return typeof o.internal_acp=="object"&&o.internal_acp!==null&&typeof o.internal_acp.acr=="object"&&o.internal_acp.acr!==null}async function Js(o,u){let h;if(qs(o)){const{linkedResources:G}=o.internal_resourceInfo;[h]=G[w.accessControl]}else if(An(o)){const G=await Tt(o.internal_resourceInfo.aclUrl,u);bv(G)&&(h=ge(G))}if(typeof h!="string")return{internal_acp:{acr:null}};let _;try{_=await gn(h,u)}catch{return{internal_acp:{acr:null}}}return{internal_acp:{acr:{..._,accessTo:ge(o)}}}}function Wa(o){const u=$o(o).map(Ui).concat(sl(o).map(Ui)).concat(xo(o).map(Ui)).concat(ka(o).map(Ui));return Array.from(new Set(u))}async function sd(o,u=je){const h=L(o),_={...je,...u},T=await Tt(h,_);return Rn(await Js(T,_))}function Up(o){return A(o)?[w.accessControl,"acl"].map(h=>{if(Array.isArray(o.internal_resourceInfo.linkedResources[h])&&o.internal_resourceInfo.linkedResources[h].length===1)return o.internal_resourceInfo.linkedResources[h][0]}).find(h=>h!==void 0):void 0}function Dp(o){return v(o,j.type).includes(w.Rule)}function ad(o,u){return tt(o,w.allOf,u)}function ud(o,u){return Cr(o,w.allOf,u)}function ld(o,u){return cn(o,w.allOf,u)}function Qs(o){return v(o,w.allOf)}function cd(o,u){return tt(o,w.anyOf,u)}function dd(o,u){return Cr(o,w.anyOf,u)}function fd(o,u){return cn(o,w.anyOf,u)}function Ys(o){return v(o,w.anyOf)}function hd(o,u){return tt(o,w.noneOf,u)}function pd(o,u){return Cr(o,w.noneOf,u)}function gd(o,u){return cn(o,w.noneOf,u)}function Wo(o){return v(o,w.noneOf)}function yd(o){const u=L(o);let h=br({url:u});return h=Fn(h,j.type,w.Rule),h}function md(o,u){const h=mr(o),_=new URL(ge(h));_.hash=`#${u}`;let T=br({url:_.href});return T=Fn(T,j.type,w.Rule),T}function vd(o,u){const h=nr(o,u);return h===null||f(h,j.type)!==w.Rule?null:h}function Lp(o,u){const h=mr(o),_=ge(h),T=new URL(_);T.hash=`#${u}`;const H=nr(h,T.href);return H===null||!Dp(H)?null:H}function wd(o){return Gr(o).filter(Dp)}function vw(o){const u=mr(o);return Gr(u).filter(Dp)}function _d(o,u){return jr(o,u)}function ww(o,u){const h=mr(o);let _;if(typeof u=="string")if(Nt(u))_=u;else{const oe=new URL(ge(h));oe.hash=`#${u}`,_=oe.href}else Xe(u)?_=L(u):_=sn(u);const T=Lp(o,new URL(_).hash.substring(1));if(T===null)return o;const H=jr(h,T);return ri(o,H)}function Sd(o,u){return xr(o,u)}function Ka(o,u){const h=mr(o),_=xr(h,u);return ri(o,_)}function dl(o){return v(o,w.agent).filter(u=>u!==w.PublicAgent&&u!==w.AuthenticatedAgent&&u!==w.CreatorAgent)}function bd(o,u){const h=Va(o),_=za(o),T=qa(o);let H=cn(o,w.agent,u);return h&&(H=Pd(H)),_&&(H=Td(H)),T&&(H=Fd(H)),H}function Ed(o,u){return tt(o,w.agent,u)}function Ad(o,u){return Cr(o,w.agent,u)}function fl(o){return v(o,w.group)}function Rd(o,u){return cn(o,w.group,u)}function xd(o,u){return tt(o,w.group,u)}function Cd(o,u){return Cr(o,w.group,u)}function Va(o){return v(o,w.agent).filter(u=>u===w.PublicAgent).length>0}function Pd(o){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return tt(o,w.agent,w.PublicAgent)}function Mp(o){return Cr(o,w.agent,w.PublicAgent)}function za(o){return v(o,w.agent).filter(u=>u===w.AuthenticatedAgent).length>0}function Td(o){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return tt(o,w.agent,w.AuthenticatedAgent)}function Bp(o){return Cr(o,w.agent,w.AuthenticatedAgent)}function qa(o){return v(o,w.agent).filter(u=>u===w.CreatorAgent).length>0}function Fd(o){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return tt(o,w.agent,w.CreatorAgent)}function jp(o){return Cr(o,w.agent,w.CreatorAgent)}function Hp(o){return v(o,w.client).filter(u=>u!==ce.PublicOidcClient)}function _w(o,u){const h=Id(o);let _=cn(o,w.client,u);return h&&(_=$p(_)),_}function Sw(o,u){return tt(o,w.client,u)}function bw(o,u){return Cr(o,w.client,u)}function Id(o){return v(o,w.client).filter(u=>u===ce.PublicOidcClient).length>0}function $p(o){return tt(o,w.client,ce.PublicOidcClient)}function Ew(o){return Cr(o,w.client,ce.PublicOidcClient)}function kd(o){let u=`## Rule: ${sn(o)}

`,h="";Va(o)&&(h+=`- Everyone
`),za(o)&&(h+=`- All authenticated agents
`),qa(o)&&(h+=`- The creator of this resource
`),Id(o)&&(h+=`- Users of any client application
`);const _=dl(o);_.length>0&&(h+=`- The following agents:
  - `,h+=`${_.join(`
  - `)}
`);const T=fl(o);T.length>0&&(h+=`- Members of the following groups:
  - `,h+=`${T.join(`
  - `)}
`);const H=Hp(o);return H.length>0&&(h+=`- Users of the following client applications:
  - `,h+=`${H.join(`
  - `)}
`),u+=h.length>0?`This rule applies to:
${h}`:`<empty>
`,u}function Ga(o){return v(o,j.type).includes(w.Policy)}function Ja(o){const u=L(o);let h=br({url:u});return h=Fn(h,j.type,w.Policy),h}function Qa(o,u){const h=nr(o,u);return h===null||!Ga(h)?null:h}function Ya(o){return Gr(o).filter(_=>!ei(_)&&Ga(_))}function Xa(o,u){return jr(o,u)}function Za(o,u){return xr(o,u)}function Od(o,u){let h=Sr(o,w.allow);return u.read===!0&&(h=tt(h,w.allow,Yr.read)),u.append===!0&&(h=tt(h,w.allow,Yr.append)),u.write===!0&&(h=tt(h,w.allow,Yr.write)),h}function eu(o,u){let h=Sr(o,w.allow);return u.read===!0&&(h=tt(h,w.allow,w.Read)),u.append===!0&&(h=tt(h,w.allow,w.Append)),u.write===!0&&(h=tt(h,w.allow,w.Write)),h}function Nd(o){const u=v(o,w.allow);return{read:u.includes(Yr.read),append:u.includes(Yr.append),write:u.includes(Yr.write)}}function Xs(o){const u=v(o,w.allow);return{read:u.includes(w.Read),append:u.includes(w.Append),write:u.includes(w.Write)}}function Aw(o,u){let h=Sr(o,w.deny);return u.read===!0&&(h=tt(h,w.deny,Yr.read)),u.append===!0&&(h=tt(h,w.deny,Yr.append)),u.write===!0&&(h=tt(h,w.deny,Yr.write)),h}function Ud(o,u){let h=Sr(o,w.deny);return u.read===!0&&(h=tt(h,w.deny,w.Read)),u.append===!0&&(h=tt(h,w.deny,w.Append)),u.write===!0&&(h=tt(h,w.deny,w.Write)),h}function Dd(o){const u=v(o,w.deny);return{read:u.includes(Yr.read),append:u.includes(Yr.append),write:u.includes(Yr.write)}}function Zs(o){const u=v(o,w.deny);return{read:u.includes(w.Read),append:u.includes(w.Append),write:u.includes(w.Write)}}function Co(o,u){const h=mr(o),_=new URL(ge(h));_.hash=`#${u}`;let T=br({url:_.href});return T=Fn(T,j.type,w.Policy),T}function hl(o,u){const h=mr(o),_=ge(h),T=new URL(_);T.hash=`#${u}`;const H=nr(h,T.href);return!$o(o).includes(T.href)||H===null||!Ga(H)?null:H}function pl(o,u){const h=mr(o),_=ge(h),T=new URL(_);T.hash=`#${u}`;const H=nr(h,T.href);return!xo(o).includes(T.href)||H===null||!Ga(H)?null:H}function Ld(o){const u=mr(o);return $o(o).map(H=>nr(u,H)).filter(H=>H!==null&&Ga(H))}function Md(o){const u=mr(o);return xo(o).map(H=>nr(u,H)).filter(H=>H!==null&&Ga(H))}function Bd(o,u){const h=mr(o);let _=u;if(typeof _=="string"&&Nt(_)===!1){const xe=new URL(ge(h));xe.hash=`#${u}`,_=xe.href}let T;if(typeof _=="string"?T=_:Xe(_)?T=L(_):T=sn(_,ge(h)),hl(o,new URL(T).hash.substring(1))===null)return o;const G=jr(h,_),oe=ri(o,G);return Ua(oe,T)}function jd(o,u){const h=mr(o);let _=u;if(typeof _=="string"&&Nt(_)===!1){const xe=new URL(ge(h));xe.hash=`#${u}`,_=xe.href}let T;if(typeof _=="string"?T=_:Xe(_)?T=L(_):T=sn(_,ge(h)),pl(o,new URL(T).hash.substring(1))===null)return o;const G=jr(h,_),oe=ri(o,G);return Gs(oe,T)}function tu(o,u){const h=mr(o),_=xr(h,u),T=ri(o,_),H=sn(u,ge(h));return nd(T,H)}function ru(o,u){const h=mr(o),_=xr(h,u),T=ri(o,_),H=sn(u,ge(h));return ol(T,H)}function Hd(o){function u(xe,Pe){return Pe?"denied":xe?"allowed":"unspecified"}const h=Xs(o),_=Zs(o);let T=`## Policy: ${sn(o)}

`;T+=`- Read: ${u(h.read,_.read)}
`,T+=`- Append: ${u(h.append,_.append)}
`,T+=`- Write: ${u(h.write,_.write)}
`;const H=Qs(o),G=Ys(o),oe=Wo(o);return H.length===0&&G.length===0&&oe.length===0&&(T+=`
<no rules specified yet>
`),H.length>0&&(T+=`
All of these rules should match:
`,T+=`- ${H.join(`
- `)}
`),G.length>0&&(T+=`
At least one of these rules should match:
`,T+=`- ${G.join(`
- `)}
`),oe.length>0&&(T+=`
None of these rules should match:
`,T+=`- ${oe.join(`
- `)}
`),T}function ea(o){const u=new URL("access-control-resource",o).href;return{...fr(u),accessTo:o}}function nu(o,u=ea(ge(o))){return Object.assign(Et(o),{internal_acp:{acr:u,aprs:{}}})}const $x={getFileWithAccessDatasets:Ha,getFileWithAcr:Ba,getReferencedPolicyUrlAll:Wa,getResourceInfoWithAccessDatasets:$a,getResourceInfoWithAcr:Wn,getSolidDatasetWithAccessDatasets:ja,getSolidDatasetWithAcr:Ma,hasAccessibleAcr:Rn,saveAcrFor:Mi},Wx={acrAsMarkdown:Tp,addAcrPolicyUrl:ol,addMemberAcrPolicyUrl:td,addMemberPolicyUrl:Cp,addPolicyUrl:nd,getAcrPolicyUrlAll:xo,getMemberAcrPolicyUrlAll:ka,getMemberPolicyUrlAll:sl,getPolicyUrlAll:$o,hasLinkedAcr:qs,removeAcrPolicyUrl:Gs,removeAcrPolicyUrlAll:Oa,removeMemberAcrPolicyUrl:rd,removeMemberAcrPolicyUrlAll:Na,removeMemberPolicyUrl:Pp,removeMemberPolicyUrlAll:ul,removePolicyUrl:Ua,removePolicyUrlAll:al},Kx={createPolicy:Ja,getAllowModes:Xs,getDenyModes:Zs,getPolicy:Qa,getPolicyAll:Ya,policyAsMarkdown:Hd,removePolicy:Xa,setAllowModes:eu,setDenyModes:Ud,setPolicy:Za},Vx={addAgent:Ed,addForbiddenRuleUrl:hd,addGroup:xd,addOptionalRuleUrl:cd,addRequiredRuleUrl:ad,createRule:yd,getAgentAll:dl,getForbiddenRuleUrlAll:Wo,getGroupAll:fl,getOptionalRuleUrlAll:Ys,getRequiredRuleUrlAll:Qs,getRule:vd,getRuleAll:wd,hasAuthenticated:za,hasCreator:qa,hasPublic:Va,removeAgent:Ad,removeForbiddenRuleUrl:pd,removeGroup:Cd,removeOptionalRuleUrl:dd,removeRequiredRuleUrl:ud,removeRule:_d,ruleAsMarkdown:kd,setAgent:bd,setForbiddenRuleUrl:gd,setGroup:Rd,setOptionalRuleUrl:fd,setRequiredRuleUrl:ld,setRule:Sd},zx={addMockAcrTo:nu,mockAcrFor:ea};function Rw(o,u){return u?Pd(o):Mp(o)}function xw(o,u){return u?Td(o):Bp(o)}function Cw(o,u){return u?Fd(o):jp(o)}const qx={...$x,...Wx,...Kx,...Vx,...zx,...{getForbiddenRuleurlAll:Wo,setPublic:Rw,setAuthenticated:xw,setCreator:Cw}},Gx={...{getFileWithAccessDatasets:Ha,getFileWithAcr:Ba,getReferencedPolicyUrlAll:Wa,getResourceInfoWithAccessDatasets:$a,getResourceInfoWithAcr:Wn,getSolidDatasetWithAccessDatasets:ja,getSolidDatasetWithAcr:Ma,hasAccessibleAcr:Rn,saveAcrFor:Mi},...{createPolicy:Ja,getAllowModes:Xs,getDenyModes:Zs,getPolicy:Qa,getPolicyAll:Ya,policyAsMarkdown:Hd,removePolicy:Xa,setAllowModes:eu,setDenyModes:Ud,setPolicy:Za},...{addAgent:Ed,addForbiddenRuleUrl:hd,addGroup:xd,addOptionalRuleUrl:cd,addRequiredRuleUrl:ad,createRule:yd,getAgentAll:dl,getForbiddenRuleUrlAll:Wo,getGroupAll:fl,getOptionalRuleUrlAll:Ys,getRequiredRuleUrlAll:Qs,getRule:vd,getRuleAll:wd,hasAuthenticated:za,hasCreator:qa,hasPublic:Va,removeAgent:Ad,removeForbiddenRuleUrl:pd,removeGroup:Cd,removeOptionalRuleUrl:dd,removeRequiredRuleUrl:ud,removeRule:_d,ruleAsMarkdown:kd,setAgent:bd,setForbiddenRuleUrl:gd,setGroup:Rd,setOptionalRuleUrl:fd,setRequiredRuleUrl:ld,setRule:Sd},...{addMockAcrTo:nu,mockAcrFor:ea},...{hasLinkedAcr:qs,addAcrPolicyUrl:ol,addMemberAcrPolicyUrl:td,getAcrPolicyUrlAll:xo,getMemberAcrPolicyUrlAll:ka,removeAcrPolicyUrl:Gs,removeAcrPolicyUrlAll:Oa,removeMemberAcrPolicyUrl:rd,removeMemberAcrPolicyUrlAll:Na},...{createControl:ow,getControl:Lx,getAllControl:Ho,getControlAll:Ho,setControl:zs,removeControl:Jx,addPolicyUrl:sw,getPolicyUrlAll:aw,removePolicyUrl:uw,removePolicyUrlAll:lw,addMemberPolicyUrl:cw,getMemberPolicyUrlAll:xp,removeMemberPolicyUrl:xp,removeMemberPolicyUrlAll:dw,getForbiddenRuleurlAll:Wo,setPublic:Rw,setAuthenticated:xw,setCreator:Cw}};function Jx(o,u){const h=mr(o),_=jr(h,u);return ri(o,_)}const Qx={...{getFileWithAccessDatasets:Ha,getFileWithAcr:Ba,getLinkedAcrUrl:Up,getReferencedPolicyUrlAll:Wa,getResourceInfoWithAccessDatasets:$a,getResourceInfoWithAcr:Wn,getSolidDatasetWithAccessDatasets:ja,getSolidDatasetWithAcr:Ma,hasAccessibleAcr:Rn,saveAcrFor:Mi,isAcpControlled:sd},...{acrAsMarkdown:Tp,addAcrPolicyUrl:ol,addMemberAcrPolicyUrl:td,addMemberPolicyUrl:Cp,addPolicyUrl:nd,getAcrPolicyUrlAll:xo,getMemberAcrPolicyUrlAll:ka,getMemberPolicyUrlAll:sl,getPolicyUrlAll:$o,hasLinkedAcr:qs,removeAcrPolicyUrl:Gs,removeAcrPolicyUrlAll:Oa,removeMemberAcrPolicyUrl:rd,removeMemberAcrPolicyUrlAll:Na,removeMemberPolicyUrl:Pp,removeMemberPolicyUrlAll:ul,removePolicyUrl:Ua,removePolicyUrlAll:al},...{createPolicy:Ja,getAllowModes:Xs,getDenyModes:Zs,getPolicy:Qa,getPolicyAll:Ya,policyAsMarkdown:Hd,removePolicy:Xa,setAllowModes:eu,setDenyModes:Ud,setPolicy:Za,createResourcePolicyFor:Co,getResourceAcrPolicy:pl,getResourceAcrPolicyAll:Md,getResourcePolicy:hl,getResourcePolicyAll:Ld,removeResourceAcrPolicy:jd,removeResourcePolicy:Bd,setResourceAcrPolicy:ru,setResourcePolicy:tu},...{addAgent:Ed,addGroup:xd,createRule:yd,getAgentAll:dl,getGroupAll:fl,getRule:vd,getRuleAll:wd,removeAgent:Ad,removeGroup:Cd,removeRule:_d,ruleAsMarkdown:kd,setAgent:bd,setGroup:Rd,setRule:Sd,addClient:Sw,getClientAll:Hp,hasAnyClient:Id,removeClient:bw,setAnyClient:$p,setClient:_w,removeAnyClient:Ew,hasAuthenticated:za,hasCreator:qa,hasPublic:Va,setAuthenticated:Td,setCreator:Fd,setPublic:Pd,removeAuthenticated:Bp,removeCreator:jp,removePublic:Mp,getAnyOfRuleUrlAll:Ys,addAnyOfRuleUrl:cd,removeAnyOfRuleUrl:dd,setAnyOfRuleUrl:fd,getAllOfRuleUrlAll:Qs,addAllOfRuleUrl:ad,removeAllOfRuleUrl:ud,setAllOfRuleUrl:ld,getNoneOfRuleUrlAll:Wo,addNoneOfRuleUrl:hd,removeNoneOfRuleUrl:pd,setNoneOfRuleUrl:gd,createResourceRuleFor:md,getResourceRule:Lp,getResourceRuleAll:vw,removeResourceRule:ww,setResourceRule:Ka},...{addMockAcrTo:nu,mockAcrFor:ea}};function Ji(o,u){return Object.assign(Et(o),{internal_acp:{...o.internal_acp,acr:xr(o.internal_acp.acr,u)}})}function Pw(o){return o.includes("Member")?yr.memberAccessControl:yr.accessControl}function $d(o,u){const h=kp(o,u),_=mr(o);let T=ll(o);return(T===null||typeof T>"u")&&(T=br({url:ge(_)})),v(T,Pw(u)).includes(h)?o:(T=lo(T).addUrl(Pw(u),h).build(),Ji(o,T))}function Wp(o,u){const h=$d(o,cl),_=co(h,cl);return Ji(h,lo(_).addUrl(yr.access,u).build())}function Tw(o,u){const h=$d(o,Ip),_=co(h,Ip);return Ji(h,lo(_).addUrl(yr.access,u).build())}function Fw(o,u){const h=$d(o,Fp),_=co(h,Fp);return Ji(h,lo(_).addUrl(yr.apply,u).build())}function Kp(o,u){const h=$d(o,La),_=co(h,La);return Ji(h,lo(_).addUrl(yr.apply,u).build())}function Iw(o){const u=ll(o);return u===null?[]:v(u,yr.accessControl)}function Wd(o,u,h){const _=mr(o);return Array.from(new Set(u.map(T=>{const H=nr(_,T);return H!==null?v(H,h):[]}).reduce((T,H)=>T.concat(H),[])))}function Vp(o){return Wd(o,Iw(o),yr.access)}function kw(o){const u=ll(o);return u===null?[]:v(u,yr.memberAccessControl)}function Ow(o){return Wd(o,kw(o),yr.access)}function Nw(o){return Wd(o,kw(o),yr.apply)}function zp(o){return Wd(o,Iw(o),yr.apply)}function Uw(o,u){const h=co(o,cl);return Ji(o,Cr(h,yr.access,u))}function Dw(o,u){const h=co(o,Ip);return Ji(o,Cr(h,yr.access,u))}function Lw(o,u){const h=co(o,Fp);return Ji(o,Cr(h,yr.apply,u))}function Mw(o,u){const h=co(o,La);return Ji(o,Cr(h,yr.apply,u))}function Bw(o,u){return Ji(o,u)}function Kd(o){return v(o,j.type).includes(w.Matcher)}function jw(o,u){return tt(o,w.allOf,u)}function Hw(o,u){return Cr(o,w.allOf,u)}function $w(o,u){return cn(o,w.allOf,u)}function Vd(o){return v(o,w.allOf)}function Ww(o,u){return tt(o,w.anyOf,u)}function Kw(o,u){return Cr(o,w.anyOf,u)}function Vw(o,u){return cn(o,w.anyOf,u)}function zd(o){return v(o,w.anyOf)}function zw(o,u){return tt(o,w.noneOf,u)}function qw(o,u){return Cr(o,w.noneOf,u)}function Gw(o,u){return cn(o,w.noneOf,u)}function qd(o){return v(o,w.noneOf)}function Jw(o){const u=L(o);let h=br({url:u});return h=Fn(h,j.type,w.Matcher),h}function Gd(o,u){const h=mr(o),_=new URL(ge(h));_.hash=`#${u}`;let T=br({url:_.href});return T=Fn(T,j.type,w.Matcher),T}function Qw(o,u){const h=nr(o,u);return h===null||!Kd(h)?null:h}function qp(o,u){const h=mr(o),_=ge(h),T=new URL(_);T.hash=`#${u}`;const H=nr(h,T.href);return H===null||!Kd(H)?null:H}function Yw(o){return Gr(o).filter(Kd)}function Xw(o){const u=mr(o);return Gr(u).filter(Kd)}function Zw(o,u){return jr(o,u)}function e_(o,u){const h=mr(o);let _;if(typeof u=="string")if(Nt(u))_=u;else{const oe=new URL(ge(h));oe.hash=`#${u}`,_=oe.href}else Xe(u)?_=L(u):_=sn(u);const T=qp(o,new URL(_).hash.substring(1));if(T===null)return o;const H=jr(h,T);return ri(o,H)}function t_(o,u){return xr(o,u)}function iu(o,u){const h=mr(o),_=xr(h,u);return ri(o,_)}function r_(o){return v(o,w.agent).filter(u=>u!==w.PublicAgent&&u!==w.AuthenticatedAgent&&u!==w.CreatorAgent)}function n_(o,u){const h=Qp(o),_=Xp(o),T=eg(o);let H=cn(o,w.agent,u);return h&&(H=Yp(H)),_&&(H=Zp(H)),T&&(H=tg(H)),H}function Gp(o,u){return tt(o,w.agent,u)}function Jp(o,u){return Cr(o,w.agent,u)}function Qp(o){return v(o,w.agent).filter(u=>u===w.PublicAgent).length>0}function Yp(o){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return tt(o,w.agent,w.PublicAgent)}function i_(o){return Cr(o,w.agent,w.PublicAgent)}function Xp(o){return v(o,w.agent).filter(u=>u===w.AuthenticatedAgent).length>0}function Zp(o){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return tt(o,w.agent,w.AuthenticatedAgent)}function o_(o){return Cr(o,w.agent,w.AuthenticatedAgent)}function eg(o){return v(o,w.agent).filter(u=>u===w.CreatorAgent).length>0}function tg(o){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return tt(o,w.agent,w.CreatorAgent)}function s_(o){return Cr(o,w.agent,w.CreatorAgent)}function a_(o){return v(o,w.client).filter(u=>u!==ce.PublicOidcClient).concat(Ge(o,w.client))}function Yx(o,u){const h=c_(o);let _=cn(o,w.client,u);return h&&(_=d_(_)),_}function u_(o,u){return Nt(u)?tt(o,w.client,u):Mn(o,w.client,u)}function l_(o,u){return Nt(u)?Cr(o,w.client,u):Pa(o,w.client,u)}function c_(o){return v(o,w.client).filter(u=>u===ce.PublicOidcClient).length>0}function d_(o){return tt(o,w.client,ce.PublicOidcClient)}function Xx(o){return Cr(o,w.client,ce.PublicOidcClient)}const Zx={...{getFileWithAccessDatasets:Ha,getFileWithAcr:Ba,getReferencedPolicyUrlAll:Wa,getResourceInfoWithAccessDatasets:$a,getResourceInfoWithAcr:Wn,getSolidDatasetWithAccessDatasets:ja,getSolidDatasetWithAcr:Ma,hasAccessibleAcr:Rn,saveAcrFor:Mi,isAcpControlled:sd,getVcAccess:mw,setVcAccess:yw},...{addAcrPolicyUrl:Wp,addMemberAcrPolicyUrl:Tw,addMemberPolicyUrl:Fw,addPolicyUrl:Kp,getAcrPolicyUrlAll:Vp,getMemberAcrPolicyUrlAll:Ow,getMemberPolicyUrlAll:Nw,getPolicyUrlAll:zp,hasLinkedAcr:qs,removeAcrPolicyUrl:Uw,removeAcrPolicyUrlAll:Oa,removeMemberAcrPolicyUrl:Dw,removeMemberAcrPolicyUrlAll:Na,removeMemberPolicyUrl:Lw,removeMemberPolicyUrlAll:ul,removePolicyUrl:Mw,removePolicyUrlAll:al},...{createPolicy:Ja,getAllowModes:Nd,getDenyModes:Dd,getPolicy:Qa,getPolicyAll:Ya,removePolicy:Xa,setAllowModes:Od,setDenyModes:Aw,setPolicy:Za,createResourcePolicyFor:Co,getResourceAcrPolicy:pl,getResourceAcrPolicyAll:Md,getResourcePolicy:hl,getResourcePolicyAll:Ld,removeResourceAcrPolicy:jd,removeResourcePolicy:Bd,setResourcePolicy:Bw},...{addAgent:Gp,createMatcher:Jw,getAgentAll:r_,getMatcher:Qw,getMatcherAll:Yw,removeAgent:Jp,removeMatcher:Zw,setAgent:n_,setMatcher:t_,addClient:u_,getClientAll:a_,hasAnyClient:c_,removeClient:l_,setAnyClient:d_,setClient:Yx,removeAnyClient:Xx,hasAuthenticated:Xp,hasCreator:eg,hasPublic:Qp,setAuthenticated:Zp,setCreator:tg,setPublic:Yp,removeAuthenticated:o_,removeCreator:s_,removePublic:i_,getAnyOfMatcherUrlAll:zd,addAnyOfMatcherUrl:Ww,removeAnyOfMatcherUrl:Kw,setAnyOfMatcherUrl:Vw,getAllOfMatcherUrlAll:Vd,addAllOfMatcherUrl:jw,removeAllOfMatcherUrl:Hw,setAllOfMatcherUrl:$w,getNoneOfMatcherUrlAll:qd,addNoneOfMatcherUrl:zw,removeNoneOfMatcherUrl:qw,setNoneOfMatcherUrl:Gw,createResourceMatcherFor:Gd,getResourceMatcher:qp,getResourceMatcherAll:Xw,removeResourceMatcher:e_,setResourceMatcher:iu},...{addMockAcrTo:nu,mockAcrFor:ea}},rg=[w.agent,w.group];function ou(o,u,h){if(o.inaccessibleUrls.length>0)return null;const _=o.acrPolicies.filter(Ie=>Jd(Ie,u,h,o)),T=o.policies.filter(Ie=>Jd(Ie,u,h,o)),H={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},G=_.reduce((Ie,ot)=>{const dt={...Ie},At=Xs(ot);return At.read&&(dt.controlRead=!0),At.write&&(dt.controlWrite=!0),dt},H),oe=T.reduce((Ie,ot)=>{const dt={...Ie},At=Xs(ot);return At.read&&(dt.read=!0),At.append&&(dt.append=!0),At.write&&(dt.write=!0),dt},G),xe=_.reduce((Ie,ot)=>{const dt={...Ie},At=Zs(ot);return At.read===!0&&(dt.controlRead=!1),At.write===!0&&(dt.controlWrite=!1),dt},oe);return T.reduce((Ie,ot)=>{const dt={...Ie},At=Zs(ot);return At.read===!0&&(dt.read=!1),At.append===!0&&(dt.append=!1),At.write===!0&&(dt.write=!1),dt},xe)}function eC(o,u){return ou(o,w.agent,u)}function tC(o,u){return ou(o,w.group,u)}function rC(o){return ou(o,w.agent,w.PublicAgent)}function Jd(o,u,h,_){const T=v(o,w.allow),H=v(o,w.deny);if(T.length+H.length===0)return!1;const G=Qs(o).map(Pe=>_.rules.find(Ie=>Tr(Ie)===Pe)),oe=Ys(o).map(Pe=>_.rules.find(Ie=>Tr(Ie)===Pe)),xe=Wo(o).map(Pe=>_.rules.find(Ie=>Tr(Ie)===Pe));return G.every(Pe=>h_(Pe,u,h))&&(oe.length===0||oe.some(Pe=>h_(Pe,u,h)))&&xe.length===0}function f_(o,u){const h=v(o,w.allow),_=v(o,w.deny);return u.read===!0&&_.includes(w.Read)||u.read===!1&&h.includes(w.Read)&&!_.includes(w.Read)||u.append===!0&&_.includes(w.Append)||u.append===!1&&h.includes(w.Append)&&!_.includes(w.Append)||u.write===!0&&_.includes(w.Write)||u.write===!1&&h.includes(w.Write)&&!_.includes(w.Write)}function h_(o,u,h){let _=!0;return rg.forEach(T=>{_&&(_=c(o,T)===null)}),_||v(o,u).includes(h)}function nC(o,u){const h=new Set;return o.rules.forEach(_=>{v(_,u).filter(T=>![w.PublicAgent,w.CreatorAgent,w.AuthenticatedAgent].includes(T)||u!==w.agent).forEach(T=>h.add(T))}),h}function p_(o,u){if(o.inaccessibleUrls.length>0)return null;const h={};return nC(o,u).forEach(T=>{const H=ou(o,u,T);h[T]=H}),h}function iC(o){return p_(o,w.group)}function oC(o){return p_(o,w.agent)}function ng(o,u,h,_,T){var H,G,oe,xe,Pe;if(!Rn(o)||u.inaccessibleUrls.length>0)return null;const Ie=ou(u,h,_);if(Ie===null)return null;const ot=u.acrPolicies.filter(ir=>Jd(ir,h,_,u)),dt=u.policies.filter(ir=>Jd(ir,h,_,u)),At=ot.filter(ir=>f_(ir,{read:T.controlRead,write:T.controlWrite})),ur=dt.filter(ir=>f_(ir,{read:T.read,append:T.append,write:T.write})),Lr=At.filter(ir=>g_(ir,h,_,u)),Pr=ur.filter(ir=>g_(ir,h,_,u)),Qi={...u,acrPolicies:u.acrPolicies.filter(ir=>!Lr.includes(ir)),policies:u.policies.filter(ir=>!Pr.includes(ir))},dn=ou(Qi,h,_);if(dn===null)return null;let er=o;Lr.forEach(ir=>{const[en,ra]=y_(ir,o,u,h,_);er=ru(er,en),er=ra.reduce(Ka,er)}),Pr.forEach(ir=>{const[en,ra]=y_(ir,o,u,h,_);er=tu(er,en),er=ra.reduce(Ka,er)});const yi=`rule_${encodeURIComponent(`${h}_${_}`)}`;let Bn=md(o,yi);Bn=cn(Bn,h,_);const Ai=(H=T.controlRead)!==null&&H!==void 0?H:Ie.controlRead,Ko=(G=T.controlWrite)!==null&&G!==void 0?G:Ie.controlWrite;let ta=Lr;if(Ai!==dn.controlRead||Ko!==dn.controlWrite){const ir=i.v4();let en=Co(o,ir);en=eu(en,{read:Ai===!0,append:!1,write:Ko===!0}),en=tt(en,w.allOf,Bn),er=ru(er,en),er=Ka(er,Bn),ta=At}const Vo=(oe=T.read)!==null&&oe!==void 0?oe:Ie.read,wl=(xe=T.append)!==null&&xe!==void 0?xe:Ie.append,_l=(Pe=T.write)!==null&&Pe!==void 0?Pe:Ie.write;let Sl=Pr;if(Vo!==dn.read||wl!==dn.append||_l!==dn.write){const ir=i.v4();let en=Co(o,ir);en=eu(en,{read:Vo===!0,append:wl===!0,write:_l===!0}),en=tt(en,w.allOf,Bn),er=tu(er,en),er=Ka(er,Bn),Sl=ur}return ta.forEach(ir=>{er=Gs(er,Tr(ir))}),Sl.forEach(ir=>{er=Ua(er,Tr(ir))}),er}function sC(o,u,h,_){return ng(o,u,w.agent,h,_)}function aC(o,u,h,_){return ng(o,u,w.group,h,_)}function uC(o,u,h){return ng(o,u,w.agent,w.PublicAgent,h)}function g_(o,u,h,_){const H=v(o,w.allOf).map(Ie=>_.rules.find(ot=>Tr(ot)===Ie)).some(Ie=>ig(Ie,u,h)),oe=v(o,w.anyOf).map(Ie=>_.rules.find(ot=>Tr(ot)===Ie)).some(Ie=>ig(Ie,u,h)),Pe=v(o,w.noneOf).map(Ie=>_.rules.find(ot=>Tr(ot)===Ie)).some(Ie=>ig(Ie,u,h));return H||oe||Pe}function ig(o,u,h){const _=[];return rg.forEach(T=>{const H=v(o,T).filter(G=>G!==h||T!==u);_.push(...H)}),_.length>0}function y_(o,u,h,_,T){const H=i.v4(),G=og(v(o,w.allOf),u,h,H,_,T),oe=og(v(o,w.anyOf),u,h,H,_,T),xe=og(v(o,w.noneOf),u,h,H,_,T);let Pe=Co(u,encodeURI(Tr(o))+H);return v(o,w.allow).forEach(Ie=>{Pe=tt(Pe,w.allow,Ie)}),v(o,w.deny).forEach(Ie=>{Pe=tt(Pe,w.deny,Ie)}),G.forEach(Ie=>{Pe=tt(Pe,w.allOf,Ie)}),oe.forEach(Ie=>{Pe=tt(Pe,w.anyOf,Ie)}),xe.forEach(Ie=>{Pe=tt(Pe,w.noneOf,Ie)}),[Pe,G.concat(oe).concat(xe)]}function og(o,u,h,_,T,H){return o.map(G=>{const oe=h.rules.find(Ie=>Tr(Ie)===G);if(typeof oe>"u")return null;let xe=md(u,encodeURI(Tr(oe))+_),Pe=!1;return rg.forEach(Ie=>{v(oe,Ie).forEach(ot=>{Ie===T&&ot===H||(Pe=!0,xe=tt(xe,Ie,ot))})}),Pe?xe:null}).filter(Qd)}function Qd(o){return o!==null}async function ps(o,u=je){const h=xo(o),_=$o(o),T=m_(h).concat(m_(_)),H=await v_(T,u),G=ag(h,H).filter(Qd),oe=ag(_,H).filter(Qd),xe=new Set;G.forEach(Pr=>{w_(Pr).forEach(dn=>{xe.add(dn)})}),oe.forEach(Pr=>{w_(Pr).forEach(dn=>{xe.add(dn)})});const Pe=Array.from(xe),ot=Pe.map(Pr=>sg(Pr)).filter(Pr=>!T.includes(Pr)),dt=await v_(ot,u),At={...H,...dt},ur=ag(Pe,At).filter(Qd);return{inaccessibleUrls:Object.keys(At).filter(Pr=>At[Pr]===null),acrPolicies:G,policies:oe,rules:ur}}function sg(o){const u=new URL(o);return u.hash="",u.href}function m_(o){const u=[];return o.forEach(h=>{const _=sg(h);u.includes(_)||u.push(_)}),u}async function v_(o,u){const h=Array.from(new Set(o)),_={};return await Promise.all(h.map(async T=>{try{const H=await gn(T,u);_[T]=H}catch{_[T]=null}})),_}function ag(o,u){return o.map(h=>{const _=sg(h),T=u[_];return T?nr(T,h):null})}function w_(o){return Qs(o).concat(Ys(o)).concat(Wo(o))}function __(o,u){var h,_,T,H;if(o.controlRead!==o.controlWrite)throw new Error("For Pods using Web Access Control, controlRead and controlWrite must be equal.");return{read:(h=o.read)!==null&&h!==void 0?h:u.read,append:(_=o.append)!==null&&_!==void 0?_:u.append,write:(T=o.write)!==null&&T!==void 0?T:u.write,control:(H=o.controlRead)!==null&&H!==void 0?H:u.control}}function ug(o){return{read:o.read,write:o.write,append:o.append,controlRead:o.control,controlWrite:o.control}}async function S_(o,u,h,_){const T=await Ro(o,_),H=h(Li(o,T),u);return H===null?null:ug(H)}async function lC(o,u,h){const _=await Ro(o,h),T=u(Li(o,_));return T===null?null:ug(T)}async function b_(o,u,h){const _=await Ro(o,h),T=u(Li(o,_));if(T===null)return null;const H={};for(const[G,oe]of Object.entries(T))H[G]=ug(oe);return H}function su(o,u,h=je){return S_(o,u,Ep,h)}function E_(o,u,h=je){return S_(o,u,Ap,h)}function au(o,u=je){return lC(o,Rp,u)}function lg(o,u=je){return b_(o,kv,u)}function cC(o,u=je){return b_(o,Hv,u)}async function A_(o,u){if(!An(o))return null;const h=await Ro(o,u),_=Li(o,h);let T;if(fs(_))T=vx(_);else if(hs(_))T=Fv(_);else return null;return Tv(_,T)}async function R_(o,u,h){let _=null;try{return _=await Iv(o,u,h),Tv(o,_)}catch{return null}}async function dC(o,u,h,_,T){const H=await A_(o,T);if(H===null)return null;const G=il(H),oe=h(H),xe=__(u,oe),Pe=_(G,xe);return R_(H,Pe,T)}async function x_(o,u,h,_,T,H){const G=await A_(o,H);if(G===null)return null;const oe=_(G,u),xe=il(G),Pe=__(h,oe),Ie=T(xe,u,Pe);return R_(G,Ie,H)}async function cg(o,u,h,_=je){return x_(o,u,h,Ep,Uv,_)}async function fC(o,u,h,_=je){return x_(o,u,h,Ap,Gv,_)}async function dg(o,u,h=je){return dC(o,u,Rp,Yv,h)}var hC=Object.freeze({__proto__:null,getAccessFor:fg,getAccessForAll:hg,getAgentAccess:Yd,getAgentAccessAll:yg,getGroupAccess:Xd,getGroupAccessAll:mg,getPublicAccess:Zd,setAccessFor:pg,setAgentAccess:gg,setGroupAccess:vg,setPublicAccess:wg});async function fg(o,u,h=je,_=je){if(u==="agent"){if(typeof h!="string")throw new Error("When reading Agent-specific access, the given agent cannot be left undefined.");return Yd(o,h,_)}if(u==="group"){if(typeof h!="string")throw new Error("When reading Group-specific access, the given group cannot be left undefined.");return Xd(o,h,_)}if(u==="public"){if(typeof h=="string")throw new Error(`When reading public access, no actor type should be specified (here [${h}]).`);return Zd(o,h)}return null}async function hg(o,u,h=je){return u==="agent"?yg(o,h):u==="group"?mg(o,h):null}async function pg(o,u,h,_=je,T=je){if(u==="agent"){if(typeof _!="string")throw new Error("When writing Agent-specific access, the given agent cannot be left undefined.");return gg(o,_,h,T)}if(u==="group"){if(typeof _!="string")throw new Error("When writing Group-specific access, the given group cannot be left undefined.");return vg(o,_,h,T)}if(u==="public"){if(typeof _=="string")throw new Error(`When writing public access, no actor type should be specified (here [${_}]).`);return wg(o,h,_)}return null}async function Yd(o,u,h=je){const _=await Wn(o,h);if(Rn(_)){const T=await ps(_,h);return eC(T,u)}return An(_)?su(_,u,h):null}async function gg(o,u,h,_=je){const T=await Wn(o,_);if(Rn(T)){const H=await ps(T,_),G=sC(T,H,u,h);if(G)try{return await Mi(G,_),await Yd(o,u,_)}catch{return null}return null}if(An(T)){if(h.controlRead!==h.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${pe(T)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await cg(T,u,h,_),su(T,u,_)}return null}async function yg(o,u=je){const h=await Wn(o,u);if(Rn(h)){const _=await ps(h,u);return oC(_)}return An(h)?lg(h,u):null}async function Xd(o,u,h=je){const _=await Wn(o,h);if(Rn(_)){const T=await ps(_,h);return tC(T,u)}return An(_)?E_(_,u,h):null}async function mg(o,u=je){const h=await Wn(o,u);if(Rn(h)){const _=await ps(h,u);return iC(_)}return An(h)?cC(h,u):null}async function vg(o,u,h,_=je){const T=await Wn(o,_);if(Rn(T)){const H=await ps(T,_),G=aC(T,H,u,h);if(G)try{return await Mi(G,_),await Xd(o,u,_)}catch{return null}return null}if(An(T)){if(h.controlRead!==h.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${pe(T)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await fC(T,u,h,_),E_(T,u,_)}return null}async function Zd(o,u=je){const h=await Wn(o,u);if(Rn(h)){const _=await ps(h,u);return rC(_)}return An(h)?au(h,u):null}async function wg(o,u,h=je){const _=await Wn(o,h);if(Rn(_)){const T=await ps(_,h),H=uC(_,T,u);if(H)try{return await Mi(H,h),await Zd(o,h)}catch{return null}return null}if(An(_)){if(u.controlRead!==u.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${pe(_)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await dg(_,u,h),au(_,h)}return null}var pC=Object.freeze({__proto__:null,getAccessFor:fg,getAccessForAll:hg,getAgentAccess:Yd,getAgentAccessAll:yg,getGroupAccess:Xd,getGroupAccessAll:mg,getPublicAccess:Zd,setAccessFor:pg,setAgentAccess:gg,setGroupAccess:vg,setPublicAccess:wg});const C_=[w.agent];function gl(o,u,h){if(o.inaccessibleUrls.length>0)return null;const _=o.acrPolicies.filter(Ie=>ef(Ie,u,h,o)),T=o.policies.filter(Ie=>ef(Ie,u,h,o)),H={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},G=_.reduce((Ie,ot)=>{const dt={...Ie},At=Nd(ot);return At.read&&(dt.controlRead=!0),At.write&&(dt.controlWrite=!0),dt},H),oe=T.reduce((Ie,ot)=>{const dt={...Ie},At=Nd(ot);return At.read&&(dt.read=!0),At.append&&(dt.append=!0),At.write&&(dt.write=!0),dt},G),xe=_.reduce((Ie,ot)=>{const dt={...Ie},At=Dd(ot);return At.read===!0&&(dt.controlRead=!1),At.write===!0&&(dt.controlWrite=!1),dt},oe);return T.reduce((Ie,ot)=>{const dt={...Ie},At=Dd(ot);return At.read===!0&&(dt.read=!1),At.append===!0&&(dt.append=!1),At.write===!0&&(dt.write=!1),dt},xe)}function gC(o,u){return gl(o,w.agent,u)}function yC(o){return gl(o,w.agent,w.PublicAgent)}function ef(o,u,h,_){const T=v(o,w.allow),H=v(o,w.deny);if(T.length+H.length===0)return!1;const G=Vd(o).map(Pe=>_.matchers.find(Ie=>Tr(Ie)===Pe)),oe=zd(o).map(Pe=>_.matchers.find(Ie=>Tr(Ie)===Pe)),xe=qd(o).map(Pe=>_.matchers.find(Ie=>Tr(Ie)===Pe));return G.every(Pe=>T_(Pe,u,h))&&(oe.length===0||oe.some(Pe=>T_(Pe,u,h)))&&G.length+oe.length>0&&xe.length===0}function P_(o,u){const h=v(o,w.allow),_=v(o,w.deny);return u.read===!0&&_.includes(Yr.read)||u.read===!1&&h.includes(Yr.read)&&!_.includes(Yr.read)||u.append===!0&&_.includes(Yr.append)||u.append===!1&&h.includes(Yr.append)&&!_.includes(Yr.append)||u.write===!0&&_.includes(Yr.write)||u.write===!1&&h.includes(Yr.write)&&!_.includes(Yr.write)}function T_(o,u,h){return v(o,u).includes(h)}function mC(o,u){const h=new Set;return o.matchers.forEach(_=>{v(_,u).filter(T=>![w.PublicAgent,w.CreatorAgent,w.AuthenticatedAgent].includes(T)||u!==w.agent).forEach(T=>h.add(T))}),h}function vC(o,u){if(o.inaccessibleUrls.length>0)return null;const h={};return mC(o,u).forEach(T=>{const H=gl(o,u,T);h[T]=H}),h}function wC(o){return vC(o,w.agent)}function F_(o,u,h,_,T){var H,G,oe,xe,Pe;if(!Rn(o)||u.inaccessibleUrls.length>0)return null;const Ie=gl(u,h,_);if(Ie===null)return null;const ot=u.acrPolicies.filter(ir=>ef(ir,h,_,u)),dt=u.policies.filter(ir=>ef(ir,h,_,u)),At=ot.filter(ir=>P_(ir,{read:T.controlRead,write:T.controlWrite})),ur=dt.filter(ir=>P_(ir,{read:T.read,append:T.append,write:T.write})),Lr=At.filter(ir=>I_(ir,h,_,u)),Pr=ur.filter(ir=>I_(ir,h,_,u)),Qi={...u,acrPolicies:u.acrPolicies.filter(ir=>!Lr.includes(ir)),policies:u.policies.filter(ir=>!Pr.includes(ir))},dn=gl(Qi,h,_);if(dn===null)return null;let er=o;Lr.forEach(ir=>{const[en,ra]=k_(ir,o,u,h,_);er=ru(er,en),er=ra.reduce(iu,er)}),Pr.forEach(ir=>{const[en,ra]=k_(ir,o,u,h,_);er=tu(er,en),er=ra.reduce(iu,er)});const yi=`matcher_${encodeURIComponent(`${h}_${_}`)}`;let Bn=Gd(o,yi);Bn=cn(Bn,h,_);const Ai=(H=T.controlRead)!==null&&H!==void 0?H:Ie.controlRead,Ko=(G=T.controlWrite)!==null&&G!==void 0?G:Ie.controlWrite;let ta=Lr;if(Ai!==dn.controlRead||Ko!==dn.controlWrite){const ir=i.v4();let en=Co(o,ir);en=Od(en,{read:Ai===!0,append:!1,write:Ko===!0}),en=tt(en,w.allOf,Bn),er=ru(er,en),er=iu(er,Bn),ta=At}const Vo=(oe=T.read)!==null&&oe!==void 0?oe:Ie.read,wl=(xe=T.append)!==null&&xe!==void 0?xe:Ie.append,_l=(Pe=T.write)!==null&&Pe!==void 0?Pe:Ie.write;let Sl=Pr;if(Vo!==dn.read||wl!==dn.append||_l!==dn.write){const ir=i.v4();let en=Co(o,ir);en=Od(en,{read:Vo===!0,append:wl===!0,write:_l===!0}),en=tt(en,w.allOf,Bn),er=tu(er,en),er=iu(er,Bn),Sl=ur}return ta.forEach(ir=>{er=Gs(er,Tr(ir))}),Sl.forEach(ir=>{er=Ua(er,Tr(ir))}),er}function _C(o,u,h,_){return F_(o,u,w.agent,h,_)}function SC(o,u,h){return F_(o,u,w.agent,w.PublicAgent,h)}function I_(o,u,h,_){const H=v(o,w.allOf).map(Ie=>_.matchers.find(ot=>Tr(ot)===Ie)).some(Ie=>_g(Ie,u,h)),oe=v(o,w.anyOf).map(Ie=>_.matchers.find(ot=>Tr(ot)===Ie)).some(Ie=>_g(Ie,u,h)),Pe=v(o,w.noneOf).map(Ie=>_.matchers.find(ot=>Tr(ot)===Ie)).some(Ie=>_g(Ie,u,h));return H||oe||Pe}function _g(o,u,h){const _=[];return C_.forEach(T=>{const H=v(o,T).filter(G=>G!==h||T!==u);_.push(...H)}),_.length>0}function k_(o,u,h,_,T){const H=i.v4(),G=Sg(v(o,w.allOf),u,h,H,_,T),oe=Sg(v(o,w.anyOf),u,h,H,_,T),xe=Sg(v(o,w.noneOf),u,h,H,_,T);let Pe=Co(u,encodeURI(Tr(o))+H);return v(o,w.allow).forEach(Ie=>{Pe=tt(Pe,w.allow,Ie)}),v(o,w.deny).forEach(Ie=>{Pe=tt(Pe,w.deny,Ie)}),G.forEach(Ie=>{Pe=tt(Pe,w.allOf,Ie)}),oe.forEach(Ie=>{Pe=tt(Pe,w.anyOf,Ie)}),xe.forEach(Ie=>{Pe=tt(Pe,w.noneOf,Ie)}),[Pe,G.concat(oe).concat(xe)]}function Sg(o,u,h,_,T,H){return o.map(G=>{const oe=h.matchers.find(Ie=>Tr(Ie)===G);if(typeof oe>"u")return null;let xe=Gd(u,encodeURI(Tr(oe))+_),Pe=!1;return C_.forEach(Ie=>{v(oe,Ie).forEach(ot=>{Ie===T&&ot===H||(Pe=!0,xe=tt(xe,Ie,ot))})}),Pe?xe:null}).filter(tf)}function tf(o){return o!==null}async function yl(o,u=je){const h=xo(o),_=$o(o),T=O_(h).concat(O_(_)),H=await N_(T,u),G=Eg(h,H).filter(tf),oe=Eg(_,H).filter(tf),xe=new Set;G.forEach(Pr=>{U_(Pr).forEach(dn=>{xe.add(dn)})}),oe.forEach(Pr=>{U_(Pr).forEach(dn=>{xe.add(dn)})});const Pe=Array.from(xe),ot=Pe.map(Pr=>bg(Pr)).filter(Pr=>!T.includes(Pr)),dt=await N_(ot,u),At={...H,...dt},ur=Eg(Pe,At).filter(tf);return{inaccessibleUrls:Object.keys(At).filter(Pr=>At[Pr]===null),acrPolicies:G,policies:oe,matchers:ur}}function bg(o){const u=new URL(o);return u.hash="",u.href}function O_(o){const u=[];return o.forEach(h=>{const _=bg(h);u.includes(_)||u.push(_)}),u}async function N_(o,u){const h=Array.from(new Set(o)),_={};return await Promise.all(h.map(async T=>{try{const H=await gn(T,u);_[T]=H}catch{_[T]=null}})),_}function Eg(o,u){return o.map(h=>{const _=bg(h),T=u[_];return T?nr(T,h):null})}function U_(o){return Vd(o).concat(zd(o)).concat(qd(o))}async function D_(o,u,h=je){const _=await Wn(o,h);if(Rn(_)){const T=await yl(_,h);return gC(T,u)}return An(_)?su(_,u,h):null}async function bC(o,u,h,_=je){const T=await Wn(o,_);if(Rn(T)){const H=await yl(T,_),G=_C(T,H,u,h);if(G)try{return await Mi(G,_),await D_(o,u,_)}catch{return null}return null}if(An(T)){if(h.controlRead!==h.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${pe(T)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await cg(T,u,h,_),su(T,u,_)}return null}async function EC(o,u=je){const h=await Wn(o,u);if(Rn(h)){const _=await yl(h,u);return wC(_)}return An(h)?lg(h,u):null}async function L_(o,u=je){const h=await Wn(o,u);if(Rn(h)){const _=await yl(h,u);return yC(_)}return An(h)?au(h,u):null}async function AC(o,u,h=je){const _=await Wn(o,h);if(Rn(_)){const T=await yl(_,h),H=SC(_,T,u);if(H)try{return await Mi(H,h),await L_(o,h)}catch{return null}return null}if(An(_)){if(u.controlRead!==u.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${pe(_)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await dg(_,u,h),au(_,h)}return null}var RC=Object.freeze({__proto__:null,getAccessFor:fg,getAccessForAll:hg,getAgentAccess:D_,getAgentAccessAll:EC,getPublicAccess:L_,setAccessFor:pg,setAgentAccess:bC,setPublicAccess:AC});async function M_(o,u){return typeof o.internal_resourceInfo.aclUrl=="string"?Tt(o.internal_resourceInfo.aclUrl,u):null}function xC(o){return od(o,yr.allow)}function CC(o){return od(o,yr.deny)}function B_(o,u,h){const _=p(u,yr.allOf).map(Pe=>nr(mr(o),Pe)).filter(Pe=>Pe!==null),T=_.every(Pe=>p(Pe,yr.agent).includes(h)),H=p(u,yr.anyOf).map(Pe=>nr(mr(o),Pe)).filter(Pe=>Pe!==null),G=H.some(Pe=>p(Pe,yr.agent).includes(h)),oe=p(u,yr.noneOf).map(Pe=>nr(mr(o),Pe)).filter(Pe=>Pe!==null),xe=oe.some(Pe=>p(Pe,yr.agent).includes(h));return _.length+H.length>0&&(_.length===0||T)&&(H.length===0||G)&&(oe.length===0||!xe)}function j_(o,u,h){const _=xC(o),T=CC(o);return h==="control"?{read:u.read,append:u.append,write:u.write,controlRead:(u.controlRead||_.read)&&!T.read,controlWrite:(u.controlWrite||_.write)&&!T.write}:{read:(u.read||_.read)&&!T.read,append:(u.append||_.append)&&!T.append,write:(u.write||_.write)&&!T.write,controlRead:u.controlRead,controlWrite:u.controlWrite}}async function rf(o,u){let h={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1};return zp(o).map(H=>nr(mr(o),H)).filter(H=>H!==null).forEach(H=>{B_(o,H,u)&&(h=j_(H,h,"resource"))}),Vp(o).map(H=>nr(mr(o),H)).filter(H=>H!==null).forEach(H=>{B_(o,H,u)&&(h=j_(H,h,"control"))}),h}function PC(o){const u=o.internal_resourceInfo.linkedResources[yr.accessControl];return Array.isArray(u)&&u.length===1?u[0]:null}async function TC(o,u){const h=PC(o);if(h!==null)return h;const _=await M_(o,u);if(_===null)return null;const T=rt(_).type;return Array.isArray(T)&&T.includes(yr.AccessControlResource)?ge(_):null}async function ml(o,u){const h=await TC(o,u);if(h===null)return null;let _;try{_=await gn(h,u)}catch{return null}return{...o,internal_acp:{acr:{..._,accessTo:ge(o)}}}}async function H_(o,u,h){const _=await Tt(o,h),T=await ml(_,h);return T===null?su(_,u,h):rf(T,u)}function FC(o){return Array.from(new Set(Gr(mr(o)).map(u=>p(u,yr.agent)).reduce((u,h)=>u.concat(h),[])))}async function IC(o){return(await Promise.all(FC(o).map(async u=>({[u]:await rf(o,u)})))).reduce((u,h)=>({...u,...h}),{})}async function kC(o,u){const h=await Tt(o,u),_=await ml(h,u);return _===null?lg(h,u):IC(_)}async function OC(o){return rf(o,yr.PublicAgent)}async function $_(o,u){const h=await Tt(o,u),_=await ml(h,u);return _===null?au(h,u):OC(_)}function Ag(o,u,h){return kp(o,u).concat("AgentMatcher").concat(h.charAt(0).toUpperCase()+h.slice(1)).concat("Policy")}function NC(o,u,h){const _=Ag(o,u,h);return _.includes("Acr")?Wp(o,_):Kp(o,_)}function W_(o,u,h){return Ag(o,u,h).concat("Matcher")}const K_=yr.anyOf;function UC(o,u,h){const _=Ag(o,u,h),T=W_(o,u,h);let H=nr(mr(o),_);return H||(o=NC(o,u,h),H=br({url:_}),H=hw(H,{[h]:!0},yr.allow)),v(H,K_).includes(T)?o:(H=lo(H).addUrl(K_,T).build(),Ji(o,H))}function vl(o,u,h,_,T){var H;const G=W_(o,h,_),oe=UC(o,h,_),xe=(H=nr(mr(oe),G))!==null&&H!==void 0?H:br({url:G});return Ji(oe,T==="add"?Gp(xe,u):Jp(xe,u))}async function V_(o,u,h){const _=await rf(o,u);return typeof h.read=="boolean"&&_.read!==h.read&&(o=vl(o,u,La,"read",h.read?"add":"remove")),typeof h.append=="boolean"&&_.append!==h.append&&(o=vl(o,u,La,"append",h.append?"add":"remove")),typeof h.write=="boolean"&&_.write!==h.write&&(o=vl(o,u,La,"write",h.write?"add":"remove")),typeof h.controlRead=="boolean"&&_.controlRead!==h.controlRead&&(o=vl(o,u,cl,"controlRead",h.controlRead?"add":"remove")),typeof h.controlWrite=="boolean"&&_.controlWrite!==h.controlWrite&&(o=vl(o,u,cl,"controlWrite",h.controlWrite?"add":"remove")),o}async function DC(o,u,h,_){const T=await Tt(o,_),H=await ml(T,_);if(H===null)return await cg(T,u,h,_),su(T,u,_);try{return await Mi(await V_(H,u,h),_),await H_(o,u,_)}catch{return null}}async function LC(o,u){return V_(o,yr.PublicAgent,u)}async function MC(o,u,h){const _=await Tt(o,h),T=await ml(_,h);if(T===null)return await dg(_,u,h),au(_,h);try{return await Mi(await LC(T,u),h),await $_(o,h)}catch{return null}}var BC=Object.freeze({__proto__:null,getAclServerResourceInfo:M_,getAgentAccess:H_,getAgentAccessAll:kC,getPublicAccess:$_,setAgentAccess:DC,setPublicAccess:MC}),jC=Object.freeze({__proto__:null,acrAsMarkdown:Tp,addAcrPolicyUrl:ol,addAgent:Ed,addAllOfRuleUrl:ad,addAnyOfRuleUrl:cd,addClient:Sw,addGroup:xd,addMemberAcrPolicyUrl:td,addMemberPolicyUrl:Cp,addMockAcrTo:nu,addNoneOfRuleUrl:hd,addPolicyUrl:nd,createPolicy:Ja,createResourcePolicyFor:Co,createResourceRuleFor:md,createRule:yd,getAcrPolicyUrlAll:xo,getAgentAll:dl,getAllOfRuleUrlAll:Qs,getAllowModes:Xs,getAnyOfRuleUrlAll:Ys,getClientAll:Hp,getDenyModes:Zs,getFileWithAccessDatasets:Ha,getFileWithAcr:Ba,getGroupAll:fl,getLinkedAcrUrl:Up,getMemberAcrPolicyUrlAll:ka,getMemberPolicyUrlAll:sl,getNoneOfRuleUrlAll:Wo,getPolicy:Qa,getPolicyAll:Ya,getPolicyUrlAll:$o,getReferencedPolicyUrlAll:Wa,getResourceAcrPolicy:pl,getResourceAcrPolicyAll:Md,getResourceInfoWithAccessDatasets:$a,getResourceInfoWithAcr:Wn,getResourcePolicy:hl,getResourcePolicyAll:Ld,getResourceRule:Lp,getResourceRuleAll:vw,getRule:vd,getRuleAll:wd,getSolidDatasetWithAccessDatasets:ja,getSolidDatasetWithAcr:Ma,hasAccessibleAcr:Rn,hasAnyClient:Id,hasAuthenticated:za,hasCreator:qa,hasLinkedAcr:qs,hasPublic:Va,isAcpControlled:sd,mockAcrFor:ea,policyAsMarkdown:Hd,removeAcrPolicyUrl:Gs,removeAcrPolicyUrlAll:Oa,removeAgent:Ad,removeAllOfRuleUrl:ud,removeAnyClient:Ew,removeAnyOfRuleUrl:dd,removeAuthenticated:Bp,removeClient:bw,removeCreator:jp,removeGroup:Cd,removeMemberAcrPolicyUrl:rd,removeMemberAcrPolicyUrlAll:Na,removeMemberPolicyUrl:Pp,removeMemberPolicyUrlAll:ul,removeNoneOfRuleUrl:pd,removePolicy:Xa,removePolicyUrl:Ua,removePolicyUrlAll:al,removePublic:Mp,removeResourceAcrPolicy:jd,removeResourcePolicy:Bd,removeResourceRule:ww,removeRule:_d,ruleAsMarkdown:kd,saveAcrFor:Mi,setAgent:bd,setAllOfRuleUrl:ld,setAllowModes:eu,setAnyClient:$p,setAnyOfRuleUrl:fd,setAuthenticated:Td,setClient:_w,setCreator:Fd,setDenyModes:Ud,setGroup:Rd,setNoneOfRuleUrl:gd,setPolicy:Za,setPublic:Pd,setResourceAcrPolicy:ru,setResourcePolicy:tu,setResourceRule:Ka,setRule:Sd}),HC=Object.freeze({__proto__:null,addAcrPolicyUrl:Wp,addAgent:Gp,addAllOfMatcherUrl:jw,addAnyOfMatcherUrl:Ww,addClient:u_,addMemberAcrPolicyUrl:Tw,addMemberPolicyUrl:Fw,addMockAcrTo:nu,addNoneOfMatcherUrl:zw,addPolicyUrl:Kp,createMatcher:Jw,createPolicy:Ja,createResourceMatcherFor:Gd,createResourcePolicyFor:Co,getAcrPolicyUrlAll:Vp,getAgentAll:r_,getAllOfMatcherUrlAll:Vd,getAllowModes:Nd,getAnyOfMatcherUrlAll:zd,getClientAll:a_,getDenyModes:Dd,getFileWithAccessDatasets:Ha,getFileWithAcr:Ba,getLinkedAcrUrl:Up,getMatcher:Qw,getMatcherAll:Yw,getMemberAcrPolicyUrlAll:Ow,getMemberPolicyUrlAll:Nw,getNoneOfMatcherUrlAll:qd,getPolicy:Qa,getPolicyAll:Ya,getPolicyUrlAll:zp,getReferencedPolicyUrlAll:Wa,getResourceAcrPolicy:pl,getResourceAcrPolicyAll:Md,getResourceInfoWithAccessDatasets:$a,getResourceInfoWithAcr:Wn,getResourceMatcher:qp,getResourceMatcherAll:Xw,getResourcePolicy:hl,getResourcePolicyAll:Ld,getSolidDatasetWithAccessDatasets:ja,getSolidDatasetWithAcr:Ma,getVcAccess:mw,hasAccessibleAcr:Rn,hasAuthenticated:Xp,hasCreator:eg,hasLinkedAcr:qs,hasPublic:Qp,isAcpControlled:sd,mockAcrFor:ea,removeAcrPolicyUrl:Uw,removeAcrPolicyUrlAll:Oa,removeAgent:Jp,removeAllOfMatcherUrl:Hw,removeAnyOfMatcherUrl:Kw,removeAuthenticated:o_,removeClient:l_,removeCreator:s_,removeMatcher:Zw,removeMemberAcrPolicyUrl:Dw,removeMemberAcrPolicyUrlAll:Na,removeMemberPolicyUrl:Lw,removeMemberPolicyUrlAll:ul,removeNoneOfMatcherUrl:qw,removePolicy:Xa,removePolicyUrl:Mw,removePolicyUrlAll:al,removePublic:i_,removeResourceAcrPolicy:jd,removeResourceMatcher:e_,removeResourcePolicy:Bd,saveAcrFor:Mi,setAgent:n_,setAllOfMatcherUrl:$w,setAllowModes:Od,setAnyOfMatcherUrl:Vw,setAuthenticated:Zp,setCreator:tg,setDenyModes:Aw,setMatcher:t_,setNoneOfMatcherUrl:Gw,setPolicy:Za,setPublic:Yp,setResourceMatcher:iu,setResourcePolicy:Bw,setVcAccess:yw});const{getJsonLdParser:$C,getTurtleParser:WC,solidDatasetAsTurtle:KC}=gr;return Oe.FetchError=it,Oe.SolidClientError=N,Oe.ThingExpectedError=ao,Oe.access=hC,Oe.access_v1=pC,Oe.access_v2=RC,Oe.acp_ess_1=jC,Oe.acp_ess_2=HC,Oe.acp_v1=Gx,Oe.acp_v2=qx,Oe.acp_v3=Qx,Oe.acp_v4=Zx,Oe.addBoolean=Hr,Oe.addDate=Dr,Oe.addDatetime=lr,Oe.addDecimal=Qr,Oe.addInteger=Qt,Oe.addIri=tt,Oe.addJwkToJwks=tw,Oe.addLiteral=un,Oe.addMockFallbackAclTo=Ix,Oe.addMockResourceAclTo=Fx,Oe.addNamedNode=rr,Oe.addPublicKeyToProfileJwks=Nx,Oe.addStringEnglish=Nr,Oe.addStringNoLocale=Mn,Oe.addStringWithLocale=an,Oe.addTerm=wn,Oe.addTime=kr,Oe.addUrl=tr,Oe.asIri=Tr,Oe.asUrl=sn,Oe.buildThing=lo,Oe.changeLogAsMarkdown=gt,Oe.createAcl=ed,Oe.createAclFromFallbackAcl=Fv,Oe.createContainerAt=be,Oe.createContainerInContainer=Ve,Oe.createSolidDataset=Ei,Oe.createThing=br,Oe.deleteAclFor=Ex,Oe.deleteContainer=Ze,Oe.deleteFile=It,Oe.deleteSolidDataset=ie,Oe.fromRdfJsDataset=bt,Oe.getAgentAccess=Ep,Oe.getAgentAccessAll=kv,Oe.getAgentDefaultAccess=Dv,Oe.getAgentDefaultAccessAll=Lv,Oe.getAgentResourceAccess=Ov,Oe.getAgentResourceAccessAll=Nv,Oe.getAltProfileUrlAllFrom=rw,Oe.getBoolean=O,Oe.getBooleanAll=$,Oe.getContainedResourceUrlAll=pt,Oe.getContentType=Ue,Oe.getDate=se,Oe.getDateAll=le,Oe.getDatetime=X,Oe.getDatetimeAll=ue,Oe.getDecimal=Se,Oe.getDecimalAll=Ce,Oe.getEffectiveAccess=et,Oe.getFallbackAcl=bp,Oe.getFile=Ut,Oe.getFileWithAcl=Sx,Oe.getGroupAccess=Ap,Oe.getGroupAccessAll=Hv,Oe.getGroupDefaultAccess=Kv,Oe.getGroupDefaultAccessAll=Vv,Oe.getGroupResourceAccess=$v,Oe.getGroupResourceAccessAll=Wv,Oe.getInteger=Ne,Oe.getIntegerAll=Ke,Oe.getIri=c,Oe.getIriAll=v,Oe.getJsonLdParser=$C,Oe.getLinkedResourceUrlAll=rt,Oe.getLiteral=Ar,Oe.getLiteralAll=kt,Oe.getNamedNode=Dt,Oe.getNamedNodeAll=ut,Oe.getPodOwner=Me,Oe.getPodUrlAll=Ux,Oe.getPodUrlAllFrom=iw,Oe.getProfileAll=nw,Oe.getProfileJwksIri=ew,Oe.getPropertyAll=bn,Oe.getPublicAccess=Rp,Oe.getPublicDefaultAccess=Qv,Oe.getPublicResourceAccess=Jv,Oe.getResourceAcl=il,Oe.getResourceInfo=Tt,Oe.getResourceInfoWithAcl=bx,Oe.getSolidDataset=gn,Oe.getSolidDatasetWithAcl=_x,Oe.getSourceIri=pe,Oe.getSourceUrl=ge,Oe.getStringByLocaleAll=_e,Oe.getStringEnglish=ze,Oe.getStringEnglishAll=he,Oe.getStringNoLocale=Be,Oe.getStringNoLocaleAll=Ge,Oe.getStringWithLocale=Z,Oe.getStringWithLocaleAll=me,Oe.getTerm=Zt,Oe.getTermAll=Zr,Oe.getThing=nr,Oe.getThingAll=Gr,Oe.getTime=fe,Oe.getTimeAll=ye,Oe.getTurtleParser=WC,Oe.getUrl=f,Oe.getUrlAll=p,Oe.getWebIdDataset=Dx,Oe.getWellKnownSolid=Jt,Oe.hasAccessibleAcl=An,Oe.hasAcl=wx,Oe.hasFallbackAcl=hs,Oe.hasResourceAcl=fs,Oe.hasResourceInfo=D,Oe.hasServerResourceInfo=A,Oe.isContainer=wt,Oe.isPodOwner=at,Oe.isRawData=we,Oe.isThing=on,Oe.isThingLocal=ei,Oe.mockContainerFrom=Mt,Oe.mockFetchError=Ir,Oe.mockFileFrom=hr,Oe.mockSolidDatasetFrom=fr,Oe.mockThingFrom=ux,Oe.overwriteFile=Or,Oe.removeAll=Sr,Oe.removeBoolean=Xu,Oe.removeDate=Gc,Oe.removeDatetime=xa,Oe.removeDecimal=Jc,Oe.removeInteger=Zu,Oe.removeIri=Cr,Oe.removeLiteral=Qc,Oe.removeNamedNode=el,Oe.removeStringEnglish=Ca,Oe.removeStringNoLocale=Pa,Oe.removeStringWithLocale=Ao,Oe.removeThing=jr,Oe.removeTime=$s,Oe.removeUrl=Di,Oe.responseToResourceInfo=Yt,Oe.responseToSolidDataset=Bo,Oe.saveAclFor=Iv,Oe.saveFileInContainer=Wr,Oe.saveSolidDatasetAt=Q,Oe.saveSolidDatasetInContainer=Qe,Oe.setAgentDefaultAccess=Ax,Oe.setAgentResourceAccess=Uv,Oe.setBoolean=Yc,Oe.setDate=En,Oe.setDatetime=Ws,Oe.setDecimal=Xc,Oe.setGroupDefaultAccess=xx,Oe.setGroupResourceAccess=Gv,Oe.setInteger=Zc,Oe.setIri=cn,Oe.setLiteral=_v,Oe.setNamedNode=rl,Oe.setProfileJwks=kx,Oe.setPublicDefaultAccess=Cx,Oe.setPublicResourceAccess=Yv,Oe.setStringNoLocale=Ta,Oe.setStringWithLocale=ds,Oe.setTerm=Sv,Oe.setThing=xr,Oe.setTime=tl,Oe.setUrl=Fn,Oe.solidDatasetAsMarkdown=lt,Oe.solidDatasetAsTurtle=KC,Oe.thingAsMarkdown=so,Oe.toRdfJsDataset=Kt,Oe.universalAccess=BC,Oe}var x0={},na={},tn={};const Er=crypto,ki=e=>e instanceof CryptoKey,zN=async(e,t)=>{const r=`SHA-${e.slice(-3)}`;return new Uint8Array(await Er.subtle.digest(r,t))},w2=zN,Nn=new TextEncoder,io=new TextDecoder,Ch=2**32;function Mo(...e){const t=e.reduce((i,{length:s})=>i+s,0),r=new Uint8Array(t);let n=0;return e.forEach(i=>{r.set(i,n),n+=i.length}),r}function qN(e,t){return Mo(Nn.encode(e),new Uint8Array([0]),t)}function By(e,t,r){if(t<0||t>=Ch)throw new RangeError(`value must be >= 0 and <= ${Ch-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,t&255],r)}function _2(e){const t=Math.floor(e/Ch),r=e%Ch,n=new Uint8Array(8);return By(n,t,0),By(n,r,4),n}function sv(e){const t=new Uint8Array(4);return By(t,e),t}function C0(e){return Mo(sv(e.length),e)}async function GN(e,t,r){const n=Math.ceil((t>>3)/32),i=new Uint8Array(n*32);for(let s=0;s<n;s++){const a=new Uint8Array(4+e.length+r.length);a.set(sv(s+1)),a.set(e,4),a.set(r,4+e.length),i.set(await w2("sha256",a),s*32)}return i.slice(0,t>>3)}const av=e=>{let t=e;typeof t=="string"&&(t=Nn.encode(t));const r=32768,n=[];for(let i=0;i<t.length;i+=r)n.push(String.fromCharCode.apply(null,t.subarray(i,i+r)));return btoa(n.join(""))},jn=e=>av(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),S2=e=>{const t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r},zn=e=>{let t=e;t instanceof Uint8Array&&(t=io.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return S2(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class si extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(t){var r;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,this.constructor)}}class ji extends si{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(t,r="unspecified",n="unspecified"){super(t),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=n}}class jy extends si{static get code(){return"ERR_JWT_EXPIRED"}constructor(t,r="unspecified",n="unspecified"){super(t),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=n}}class Ph extends si{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class qr extends si{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class Nc extends si{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class or extends si{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class hn extends si{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class Ri extends si{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class b2 extends si{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class gp extends si{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class uv extends si{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class E2 extends si{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class A2 extends si{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class lv extends si{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}const JN=Object.freeze(Object.defineProperty({__proto__:null,JOSEAlgNotAllowed:Ph,JOSEError:si,JOSENotSupported:qr,JWEDecryptionFailed:Nc,JWEInvalid:or,JWKInvalid:b2,JWKSInvalid:gp,JWKSMultipleMatchingKeys:E2,JWKSNoMatchingKey:uv,JWKSTimeout:A2,JWSInvalid:hn,JWSSignatureVerificationFailed:lv,JWTClaimValidationFailed:ji,JWTExpired:jy,JWTInvalid:Ri},Symbol.toStringTag,{value:"Module"})),yp=Er.getRandomValues.bind(Er);function R2(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new qr(`Unsupported JWE Algorithm: ${e}`)}}const x2=e=>yp(new Uint8Array(R2(e)>>3)),QN=(e,t)=>{if(t.length<<3!==R2(e))throw new or("Invalid Initialization Vector length")},C2=QN,YN=(e,t)=>{const r=e.byteLength<<3;if(r!==t)throw new or(`Invalid Content Encryption Key length. Expected ${t} bits, got ${r} bits`)},Th=YN,XN=(e,t)=>{if(!(e instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(e.length!==t.length)throw new TypeError("Input buffers must have the same length");const r=e.length;let n=0,i=-1;for(;++i<r;)n|=e[i]^t[i];return n===0},ZN=XN;function Qu(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}function Jn(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function Jo(e,t){return e.name===t}function Yf(e){return parseInt(e.name.slice(4),10)}function eU(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function P2(e,t){if(t.length&&!t.some(r=>e.usages.includes(r))){let r="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const n=t.pop();r+=`one of ${t.join(", ")}, or ${n}.`}else t.length===2?r+=`one of ${t[0]} or ${t[1]}.`:r+=`${t[0]}.`;throw new TypeError(r)}}function tU(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!Jo(e.algorithm,"HMAC"))throw Jn("HMAC");const n=parseInt(t.slice(2),10);if(Yf(e.algorithm.hash)!==n)throw Jn(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!Jo(e.algorithm,"RSASSA-PKCS1-v1_5"))throw Jn("RSASSA-PKCS1-v1_5");const n=parseInt(t.slice(2),10);if(Yf(e.algorithm.hash)!==n)throw Jn(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!Jo(e.algorithm,"RSA-PSS"))throw Jn("RSA-PSS");const n=parseInt(t.slice(2),10);if(Yf(e.algorithm.hash)!==n)throw Jn(`SHA-${n}`,"algorithm.hash");break}case"EdDSA":{if(e.algorithm.name!=="Ed25519"&&e.algorithm.name!=="Ed448"){if(Qu()){if(Jo(e.algorithm,"NODE-ED25519"))break;throw Jn("Ed25519, Ed448, or NODE-ED25519")}throw Jn("Ed25519 or Ed448")}break}case"ES256":case"ES384":case"ES512":{if(!Jo(e.algorithm,"ECDSA"))throw Jn("ECDSA");const n=eU(t);if(e.algorithm.namedCurve!==n)throw Jn(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}P2(e,r)}function Ls(e,t,...r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!Jo(e.algorithm,"AES-GCM"))throw Jn("AES-GCM");const n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw Jn(n,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!Jo(e.algorithm,"AES-KW"))throw Jn("AES-KW");const n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw Jn(n,"algorithm.length");break}case"ECDH":{switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw Jn("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!Jo(e.algorithm,"PBKDF2"))throw Jn("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!Jo(e.algorithm,"RSA-OAEP"))throw Jn("RSA-OAEP");const n=parseInt(t.slice(9),10)||1;if(Yf(e.algorithm.hash)!==n)throw Jn(`SHA-${n}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}P2(e,r)}function T2(e,t,...r){if(r.length>2){const n=r.pop();e+=`one of type ${r.join(", ")}, or ${n}.`}else r.length===2?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&t.constructor&&t.constructor.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const gi=(e,...t)=>T2("Key must be ",e,...t);function F2(e,t,...r){return T2(`Key for the ${e} algorithm must be `,t,...r)}const I2=e=>ki(e),kn=["CryptoKey"];async function rU(e,t,r,n,i,s){if(!(t instanceof Uint8Array))throw new TypeError(gi(t,"Uint8Array"));const a=parseInt(e.slice(1,4),10),l=await Er.subtle.importKey("raw",t.subarray(a>>3),"AES-CBC",!1,["decrypt"]),y=await Er.subtle.importKey("raw",t.subarray(0,a>>3),{hash:`SHA-${a<<1}`,name:"HMAC"},!1,["sign"]),d=Mo(s,n,r,_2(s.length<<3)),m=new Uint8Array((await Er.subtle.sign("HMAC",y,d)).slice(0,a>>3));let g;try{g=ZN(i,m)}catch{}if(!g)throw new Nc;let E;try{E=new Uint8Array(await Er.subtle.decrypt({iv:n,name:"AES-CBC"},l,r))}catch{}if(!E)throw new Nc;return E}async function nU(e,t,r,n,i,s){let a;t instanceof Uint8Array?a=await Er.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(Ls(t,e,"decrypt"),a=t);try{return new Uint8Array(await Er.subtle.decrypt({additionalData:s,iv:n,name:"AES-GCM",tagLength:128},a,Mo(r,i)))}catch{throw new Nc}}const iU=async(e,t,r,n,i,s)=>{if(!ki(t)&&!(t instanceof Uint8Array))throw new TypeError(gi(t,...kn,"Uint8Array"));switch(C2(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&Th(t,parseInt(e.slice(-3),10)),rU(e,t,r,n,i,s);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&Th(t,parseInt(e.slice(1,4),10)),nU(e,t,r,n,i,s);default:throw new qr("Unsupported JWE Content Encryption Algorithm")}},k2=iU,oU=async()=>{throw new qr('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},sU=async()=>{throw new qr('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')},aU=(...e)=>{const t=e.filter(Boolean);if(t.length===0||t.length===1)return!0;let r;for(const n of t){const i=Object.keys(n);if(!r||r.size===0){r=new Set(i);continue}for(const s of i){if(r.has(s))return!1;r.add(s)}}return!0},Kc=aU;function uU(e){return typeof e=="object"&&e!==null}function Zn(e){if(!uU(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}const lU=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]],mp=lU;function O2(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${t}`)}function N2(e,t,r){if(ki(e))return Ls(e,t,r),e;if(e instanceof Uint8Array)return Er.subtle.importKey("raw",e,"AES-KW",!0,[r]);throw new TypeError(gi(e,...kn,"Uint8Array"))}const Hy=async(e,t,r)=>{const n=await N2(t,e,"wrapKey");O2(n,e);const i=await Er.subtle.importKey("raw",r,...mp);return new Uint8Array(await Er.subtle.wrapKey("raw",i,n,"AES-KW"))},$y=async(e,t,r)=>{const n=await N2(t,e,"unwrapKey");O2(n,e);const i=await Er.subtle.unwrapKey("raw",r,n,"AES-KW",...mp);return new Uint8Array(await Er.subtle.exportKey("raw",i))};async function U2(e,t,r,n,i=new Uint8Array(0),s=new Uint8Array(0)){if(!ki(e))throw new TypeError(gi(e,...kn));if(Ls(e,"ECDH"),!ki(t))throw new TypeError(gi(t,...kn));Ls(t,"ECDH","deriveBits");const a=Mo(C0(Nn.encode(r)),C0(i),C0(s),sv(n));let l;e.algorithm.name==="X25519"?l=256:e.algorithm.name==="X448"?l=448:l=Math.ceil(parseInt(e.algorithm.namedCurve.substr(-3),10)/8)<<3;const y=new Uint8Array(await Er.subtle.deriveBits({name:e.algorithm.name,public:e},t,l));return GN(y,n,a)}async function cU(e){if(!ki(e))throw new TypeError(gi(e,...kn));return Er.subtle.generateKey(e.algorithm,!0,["deriveBits"])}function D2(e){if(!ki(e))throw new TypeError(gi(e,...kn));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)||e.algorithm.name==="X25519"||e.algorithm.name==="X448"}function dU(e){if(!(e instanceof Uint8Array)||e.length<8)throw new or("PBES2 Salt Input must be 8 or more octets")}function fU(e,t){if(e instanceof Uint8Array)return Er.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]);if(ki(e))return Ls(e,t,"deriveBits","deriveKey"),e;throw new TypeError(gi(e,...kn,"Uint8Array"))}async function L2(e,t,r,n){dU(e);const i=qN(t,e),s=parseInt(t.slice(13,16),10),a={hash:`SHA-${t.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:i},l={length:s,name:"AES-KW"},y=await fU(n,t);if(y.usages.includes("deriveBits"))return new Uint8Array(await Er.subtle.deriveBits(a,y,s));if(y.usages.includes("deriveKey"))return Er.subtle.deriveKey(a,y,l,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const hU=async(e,t,r,n=2048,i=yp(new Uint8Array(16)))=>{const s=await L2(i,e,n,t);return{encryptedKey:await Hy(e.slice(-6),s,r),p2c:n,p2s:jn(i)}},pU=async(e,t,r,n,i)=>{const s=await L2(i,e,n,t);return $y(e.slice(-6),s,r)};function Fh(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new qr(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}const vp=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:r}=t.algorithm;if(typeof r!="number"||r<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}},gU=async(e,t,r)=>{if(!ki(t))throw new TypeError(gi(t,...kn));if(Ls(t,e,"encrypt","wrapKey"),vp(e,t),t.usages.includes("encrypt"))return new Uint8Array(await Er.subtle.encrypt(Fh(e),t,r));if(t.usages.includes("wrapKey")){const n=await Er.subtle.importKey("raw",r,...mp);return new Uint8Array(await Er.subtle.wrapKey("raw",n,t,Fh(e)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},yU=async(e,t,r)=>{if(!ki(t))throw new TypeError(gi(t,...kn));if(Ls(t,e,"decrypt","unwrapKey"),vp(e,t),t.usages.includes("decrypt"))return new Uint8Array(await Er.subtle.decrypt(Fh(e),t,r));if(t.usages.includes("unwrapKey")){const n=await Er.subtle.unwrapKey("raw",r,t,Fh(e),...mp);return new Uint8Array(await Er.subtle.exportKey("raw",n))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function cv(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new qr(`Unsupported JWE Algorithm: ${e}`)}}const ua=e=>yp(new Uint8Array(cv(e)>>3)),M2=(e,t)=>{const r=(e.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${t}-----
${r}
-----END ${t}-----`},B2=async(e,t,r)=>{if(!ki(r))throw new TypeError(gi(r,...kn));if(!r.extractable)throw new TypeError("CryptoKey is not extractable");if(r.type!==e)throw new TypeError(`key is not a ${e} key`);return M2(av(new Uint8Array(await Er.subtle.exportKey(t,r))),`${e.toUpperCase()} KEY`)},mU=e=>B2("public","spki",e),vU=e=>B2("private","pkcs8",e),vs=(e,t,r=0)=>{r===0&&(t.unshift(t.length),t.unshift(6));let n=e.indexOf(t[0],r);if(n===-1)return!1;const i=e.subarray(n,n+t.length);return i.length!==t.length?!1:i.every((s,a)=>s===t[a])||vs(e,t,n+1)},Cb=e=>{switch(!0){case vs(e,[42,134,72,206,61,3,1,7]):return"P-256";case vs(e,[43,129,4,0,34]):return"P-384";case vs(e,[43,129,4,0,35]):return"P-521";case vs(e,[43,101,110]):return"X25519";case vs(e,[43,101,111]):return"X448";case vs(e,[43,101,112]):return"Ed25519";case vs(e,[43,101,113]):return"Ed448";default:throw new qr("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},j2=async(e,t,r,n,i)=>{var s,a;let l,y;const d=new Uint8Array(atob(r.replace(e,"")).split("").map(g=>g.charCodeAt(0))),m=t==="spki";switch(n){case"PS256":case"PS384":case"PS512":l={name:"RSA-PSS",hash:`SHA-${n.slice(-3)}`},y=m?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":l={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${n.slice(-3)}`},y=m?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":l={name:"RSA-OAEP",hash:`SHA-${parseInt(n.slice(-3),10)||1}`},y=m?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":l={name:"ECDSA",namedCurve:"P-256"},y=m?["verify"]:["sign"];break;case"ES384":l={name:"ECDSA",namedCurve:"P-384"},y=m?["verify"]:["sign"];break;case"ES512":l={name:"ECDSA",namedCurve:"P-521"},y=m?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const g=Cb(d);l=g.startsWith("P-")?{name:"ECDH",namedCurve:g}:{name:g},y=m?[]:["deriveBits"];break}case"EdDSA":l={name:Cb(d)},y=m?["verify"]:["sign"];break;default:throw new qr('Invalid or unsupported "alg" (Algorithm) value')}try{return await Er.subtle.importKey(t,d,l,(s=i==null?void 0:i.extractable)!==null&&s!==void 0?s:!1,y)}catch(g){if(l.name==="Ed25519"&&(g==null?void 0:g.name)==="NotSupportedError"&&Qu())return l={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},await Er.subtle.importKey(t,d,l,(a=i==null?void 0:i.extractable)!==null&&a!==void 0?a:!1,y);throw g}},wU=(e,t,r)=>j2(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",e,t,r),H2=(e,t,r)=>j2(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",e,t,r);function _U(e){let t,r;switch(e.kty){case"oct":{switch(e.alg){case"HS256":case"HS384":case"HS512":t={name:"HMAC",hash:`SHA-${e.alg.slice(-3)}`},r=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new qr(`${e.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":t={name:"AES-GCM"},r=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":t={name:"AES-KW"},r=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":t={name:"PBKDF2"},r=["deriveBits"];break;default:throw new qr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new qr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new qr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(e.alg){case"EdDSA":t={name:e.crv},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new qr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new qr('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}const SU=async e=>{var t,r;const{algorithm:n,keyUsages:i}=_U(e),s=[n,(t=e.ext)!==null&&t!==void 0?t:!1,(r=e.key_ops)!==null&&r!==void 0?r:i];if(n.name==="PBKDF2")return Er.subtle.importKey("raw",zn(e.k),...s);const a={...e};delete a.alg,delete a.use;try{return await Er.subtle.importKey("jwk",a,...s)}catch(l){if(n.name==="Ed25519"&&(l==null?void 0:l.name)==="NotSupportedError"&&Qu())return s[0]={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},await Er.subtle.importKey("jwk",a,...s);throw l}},Pb=SU;function Tb(e){let t=[],r=0;for(;r<e.length;){let n=$2(e.subarray(r));t.push(n),r+=n.byteLength}return t}function $2(e){let t=0,r=e[0]&31;if(t++,r===31){for(r=0;e[t]>=128;)r=r*128+e[t]-128,t++;r=r*128+e[t]-128,t++}let n=0;if(e[t]<128)n=e[t],t++;else if(n===128){for(n=0;e[t+n]!==0||e[t+n+1]!==0;){if(n>e.byteLength)throw new TypeError("invalid indefinite form length");n++}const s=t+n+2;return{byteLength:s,contents:e.subarray(t,t+n),raw:e.subarray(0,s)}}else{let s=e[t]&127;t++,n=0;for(let a=0;a<s;a++)n=n*256+e[t],t++}const i=t+n;return{byteLength:i,contents:e.subarray(t,i),raw:e.subarray(0,i)}}function bU(e){const t=Tb(Tb($2(e).contents)[0].contents);return av(t[t[0].raw[0]===160?6:5].raw)}function EU(e){const t=e.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),r=S2(t);return M2(bU(r),"PUBLIC KEY")}async function AU(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return H2(e,t,r)}async function RU(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');let n;try{n=EU(e)}catch(i){throw new TypeError("failed to parse the X.509 certificate",{cause:i})}return H2(n,t,r)}async function xU(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return wU(e,t,r)}async function wp(e,t,r){var n;if(!Zn(e))throw new TypeError("JWK must be an object");if(t||(t=e.alg),typeof t!="string"||!t)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');switch(e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return r??(r=e.ext!==!0),r?Pb({...e,alg:t,ext:(n=e.ext)!==null&&n!==void 0?n:!1}):zn(e.k);case"RSA":if(e.oth!==void 0)throw new qr('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Pb({...e,alg:t});default:throw new qr('Unsupported "kty" (Key Type) Parameter value')}}const CU=(e,t)=>{if(!(t instanceof Uint8Array)){if(!I2(t))throw new TypeError(F2(e,t,...kn,"Uint8Array"));if(t.type!=="secret")throw new TypeError(`${kn.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},PU=(e,t,r)=>{if(!I2(t))throw new TypeError(F2(e,t,...kn));if(t.type==="secret")throw new TypeError(`${kn.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(r==="sign"&&t.type==="public")throw new TypeError(`${kn.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(r==="decrypt"&&t.type==="public")throw new TypeError(`${kn.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&r==="verify"&&t.type==="private")throw new TypeError(`${kn.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&r==="encrypt"&&t.type==="private")throw new TypeError(`${kn.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},TU=(e,t,r)=>{e.startsWith("HS")||e==="dir"||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?CU(e,t):PU(e,t,r)},_p=TU;async function FU(e,t,r,n,i){if(!(r instanceof Uint8Array))throw new TypeError(gi(r,"Uint8Array"));const s=parseInt(e.slice(1,4),10),a=await Er.subtle.importKey("raw",r.subarray(s>>3),"AES-CBC",!1,["encrypt"]),l=await Er.subtle.importKey("raw",r.subarray(0,s>>3),{hash:`SHA-${s<<1}`,name:"HMAC"},!1,["sign"]),y=new Uint8Array(await Er.subtle.encrypt({iv:n,name:"AES-CBC"},a,t)),d=Mo(i,n,y,_2(i.length<<3)),m=new Uint8Array((await Er.subtle.sign("HMAC",l,d)).slice(0,s>>3));return{ciphertext:y,tag:m}}async function IU(e,t,r,n,i){let s;r instanceof Uint8Array?s=await Er.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(Ls(r,e,"encrypt"),s=r);const a=new Uint8Array(await Er.subtle.encrypt({additionalData:i,iv:n,name:"AES-GCM",tagLength:128},s,t)),l=a.slice(-16);return{ciphertext:a.slice(0,-16),tag:l}}const kU=async(e,t,r,n,i)=>{if(!ki(r)&&!(r instanceof Uint8Array))throw new TypeError(gi(r,...kn,"Uint8Array"));switch(C2(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&Th(r,parseInt(e.slice(-3),10)),FU(e,t,r,n,i);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&Th(r,parseInt(e.slice(1,4),10)),IU(e,t,r,n,i);default:throw new qr("Unsupported JWE Content Encryption Algorithm")}},Wy=kU;async function OU(e,t,r,n){const i=e.slice(0,7);n||(n=x2(i));const{ciphertext:s,tag:a}=await Wy(i,r,t,n,new Uint8Array(0));return{encryptedKey:s,iv:jn(n),tag:jn(a)}}async function NU(e,t,r,n,i){const s=e.slice(0,7);return k2(s,t,r,n,i,new Uint8Array(0))}async function UU(e,t,r,n,i){switch(_p(e,t,"decrypt"),e){case"dir":{if(r!==void 0)throw new or("Encountered unexpected JWE Encrypted Key");return t}case"ECDH-ES":if(r!==void 0)throw new or("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!Zn(n.epk))throw new or('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!D2(t))throw new qr("ECDH with the provided key is not allowed or not supported by your javascript runtime");const s=await wp(n.epk,e);let a,l;if(n.apu!==void 0){if(typeof n.apu!="string")throw new or('JOSE Header "apu" (Agreement PartyUInfo) invalid');a=zn(n.apu)}if(n.apv!==void 0){if(typeof n.apv!="string")throw new or('JOSE Header "apv" (Agreement PartyVInfo) invalid');l=zn(n.apv)}const y=await U2(s,t,e==="ECDH-ES"?n.enc:e,e==="ECDH-ES"?cv(n.enc):parseInt(e.slice(-5,-2),10),a,l);if(e==="ECDH-ES")return y;if(r===void 0)throw new or("JWE Encrypted Key missing");return $y(e.slice(-6),y,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(r===void 0)throw new or("JWE Encrypted Key missing");return yU(e,t,r)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(r===void 0)throw new or("JWE Encrypted Key missing");if(typeof n.p2c!="number")throw new or('JOSE Header "p2c" (PBES2 Count) missing or invalid');const s=(i==null?void 0:i.maxPBES2Count)||1e4;if(n.p2c>s)throw new or('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof n.p2s!="string")throw new or('JOSE Header "p2s" (PBES2 Salt) missing or invalid');return pU(e,t,r,n.p2c,zn(n.p2s))}case"A128KW":case"A192KW":case"A256KW":{if(r===void 0)throw new or("JWE Encrypted Key missing");return $y(e,t,r)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(r===void 0)throw new or("JWE Encrypted Key missing");if(typeof n.iv!="string")throw new or('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof n.tag!="string")throw new or('JOSE Header "tag" (Authentication Tag) missing or invalid');const s=zn(n.iv),a=zn(n.tag);return NU(e,t,r,s,a)}default:throw new qr('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function Vc(e,t,r,n,i){if(i.crit!==void 0&&n.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(a=>typeof a!="string"||a.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let s;r!==void 0?s=new Map([...Object.entries(r),...t.entries()]):s=t;for(const a of n.crit){if(!s.has(a))throw new qr(`Extension Header Parameter "${a}" is not recognized`);if(i[a]===void 0)throw new e(`Extension Header Parameter "${a}" is missing`);if(s.get(a)&&n[a]===void 0)throw new e(`Extension Header Parameter "${a}" MUST be integrity protected`)}return new Set(n.crit)}const DU=(e,t)=>{if(t!==void 0&&(!Array.isArray(t)||t.some(r=>typeof r!="string")))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)},Ky=DU;async function dv(e,t,r){var n;if(!Zn(e))throw new or("Flattened JWE must be an object");if(e.protected===void 0&&e.header===void 0&&e.unprotected===void 0)throw new or("JOSE Header missing");if(typeof e.iv!="string")throw new or("JWE Initialization Vector missing or incorrect type");if(typeof e.ciphertext!="string")throw new or("JWE Ciphertext missing or incorrect type");if(typeof e.tag!="string")throw new or("JWE Authentication Tag missing or incorrect type");if(e.protected!==void 0&&typeof e.protected!="string")throw new or("JWE Protected Header incorrect type");if(e.encrypted_key!==void 0&&typeof e.encrypted_key!="string")throw new or("JWE Encrypted Key incorrect type");if(e.aad!==void 0&&typeof e.aad!="string")throw new or("JWE AAD incorrect type");if(e.header!==void 0&&!Zn(e.header))throw new or("JWE Shared Unprotected Header incorrect type");if(e.unprotected!==void 0&&!Zn(e.unprotected))throw new or("JWE Per-Recipient Unprotected Header incorrect type");let i;if(e.protected)try{const N=zn(e.protected);i=JSON.parse(io.decode(N))}catch{throw new or("JWE Protected Header is invalid")}if(!Kc(i,e.header,e.unprotected))throw new or("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const s={...i,...e.header,...e.unprotected};if(Vc(or,new Map,r==null?void 0:r.crit,i,s),s.zip!==void 0){if(!i||!i.zip)throw new or('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(s.zip!=="DEF")throw new qr('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:a,enc:l}=s;if(typeof a!="string"||!a)throw new or("missing JWE Algorithm (alg) in JWE Header");if(typeof l!="string"||!l)throw new or("missing JWE Encryption Algorithm (enc) in JWE Header");const y=r&&Ky("keyManagementAlgorithms",r.keyManagementAlgorithms),d=r&&Ky("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(y&&!y.has(a))throw new Ph('"alg" (Algorithm) Header Parameter not allowed');if(d&&!d.has(l))throw new Ph('"enc" (Encryption Algorithm) Header Parameter not allowed');let m;e.encrypted_key!==void 0&&(m=zn(e.encrypted_key));let g=!1;typeof t=="function"&&(t=await t(i,e),g=!0);let E;try{E=await UU(a,t,m,s,r)}catch(N){if(N instanceof TypeError||N instanceof or||N instanceof qr)throw N;E=ua(l)}const b=zn(e.iv),P=zn(e.tag),I=Nn.encode((n=e.protected)!==null&&n!==void 0?n:"");let D;e.aad!==void 0?D=Mo(I,Nn.encode("."),Nn.encode(e.aad)):D=I;let A=await k2(l,E,zn(e.ciphertext),b,P,D);s.zip==="DEF"&&(A=await((r==null?void 0:r.inflateRaw)||oU)(A));const R={plaintext:A};return e.protected!==void 0&&(R.protectedHeader=i),e.aad!==void 0&&(R.additionalAuthenticatedData=zn(e.aad)),e.unprotected!==void 0&&(R.sharedUnprotectedHeader=e.unprotected),e.header!==void 0&&(R.unprotectedHeader=e.header),g?{...R,key:t}:R}async function W2(e,t,r){if(e instanceof Uint8Array&&(e=io.decode(e)),typeof e!="string")throw new or("Compact JWE must be a string or Uint8Array");const{0:n,1:i,2:s,3:a,4:l,length:y}=e.split(".");if(y!==5)throw new or("Invalid Compact JWE");const d=await dv({ciphertext:a,iv:s||void 0,protected:n||void 0,tag:l||void 0,encrypted_key:i||void 0},t,r),m={plaintext:d.plaintext,protectedHeader:d.protectedHeader};return typeof t=="function"?{...m,key:d.key}:m}async function LU(e,t,r){if(!Zn(e))throw new or("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(Zn))throw new or("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new or("JWE Recipients has no members");for(const n of e.recipients)try{return await dv({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:n.encrypted_key,header:n.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,r)}catch{}throw new Nc}const MU=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:jn(e)};if(!ki(e))throw new TypeError(gi(e,...kn,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:t,key_ops:r,alg:n,use:i,...s}=await Er.subtle.exportKey("jwk",e);return s},BU=MU;async function jU(e){return mU(e)}async function HU(e){return vU(e)}async function K2(e){return BU(e)}async function V2(e,t,r,n,i={}){let s,a,l;switch(_p(e,r,"encrypt"),e){case"dir":{l=r;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!D2(r))throw new qr("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:y,apv:d}=i;let{epk:m}=i;m||(m=(await cU(r)).privateKey);const{x:g,y:E,crv:b,kty:P}=await K2(m),I=await U2(r,m,e==="ECDH-ES"?t:e,e==="ECDH-ES"?cv(t):parseInt(e.slice(-5,-2),10),y,d);if(a={epk:{x:g,crv:b,kty:P}},P==="EC"&&(a.epk.y=E),y&&(a.apu=jn(y)),d&&(a.apv=jn(d)),e==="ECDH-ES"){l=I;break}l=n||ua(t);const D=e.slice(-6);s=await Hy(D,I,l);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{l=n||ua(t),s=await gU(e,r,l);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{l=n||ua(t);const{p2c:y,p2s:d}=i;({encryptedKey:s,...a}=await hU(e,r,l,y,d));break}case"A128KW":case"A192KW":case"A256KW":{l=n||ua(t),s=await Hy(e,r,l);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{l=n||ua(t);const{iv:y}=i;({encryptedKey:s,...a}=await OU(e,r,l,y));break}default:throw new qr('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:l,encryptedKey:s,parameters:a}}const z2=Symbol();class Ih{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=t}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}async encrypt(t,r){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new or("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!Kc(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new or("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(Vc(or,new Map,r==null?void 0:r.crit,this._protectedHeader,n),n.zip!==void 0){if(!this._protectedHeader||!this._protectedHeader.zip)throw new or('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(n.zip!=="DEF")throw new qr('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:i,enc:s}=n;if(typeof i!="string"||!i)throw new or('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof s!="string"||!s)throw new or('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let a;if(i==="dir"){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if(i==="ECDH-ES"&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");let l;{let P;({cek:l,encryptedKey:a,parameters:P}=await V2(i,s,t,this._cek,this._keyManagementParameters)),P&&(r&&z2 in r?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...P}:this.setUnprotectedHeader(P):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...P}:this.setProtectedHeader(P))}this._iv||(this._iv=x2(s));let y,d,m;this._protectedHeader?d=Nn.encode(jn(JSON.stringify(this._protectedHeader))):d=Nn.encode(""),this._aad?(m=jn(this._aad),y=Mo(d,Nn.encode("."),Nn.encode(m))):y=d;let g,E;if(n.zip==="DEF"){const P=await((r==null?void 0:r.deflateRaw)||sU)(this._plaintext);({ciphertext:g,tag:E}=await Wy(s,P,l,this._iv,y))}else({ciphertext:g,tag:E}=await Wy(s,this._plaintext,l,this._iv,y));const b={ciphertext:jn(g),iv:jn(this._iv),tag:jn(E)};return a&&(b.encrypted_key=jn(a)),m&&(b.aad=m),this._protectedHeader&&(b.protected=io.decode(d)),this._sharedUnprotectedHeader&&(b.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(b.header=this._unprotectedHeader),b}}class $U{constructor(t,r,n){this.parent=t,this.key=r,this.options=n}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addRecipient(...t){return this.parent.addRecipient(...t)}encrypt(...t){return this.parent.encrypt(...t)}done(){return this.parent}}class WU{constructor(t){this._recipients=[],this._plaintext=t}addRecipient(t,r){const n=new $U(this,t,{crit:r==null?void 0:r.crit});return this._recipients.push(n),n}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}async encrypt(t){var r,n,i;if(!this._recipients.length)throw new or("at least one recipient must be added");if(t={deflateRaw:t==null?void 0:t.deflateRaw},this._recipients.length===1){const[y]=this._recipients,d=await new Ih(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(y.unprotectedHeader).encrypt(y.key,{...y.options,...t});let m={ciphertext:d.ciphertext,iv:d.iv,recipients:[{}],tag:d.tag};return d.aad&&(m.aad=d.aad),d.protected&&(m.protected=d.protected),d.unprotected&&(m.unprotected=d.unprotected),d.encrypted_key&&(m.recipients[0].encrypted_key=d.encrypted_key),d.header&&(m.recipients[0].header=d.header),m}let s;for(let y=0;y<this._recipients.length;y++){const d=this._recipients[y];if(!Kc(this._protectedHeader,this._unprotectedHeader,d.unprotectedHeader))throw new or("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const m={...this._protectedHeader,...this._unprotectedHeader,...d.unprotectedHeader},{alg:g}=m;if(typeof g!="string"||!g)throw new or('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(g==="dir"||g==="ECDH-ES")throw new or('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof m.enc!="string"||!m.enc)throw new or('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!s)s=m.enc;else if(s!==m.enc)throw new or('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if(Vc(or,new Map,d.options.crit,this._protectedHeader,m),m.zip!==void 0&&(!this._protectedHeader||!this._protectedHeader.zip))throw new or('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}const a=ua(s);let l={ciphertext:"",iv:"",recipients:[],tag:""};for(let y=0;y<this._recipients.length;y++){const d=this._recipients[y],m={};l.recipients.push(m);const E={...this._protectedHeader,...this._unprotectedHeader,...d.unprotectedHeader}.alg.startsWith("PBES2")?2048+y:void 0;if(y===0){const I=await new Ih(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(a).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(d.unprotectedHeader).setKeyManagementParameters({p2c:E}).encrypt(d.key,{...d.options,...t,[z2]:!0});l.ciphertext=I.ciphertext,l.iv=I.iv,l.tag=I.tag,I.aad&&(l.aad=I.aad),I.protected&&(l.protected=I.protected),I.unprotected&&(l.unprotected=I.unprotected),m.encrypted_key=I.encrypted_key,I.header&&(m.header=I.header);continue}const{encryptedKey:b,parameters:P}=await V2(((r=d.unprotectedHeader)===null||r===void 0?void 0:r.alg)||((n=this._protectedHeader)===null||n===void 0?void 0:n.alg)||((i=this._unprotectedHeader)===null||i===void 0?void 0:i.alg),s,d.key,a,{p2c:E});m.encrypted_key=jn(b),(d.unprotectedHeader||P)&&(m.header={...d.unprotectedHeader,...P})}return l}}function q2(e,t){const r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case"EdDSA":return Qu()&&t.name==="NODE-ED25519"?{name:"NODE-ED25519",namedCurve:"NODE-ED25519"}:{name:t.name};default:throw new qr(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}function G2(e,t,r){if(ki(t))return tU(t,e,r),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(gi(t,...kn));return Er.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}throw new TypeError(gi(t,...kn,"Uint8Array"))}const KU=async(e,t,r,n)=>{const i=await G2(e,t,"verify");vp(e,i);const s=q2(e,i.algorithm);try{return await Er.subtle.verify(s,i,r,n)}catch{return!1}},VU=KU;async function fv(e,t,r){var n;if(!Zn(e))throw new hn("Flattened JWS must be an object");if(e.protected===void 0&&e.header===void 0)throw new hn('Flattened JWS must have either of the "protected" or "header" members');if(e.protected!==void 0&&typeof e.protected!="string")throw new hn("JWS Protected Header incorrect type");if(e.payload===void 0)throw new hn("JWS Payload missing");if(typeof e.signature!="string")throw new hn("JWS Signature missing or incorrect type");if(e.header!==void 0&&!Zn(e.header))throw new hn("JWS Unprotected Header incorrect type");let i={};if(e.protected)try{const D=zn(e.protected);i=JSON.parse(io.decode(D))}catch{throw new hn("JWS Protected Header is invalid")}if(!Kc(i,e.header))throw new hn("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const s={...i,...e.header},a=Vc(hn,new Map([["b64",!0]]),r==null?void 0:r.crit,i,s);let l=!0;if(a.has("b64")&&(l=i.b64,typeof l!="boolean"))throw new hn('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:y}=s;if(typeof y!="string"||!y)throw new hn('JWS "alg" (Algorithm) Header Parameter missing or invalid');const d=r&&Ky("algorithms",r.algorithms);if(d&&!d.has(y))throw new Ph('"alg" (Algorithm) Header Parameter not allowed');if(l){if(typeof e.payload!="string")throw new hn("JWS Payload must be a string")}else if(typeof e.payload!="string"&&!(e.payload instanceof Uint8Array))throw new hn("JWS Payload must be a string or an Uint8Array instance");let m=!1;typeof t=="function"&&(t=await t(i,e),m=!0),_p(y,t,"verify");const g=Mo(Nn.encode((n=e.protected)!==null&&n!==void 0?n:""),Nn.encode("."),typeof e.payload=="string"?Nn.encode(e.payload):e.payload),E=zn(e.signature);if(!await VU(y,t,E,g))throw new lv;let P;l?P=zn(e.payload):typeof e.payload=="string"?P=Nn.encode(e.payload):P=e.payload;const I={payload:P};return e.protected!==void 0&&(I.protectedHeader=i),e.header!==void 0&&(I.unprotectedHeader=e.header),m?{...I,key:t}:I}async function J2(e,t,r){if(e instanceof Uint8Array&&(e=io.decode(e)),typeof e!="string")throw new hn("Compact JWS must be a string or Uint8Array");const{0:n,1:i,2:s,length:a}=e.split(".");if(a!==3)throw new hn("Invalid Compact JWS");const l=await fv({payload:i,protected:n,signature:s},t,r),y={payload:l.payload,protectedHeader:l.protectedHeader};return typeof t=="function"?{...y,key:l.key}:y}async function zU(e,t,r){if(!Zn(e))throw new hn("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(Zn))throw new hn("JWS Signatures missing or incorrect type");for(const n of e.signatures)try{return await fv({header:n.header,payload:e.payload,protected:n.protected,signature:n.signature},t,r)}catch{}throw new lv}const Xf=e=>Math.floor(e.getTime()/1e3),Q2=60,Y2=Q2*60,hv=Y2*24,qU=hv*7,GU=hv*365.25,JU=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,kh=e=>{const t=JU.exec(e);if(!t)throw new TypeError("Invalid time period format");const r=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(r);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(r*Q2);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(r*Y2);case"day":case"days":case"d":return Math.round(r*hv);case"week":case"weeks":case"w":return Math.round(r*qU);default:return Math.round(r*GU)}},Fb=e=>e.toLowerCase().replace(/^application\//,""),QU=(e,t)=>typeof e=="string"?t.includes(e):Array.isArray(e)?t.some(Set.prototype.has.bind(new Set(e))):!1,pv=(e,t,r={})=>{const{typ:n}=r;if(n&&(typeof e.typ!="string"||Fb(e.typ)!==Fb(n)))throw new ji('unexpected "typ" JWT header value',"typ","check_failed");let i;try{i=JSON.parse(io.decode(t))}catch{}if(!Zn(i))throw new Ri("JWT Claims Set must be a top-level JSON object");const{issuer:s}=r;if(s&&!(Array.isArray(s)?s:[s]).includes(i.iss))throw new ji('unexpected "iss" claim value',"iss","check_failed");const{subject:a}=r;if(a&&i.sub!==a)throw new ji('unexpected "sub" claim value',"sub","check_failed");const{audience:l}=r;if(l&&!QU(i.aud,typeof l=="string"?[l]:l))throw new ji('unexpected "aud" claim value',"aud","check_failed");let y;switch(typeof r.clockTolerance){case"string":y=kh(r.clockTolerance);break;case"number":y=r.clockTolerance;break;case"undefined":y=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:d}=r,m=Xf(d||new Date);if((i.iat!==void 0||r.maxTokenAge)&&typeof i.iat!="number")throw new ji('"iat" claim must be a number',"iat","invalid");if(i.nbf!==void 0){if(typeof i.nbf!="number")throw new ji('"nbf" claim must be a number',"nbf","invalid");if(i.nbf>m+y)throw new ji('"nbf" claim timestamp check failed',"nbf","check_failed")}if(i.exp!==void 0){if(typeof i.exp!="number")throw new ji('"exp" claim must be a number',"exp","invalid");if(i.exp<=m-y)throw new jy('"exp" claim timestamp check failed',"exp","check_failed")}if(r.maxTokenAge){const g=m-i.iat,E=typeof r.maxTokenAge=="number"?r.maxTokenAge:kh(r.maxTokenAge);if(g-y>E)throw new jy('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(g<0-y)throw new ji('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return i};async function YU(e,t,r){var n;const i=await J2(e,t,r);if(!((n=i.protectedHeader.crit)===null||n===void 0)&&n.includes("b64")&&i.protectedHeader.b64===!1)throw new Ri("JWTs MUST NOT use unencoded payload");const a={payload:pv(i.protectedHeader,i.payload,r),protectedHeader:i.protectedHeader};return typeof t=="function"?{...a,key:i.key}:a}async function XU(e,t,r){const n=await W2(e,t,r),i=pv(n.protectedHeader,n.plaintext,r),{protectedHeader:s}=n;if(s.iss!==void 0&&s.iss!==i.iss)throw new ji('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(s.sub!==void 0&&s.sub!==i.sub)throw new ji('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(s.aud!==void 0&&JSON.stringify(s.aud)!==JSON.stringify(i.aud))throw new ji('replicated "aud" claim header parameter mismatch',"aud","mismatch");const a={payload:i,protectedHeader:s};return typeof t=="function"?{...a,key:n.key}:a}class X2{constructor(t){this._flattened=new Ih(t)}setContentEncryptionKey(t){return this._flattened.setContentEncryptionKey(t),this}setInitializationVector(t){return this._flattened.setInitializationVector(t),this}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}setKeyManagementParameters(t){return this._flattened.setKeyManagementParameters(t),this}async encrypt(t,r){const n=await this._flattened.encrypt(t,r);return[n.protected,n.encrypted_key,n.iv,n.ciphertext,n.tag].join(".")}}const ZU=async(e,t,r)=>{const n=await G2(e,t,"sign");vp(e,n);const i=await Er.subtle.sign(q2(e,n.algorithm),n,r);return new Uint8Array(i)},e3=ZU;class gv{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,r){if(!this._protectedHeader&&!this._unprotectedHeader)throw new hn("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Kc(this._protectedHeader,this._unprotectedHeader))throw new hn("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader},i=Vc(hn,new Map([["b64",!0]]),r==null?void 0:r.crit,this._protectedHeader,n);let s=!0;if(i.has("b64")&&(s=this._protectedHeader.b64,typeof s!="boolean"))throw new hn('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:a}=n;if(typeof a!="string"||!a)throw new hn('JWS "alg" (Algorithm) Header Parameter missing or invalid');_p(a,t,"sign");let l=this._payload;s&&(l=Nn.encode(jn(l)));let y;this._protectedHeader?y=Nn.encode(jn(JSON.stringify(this._protectedHeader))):y=Nn.encode("");const d=Mo(y,Nn.encode("."),l),m=await e3(a,t,d),g={signature:jn(m),payload:""};return s&&(g.payload=io.decode(l)),this._unprotectedHeader&&(g.header=this._unprotectedHeader),this._protectedHeader&&(g.protected=io.decode(y)),g}}class Z2{constructor(t){this._flattened=new gv(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,r){const n=await this._flattened.sign(t,r);if(n.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${n.protected}.${n.payload}.${n.signature}`}}class t3{constructor(t,r,n){this.parent=t,this.key=r,this.options=n}setProtectedHeader(t){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=t,this}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addSignature(...t){return this.parent.addSignature(...t)}sign(...t){return this.parent.sign(...t)}done(){return this.parent}}class r3{constructor(t){this._signatures=[],this._payload=t}addSignature(t,r){const n=new t3(this,t,r);return this._signatures.push(n),n}async sign(){if(!this._signatures.length)throw new hn("at least one signature must be added");const t={signatures:[],payload:""};for(let r=0;r<this._signatures.length;r++){const n=this._signatures[r],i=new gv(this._payload);i.setProtectedHeader(n.protectedHeader),i.setUnprotectedHeader(n.unprotectedHeader);const{payload:s,...a}=await i.sign(n.key,n.options);if(r===0)t.payload=s;else if(t.payload!==s)throw new hn("inconsistent use of JWS Unencoded Payload Option (RFC7797)");t.signatures.push(a)}return t}}class yv{constructor(t){if(!Zn(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return typeof t=="number"?this._payload={...this._payload,nbf:t}:this._payload={...this._payload,nbf:Xf(new Date)+kh(t)},this}setExpirationTime(t){return typeof t=="number"?this._payload={...this._payload,exp:t}:this._payload={...this._payload,exp:Xf(new Date)+kh(t)},this}setIssuedAt(t){return typeof t>"u"?this._payload={...this._payload,iat:Xf(new Date)}:this._payload={...this._payload,iat:t},this}}class n3 extends yv{setProtectedHeader(t){return this._protectedHeader=t,this}async sign(t,r){var n;const i=new Z2(Nn.encode(JSON.stringify(this._payload)));if(i.setProtectedHeader(this._protectedHeader),Array.isArray((n=this._protectedHeader)===null||n===void 0?void 0:n.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new Ri("JWTs MUST NOT use unencoded payload");return i.sign(t,r)}}class i3 extends yv{setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(t,r){const n=new X2(Nn.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),n.setProtectedHeader(this._protectedHeader),this._iv&&n.setInitializationVector(this._iv),this._cek&&n.setContentEncryptionKey(this._cek),this._keyManagementParameters&&n.setKeyManagementParameters(this._keyManagementParameters),n.encrypt(t,r)}}const ms=(e,t)=>{if(typeof e!="string"||!e)throw new b2(`${t} missing or invalid`)};async function ex(e,t){if(!Zn(e))throw new TypeError("JWK must be an object");if(t??(t="sha256"),t!=="sha256"&&t!=="sha384"&&t!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let r;switch(e.kty){case"EC":ms(e.crv,'"crv" (Curve) Parameter'),ms(e.x,'"x" (X Coordinate) Parameter'),ms(e.y,'"y" (Y Coordinate) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":ms(e.crv,'"crv" (Subtype of Key Pair) Parameter'),ms(e.x,'"x" (Public Key) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":ms(e.e,'"e" (Exponent) Parameter'),ms(e.n,'"n" (Modulus) Parameter'),r={e:e.e,kty:e.kty,n:e.n};break;case"oct":ms(e.k,'"k" (Key Value) Parameter'),r={k:e.k,kty:e.kty};break;default:throw new qr('"kty" (Key Type) Parameter missing or unsupported')}const n=Nn.encode(JSON.stringify(r));return jn(await w2(t,n))}async function o3(e,t){t??(t="sha256");const r=await ex(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${r}`}async function s3(e,t){const r={...e,...t.header};if(!Zn(r.jwk))throw new hn('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const n=await wp({...r.jwk,ext:!0},r.alg,!0);if(n instanceof Uint8Array||n.type!=="public")throw new hn('"jwk" (JSON Web Key) Header Parameter must be a public key');return n}function a3(e){switch(typeof e=="string"&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new qr('Unsupported "alg" value for a JSON Web Key Set')}}function tx(e){return e&&typeof e=="object"&&Array.isArray(e.keys)&&e.keys.every(u3)}function u3(e){return Zn(e)}function l3(e){return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}class Vy{constructor(t){if(this._cached=new WeakMap,!tx(t))throw new gp("JSON Web Key Set malformed");this._jwks=l3(t)}async getKey(t,r){const{alg:n,kid:i}={...t,...r==null?void 0:r.header},s=a3(n),a=this._jwks.keys.filter(d=>{let m=s===d.kty;if(m&&typeof i=="string"&&(m=i===d.kid),m&&typeof d.alg=="string"&&(m=n===d.alg),m&&typeof d.use=="string"&&(m=d.use==="sig"),m&&Array.isArray(d.key_ops)&&(m=d.key_ops.includes("verify")),m&&n==="EdDSA"&&(m=d.crv==="Ed25519"||d.crv==="Ed448"),m)switch(n){case"ES256":m=d.crv==="P-256";break;case"ES256K":m=d.crv==="secp256k1";break;case"ES384":m=d.crv==="P-384";break;case"ES512":m=d.crv==="P-521";break}return m}),{0:l,length:y}=a;if(y===0)throw new uv;if(y!==1){const d=new E2,{_cached:m}=this;throw d[Symbol.asyncIterator]=async function*(){for(const g of a)try{yield await Ib(m,g,n)}catch{continue}},d}return Ib(this._cached,l,n)}}async function Ib(e,t,r){const n=e.get(t)||e.set(t,{}).get(t);if(n[r]===void 0){const i=await wp({...t,ext:!0},r);if(i.type!=="public")throw new gp("JSON Web Key Set members must be public keys");n[r]=i}return n[r]}function c3(e){return Vy.prototype.getKey.bind(new Vy(e))}const d3=async(e,t,r)=>{let n,i,s=!1;typeof AbortController=="function"&&(n=new AbortController,i=setTimeout(()=>{s=!0,n.abort()},t));const a=await fetch(e.href,{signal:n?n.signal:void 0,redirect:"manual",headers:r.headers}).catch(l=>{throw s?new A2:l});if(i!==void 0&&clearTimeout(i),a.status!==200)throw new si("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await a.json()}catch{throw new si("Failed to parse the JSON Web Key Set HTTP response as JSON")}},f3=d3;class kb extends Vy{constructor(t,r){if(super({keys:[]}),this._jwks=void 0,!(t instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(t.href),this._options={agent:r==null?void 0:r.agent,headers:r==null?void 0:r.headers},this._timeoutDuration=typeof(r==null?void 0:r.timeoutDuration)=="number"?r==null?void 0:r.timeoutDuration:5e3,this._cooldownDuration=typeof(r==null?void 0:r.cooldownDuration)=="number"?r==null?void 0:r.cooldownDuration:3e4,this._cacheMaxAge=typeof(r==null?void 0:r.cacheMaxAge)=="number"?r==null?void 0:r.cacheMaxAge:6e5}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(t,r){(!this._jwks||!this.fresh())&&await this.reload();try{return await super.getKey(t,r)}catch(n){if(n instanceof uv&&this.coolingDown()===!1)return await this.reload(),super.getKey(t,r);throw n}}async reload(){if(this._pendingFetch&&Qu())return new Promise(t=>{const r=()=>{this._pendingFetch===void 0?t():setTimeout(r,5)};r()});this._pendingFetch||(this._pendingFetch=f3(this._url,this._timeoutDuration,this._options).then(t=>{if(!tx(t))throw new gp("JSON Web Key Set malformed");this._jwks={keys:t.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(t=>{throw this._pendingFetch=void 0,t})),await this._pendingFetch}}function h3(e,t){return kb.prototype.getKey.bind(new kb(e,t))}class p3 extends yv{encode(){const t=jn(JSON.stringify({alg:"none"})),r=jn(JSON.stringify(this._payload));return`${t}.${r}.`}static decode(t,r){if(typeof t!="string")throw new Ri("Unsecured JWT must be a string");const{0:n,1:i,2:s,length:a}=t.split(".");if(a!==3||s!=="")throw new Ri("Invalid Unsecured JWT");let l;try{if(l=JSON.parse(io.decode(zn(n))),l.alg!=="none")throw new Error}catch{throw new Ri("Invalid Unsecured JWT")}return{payload:pv(l,zn(i),r),header:l}}}const g3=jn,mv=zn,y3=Object.freeze(Object.defineProperty({__proto__:null,decode:mv,encode:g3},Symbol.toStringTag,{value:"Module"}));function m3(e){let t;if(typeof e=="string"){const r=e.split(".");(r.length===3||r.length===5)&&([t]=r)}else if(typeof e=="object"&&e)if("protected"in e)t=e.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof t!="string"||!t)throw new Error;const r=JSON.parse(io.decode(mv(t)));if(!Zn(r))throw new Error;return r}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function v3(e){if(typeof e!="string")throw new Ri("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:r}=e.split(".");if(r===5)throw new Ri("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new Ri("Invalid JWT");if(!t)throw new Ri("JWTs must contain a payload");let n;try{n=mv(t)}catch{throw new Ri("Failed to parse the base64url encoded payload")}let i;try{i=JSON.parse(io.decode(n))}catch{throw new Ri("Failed to parse the decoded payload as JSON")}if(!Zn(i))throw new Ri("Invalid JWT Claims Set");return i}async function w3(e,t){var r;let n,i,s;switch(e){case"HS256":case"HS384":case"HS512":n=parseInt(e.slice(-3),10),i={name:"HMAC",hash:`SHA-${n}`,length:n},s=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return n=parseInt(e.slice(-3),10),yp(new Uint8Array(n>>3));case"A128KW":case"A192KW":case"A256KW":n=parseInt(e.slice(1,4),10),i={name:"AES-KW",length:n},s=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":n=parseInt(e.slice(1,4),10),i={name:"AES-GCM",length:n},s=["encrypt","decrypt"];break;default:throw new qr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return Er.subtle.generateKey(i,(r=t==null?void 0:t.extractable)!==null&&r!==void 0?r:!1,s)}function P0(e){var t;const r=(t=e==null?void 0:e.modulusLength)!==null&&t!==void 0?t:2048;if(typeof r!="number"||r<2048)throw new qr("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return r}async function _3(e,t){var r,n,i,s;let a,l;switch(e){case"PS256":case"PS384":case"PS512":a={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:P0(t)},l=["sign","verify"];break;case"RS256":case"RS384":case"RS512":a={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:P0(t)},l=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":a={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:P0(t)},l=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":a={name:"ECDSA",namedCurve:"P-256"},l=["sign","verify"];break;case"ES384":a={name:"ECDSA",namedCurve:"P-384"},l=["sign","verify"];break;case"ES512":a={name:"ECDSA",namedCurve:"P-521"},l=["sign","verify"];break;case"EdDSA":l=["sign","verify"];const y=(r=t==null?void 0:t.crv)!==null&&r!==void 0?r:"Ed25519";switch(y){case"Ed25519":case"Ed448":a={name:y};break;default:throw new qr("Invalid or unsupported crv option provided")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{l=["deriveKey","deriveBits"];const d=(n=t==null?void 0:t.crv)!==null&&n!==void 0?n:"P-256";switch(d){case"P-256":case"P-384":case"P-521":{a={name:"ECDH",namedCurve:d};break}case"X25519":case"X448":a={name:d};break;default:throw new qr("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new qr('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}try{return await Er.subtle.generateKey(a,(i=t==null?void 0:t.extractable)!==null&&i!==void 0?i:!1,l)}catch(y){if(a.name==="Ed25519"&&(y==null?void 0:y.name)==="NotSupportedError"&&Qu())return a={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},await Er.subtle.generateKey(a,(s=t==null?void 0:t.extractable)!==null&&s!==void 0?s:!1,l);throw y}}async function S3(e,t){return _3(e,t)}async function b3(e,t){return w3(e,t)}const E3=Object.freeze(Object.defineProperty({__proto__:null,CompactEncrypt:X2,CompactSign:Z2,EmbeddedJWK:s3,EncryptJWT:i3,FlattenedEncrypt:Ih,FlattenedSign:gv,GeneralEncrypt:WU,GeneralSign:r3,SignJWT:n3,UnsecuredJWT:p3,base64url:y3,calculateJwkThumbprint:ex,calculateJwkThumbprintUri:o3,compactDecrypt:W2,compactVerify:J2,createLocalJWKSet:c3,createRemoteJWKSet:h3,decodeJwt:v3,decodeProtectedHeader:m3,errors:JN,exportJWK:K2,exportPKCS8:HU,exportSPKI:jU,flattenedDecrypt:dv,flattenedVerify:fv,generalDecrypt:LU,generalVerify:zU,generateKeyPair:S3,generateSecret:b3,importJWK:wp,importPKCS8:xU,importSPKI:AU,importX509:RU,jwtDecrypt:XU,jwtVerify:YU},Symbol.toStringTag,{value:"Module"})),A3=zy(E3);var Ob;function bi(){if(Ob)return tn;Ob=1;var e=My(),t=A3,r=pp();const n="solidClientAuthn:",i=["ES256","RS256"],s={ERROR:"error",LOGIN:"login",LOGOUT:"logout",NEW_REFRESH_TOKEN:"newRefreshToken",SESSION_EXPIRED:"sessionExpired",SESSION_EXTENDED:"sessionExtended",SESSION_RESTORED:"sessionRestore",TIMEOUT_SET:"timeoutSet"},a=5,m=["openid","offline_access","webid"].join(" ");class g{constructor(We){this.handleables=We}async getProperHandler(We){const ee=await Promise.all(this.handleables.map(M=>M.canHandle(...We)));for(let M=0;M<ee.length;M+=1)if(ee[M])return this.handleables[M];return null}async canHandle(...We){return await this.getProperHandler(We)!==null}async handle(...We){const ee=await this.getProperHandler(We);if(ee)return ee.handle(...We);throw new Error(`[${this.constructor.name}] cannot find a suitable handler for: ${We.map(M=>{try{return JSON.stringify(M)}catch{return M.toString()}}).join(", ")}`)}}async function E(Ye,We){const ee=await e.fetch(Ye);if(ee.status!==200)throw new Error(`Could not fetch JWKS for [${We}] at [${Ye}]: ${ee.status} ${ee.statusText}`);let M;try{M=(await ee.json()).keys[0]}catch(F){throw new Error(`Malformed JWKS for [${We}] at [${Ye}]: ${F.message}`)}return M}async function b(Ye,We,ee,M){const F=await E(We,ee);let K;try{const{payload:re}=await t.jwtVerify(Ye,await t.importJWK(F),{issuer:ee,audience:M});K=re}catch(re){throw new Error(`Token verification failed: ${re.stack}`)}if(typeof K.webid=="string")return K.webid;if(typeof K.sub!="string")throw new Error(`The token ${JSON.stringify(K)} is invalid: it has no 'webid' claim and no 'sub' claim.`);try{return new URL(K.sub),K.sub}catch(re){throw new Error(`The token has no 'webid' claim, and its 'sub' claim of [${K.sub}] is invalid as a URL - error [${re}].`)}}function P(Ye){try{return new URL(Ye).hash===""}catch{return!1}}function I(Ye){return typeof Ye=="string"&&["DPoP","Bearer"].includes(Ye)}const D="solidClientAuthenticationUser";function A(Ye){try{return new URL(Ye),!0}catch{return!1}}function R(Ye,We){var ee;return(ee=We.find(M=>Ye.includes(M)))!==null&&ee!==void 0?ee:null}function N(Ye,We){return Ye.clientId!==void 0&&!A(Ye.clientId)?"static":We.scopesSupported.includes("webid")&&Ye.clientId!==void 0&&A(Ye.clientId)?"solid-oidc":"dynamic"}async function L(Ye,We,ee,M){const F=N(Ye,We);return F==="dynamic"?M.getClient({sessionId:Ye.sessionId,clientName:Ye.clientName,redirectUrl:Ye.redirectUrl},We):(await ee.setForUser(Ye.sessionId,{clientId:Ye.clientId}),Ye.clientSecret&&await ee.setForUser(Ye.sessionId,{clientSecret:Ye.clientSecret}),Ye.clientName&&await ee.setForUser(Ye.sessionId,{clientName:Ye.clientName}),{clientId:Ye.clientId,clientSecret:Ye.clientSecret,clientName:Ye.clientName,clientType:F})}async function W(Ye,We){return Ye.getForUser(We,"sessionId")}async function q(Ye,We,ee){try{const[M,F,K,re]=await Promise.all([We.getForUser(Ye,"issuer",{errorIfNull:!0}),We.getForUser(Ye,"codeVerifier"),We.getForUser(Ye,"redirectUrl"),We.getForUser(Ye,"dpop",{errorIfNull:!0})]);await We.deleteForUser(Ye,"codeVerifier");const B=await ee.fetchConfig(M);return{codeVerifier:F,redirectUrl:K,issuerConfig:B,dpop:re==="true"}}catch(M){throw new Error(`Failed to retrieve OIDC context from storage associated with session [${Ye}]: ${M}`)}}async function J(Ye,We,ee,M,F,K,re){F!==void 0&&await Ye.setForUser(We,{refreshToken:F},{secure:K}),ee!==void 0&&await Ye.setForUser(We,{webId:ee},{secure:K}),M!==void 0&&await Ye.setForUser(We,{isLoggedIn:M},{secure:K}),re!==void 0&&await Ye.setForUser(We,{publicKey:JSON.stringify(re.publicKey),privateKey:JSON.stringify(await t.exportJWK(re.privateKey))},{secure:K})}class ve{constructor(We,ee){this.secureStorage=We,this.insecureStorage=ee}getKey(We){return`solidClientAuthenticationUser:${We}`}async getUserData(We,ee){const M=await(ee?this.secureStorage:this.insecureStorage).get(this.getKey(We));if(M===void 0)return{};try{return JSON.parse(M)}catch{throw new Error(`Data for user [${We}] in [${ee?"secure":"unsecure"}] storage is corrupted - expected valid JSON, but got: ${M}`)}}async setUserData(We,ee,M){await(M?this.secureStorage:this.insecureStorage).set(this.getKey(We),JSON.stringify(ee))}async get(We,ee){const M=await(ee!=null&&ee.secure?this.secureStorage:this.insecureStorage).get(We);if(M===void 0&&(ee!=null&&ee.errorIfNull))throw new Error(`[${We}] is not stored`);return M}async set(We,ee,M){return(M!=null&&M.secure?this.secureStorage:this.insecureStorage).set(We,ee)}async delete(We,ee){return(ee!=null&&ee.secure?this.secureStorage:this.insecureStorage).delete(We)}async getForUser(We,ee,M){const F=await this.getUserData(We,M==null?void 0:M.secure);let K;if((!F||!F[ee])&&(K=void 0),K=F[ee],K===void 0&&(M!=null&&M.errorIfNull))throw new Error(`Field [${ee}] for user [${We}] is not stored`);return K||void 0}async setForUser(We,ee,M){let F;try{F=await this.getUserData(We,M==null?void 0:M.secure)}catch{F={}}await this.setUserData(We,{...F,...ee},M==null?void 0:M.secure)}async deleteForUser(We,ee,M){const F=await this.getUserData(We,M==null?void 0:M.secure);delete F[ee],await this.setUserData(We,F,M==null?void 0:M.secure)}async deleteAllUserData(We,ee){await(ee!=null&&ee.secure?this.secureStorage:this.insecureStorage).delete(this.getKey(We))}}class Fe{constructor(){this.map={}}async get(We){return this.map[We]||void 0}async set(We,ee){this.map[We]=ee}async delete(We){delete this.map[We]}}class z extends Error{constructor(We){super(We)}}class De extends Error{constructor(We){super(`[${We}] is not implemented`)}}class xt extends Error{constructor(We){super(`Invalid response from OIDC provider: missing fields ${We}`),this.missingFields=We}}class ft extends Error{constructor(We,ee,M){super(We),this.error=ee,this.errorDescription=M}}function Te(Ye){const We=new URL(Ye);return new URL(We.pathname,We.origin).toString()}async function He(Ye,We,ee){return new t.SignJWT({htu:Te(Ye),htm:We.toUpperCase(),jti:r.v4()}).setProtectedHeader({alg:i[0],jwk:ee.publicKey,typ:"dpop+jwt"}).setIssuedAt().sign(ee.privateKey,{})}async function st(){const{privateKey:Ye,publicKey:We}=await t.generateKeyPair(i[0]),ee={privateKey:Ye,publicKey:await t.exportJWK(We)};return[ee.publicKey.alg]=i,ee}const Ct=600;function $e(Ye){return[401,403].includes(Ye)}async function Je(Ye,We,ee,M){var F;const K=new e.Headers(M==null?void 0:M.headers);return K.set("Authorization",`DPoP ${We}`),K.set("DPoP",await He(Ye,(F=M==null?void 0:M.method)!==null&&F!==void 0?F:"get",ee)),{...M,headers:K}}async function ke(Ye,We,ee,M){if(ee!==void 0)return Je(Ye,We,ee,M);const F=new e.Headers(M==null?void 0:M.headers);return F.set("Authorization",`Bearer ${We}`),{...M,headers:F}}async function Xe(Ye,We,ee,M,F){return Ye(ee,await ke(ee.toString(),We,F,M))}async function vt(Ye,We,ee){var M;const F=await Ye.tokenRefresher.refresh(Ye.sessionId,Ye.refreshToken,We);return ee==null||ee.emit(s.SESSION_EXTENDED,(M=F.expiresIn)!==null&&M!==void 0?M:Ct),typeof F.refreshToken=="string"&&(ee==null||ee.emit(s.NEW_REFRESH_TOKEN,F.refreshToken)),{accessToken:F.accessToken,refreshToken:F.refreshToken,expiresIn:F.expiresIn}}const vr=Ye=>Ye!==void 0?Ye-a>0?Ye-a:Ye:Ct;async function pr(Ye,We,ee){var M;let F=We,K;const re=ee==null?void 0:ee.refreshOptions;if(re!==void 0){const B=async()=>{var C,U,ne,Re;try{const{accessToken:Le,refreshToken:qe,expiresIn:Et}=await vt(re,ee.dpopKey,ee.eventEmitter);F=Le,qe!==void 0&&(re.refreshToken=qe),clearTimeout(K),K=setTimeout(B,vr(Et)*1e3),(C=ee.eventEmitter)===null||C===void 0||C.emit(s.TIMEOUT_SET,K)}catch(Le){Le instanceof ft&&((U=ee==null?void 0:ee.eventEmitter)===null||U===void 0||U.emit(s.ERROR,Le.error,Le.errorDescription),(ne=ee==null?void 0:ee.eventEmitter)===null||ne===void 0||ne.emit(s.SESSION_EXPIRED)),Le instanceof xt&&Le.missingFields.includes("access_token")&&((Re=ee==null?void 0:ee.eventEmitter)===null||Re===void 0||Re.emit(s.SESSION_EXPIRED))}};K=setTimeout(B,vr(ee.expiresIn)*1e3),(M=ee.eventEmitter)===null||M===void 0||M.emit(s.TIMEOUT_SET,K)}else if(ee!==void 0&&ee.eventEmitter!==void 0){const B=setTimeout(()=>{ee.eventEmitter.emit(s.SESSION_EXPIRED)},vr(ee.expiresIn)*1e3);ee.eventEmitter.emit(s.TIMEOUT_SET,B)}return async(B,C)=>{let U=await Xe(Ye,F,B,C,ee==null?void 0:ee.dpopKey);const ne=!U.ok&&!$e(U.status);return U.ok||ne||U.url!==B&&(ee==null?void 0:ee.dpopKey)!==void 0&&(U=await Xe(Ye,F,U.url,C,ee.dpopKey)),U}}const Nt="getResponse",Fr={get:async(Ye,We)=>Nt,set:async(Ye,We)=>{},delete:async Ye=>{},getForUser:async(Ye,We,ee)=>Nt,setForUser:async(Ye,We,ee)=>{},deleteForUser:async(Ye,We,ee)=>{},deleteAllUserData:async(Ye,We)=>{}},ar=Ye=>{const We=Ye;return{get:async ee=>{if(We[ee]!==void 0)return typeof We[ee]=="string"?We[ee]:JSON.stringify(We[ee])},set:async(ee,M)=>{We[ee]=M},delete:async ee=>{delete We[ee]}}},Pt=(Ye,We=!1)=>We?new ve(ar(Ye),ar({})):new ve(ar({}),ar(Ye));return tn.AggregateHandler=g,tn.ConfigurationError=z,tn.DEFAULT_SCOPES=m,tn.EVENTS=s,tn.InMemoryStorage=Fe,tn.InvalidResponseError=xt,tn.NotImplementedError=De,tn.OidcProviderError=ft,tn.PREFERRED_SIGNING_ALG=i,tn.REFRESH_BEFORE_EXPIRATION_SECONDS=a,tn.SOLID_CLIENT_AUTHN_KEY_PREFIX=n,tn.StorageUtility=ve,tn.StorageUtilityGetResponse=Nt,tn.StorageUtilityMock=Fr,tn.USER_SESSION_PREFIX=D,tn.buildAuthenticatedFetch=pr,tn.createDpopHeader=He,tn.determineSigningAlg=R,tn.fetchJwks=E,tn.generateDpopKeyPair=st,tn.getSessionIdFromOauthState=W,tn.getWebidFromTokenPayload=b,tn.handleRegistration=L,tn.isSupportedTokenType=I,tn.isValidRedirectUrl=P,tn.loadOidcContextFromStorage=q,tn.mockStorage=ar,tn.mockStorageUtility=Pt,tn.saveSessionInfoToStorage=J,tn}var zl={},Cf={},Nb;function R3(){if(Nb)return Cf;Nb=1,Object.defineProperty(Cf,"__esModule",{value:!0});const e=bi();class t extends e.StorageUtility{constructor(n,i){super(n,i)}}return Cf.default=t,Cf}var Pf={},mi={},x3={get exports(){return mi},set exports(e){mi=e}};(function(e,t){(function(n,i){e.exports=i()})(mo,function(){return function(r){var n={};function i(s){if(n[s])return n[s].exports;var a=n[s]={i:s,l:!1,exports:{}};return r[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=r,i.c=n,i.d=function(s,a,l){i.o(s,a)||Object.defineProperty(s,a,{enumerable:!0,get:l})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,a){if(1&a&&(s=i(s)),8&a||4&a&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),2&a&&typeof s!="string")for(var y in s)i.d(l,y,function(d){return s[d]}.bind(null,y));return l},i.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(a,"a",a),a},i.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},i.p="",i(i.s=22)}([function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function d(m,g){for(var E=0;E<g.length;E++){var b=g[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}return function(m,g,E){return g&&d(m.prototype,g),E&&d(m,E),m}}(),a={debug:function(){},info:function(){},warn:function(){},error:function(){}},l=void 0,y=void 0;(n.Log=function(){function d(){(function(g,E){if(!(g instanceof E))throw new TypeError("Cannot call a class as a function")})(this,d)}return d.reset=function(){y=3,l=a},d.debug=function(){if(y>=4){for(var g=arguments.length,E=Array(g),b=0;b<g;b++)E[b]=arguments[b];l.debug.apply(l,Array.from(E))}},d.info=function(){if(y>=3){for(var g=arguments.length,E=Array(g),b=0;b<g;b++)E[b]=arguments[b];l.info.apply(l,Array.from(E))}},d.warn=function(){if(y>=2){for(var g=arguments.length,E=Array(g),b=0;b<g;b++)E[b]=arguments[b];l.warn.apply(l,Array.from(E))}},d.error=function(){if(y>=1){for(var g=arguments.length,E=Array(g),b=0;b<g;b++)E[b]=arguments[b];l.error.apply(l,Array.from(E))}},s(d,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return y},set:function(g){if(!(0<=g&&g<=4))throw new Error("Invalid log level");y=g}},{key:"logger",get:function(){return l},set:function(g){if(!g.debug&&g.info&&(g.debug=g.info),!(g.debug&&g.info&&g.warn&&g.error))throw new Error("Invalid logger");l=g}}]),d}()).reset()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function d(m,g){for(var E=0;E<g.length;E++){var b=g[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}return function(m,g,E){return g&&d(m.prototype,g),E&&d(m,E),m}}(),a={setInterval:function(d){function m(g,E){return d.apply(this,arguments)}return m.toString=function(){return d.toString()},m}(function(d,m){return setInterval(d,m)}),clearInterval:function(d){function m(g){return d.apply(this,arguments)}return m.toString=function(){return d.toString()},m}(function(d){return clearInterval(d)})},l=!1,y=null;n.Global=function(){function d(){(function(g,E){if(!(g instanceof E))throw new TypeError("Cannot call a class as a function")})(this,d)}return d._testing=function(){l=!0},d.setXMLHttpRequest=function(g){y=g},s(d,null,[{key:"location",get:function(){if(!l)return location}},{key:"localStorage",get:function(){if(!l&&typeof window<"u")return localStorage}},{key:"sessionStorage",get:function(){if(!l&&typeof window<"u")return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!l&&typeof window<"u")return y||XMLHttpRequest}},{key:"timer",get:function(){if(!l)return a}}]),d}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.MetadataService=void 0;var s=function(){function m(g,E){for(var b=0;b<E.length;b++){var P=E[b];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(g,P.key,P)}}return function(g,E,b){return E&&m(g.prototype,E),b&&m(g,b),g}}(),a=i(0),l=i(7);function y(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}var d=".well-known/openid-configuration";n.MetadataService=function(){function m(g){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.JsonService;if(y(this,m),!g)throw a.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=g,this._jsonService=new E(["application/jwk-set+json"])}return m.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},m.prototype.getMetadata=function(){var E=this;return this._settings.metadata?(a.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(a.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(b){a.Log.debug("MetadataService.getMetadata: json received");var P=E._settings.metadataSeed||{};return E._settings.metadata=Object.assign({},P,b),E._settings.metadata})):(a.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},m.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},m.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},m.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},m.prototype.getTokenEndpoint=function(){var E=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this._getMetadataProperty("token_endpoint",E)},m.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},m.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},m.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},m.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},m.prototype._getMetadataProperty=function(E){var b=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return a.Log.debug("MetadataService.getMetadataProperty for: "+E),this.getMetadata().then(function(P){if(a.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),P[E]===void 0){if(b===!0)return void a.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+E);throw a.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+E),new Error("Metadata does not contain property "+E)}return P[E]})},m.prototype.getSigningKeys=function(){var E=this;return this._settings.signingKeys?(a.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(b){return a.Log.debug("MetadataService.getSigningKeys: jwks_uri received",b),E._jsonService.getJson(b).then(function(P){if(a.Log.debug("MetadataService.getSigningKeys: key set received",P),!P.keys)throw a.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return E._settings.signingKeys=P.keys,E._settings.signingKeys})})},s(m,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(d)<0&&(this._metadataUrl[this._metadataUrl.length-1]!=="/"&&(this._metadataUrl+="/"),this._metadataUrl+=d))),this._metadataUrl}}]),m}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.UrlUtility=void 0;var s=i(0),a=i(1);n.UrlUtility=function(){function l(){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,l)}return l.addQueryParam=function(d,m,g){return d.indexOf("?")<0&&(d+="?"),d[d.length-1]!=="?"&&(d+="&"),d+=encodeURIComponent(m),d+="=",d+=encodeURIComponent(g)},l.parseUrlFragment=function(d){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#",g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a.Global;typeof d!="string"&&(d=g.location.href);var E=d.lastIndexOf(m);E>=0&&(d=d.substr(E+1)),m==="?"&&(E=d.indexOf("#"))>=0&&(d=d.substr(0,E));for(var b,P={},I=/([^&=]+)=([^&]*)/g,D=0;b=I.exec(d);)if(P[decodeURIComponent(b[1])]=decodeURIComponent(b[2].replace(/\+/g," ")),D++>50)return s.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",d),{error:"Response exceeded expected number of parameters"};for(var A in P)return P;return{}},l}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.JoseUtil=void 0;var s=i(26),a=function(y){return y&&y.__esModule?y:{default:y}}(i(33));n.JoseUtil=(0,a.default)({jws:s.jws,KeyUtil:s.KeyUtil,X509:s.X509,crypto:s.crypto,hextob64u:s.hextob64u,b64tohex:s.b64tohex,AllowedSigningAlgs:s.AllowedSigningAlgs})},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.OidcClientSettings=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},a=function(){function A(R,N){for(var L=0;L<N.length;L++){var W=N[L];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(R,W.key,W)}}return function(R,N,L){return N&&A(R.prototype,N),L&&A(R,L),R}}(),l=i(0),y=i(23),d=i(6),m=i(24),g=i(2);function E(A,R){if(!(A instanceof R))throw new TypeError("Cannot call a class as a function")}var b=".well-known/openid-configuration",P="id_token",I="openid",D="client_secret_post";n.OidcClientSettings=function(){function A(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},N=R.authority,L=R.metadataUrl,W=R.metadata,q=R.signingKeys,J=R.metadataSeed,ve=R.client_id,Fe=R.client_secret,z=R.response_type,De=z===void 0?P:z,xt=R.scope,ft=xt===void 0?I:xt,Te=R.redirect_uri,He=R.post_logout_redirect_uri,st=R.client_authentication,Ct=st===void 0?D:st,$e=R.prompt,Je=R.display,ke=R.max_age,Xe=R.ui_locales,vt=R.acr_values,vr=R.resource,pr=R.response_mode,Nt=R.filterProtocolClaims,Fr=Nt===void 0||Nt,ar=R.loadUserInfo,Pt=ar===void 0||ar,Ye=R.staleStateAge,We=Ye===void 0?900:Ye,ee=R.clockSkew,M=ee===void 0?300:ee,F=R.clockService,K=F===void 0?new y.ClockService:F,re=R.userInfoJwtIssuer,B=re===void 0?"OP":re,C=R.mergeClaims,U=C!==void 0&&C,ne=R.stateStore,Re=ne===void 0?new d.WebStorageStateStore:ne,Le=R.ResponseValidatorCtor,qe=Le===void 0?m.ResponseValidator:Le,Et=R.MetadataServiceCtor,Wt=Et===void 0?g.MetadataService:Et,Y=R.extraQueryParams,te=Y===void 0?{}:Y,j=R.extraTokenParams,S=j===void 0?{}:j;E(this,A),this._authority=N,this._metadataUrl=L,this._metadata=W,this._metadataSeed=J,this._signingKeys=q,this._client_id=ve,this._client_secret=Fe,this._response_type=De,this._scope=ft,this._redirect_uri=Te,this._post_logout_redirect_uri=He,this._client_authentication=Ct,this._prompt=$e,this._display=Je,this._max_age=ke,this._ui_locales=Xe,this._acr_values=vt,this._resource=vr,this._response_mode=pr,this._filterProtocolClaims=!!Fr,this._loadUserInfo=!!Pt,this._staleStateAge=We,this._clockSkew=M,this._clockService=K,this._userInfoJwtIssuer=B,this._mergeClaims=!!U,this._stateStore=Re,this._validator=new qe(this),this._metadataService=new Wt(this),this._extraQueryParams=(te===void 0?"undefined":s(te))==="object"?te:{},this._extraTokenParams=(S===void 0?"undefined":s(S))==="object"?S:{}}return A.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},a(A,[{key:"client_id",get:function(){return this._client_id},set:function(N){if(this._client_id)throw l.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=N}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(N){if(this._authority)throw l.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=N}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(b)<0&&(this._metadataUrl[this._metadataUrl.length-1]!=="/"&&(this._metadataUrl+="/"),this._metadataUrl+=b)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(N){this._metadata=N}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(N){this._metadataSeed=N}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(N){this._signingKeys=N}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(N){(N===void 0?"undefined":s(N))==="object"?this._extraQueryParams=N:this._extraQueryParams={}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(N){(N===void 0?"undefined":s(N))==="object"?this._extraTokenParams=N:this._extraTokenParams={}}}]),A}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.WebStorageStateStore=void 0;var s=i(0),a=i(1);function l(y,d){if(!(y instanceof d))throw new TypeError("Cannot call a class as a function")}n.WebStorageStateStore=function(){function y(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=d.prefix,g=m===void 0?"oidc.":m,E=d.store,b=E===void 0?a.Global.localStorage:E;l(this,y),this._store=b,this._prefix=g}return y.prototype.set=function(m,g){return s.Log.debug("WebStorageStateStore.set",m),m=this._prefix+m,this._store.setItem(m,g),Promise.resolve()},y.prototype.get=function(m){s.Log.debug("WebStorageStateStore.get",m),m=this._prefix+m;var g=this._store.getItem(m);return Promise.resolve(g)},y.prototype.remove=function(m){s.Log.debug("WebStorageStateStore.remove",m),m=this._prefix+m;var g=this._store.getItem(m);return this._store.removeItem(m),Promise.resolve(g)},y.prototype.getAllKeys=function(){s.Log.debug("WebStorageStateStore.getAllKeys");for(var m=[],g=0;g<this._store.length;g++){var E=this._store.key(g);E.indexOf(this._prefix)===0&&m.push(E.substr(this._prefix.length))}return Promise.resolve(m)},y}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.JsonService=void 0;var s=i(0),a=i(1);function l(y,d){if(!(y instanceof d))throw new TypeError("Cannot call a class as a function")}n.JsonService=function(){function y(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.Global.XMLHttpRequest,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;l(this,y),d&&Array.isArray(d)?this._contentTypes=d.slice():this._contentTypes=[],this._contentTypes.push("application/json"),g&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=m,this._jwtHandler=g}return y.prototype.getJson=function(m,g){var E=this;if(!m)throw s.Log.error("JsonService.getJson: No url passed"),new Error("url");return s.Log.debug("JsonService.getJson, url: ",m),new Promise(function(b,P){var I=new E._XMLHttpRequest;I.open("GET",m);var D=E._contentTypes,A=E._jwtHandler;I.onload=function(){if(s.Log.debug("JsonService.getJson: HTTP response received, status",I.status),I.status===200){var R=I.getResponseHeader("Content-Type");if(R){var N=D.find(function(L){if(R.startsWith(L))return!0});if(N=="application/jwt")return void A(I).then(b,P);if(N)try{return void b(JSON.parse(I.responseText))}catch(L){return s.Log.error("JsonService.getJson: Error parsing JSON response",L.message),void P(L)}}P(Error("Invalid response Content-Type: "+R+", from URL: "+m))}else P(Error(I.statusText+" ("+I.status+")"))},I.onerror=function(){s.Log.error("JsonService.getJson: network error"),P(Error("Network Error"))},g&&(s.Log.debug("JsonService.getJson: token passed, setting Authorization header"),I.setRequestHeader("Authorization","Bearer "+g)),I.send()})},y.prototype.postForm=function(m,g,E){var b=this;if(!m)throw s.Log.error("JsonService.postForm: No url passed"),new Error("url");return s.Log.debug("JsonService.postForm, url: ",m),new Promise(function(P,I){var D=new b._XMLHttpRequest;D.open("POST",m);var A=b._contentTypes;D.onload=function(){if(s.Log.debug("JsonService.postForm: HTTP response received, status",D.status),D.status!==200){if(D.status===400&&(q=D.getResponseHeader("Content-Type"))&&A.find(function(J){if(q.startsWith(J))return!0}))try{var W=JSON.parse(D.responseText);if(W&&W.error)return s.Log.error("JsonService.postForm: Error from server: ",W.error),void I(new Error(W.error))}catch(J){return s.Log.error("JsonService.postForm: Error parsing JSON response",J.message),void I(J)}I(Error(D.statusText+" ("+D.status+")"))}else{var q;if((q=D.getResponseHeader("Content-Type"))&&A.find(function(J){if(q.startsWith(J))return!0}))try{return void P(JSON.parse(D.responseText))}catch(J){return s.Log.error("JsonService.postForm: Error parsing JSON response",J.message),void I(J)}I(Error("Invalid response Content-Type: "+q+", from URL: "+m))}},D.onerror=function(){s.Log.error("JsonService.postForm: network error"),I(Error("Network Error"))};var R="";for(var N in g){var L=g[N];L&&(R.length>0&&(R+="&"),R+=encodeURIComponent(N),R+="=",R+=encodeURIComponent(L))}D.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),E!==void 0&&D.setRequestHeader("Authorization","Basic "+btoa(E)),D.send(R)})},y}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SigninRequest=void 0;var s=i(0),a=i(3),l=i(13);n.SigninRequest=function(){function y(d){var m=d.url,g=d.client_id,E=d.redirect_uri,b=d.response_type,P=d.scope,I=d.authority,D=d.data,A=d.prompt,R=d.display,N=d.max_age,L=d.ui_locales,W=d.id_token_hint,q=d.login_hint,J=d.acr_values,ve=d.resource,Fe=d.response_mode,z=d.request,De=d.request_uri,xt=d.extraQueryParams,ft=d.request_type,Te=d.client_secret,He=d.extraTokenParams,st=d.skipUserInfo;if(function(vr,pr){if(!(vr instanceof pr))throw new TypeError("Cannot call a class as a function")}(this,y),!m)throw s.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!g)throw s.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!E)throw s.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!b)throw s.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!P)throw s.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!I)throw s.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var Ct=y.isOidc(b),$e=y.isCode(b);Fe||(Fe=y.isCode(b)?"query":null),this.state=new l.SigninState({nonce:Ct,data:D,client_id:g,authority:I,redirect_uri:E,code_verifier:$e,request_type:ft,response_mode:Fe,client_secret:Te,scope:P,extraTokenParams:He,skipUserInfo:st}),m=a.UrlUtility.addQueryParam(m,"client_id",g),m=a.UrlUtility.addQueryParam(m,"redirect_uri",E),m=a.UrlUtility.addQueryParam(m,"response_type",b),m=a.UrlUtility.addQueryParam(m,"scope",P),m=a.UrlUtility.addQueryParam(m,"state",this.state.id),Ct&&(m=a.UrlUtility.addQueryParam(m,"nonce",this.state.nonce)),$e&&(m=a.UrlUtility.addQueryParam(m,"code_challenge",this.state.code_challenge),m=a.UrlUtility.addQueryParam(m,"code_challenge_method","S256"));var Je={prompt:A,display:R,max_age:N,ui_locales:L,id_token_hint:W,login_hint:q,acr_values:J,resource:ve,request:z,request_uri:De,response_mode:Fe};for(var ke in Je)Je[ke]&&(m=a.UrlUtility.addQueryParam(m,ke,Je[ke]));for(var Xe in xt)m=a.UrlUtility.addQueryParam(m,Xe,xt[Xe]);this.url=m}return y.isOidc=function(m){return!!m.split(/\s+/g).filter(function(g){return g==="id_token"})[0]},y.isOAuth=function(m){return!!m.split(/\s+/g).filter(function(g){return g==="token"})[0]},y.isCode=function(m){return!!m.split(/\s+/g).filter(function(g){return g==="code"})[0]},y}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.State=void 0;var s=function(){function d(m,g){for(var E=0;E<g.length;E++){var b=g[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(m,b.key,b)}}return function(m,g,E){return g&&d(m.prototype,g),E&&d(m,E),m}}(),a=i(0),l=function(m){return m&&m.__esModule?m:{default:m}}(i(14));function y(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}n.State=function(){function d(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=m.id,E=m.data,b=m.created,P=m.request_type;y(this,d),this._id=g||(0,l.default)(),this._data=E,this._created=typeof b=="number"&&b>0?b:parseInt(Date.now()/1e3),this._request_type=P}return d.prototype.toStorageString=function(){return a.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},d.fromStorageString=function(g){return a.Log.debug("State.fromStorageString"),new d(JSON.parse(g))},d.clearStaleState=function(g,E){var b=Date.now()/1e3-E;return g.getAllKeys().then(function(P){a.Log.debug("State.clearStaleState: got keys",P);for(var I=[],D=function(L){var W=P[L];R=g.get(W).then(function(q){var J=!1;if(q)try{var ve=d.fromStorageString(q);a.Log.debug("State.clearStaleState: got item from key: ",W,ve.created),ve.created<=b&&(J=!0)}catch(Fe){a.Log.error("State.clearStaleState: Error parsing state for key",W,Fe.message),J=!0}else a.Log.debug("State.clearStaleState: no item in storage for key: ",W),J=!0;if(J)return a.Log.debug("State.clearStaleState: removed item for key: ",W),g.remove(W)}),I.push(R)},A=0;A<P.length;A++){var R;D(A)}return a.Log.debug("State.clearStaleState: waiting on promise count:",I.length),Promise.all(I)})},s(d,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),d}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.OidcClient=void 0;var s=function(){function D(A,R){for(var N=0;N<R.length;N++){var L=R[N];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(A,L.key,L)}}return function(A,R,N){return R&&D(A.prototype,R),N&&D(A,N),A}}(),a=i(0),l=i(5),y=i(12),d=i(8),m=i(34),g=i(35),E=i(36),b=i(13),P=i(9);function I(D,A){if(!(D instanceof A))throw new TypeError("Cannot call a class as a function")}n.OidcClient=function(){function D(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};I(this,D),A instanceof l.OidcClientSettings?this._settings=A:this._settings=new l.OidcClientSettings(A)}return D.prototype.createSigninRequest=function(){var R=this,N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},L=N.response_type,W=N.scope,q=N.redirect_uri,J=N.data,ve=N.state,Fe=N.prompt,z=N.display,De=N.max_age,xt=N.ui_locales,ft=N.id_token_hint,Te=N.login_hint,He=N.acr_values,st=N.resource,Ct=N.request,$e=N.request_uri,Je=N.response_mode,ke=N.extraQueryParams,Xe=N.extraTokenParams,vt=N.request_type,vr=N.skipUserInfo,pr=arguments[1];a.Log.debug("OidcClient.createSigninRequest");var Nt=this._settings.client_id;L=L||this._settings.response_type,W=W||this._settings.scope,q=q||this._settings.redirect_uri,Fe=Fe||this._settings.prompt,z=z||this._settings.display,De=De||this._settings.max_age,xt=xt||this._settings.ui_locales,He=He||this._settings.acr_values,st=st||this._settings.resource,Je=Je||this._settings.response_mode,ke=ke||this._settings.extraQueryParams,Xe=Xe||this._settings.extraTokenParams;var Fr=this._settings.authority;return d.SigninRequest.isCode(L)&&L!=="code"?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(ar){a.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",ar);var Pt=new d.SigninRequest({url:ar,client_id:Nt,redirect_uri:q,response_type:L,scope:W,data:J||ve,authority:Fr,prompt:Fe,display:z,max_age:De,ui_locales:xt,id_token_hint:ft,login_hint:Te,acr_values:He,resource:st,request:Ct,request_uri:$e,extraQueryParams:ke,extraTokenParams:Xe,request_type:vt,response_mode:Je,client_secret:R._settings.client_secret,skipUserInfo:vr}),Ye=Pt.state;return(pr=pr||R._stateStore).set(Ye.id,Ye.toStorageString()).then(function(){return Pt})})},D.prototype.readSigninResponseState=function(R,N){var L=arguments.length>2&&arguments[2]!==void 0&&arguments[2];a.Log.debug("OidcClient.readSigninResponseState");var W=this._settings.response_mode==="query"||!this._settings.response_mode&&d.SigninRequest.isCode(this._settings.response_type),q=W?"?":"#",J=new m.SigninResponse(R,q);if(!J.state)return a.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response"));N=N||this._stateStore;var ve=L?N.remove.bind(N):N.get.bind(N);return ve(J.state).then(function(Fe){if(!Fe)throw a.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:b.SigninState.fromStorageString(Fe),response:J}})},D.prototype.processSigninResponse=function(R,N){var L=this;return a.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(R,N,!0).then(function(W){var q=W.state,J=W.response;return a.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),L._validator.validateSigninResponse(q,J)})},D.prototype.createSignoutRequest=function(){var R=this,N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},L=N.id_token_hint,W=N.data,q=N.state,J=N.post_logout_redirect_uri,ve=N.extraQueryParams,Fe=N.request_type,z=arguments[1];return a.Log.debug("OidcClient.createSignoutRequest"),J=J||this._settings.post_logout_redirect_uri,ve=ve||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(De){if(!De)throw a.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");a.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",De);var xt=new g.SignoutRequest({url:De,id_token_hint:L,post_logout_redirect_uri:J,data:W||q,extraQueryParams:ve,request_type:Fe}),ft=xt.state;return ft&&(a.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(z=z||R._stateStore).set(ft.id,ft.toStorageString())),xt})},D.prototype.readSignoutResponseState=function(R,N){var L=arguments.length>2&&arguments[2]!==void 0&&arguments[2];a.Log.debug("OidcClient.readSignoutResponseState");var W=new E.SignoutResponse(R);if(!W.state)return a.Log.debug("OidcClient.readSignoutResponseState: No state in response"),W.error?(a.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",W.error),Promise.reject(new y.ErrorResponse(W))):Promise.resolve({state:void 0,response:W});var q=W.state;N=N||this._stateStore;var J=L?N.remove.bind(N):N.get.bind(N);return J(q).then(function(ve){if(!ve)throw a.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:P.State.fromStorageString(ve),response:W}})},D.prototype.processSignoutResponse=function(R,N){var L=this;return a.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(R,N,!0).then(function(W){var q=W.state,J=W.response;return q?(a.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),L._validator.validateSignoutResponse(q,J)):(a.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),J)})},D.prototype.clearStaleState=function(R){return a.Log.debug("OidcClient.clearStaleState"),R=R||this._stateStore,P.State.clearStaleState(R,this.settings.staleStateAge)},s(D,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),D}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenClient=void 0;var s=i(7),a=i(2),l=i(0);function y(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}n.TokenClient=function(){function d(m){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.JsonService,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a.MetadataService;if(y(this,d),!m)throw l.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=m,this._jsonService=new g,this._metadataService=new E(this._settings)}return d.prototype.exchangeCode=function(){var g=this,E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(E=Object.assign({},E)).grant_type=E.grant_type||"authorization_code",E.client_id=E.client_id||this._settings.client_id,E.client_secret=E.client_secret||this._settings.client_secret,E.redirect_uri=E.redirect_uri||this._settings.redirect_uri;var b=void 0,P=E._client_authentication||this._settings._client_authentication;return delete E._client_authentication,E.code?E.redirect_uri?E.code_verifier?E.client_id?E.client_secret||P!="client_secret_basic"?(P=="client_secret_basic"&&(b=E.client_id+":"+E.client_secret,delete E.client_id,delete E.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(I){return l.Log.debug("TokenClient.exchangeCode: Received token endpoint"),g._jsonService.postForm(I,E,b).then(function(D){return l.Log.debug("TokenClient.exchangeCode: response received"),D})})):(l.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(l.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(l.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(l.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(l.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},d.prototype.exchangeRefreshToken=function(){var g=this,E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(E=Object.assign({},E)).grant_type=E.grant_type||"refresh_token",E.client_id=E.client_id||this._settings.client_id,E.client_secret=E.client_secret||this._settings.client_secret;var b=void 0,P=E._client_authentication||this._settings._client_authentication;return delete E._client_authentication,E.refresh_token?E.client_id?(P=="client_secret_basic"&&(b=E.client_id+":"+E.client_secret,delete E.client_id,delete E.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(I){return l.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),g._jsonService.postForm(I,E,b).then(function(D){return l.Log.debug("TokenClient.exchangeRefreshToken: response received"),D})})):(l.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(l.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},d}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorResponse=void 0;var s=i(0);function a(y,d){if(!(y instanceof d))throw new TypeError("Cannot call a class as a function")}function l(y,d){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||typeof d!="object"&&typeof d!="function"?y:d}n.ErrorResponse=function(y){function d(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=m.error,E=m.error_description,b=m.error_uri,P=m.state,I=m.session_state;if(a(this,d),!g)throw s.Log.error("No error passed to ErrorResponse"),new Error("error");var D=l(this,y.call(this,E||g));return D.name="ErrorResponse",D.error=g,D.error_description=E,D.error_uri=b,D.state=P,D.session_state=I,D}return function(g,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);g.prototype=Object.create(E&&E.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(g,E):g.__proto__=E)}(d,y),d}(Error)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SigninState=void 0;var s=function(){function E(b,P){for(var I=0;I<P.length;I++){var D=P[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}return function(b,P,I){return P&&E(b.prototype,P),I&&E(b,I),b}}(),a=i(0),l=i(9),y=i(4),d=function(b){return b&&b.__esModule?b:{default:b}}(i(14));function m(E,b){if(!(E instanceof b))throw new TypeError("Cannot call a class as a function")}function g(E,b){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||typeof b!="object"&&typeof b!="function"?E:b}n.SigninState=function(E){function b(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},I=P.nonce,D=P.authority,A=P.client_id,R=P.redirect_uri,N=P.code_verifier,L=P.response_mode,W=P.client_secret,q=P.scope,J=P.extraTokenParams,ve=P.skipUserInfo;m(this,b);var Fe=g(this,E.call(this,arguments[0]));if(I===!0?Fe._nonce=(0,d.default)():I&&(Fe._nonce=I),N===!0?Fe._code_verifier=(0,d.default)()+(0,d.default)()+(0,d.default)():N&&(Fe._code_verifier=N),Fe.code_verifier){var z=y.JoseUtil.hashString(Fe.code_verifier,"SHA256");Fe._code_challenge=y.JoseUtil.hexToBase64Url(z)}return Fe._redirect_uri=R,Fe._authority=D,Fe._client_id=A,Fe._response_mode=L,Fe._client_secret=W,Fe._scope=q,Fe._extraTokenParams=J,Fe._skipUserInfo=ve,Fe}return function(I,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);I.prototype=Object.create(D&&D.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(I,D):I.__proto__=D)}(b,E),b.prototype.toStorageString=function(){return a.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},b.fromStorageString=function(I){return a.Log.debug("SigninState.fromStorageString"),new b(JSON.parse(I))},s(b,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),b}(l.State)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return(s!="undefined"&&s!==null&&s.getRandomValues!==void 0?a:l)().replace(/-/g,"")};var s=typeof window<"u"?window.crypto||window.msCrypto:null;function a(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(y){return(y^s.getRandomValues(new Uint8Array(1))[0]&15>>y/4).toString(16)})}function l(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(y){return(y^16*Math.random()>>y/4).toString(16)})}r.exports=n.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.User=void 0;var s=function(){function l(y,d){for(var m=0;m<d.length;m++){var g=d[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(y,g.key,g)}}return function(y,d,m){return d&&l(y.prototype,d),m&&l(y,m),y}}(),a=i(0);n.User=function(){function l(y){var d=y.id_token,m=y.session_state,g=y.access_token,E=y.refresh_token,b=y.token_type,P=y.scope,I=y.profile,D=y.expires_at,A=y.state;(function(N,L){if(!(N instanceof L))throw new TypeError("Cannot call a class as a function")})(this,l),this.id_token=d,this.session_state=m,this.access_token=g,this.refresh_token=E,this.token_type=b,this.scope=P,this.profile=I,this.expires_at=D,this.state=A}return l.prototype.toStorageString=function(){return a.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},l.fromStorageString=function(d){return a.Log.debug("User.fromStorageString"),new l(JSON.parse(d))},s(l,[{key:"expires_in",get:function(){if(this.expires_at){var d=parseInt(Date.now()/1e3);return this.expires_at-d}},set:function(d){var m=parseInt(d);if(typeof m=="number"&&m>0){var g=parseInt(Date.now()/1e3);this.expires_at=g+m}}},{key:"expired",get:function(){var d=this.expires_in;if(d!==void 0)return d<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),l}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.AccessTokenEvents=void 0;var s=i(0),a=i(46);function l(y,d){if(!(y instanceof d))throw new TypeError("Cannot call a class as a function")}n.AccessTokenEvents=function(){function y(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=d.accessTokenExpiringNotificationTime,g=m===void 0?60:m,E=d.accessTokenExpiringTimer,b=E===void 0?new a.Timer("Access token expiring"):E,P=d.accessTokenExpiredTimer,I=P===void 0?new a.Timer("Access token expired"):P;l(this,y),this._accessTokenExpiringNotificationTime=g,this._accessTokenExpiring=b,this._accessTokenExpired=I}return y.prototype.load=function(m){if(m.access_token&&m.expires_in!==void 0){var g=m.expires_in;if(s.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",g),g>0){var E=g-this._accessTokenExpiringNotificationTime;E<=0&&(E=1),s.Log.debug("AccessTokenEvents.load: registering expiring timer in:",E),this._accessTokenExpiring.init(E)}else s.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var b=g+1;s.Log.debug("AccessTokenEvents.load: registering expired timer in:",b),this._accessTokenExpired.init(b)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},y.prototype.unload=function(){s.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},y.prototype.addAccessTokenExpiring=function(m){this._accessTokenExpiring.addHandler(m)},y.prototype.removeAccessTokenExpiring=function(m){this._accessTokenExpiring.removeHandler(m)},y.prototype.addAccessTokenExpired=function(m){this._accessTokenExpired.addHandler(m)},y.prototype.removeAccessTokenExpired=function(m){this._accessTokenExpired.removeHandler(m)},y}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.Event=void 0;var s=i(0);n.Event=function(){function a(l){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,a),this._name=l,this._callbacks=[]}return a.prototype.addHandler=function(y){this._callbacks.push(y)},a.prototype.removeHandler=function(y){var d=this._callbacks.findIndex(function(m){return m===y});d>=0&&this._callbacks.splice(d,1)},a.prototype.raise=function(){s.Log.debug("Event: Raising event: "+this._name);for(var y=0;y<this._callbacks.length;y++){var d;(d=this._callbacks)[y].apply(d,arguments)}},a}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SessionMonitor=void 0;var s=function(){function m(g,E){for(var b=0;b<E.length;b++){var P=E[b];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(g,P.key,P)}}return function(g,E,b){return E&&m(g.prototype,E),b&&m(g,b),g}}(),a=i(0),l=i(19),y=i(1);function d(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}n.SessionMonitor=function(){function m(g){var E=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.CheckSessionIFrame,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.Global.timer;if(d(this,m),!g)throw a.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=g,this._CheckSessionIFrameCtor=b,this._timer=P,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then(function(I){I?E._start(I):E._settings.monitorAnonymousSession&&E._userManager.querySessionStatus().then(function(D){var A={session_state:D.session_state};D.sub&&D.sid&&(A.profile={sub:D.sub,sid:D.sid}),E._start(A)}).catch(function(D){a.Log.error("SessionMonitor ctor: error from querySessionStatus:",D.message)})}).catch(function(I){a.Log.error("SessionMonitor ctor: error from getUser:",I.message)}))}return m.prototype._start=function(E){var b=this,P=E.session_state;P&&(E.profile?(this._sub=E.profile.sub,this._sid=E.profile.sid,a.Log.debug("SessionMonitor._start: session_state:",P,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,a.Log.debug("SessionMonitor._start: session_state:",P,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(P):this._metadataService.getCheckSessionIframe().then(function(I){if(I){a.Log.debug("SessionMonitor._start: Initializing check session iframe");var D=b._client_id,A=b._checkSessionInterval,R=b._stopCheckSessionOnError;b._checkSessionIFrame=new b._CheckSessionIFrameCtor(b._callback.bind(b),D,I,A,R),b._checkSessionIFrame.load().then(function(){b._checkSessionIFrame.start(P)})}else a.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(I){a.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",I.message)}))},m.prototype._stop=function(){var E=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(a.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var b=this._timer.setInterval(function(){E._timer.clearInterval(b),E._userManager.querySessionStatus().then(function(P){var I={session_state:P.session_state};P.sub&&P.sid&&(I.profile={sub:P.sub,sid:P.sid}),E._start(I)}).catch(function(P){a.Log.error("SessionMonitor: error from querySessionStatus:",P.message)})},1e3)},m.prototype._callback=function(){var E=this;this._userManager.querySessionStatus().then(function(b){var P=!0;b?b.sub===E._sub?(P=!1,E._checkSessionIFrame.start(b.session_state),b.sid===E._sid?a.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",b.session_state):(a.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",b.session_state),E._userManager.events._raiseUserSessionChanged())):a.Log.debug("SessionMonitor._callback: Different subject signed into OP:",b.sub):a.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),P&&(E._sub?(a.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),E._userManager.events._raiseUserSignedOut()):(a.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),E._userManager.events._raiseUserSignedIn()))}).catch(function(b){E._sub&&(a.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",b.message),E._userManager.events._raiseUserSignedOut())})},s(m,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),m}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.CheckSessionIFrame=void 0;var s=i(0);function a(l,y){if(!(l instanceof y))throw new TypeError("Cannot call a class as a function")}n.CheckSessionIFrame=function(){function l(y,d,m,g){var E=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];a(this,l),this._callback=y,this._client_id=d,this._url=m,this._interval=g||2e3,this._stopOnError=E;var b=m.indexOf("/",m.indexOf("//")+2);this._frame_origin=m.substr(0,b),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=m}return l.prototype.load=function(){var d=this;return new Promise(function(m){d._frame.onload=function(){m()},window.document.body.appendChild(d._frame),d._boundMessageEvent=d._message.bind(d),window.addEventListener("message",d._boundMessageEvent,!1)})},l.prototype._message=function(d){d.origin===this._frame_origin&&d.source===this._frame.contentWindow&&(d.data==="error"?(s.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):d.data==="changed"?(s.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):s.Log.debug("CheckSessionIFrame: "+d.data+" message from check session op iframe"))},l.prototype.start=function(d){var m=this;if(this._session_state!==d){s.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=d;var g=function(){m._frame.contentWindow.postMessage(m._client_id+" "+m._session_state,m._frame_origin)};g(),this._timer=window.setInterval(g,this._interval)}},l.prototype.stop=function(){this._session_state=null,this._timer&&(s.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},l}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenRevocationClient=void 0;var s=i(0),a=i(2),l=i(1);function y(g,E){if(!(g instanceof E))throw new TypeError("Cannot call a class as a function")}var d="access_token",m="refresh_token";n.TokenRevocationClient=function(){function g(E){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.Global.XMLHttpRequest,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a.MetadataService;if(y(this,g),!E)throw s.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=E,this._XMLHttpRequestCtor=b,this._metadataService=new P(this._settings)}return g.prototype.revoke=function(b,P){var I=this,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"access_token";if(!b)throw s.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if(D!==d&&D!=m)throw s.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(A){if(A){s.Log.debug("TokenRevocationClient.revoke: Revoking "+D);var R=I._settings.client_id,N=I._settings.client_secret;return I._revoke(A,R,N,b,D)}if(P)throw s.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},g.prototype._revoke=function(b,P,I,D,A){var R=this;return new Promise(function(N,L){var W=new R._XMLHttpRequestCtor;W.open("POST",b),W.onload=function(){s.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",W.status),W.status===200?N():L(Error(W.statusText+" ("+W.status+")"))},W.onerror=function(){s.Log.debug("TokenRevocationClient.revoke: Network Error."),L("Network Error")};var q="client_id="+encodeURIComponent(P);I&&(q+="&client_secret="+encodeURIComponent(I)),q+="&token_type_hint="+encodeURIComponent(A),q+="&token="+encodeURIComponent(D),W.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),W.send(q)})},g}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.CordovaPopupWindow=void 0;var s=function(){function l(y,d){for(var m=0;m<d.length;m++){var g=d[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(y,g.key,g)}}return function(y,d,m){return d&&l(y.prototype,d),m&&l(y,m),y}}(),a=i(0);n.CordovaPopupWindow=function(){function l(y){var d=this;(function(g,E){if(!(g instanceof E))throw new TypeError("Cannot call a class as a function")})(this,l),this._promise=new Promise(function(m,g){d._resolve=m,d._reject=g}),this.features=y.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=y.popupWindowTarget||"_blank",this.redirect_uri=y.startUrl,a.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return l.prototype._isInAppBrowserInstalled=function(d){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(m){return d.hasOwnProperty(m)})},l.prototype.navigate=function(d){if(d&&d.url){if(!window.cordova)return this._error("cordova is undefined");var m=window.cordova.require("cordova/plugin_list").metadata;if(this._isInAppBrowserInstalled(m)===!1)return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(d.url,this.target,this.features),this._popup?(a.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},l.prototype._loadStartCallback=function(d){d.url.indexOf(this.redirect_uri)===0&&this._success({url:d.url})},l.prototype._exitCallback=function(d){this._error(d)},l.prototype._success=function(d){this._cleanup(),a.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(d)},l.prototype._error=function(d){this._cleanup(),a.Log.error(d),this._reject(new Error(d))},l.prototype.close=function(){this._cleanup()},l.prototype._cleanup=function(){this._popup&&(a.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},s(l,[{key:"promise",get:function(){return this._promise}}]),l}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(0),a=i(10),l=i(5),y=i(6),d=i(37),m=i(38),g=i(16),E=i(2),b=i(48),P=i(49),I=i(19),D=i(20),A=i(18),R=i(1),N=i(15),L=i(50);n.default={Version:L.Version,Log:s.Log,OidcClient:a.OidcClient,OidcClientSettings:l.OidcClientSettings,WebStorageStateStore:y.WebStorageStateStore,InMemoryWebStorage:d.InMemoryWebStorage,UserManager:m.UserManager,AccessTokenEvents:g.AccessTokenEvents,MetadataService:E.MetadataService,CordovaPopupNavigator:b.CordovaPopupNavigator,CordovaIFrameNavigator:P.CordovaIFrameNavigator,CheckSessionIFrame:I.CheckSessionIFrame,TokenRevocationClient:D.TokenRevocationClient,SessionMonitor:A.SessionMonitor,Global:R.Global,User:N.User},r.exports=n.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.ClockService=function(){function s(){(function(l,y){if(!(l instanceof y))throw new TypeError("Cannot call a class as a function")})(this,s)}return s.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},s}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.ResponseValidator=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},a=i(0),l=i(2),y=i(25),d=i(11),m=i(12),g=i(4);function E(P,I){if(!(P instanceof I))throw new TypeError("Cannot call a class as a function")}var b=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];n.ResponseValidator=function(){function P(I){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.MetadataService,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.UserInfoService,R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:g.JoseUtil,N=arguments.length>4&&arguments[4]!==void 0?arguments[4]:d.TokenClient;if(E(this,P),!I)throw a.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=I,this._metadataService=new D(this._settings),this._userInfoService=new A(this._settings),this._joseUtil=R,this._tokenClient=new N(this._settings)}return P.prototype.validateSigninResponse=function(D,A){var R=this;return a.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(D,A).then(function(N){return a.Log.debug("ResponseValidator.validateSigninResponse: state processed"),R._validateTokens(D,N).then(function(L){return a.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),R._processClaims(D,L).then(function(W){return a.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),W})})})},P.prototype.validateSignoutResponse=function(D,A){return D.id!==A.state?(a.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(a.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),A.state=D.data,A.error?(a.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",A.error),Promise.reject(new m.ErrorResponse(A))):Promise.resolve(A))},P.prototype._processSigninParams=function(D,A){if(D.id!==A.state)return a.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!D.client_id)return a.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!D.authority)return a.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==D.authority)return a.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=D.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==D.client_id)return a.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=D.client_id;return a.Log.debug("ResponseValidator._processSigninParams: state validated"),A.state=D.data,A.error?(a.Log.warn("ResponseValidator._processSigninParams: Response was error",A.error),Promise.reject(new m.ErrorResponse(A))):D.nonce&&!A.id_token?(a.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!D.nonce&&A.id_token?(a.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):D.code_verifier&&!A.code?(a.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!D.code_verifier&&A.code?(a.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(A.scope||(A.scope=D.scope),Promise.resolve(A))},P.prototype._processClaims=function(D,A){var R=this;if(A.isOpenIdConnect){if(a.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),A.profile=this._filterProtocolClaims(A.profile),D.skipUserInfo!==!0&&this._settings.loadUserInfo&&A.access_token)return a.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(A.access_token).then(function(N){return a.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),N.sub!==A.profile.sub?(a.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(A.profile=R._mergeClaims(A.profile,N),a.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",A.profile),A)});a.Log.debug("ResponseValidator._processClaims: not loading user info")}else a.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(A)},P.prototype._mergeClaims=function(D,A){var R=Object.assign({},D);for(var N in A){var L=A[N];Array.isArray(L)||(L=[L]);for(var W=0;W<L.length;W++){var q=L[W];R[N]?Array.isArray(R[N])?R[N].indexOf(q)<0&&R[N].push(q):R[N]!==q&&((q===void 0?"undefined":s(q))==="object"&&this._settings.mergeClaims?R[N]=this._mergeClaims(R[N],q):R[N]=[R[N],q]):R[N]=q}}return R},P.prototype._filterProtocolClaims=function(D){a.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",D);var A=Object.assign({},D);return this._settings._filterProtocolClaims?(b.forEach(function(R){delete A[R]}),a.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",A)):a.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),A},P.prototype._validateTokens=function(D,A){return A.code?(a.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(D,A)):A.id_token?A.access_token?(a.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(D,A)):(a.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(D,A)):(a.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(A))},P.prototype._processCode=function(D,A){var R=this,N={client_id:D.client_id,client_secret:D.client_secret,code:A.code,redirect_uri:D.redirect_uri,code_verifier:D.code_verifier};return D.extraTokenParams&&s(D.extraTokenParams)==="object"&&Object.assign(N,D.extraTokenParams),this._tokenClient.exchangeCode(N).then(function(L){for(var W in L)A[W]=L[W];return A.id_token?(a.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),R._validateIdTokenAttributes(D,A)):(a.Log.debug("ResponseValidator._processCode: token response successful, returning response"),A)})},P.prototype._validateIdTokenAttributes=function(D,A){var R=this;return this._metadataService.getIssuer().then(function(N){var L=D.client_id,W=R._settings.clockSkew;return a.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",W),R._settings.getEpochTime().then(function(q){return R._joseUtil.validateJwtAttributes(A.id_token,N,L,W,q).then(function(J){return D.nonce&&D.nonce!==J.nonce?(a.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):J.sub?(A.profile=J,A):(a.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},P.prototype._validateIdTokenAndAccessToken=function(D,A){var R=this;return this._validateIdToken(D,A).then(function(N){return R._validateAccessToken(N)})},P.prototype._getSigningKeyForJwt=function(D){var A=this;return this._metadataService.getSigningKeys().then(function(R){var N=D.header.kid;if(!R)return a.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));a.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var L=void 0;if(N)L=R.filter(function(W){return W.kid===N})[0];else{if((R=A._filterByAlg(R,D.header.alg)).length>1)return a.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));L=R[0]}return Promise.resolve(L)})},P.prototype._getSigningKeyForJwtWithSingleRetry=function(D){var A=this;return this._getSigningKeyForJwt(D).then(function(R){return R?Promise.resolve(R):(A._metadataService.resetSigningKeys(),A._getSigningKeyForJwt(D))})},P.prototype._validateIdToken=function(D,A){var R=this;if(!D.nonce)return a.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var N=this._joseUtil.parseJwt(A.id_token);return N&&N.header&&N.payload?D.nonce!==N.payload.nonce?(a.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then(function(L){return a.Log.debug("ResponseValidator._validateIdToken: Received issuer"),R._getSigningKeyForJwtWithSingleRetry(N).then(function(W){if(!W)return a.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var q=D.client_id,J=R._settings.clockSkew;return a.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",J),R._joseUtil.validateJwt(A.id_token,W,L,q,J).then(function(){return a.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),N.payload.sub?(A.profile=N.payload,A):(a.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})}):(a.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",N),Promise.reject(new Error("Failed to parse id_token")))},P.prototype._filterByAlg=function(D,A){var R=null;if(A.startsWith("RS"))R="RSA";else if(A.startsWith("PS"))R="PS";else{if(!A.startsWith("ES"))return a.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",A),[];R="EC"}return a.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",R),D=D.filter(function(N){return N.kty===R}),a.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",R,D.length),D},P.prototype._validateAccessToken=function(D){if(!D.profile)return a.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!D.profile.at_hash)return a.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!D.id_token)return a.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var A=this._joseUtil.parseJwt(D.id_token);if(!A||!A.header)return a.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",A),Promise.reject(new Error("Failed to parse id_token"));var R=A.header.alg;if(!R||R.length!==5)return a.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",R),Promise.reject(new Error("Unsupported alg: "+R));var N=R.substr(2,3);if(!N)return a.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",R,N),Promise.reject(new Error("Unsupported alg: "+R));if((N=parseInt(N))!==256&&N!==384&&N!==512)return a.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",R,N),Promise.reject(new Error("Unsupported alg: "+R));var L="sha"+N,W=this._joseUtil.hashString(D.access_token,L);if(!W)return a.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",L),Promise.reject(new Error("Failed to validate at_hash"));var q=W.substr(0,W.length/2),J=this._joseUtil.hexToBase64Url(q);return J!==D.profile.at_hash?(a.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",J,D.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(a.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(D))},P}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.UserInfoService=void 0;var s=i(7),a=i(2),l=i(0),y=i(4);function d(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}n.UserInfoService=function(){function m(g){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.JsonService,b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a.MetadataService,P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:y.JoseUtil;if(d(this,m),!g)throw l.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=g,this._jsonService=new E(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new b(this._settings),this._joseUtil=P}return m.prototype.getClaims=function(E){var b=this;return E?this._metadataService.getUserInfoEndpoint().then(function(P){return l.Log.debug("UserInfoService.getClaims: received userinfo url",P),b._jsonService.getJson(P,E).then(function(I){return l.Log.debug("UserInfoService.getClaims: claims received",I),I})}):(l.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},m.prototype._getClaimsFromJwt=function(E){var b=this;try{var P=this._joseUtil.parseJwt(E.responseText);if(!P||!P.header||!P.payload)return l.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",P),Promise.reject(new Error("Failed to parse id_token"));var I=P.header.kid,D=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":D=this._metadataService.getIssuer();break;case"ANY":D=Promise.resolve(P.payload.iss);break;default:D=Promise.resolve(this._settings.userInfoJwtIssuer)}return D.then(function(A){return l.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+A),b._metadataService.getSigningKeys().then(function(R){if(!R)return l.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));l.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var N=void 0;if(I)N=R.filter(function(q){return q.kid===I})[0];else{if((R=b._filterByAlg(R,P.header.alg)).length>1)return l.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));N=R[0]}if(!N)return l.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var L=b._settings.client_id,W=b._settings.clockSkew;return l.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",W),b._joseUtil.validateJwt(E.responseText,N,A,L,W,void 0,!0).then(function(){return l.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),P.payload})})})}catch(A){return l.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",A.message),void reject(A)}},m.prototype._filterByAlg=function(E,b){var P=null;if(b.startsWith("RS"))P="RSA";else if(b.startsWith("PS"))P="PS";else{if(!b.startsWith("ES"))return l.Log.debug("UserInfoService._filterByAlg: alg not supported: ",b),[];P="EC"}return l.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",P),E=E.filter(function(I){return I.kty===P}),l.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",P,E.length),E},m}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.AllowedSigningAlgs=n.b64tohex=n.hextob64u=n.crypto=n.X509=n.KeyUtil=n.jws=void 0;var s=i(27);n.jws=s.jws,n.KeyUtil=s.KEYUTIL,n.X509=s.X509,n.crypto=s.crypto,n.hextob64u=s.hextob64u,n.b64tohex=s.b64tohex,n.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(r,n,i){(function(s){Object.defineProperty(n,"__esModule",{value:!0});var a,l,y,d,m,g,E,b,P,I,D,A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},R={userAgent:!1},N={},L=L||(a=Math,y=(l={}).lib={},d=y.Base=function(){function f(){}return{extend:function(p){f.prototype=this;var v=new f;return p&&v.mixIn(p),v.hasOwnProperty("init")||(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var p=this.extend();return p.init.apply(p,arguments),p},init:function(){},mixIn:function(p){for(var v in p)p.hasOwnProperty(v)&&(this[v]=p[v]);p.hasOwnProperty("toString")&&(this.toString=p.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),m=y.WordArray=d.extend({init:function(c,p){c=this.words=c||[],this.sigBytes=p??4*c.length},toString:function(c){return(c||E).stringify(this)},concat:function(c){var p=this.words,v=c.words,O=this.sigBytes,$=c.sigBytes;if(this.clamp(),O%4)for(var X=0;X<$;X++){var ue=v[X>>>2]>>>24-X%4*8&255;p[O+X>>>2]|=ue<<24-(O+X)%4*8}else for(X=0;X<$;X+=4)p[O+X>>>2]=v[X>>>2];return this.sigBytes+=$,this},clamp:function(){var c=this.words,p=this.sigBytes;c[p>>>2]&=4294967295<<32-p%4*8,c.length=a.ceil(p/4)},clone:function(){var c=d.clone.call(this);return c.words=this.words.slice(0),c},random:function(c){for(var p=[],v=0;v<c;v+=4)p.push(4294967296*a.random()|0);return new m.init(p,c)}}),g=l.enc={},E=g.Hex={stringify:function(c){for(var p=c.words,v=c.sigBytes,O=[],$=0;$<v;$++){var X=p[$>>>2]>>>24-$%4*8&255;O.push((X>>>4).toString(16)),O.push((15&X).toString(16))}return O.join("")},parse:function(c){for(var p=c.length,v=[],O=0;O<p;O+=2)v[O>>>3]|=parseInt(c.substr(O,2),16)<<24-O%8*4;return new m.init(v,p/2)}},b=g.Latin1={stringify:function(c){for(var p=c.words,v=c.sigBytes,O=[],$=0;$<v;$++){var X=p[$>>>2]>>>24-$%4*8&255;O.push(String.fromCharCode(X))}return O.join("")},parse:function(c){for(var p=c.length,v=[],O=0;O<p;O++)v[O>>>2]|=(255&c.charCodeAt(O))<<24-O%4*8;return new m.init(v,p)}},P=g.Utf8={stringify:function(c){try{return decodeURIComponent(escape(b.stringify(c)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(c){return b.parse(unescape(encodeURIComponent(c)))}},I=y.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new m.init,this._nDataBytes=0},_append:function(c){typeof c=="string"&&(c=P.parse(c)),this._data.concat(c),this._nDataBytes+=c.sigBytes},_process:function(c){var p=this._data,v=p.words,O=p.sigBytes,$=this.blockSize,X=O/(4*$),ue=(X=c?a.ceil(X):a.max((0|X)-this._minBufferSize,0))*$,se=a.min(4*ue,O);if(ue){for(var le=0;le<ue;le+=$)this._doProcessBlock(v,le);var fe=v.splice(0,ue);p.sigBytes-=se}return new m.init(fe,se)},clone:function(){var c=d.clone.call(this);return c._data=this._data.clone(),c},_minBufferSize:0}),y.Hasher=I.extend({cfg:d.extend(),init:function(c){this.cfg=this.cfg.extend(c),this.reset()},reset:function(){I.reset.call(this),this._doReset()},update:function(c){return this._append(c),this._process(),this},finalize:function(c){return c&&this._append(c),this._doFinalize()},blockSize:16,_createHelper:function(c){return function(p,v){return new c.init(v).finalize(p)}},_createHmacHelper:function(c){return function(p,v){return new D.HMAC.init(c,v).finalize(p)}}}),D=l.algo={},l);(function(f){var c,p=(c=L).lib,v=p.Base,O=p.WordArray;(c=c.x64={}).Word=v.extend({init:function(X,ue){this.high=X,this.low=ue}}),c.WordArray=v.extend({init:function(X,ue){X=this.words=X||[],this.sigBytes=ue??8*X.length},toX32:function(){for(var X=this.words,ue=X.length,se=[],le=0;le<ue;le++){var fe=X[le];se.push(fe.high),se.push(fe.low)}return O.create(se,this.sigBytes)},clone:function(){for(var X=v.clone.call(this),ue=X.words=this.words.slice(0),se=ue.length,le=0;le<se;le++)ue[le]=ue[le].clone();return X}})})(),function(){var f=L,c=f.lib.WordArray;f.enc.Base64={stringify:function(v){var O=v.words,$=v.sigBytes,X=this._map;v.clamp(),v=[];for(var ue=0;ue<$;ue+=3)for(var se=(O[ue>>>2]>>>24-ue%4*8&255)<<16|(O[ue+1>>>2]>>>24-(ue+1)%4*8&255)<<8|O[ue+2>>>2]>>>24-(ue+2)%4*8&255,le=0;4>le&&ue+.75*le<$;le++)v.push(X.charAt(se>>>6*(3-le)&63));if(O=X.charAt(64))for(;v.length%4;)v.push(O);return v.join("")},parse:function(v){var O=v.length,$=this._map;(X=$.charAt(64))&&(X=v.indexOf(X))!=-1&&(O=X);for(var X=[],ue=0,se=0;se<O;se++)if(se%4){var le=$.indexOf(v.charAt(se-1))<<se%4*2,fe=$.indexOf(v.charAt(se))>>>6-se%4*2;X[ue>>>2]|=(le|fe)<<24-ue%4*8,ue++}return c.create(X,ue)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(f){for(var c=L,p=(O=c.lib).WordArray,v=O.Hasher,O=c.algo,$=[],X=[],ue=function(Ke){return 4294967296*(Ke-(0|Ke))|0},se=2,le=0;64>le;){var fe;e:{fe=se;for(var ye=f.sqrt(fe),Se=2;Se<=ye;Se++)if(!(fe%Se)){fe=!1;break e}fe=!0}fe&&(8>le&&($[le]=ue(f.pow(se,.5))),X[le]=ue(f.pow(se,1/3)),le++),se++}var Ce=[];O=O.SHA256=v.extend({_doReset:function(){this._hash=new p.init($.slice(0))},_doProcessBlock:function(Ke,ze){for(var Z=this._hash.words,he=Z[0],me=Z[1],_e=Z[2],Be=Z[3],Ge=Z[4],Dt=Z[5],ut=Z[6],Ar=Z[7],kt=0;64>kt;kt++){if(16>kt)Ce[kt]=0|Ke[ze+kt];else{var Zt=Ce[kt-15],Zr=Ce[kt-2];Ce[kt]=((Zt<<25|Zt>>>7)^(Zt<<14|Zt>>>18)^Zt>>>3)+Ce[kt-7]+((Zr<<15|Zr>>>17)^(Zr<<13|Zr>>>19)^Zr>>>10)+Ce[kt-16]}Zt=Ar+((Ge<<26|Ge>>>6)^(Ge<<21|Ge>>>11)^(Ge<<7|Ge>>>25))+(Ge&Dt^~Ge&ut)+X[kt]+Ce[kt],Zr=((he<<30|he>>>2)^(he<<19|he>>>13)^(he<<10|he>>>22))+(he&me^he&_e^me&_e),Ar=ut,ut=Dt,Dt=Ge,Ge=Be+Zt|0,Be=_e,_e=me,me=he,he=Zt+Zr|0}Z[0]=Z[0]+he|0,Z[1]=Z[1]+me|0,Z[2]=Z[2]+_e|0,Z[3]=Z[3]+Be|0,Z[4]=Z[4]+Ge|0,Z[5]=Z[5]+Dt|0,Z[6]=Z[6]+ut|0,Z[7]=Z[7]+Ar|0},_doFinalize:function(){var Ke=this._data,ze=Ke.words,Z=8*this._nDataBytes,he=8*Ke.sigBytes;return ze[he>>>5]|=128<<24-he%32,ze[14+(he+64>>>9<<4)]=f.floor(Z/4294967296),ze[15+(he+64>>>9<<4)]=Z,Ke.sigBytes=4*ze.length,this._process(),this._hash},clone:function(){var Ke=v.clone.call(this);return Ke._hash=this._hash.clone(),Ke}}),c.SHA256=v._createHelper(O),c.HmacSHA256=v._createHmacHelper(O)}(Math),function(){function f(){return v.create.apply(v,arguments)}for(var c=L,p=c.lib.Hasher,v=($=c.x64).Word,O=$.WordArray,$=c.algo,X=[f(1116352408,3609767458),f(1899447441,602891725),f(3049323471,3964484399),f(3921009573,2173295548),f(961987163,4081628472),f(1508970993,3053834265),f(2453635748,2937671579),f(2870763221,3664609560),f(3624381080,2734883394),f(310598401,1164996542),f(607225278,1323610764),f(1426881987,3590304994),f(1925078388,4068182383),f(2162078206,991336113),f(2614888103,633803317),f(3248222580,3479774868),f(3835390401,2666613458),f(4022224774,944711139),f(264347078,2341262773),f(604807628,2007800933),f(770255983,1495990901),f(1249150122,1856431235),f(1555081692,3175218132),f(1996064986,2198950837),f(2554220882,3999719339),f(2821834349,766784016),f(2952996808,2566594879),f(3210313671,3203337956),f(3336571891,1034457026),f(3584528711,2466948901),f(113926993,3758326383),f(338241895,168717936),f(666307205,1188179964),f(773529912,1546045734),f(1294757372,1522805485),f(1396182291,2643833823),f(1695183700,2343527390),f(1986661051,1014477480),f(2177026350,1206759142),f(2456956037,344077627),f(2730485921,1290863460),f(2820302411,3158454273),f(3259730800,3505952657),f(3345764771,106217008),f(3516065817,3606008344),f(3600352804,1432725776),f(4094571909,1467031594),f(275423344,851169720),f(430227734,3100823752),f(506948616,1363258195),f(659060556,3750685593),f(883997877,3785050280),f(958139571,3318307427),f(1322822218,3812723403),f(1537002063,2003034995),f(1747873779,3602036899),f(1955562222,1575990012),f(2024104815,1125592928),f(2227730452,2716904306),f(2361852424,442776044),f(2428436474,593698344),f(2756734187,3733110249),f(3204031479,2999351573),f(3329325298,3815920427),f(3391569614,3928383900),f(3515267271,566280711),f(3940187606,3454069534),f(4118630271,4000239992),f(116418474,1914138554),f(174292421,2731055270),f(289380356,3203993006),f(460393269,320620315),f(685471733,587496836),f(852142971,1086792851),f(1017036298,365543100),f(1126000580,2618297676),f(1288033470,3409855158),f(1501505948,4234509866),f(1607167915,987167468),f(1816402316,1246189591)],ue=[],se=0;80>se;se++)ue[se]=f();$=$.SHA512=p.extend({_doReset:function(){this._hash=new O.init([new v.init(1779033703,4089235720),new v.init(3144134277,2227873595),new v.init(1013904242,4271175723),new v.init(2773480762,1595750129),new v.init(1359893119,2917565137),new v.init(2600822924,725511199),new v.init(528734635,4215389547),new v.init(1541459225,327033209)])},_doProcessBlock:function(fe,ye){for(var Se=(me=this._hash.words)[0],Ce=me[1],Ne=me[2],Ke=me[3],ze=me[4],Z=me[5],he=me[6],me=me[7],_e=Se.high,Be=Se.low,Ge=Ce.high,Dt=Ce.low,ut=Ne.high,Ar=Ne.low,kt=Ke.high,Zt=Ke.low,Zr=ze.high,zr=ze.low,Vr=Z.high,nr=Z.low,Gr=he.high,xr=he.low,jr=me.high,br=me.low,on=_e,sn=Be,Tr=Ge,so=Dt,ei=ut,ao=Ar,fn=kt,uo=Zt,ti=Zr,li=zr,Ui=Vr,Ei=nr,Bo=Gr,gn=xr,x=jr,V=br,Q=0;80>Q;Q++){var ie=ue[Q];if(16>Q)var be=ie.high=0|fe[ye+2*Q],ae=ie.low=0|fe[ye+2*Q+1];else{be=((ae=(be=ue[Q-15]).high)>>>1|(Ee=be.low)<<31)^(ae>>>8|Ee<<24)^ae>>>7;var Ee=(Ee>>>1|ae<<31)^(Ee>>>8|ae<<24)^(Ee>>>7|ae<<25),Qe=((ae=(Qe=ue[Q-2]).high)>>>19|(Ve=Qe.low)<<13)^(ae<<3|Ve>>>29)^ae>>>6,Ve=(Ve>>>19|ae<<13)^(Ve<<3|ae>>>29)^(Ve>>>6|ae<<26),Ze=(ae=ue[Q-7]).high,pt=(lt=ue[Q-16]).high,lt=lt.low;be=(be=(be=be+Ze+((ae=Ee+ae.low)>>>0<Ee>>>0?1:0))+Qe+((ae=ae+Ve)>>>0<Ve>>>0?1:0))+pt+((ae=ae+lt)>>>0<lt>>>0?1:0),ie.high=be,ie.low=ae}Ze=ti&Ui^~ti&Bo,lt=li&Ei^~li&gn,ie=on&Tr^on&ei^Tr&ei;var gt=sn&so^sn&ao^so&ao,nt=(Ee=(on>>>28|sn<<4)^(on<<30|sn>>>2)^(on<<25|sn>>>7),Qe=(sn>>>28|on<<4)^(sn<<30|on>>>2)^(sn<<25|on>>>7),(Ve=X[Q]).high),yt=Ve.low;pt=x+((ti>>>14|li<<18)^(ti>>>18|li<<14)^(ti<<23|li>>>9))+((Ve=V+((li>>>14|ti<<18)^(li>>>18|ti<<14)^(li<<23|ti>>>9)))>>>0<V>>>0?1:0),x=Bo,V=gn,Bo=Ui,gn=Ei,Ui=ti,Ei=li,ti=fn+(pt=(pt=(pt=pt+Ze+((Ve=Ve+lt)>>>0<lt>>>0?1:0))+nt+((Ve=Ve+yt)>>>0<yt>>>0?1:0))+be+((Ve=Ve+ae)>>>0<ae>>>0?1:0))+((li=uo+Ve|0)>>>0<uo>>>0?1:0)|0,fn=ei,uo=ao,ei=Tr,ao=so,Tr=on,so=sn,on=pt+(ie=Ee+ie+((ae=Qe+gt)>>>0<Qe>>>0?1:0))+((sn=Ve+ae|0)>>>0<Ve>>>0?1:0)|0}Be=Se.low=Be+sn,Se.high=_e+on+(Be>>>0<sn>>>0?1:0),Dt=Ce.low=Dt+so,Ce.high=Ge+Tr+(Dt>>>0<so>>>0?1:0),Ar=Ne.low=Ar+ao,Ne.high=ut+ei+(Ar>>>0<ao>>>0?1:0),Zt=Ke.low=Zt+uo,Ke.high=kt+fn+(Zt>>>0<uo>>>0?1:0),zr=ze.low=zr+li,ze.high=Zr+ti+(zr>>>0<li>>>0?1:0),nr=Z.low=nr+Ei,Z.high=Vr+Ui+(nr>>>0<Ei>>>0?1:0),xr=he.low=xr+gn,he.high=Gr+Bo+(xr>>>0<gn>>>0?1:0),br=me.low=br+V,me.high=jr+x+(br>>>0<V>>>0?1:0)},_doFinalize:function(){var fe=this._data,ye=fe.words,Se=8*this._nDataBytes,Ce=8*fe.sigBytes;return ye[Ce>>>5]|=128<<24-Ce%32,ye[30+(Ce+128>>>10<<5)]=Math.floor(Se/4294967296),ye[31+(Ce+128>>>10<<5)]=Se,fe.sigBytes=4*ye.length,this._process(),this._hash.toX32()},clone:function(){var fe=p.clone.call(this);return fe._hash=this._hash.clone(),fe},blockSize:32}),c.SHA512=p._createHelper($),c.HmacSHA512=p._createHmacHelper($)}(),function(){var f=L,c=(O=f.x64).Word,p=O.WordArray,v=(O=f.algo).SHA512,O=O.SHA384=v.extend({_doReset:function(){this._hash=new p.init([new c.init(3418070365,3238371032),new c.init(1654270250,914150663),new c.init(2438529370,812702999),new c.init(355462360,4144912697),new c.init(1731405415,4290775857),new c.init(2394180231,1750603025),new c.init(3675008525,1694076839),new c.init(1203062813,3204075428)])},_doFinalize:function(){var X=v._doFinalize.call(this);return X.sigBytes-=16,X}});f.SHA384=v._createHelper(O),f.HmacSHA384=v._createHmacHelper(O)}();/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */var W,q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function J(f){var c,p,v="";for(c=0;c+3<=f.length;c+=3)p=parseInt(f.substring(c,c+3),16),v+=q.charAt(p>>6)+q.charAt(63&p);for(c+1==f.length?(p=parseInt(f.substring(c,c+1),16),v+=q.charAt(p<<2)):c+2==f.length&&(p=parseInt(f.substring(c,c+2),16),v+=q.charAt(p>>2)+q.charAt((3&p)<<4)),"=";(3&v.length)>0;)v+="=";return v}function ve(f){var c,p,v,O="",$=0;for(c=0;c<f.length&&f.charAt(c)!="=";++c)(v=q.indexOf(f.charAt(c)))<0||($==0?(O+=He(v>>2),p=3&v,$=1):$==1?(O+=He(p<<2|v>>4),p=15&v,$=2):$==2?(O+=He(p),O+=He(v>>2),p=3&v,$=3):(O+=He(p<<2|v>>4),O+=He(15&v),$=0));return $==1&&(O+=He(p<<2)),O}function Fe(f){var c,p=ve(f),v=new Array;for(c=0;2*c<p.length;++c)v[c]=parseInt(p.substring(2*c,2*c+2),16);return v}function z(f,c,p){f!=null&&(typeof f=="number"?this.fromNumber(f,c,p):c==null&&typeof f!="string"?this.fromString(f,256):this.fromString(f,c))}function De(){return new z(null)}R.appName=="Microsoft Internet Explorer"?(z.prototype.am=function(c,p,v,O,$,X){for(var ue=32767&p,se=p>>15;--X>=0;){var le=32767&this[c],fe=this[c++]>>15,ye=se*le+fe*ue;$=((le=ue*le+((32767&ye)<<15)+v[O]+(1073741823&$))>>>30)+(ye>>>15)+se*fe+($>>>30),v[O++]=1073741823&le}return $},W=30):R.appName!="Netscape"?(z.prototype.am=function(c,p,v,O,$,X){for(;--X>=0;){var ue=p*this[c++]+v[O]+$;$=Math.floor(ue/67108864),v[O++]=67108863&ue}return $},W=26):(z.prototype.am=function(c,p,v,O,$,X){for(var ue=16383&p,se=p>>14;--X>=0;){var le=16383&this[c],fe=this[c++]>>14,ye=se*le+fe*ue;$=((le=ue*le+((16383&ye)<<14)+v[O]+$)>>28)+(ye>>14)+se*fe,v[O++]=268435455&le}return $},W=28),z.prototype.DB=W,z.prototype.DM=(1<<W)-1,z.prototype.DV=1<<W,z.prototype.FV=Math.pow(2,52),z.prototype.F1=52-W,z.prototype.F2=2*W-52;var xt,ft,Te=new Array;for(xt="0".charCodeAt(0),ft=0;ft<=9;++ft)Te[xt++]=ft;for(xt="a".charCodeAt(0),ft=10;ft<36;++ft)Te[xt++]=ft;for(xt="A".charCodeAt(0),ft=10;ft<36;++ft)Te[xt++]=ft;function He(f){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(f)}function st(f,c){var p=Te[f.charCodeAt(c)];return p??-1}function Ct(f){var c=De();return c.fromInt(f),c}function $e(f){var c,p=1;return(c=f>>>16)!=0&&(f=c,p+=16),(c=f>>8)!=0&&(f=c,p+=8),(c=f>>4)!=0&&(f=c,p+=4),(c=f>>2)!=0&&(f=c,p+=2),(c=f>>1)!=0&&(f=c,p+=1),p}function Je(f){this.m=f}function ke(f){this.m=f,this.mp=f.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<f.DB-15)-1,this.mt2=2*f.t}function Xe(f,c){return f&c}function vt(f,c){return f|c}function vr(f,c){return f^c}function pr(f,c){return f&~c}function Nt(f){if(f==0)return-1;var c=0;return!(65535&f)&&(f>>=16,c+=16),!(255&f)&&(f>>=8,c+=8),!(15&f)&&(f>>=4,c+=4),!(3&f)&&(f>>=2,c+=2),!(1&f)&&++c,c}function Fr(f){for(var c=0;f!=0;)f&=f-1,++c;return c}function ar(){}function Pt(f){return f}function Ye(f){this.r2=De(),this.q3=De(),z.ONE.dlShiftTo(2*f.t,this.r2),this.mu=this.r2.divide(f),this.m=f}Je.prototype.convert=function(c){return c.s<0||c.compareTo(this.m)>=0?c.mod(this.m):c},Je.prototype.revert=function(c){return c},Je.prototype.reduce=function(c){c.divRemTo(this.m,null,c)},Je.prototype.mulTo=function(c,p,v){c.multiplyTo(p,v),this.reduce(v)},Je.prototype.sqrTo=function(c,p){c.squareTo(p),this.reduce(p)},ke.prototype.convert=function(c){var p=De();return c.abs().dlShiftTo(this.m.t,p),p.divRemTo(this.m,null,p),c.s<0&&p.compareTo(z.ZERO)>0&&this.m.subTo(p,p),p},ke.prototype.revert=function(c){var p=De();return c.copyTo(p),this.reduce(p),p},ke.prototype.reduce=function(c){for(;c.t<=this.mt2;)c[c.t++]=0;for(var p=0;p<this.m.t;++p){var v=32767&c[p],O=v*this.mpl+((v*this.mph+(c[p]>>15)*this.mpl&this.um)<<15)&c.DM;for(c[v=p+this.m.t]+=this.m.am(0,O,c,p,0,this.m.t);c[v]>=c.DV;)c[v]-=c.DV,c[++v]++}c.clamp(),c.drShiftTo(this.m.t,c),c.compareTo(this.m)>=0&&c.subTo(this.m,c)},ke.prototype.mulTo=function(c,p,v){c.multiplyTo(p,v),this.reduce(v)},ke.prototype.sqrTo=function(c,p){c.squareTo(p),this.reduce(p)},z.prototype.copyTo=function(c){for(var p=this.t-1;p>=0;--p)c[p]=this[p];c.t=this.t,c.s=this.s},z.prototype.fromInt=function(c){this.t=1,this.s=c<0?-1:0,c>0?this[0]=c:c<-1?this[0]=c+this.DV:this.t=0},z.prototype.fromString=function(c,p){var v;if(p==16)v=4;else if(p==8)v=3;else if(p==256)v=8;else if(p==2)v=1;else if(p==32)v=5;else{if(p!=4)return void this.fromRadix(c,p);v=2}this.t=0,this.s=0;for(var O=c.length,$=!1,X=0;--O>=0;){var ue=v==8?255&c[O]:st(c,O);ue<0?c.charAt(O)=="-"&&($=!0):($=!1,X==0?this[this.t++]=ue:X+v>this.DB?(this[this.t-1]|=(ue&(1<<this.DB-X)-1)<<X,this[this.t++]=ue>>this.DB-X):this[this.t-1]|=ue<<X,(X+=v)>=this.DB&&(X-=this.DB))}v==8&&128&c[0]&&(this.s=-1,X>0&&(this[this.t-1]|=(1<<this.DB-X)-1<<X)),this.clamp(),$&&z.ZERO.subTo(this,this)},z.prototype.clamp=function(){for(var c=this.s&this.DM;this.t>0&&this[this.t-1]==c;)--this.t},z.prototype.dlShiftTo=function(c,p){var v;for(v=this.t-1;v>=0;--v)p[v+c]=this[v];for(v=c-1;v>=0;--v)p[v]=0;p.t=this.t+c,p.s=this.s},z.prototype.drShiftTo=function(c,p){for(var v=c;v<this.t;++v)p[v-c]=this[v];p.t=Math.max(this.t-c,0),p.s=this.s},z.prototype.lShiftTo=function(c,p){var v,O=c%this.DB,$=this.DB-O,X=(1<<$)-1,ue=Math.floor(c/this.DB),se=this.s<<O&this.DM;for(v=this.t-1;v>=0;--v)p[v+ue+1]=this[v]>>$|se,se=(this[v]&X)<<O;for(v=ue-1;v>=0;--v)p[v]=0;p[ue]=se,p.t=this.t+ue+1,p.s=this.s,p.clamp()},z.prototype.rShiftTo=function(c,p){p.s=this.s;var v=Math.floor(c/this.DB);if(v>=this.t)p.t=0;else{var O=c%this.DB,$=this.DB-O,X=(1<<O)-1;p[0]=this[v]>>O;for(var ue=v+1;ue<this.t;++ue)p[ue-v-1]|=(this[ue]&X)<<$,p[ue-v]=this[ue]>>O;O>0&&(p[this.t-v-1]|=(this.s&X)<<$),p.t=this.t-v,p.clamp()}},z.prototype.subTo=function(c,p){for(var v=0,O=0,$=Math.min(c.t,this.t);v<$;)O+=this[v]-c[v],p[v++]=O&this.DM,O>>=this.DB;if(c.t<this.t){for(O-=c.s;v<this.t;)O+=this[v],p[v++]=O&this.DM,O>>=this.DB;O+=this.s}else{for(O+=this.s;v<c.t;)O-=c[v],p[v++]=O&this.DM,O>>=this.DB;O-=c.s}p.s=O<0?-1:0,O<-1?p[v++]=this.DV+O:O>0&&(p[v++]=O),p.t=v,p.clamp()},z.prototype.multiplyTo=function(c,p){var v=this.abs(),O=c.abs(),$=v.t;for(p.t=$+O.t;--$>=0;)p[$]=0;for($=0;$<O.t;++$)p[$+v.t]=v.am(0,O[$],p,$,0,v.t);p.s=0,p.clamp(),this.s!=c.s&&z.ZERO.subTo(p,p)},z.prototype.squareTo=function(c){for(var p=this.abs(),v=c.t=2*p.t;--v>=0;)c[v]=0;for(v=0;v<p.t-1;++v){var O=p.am(v,p[v],c,2*v,0,1);(c[v+p.t]+=p.am(v+1,2*p[v],c,2*v+1,O,p.t-v-1))>=p.DV&&(c[v+p.t]-=p.DV,c[v+p.t+1]=1)}c.t>0&&(c[c.t-1]+=p.am(v,p[v],c,2*v,0,1)),c.s=0,c.clamp()},z.prototype.divRemTo=function(c,p,v){var O=c.abs();if(!(O.t<=0)){var $=this.abs();if($.t<O.t)return p!=null&&p.fromInt(0),void(v!=null&&this.copyTo(v));v==null&&(v=De());var X=De(),ue=this.s,se=c.s,le=this.DB-$e(O[O.t-1]);le>0?(O.lShiftTo(le,X),$.lShiftTo(le,v)):(O.copyTo(X),$.copyTo(v));var fe=X.t,ye=X[fe-1];if(ye!=0){var Se=ye*(1<<this.F1)+(fe>1?X[fe-2]>>this.F2:0),Ce=this.FV/Se,Ne=(1<<this.F1)/Se,Ke=1<<this.F2,ze=v.t,Z=ze-fe,he=p??De();for(X.dlShiftTo(Z,he),v.compareTo(he)>=0&&(v[v.t++]=1,v.subTo(he,v)),z.ONE.dlShiftTo(fe,he),he.subTo(X,X);X.t<fe;)X[X.t++]=0;for(;--Z>=0;){var me=v[--ze]==ye?this.DM:Math.floor(v[ze]*Ce+(v[ze-1]+Ke)*Ne);if((v[ze]+=X.am(0,me,v,Z,0,fe))<me)for(X.dlShiftTo(Z,he),v.subTo(he,v);v[ze]<--me;)v.subTo(he,v)}p!=null&&(v.drShiftTo(fe,p),ue!=se&&z.ZERO.subTo(p,p)),v.t=fe,v.clamp(),le>0&&v.rShiftTo(le,v),ue<0&&z.ZERO.subTo(v,v)}}},z.prototype.invDigit=function(){if(this.t<1)return 0;var c=this[0];if(!(1&c))return 0;var p=3&c;return(p=(p=(p=(p=p*(2-(15&c)*p)&15)*(2-(255&c)*p)&255)*(2-((65535&c)*p&65535))&65535)*(2-c*p%this.DV)%this.DV)>0?this.DV-p:-p},z.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},z.prototype.exp=function(c,p){if(c>4294967295||c<1)return z.ONE;var v=De(),O=De(),$=p.convert(this),X=$e(c)-1;for($.copyTo(v);--X>=0;)if(p.sqrTo(v,O),(c&1<<X)>0)p.mulTo(O,$,v);else{var ue=v;v=O,O=ue}return p.revert(v)},z.prototype.toString=function(c){if(this.s<0)return"-"+this.negate().toString(c);var p;if(c==16)p=4;else if(c==8)p=3;else if(c==2)p=1;else if(c==32)p=5;else{if(c!=4)return this.toRadix(c);p=2}var v,O=(1<<p)-1,$=!1,X="",ue=this.t,se=this.DB-ue*this.DB%p;if(ue-- >0)for(se<this.DB&&(v=this[ue]>>se)>0&&($=!0,X=He(v));ue>=0;)se<p?(v=(this[ue]&(1<<se)-1)<<p-se,v|=this[--ue]>>(se+=this.DB-p)):(v=this[ue]>>(se-=p)&O,se<=0&&(se+=this.DB,--ue)),v>0&&($=!0),$&&(X+=He(v));return $?X:"0"},z.prototype.negate=function(){var c=De();return z.ZERO.subTo(this,c),c},z.prototype.abs=function(){return this.s<0?this.negate():this},z.prototype.compareTo=function(c){var p=this.s-c.s;if(p!=0)return p;var v=this.t;if((p=v-c.t)!=0)return this.s<0?-p:p;for(;--v>=0;)if((p=this[v]-c[v])!=0)return p;return 0},z.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+$e(this[this.t-1]^this.s&this.DM)},z.prototype.mod=function(c){var p=De();return this.abs().divRemTo(c,null,p),this.s<0&&p.compareTo(z.ZERO)>0&&c.subTo(p,p),p},z.prototype.modPowInt=function(c,p){var v;return v=c<256||p.isEven()?new Je(p):new ke(p),this.exp(c,v)},z.ZERO=Ct(0),z.ONE=Ct(1),ar.prototype.convert=Pt,ar.prototype.revert=Pt,ar.prototype.mulTo=function(c,p,v){c.multiplyTo(p,v)},ar.prototype.sqrTo=function(c,p){c.squareTo(p)},Ye.prototype.convert=function(c){if(c.s<0||c.t>2*this.m.t)return c.mod(this.m);if(c.compareTo(this.m)<0)return c;var p=De();return c.copyTo(p),this.reduce(p),p},Ye.prototype.revert=function(c){return c},Ye.prototype.reduce=function(c){for(c.drShiftTo(this.m.t-1,this.r2),c.t>this.m.t+1&&(c.t=this.m.t+1,c.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);c.compareTo(this.r2)<0;)c.dAddOffset(1,this.m.t+1);for(c.subTo(this.r2,c);c.compareTo(this.m)>=0;)c.subTo(this.m,c)},Ye.prototype.mulTo=function(c,p,v){c.multiplyTo(p,v),this.reduce(v)},Ye.prototype.sqrTo=function(c,p){c.squareTo(p),this.reduce(p)};var We=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ee=(1<<26)/We[We.length-1];/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function M(){this.i=0,this.j=0,this.S=new Array}z.prototype.chunkSize=function(c){return Math.floor(Math.LN2*this.DB/Math.log(c))},z.prototype.toRadix=function(c){if(c==null&&(c=10),this.signum()==0||c<2||c>36)return"0";var p=this.chunkSize(c),v=Math.pow(c,p),O=Ct(v),$=De(),X=De(),ue="";for(this.divRemTo(O,$,X);$.signum()>0;)ue=(v+X.intValue()).toString(c).substr(1)+ue,$.divRemTo(O,$,X);return X.intValue().toString(c)+ue},z.prototype.fromRadix=function(c,p){this.fromInt(0),p==null&&(p=10);for(var v=this.chunkSize(p),O=Math.pow(p,v),$=!1,X=0,ue=0,se=0;se<c.length;++se){var le=st(c,se);le<0?c.charAt(se)=="-"&&this.signum()==0&&($=!0):(ue=p*ue+le,++X>=v&&(this.dMultiply(O),this.dAddOffset(ue,0),X=0,ue=0))}X>0&&(this.dMultiply(Math.pow(p,X)),this.dAddOffset(ue,0)),$&&z.ZERO.subTo(this,this)},z.prototype.fromNumber=function(c,p,v){if(typeof p=="number")if(c<2)this.fromInt(1);else for(this.fromNumber(c,v),this.testBit(c-1)||this.bitwiseTo(z.ONE.shiftLeft(c-1),vt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(p);)this.dAddOffset(2,0),this.bitLength()>c&&this.subTo(z.ONE.shiftLeft(c-1),this);else{var O=new Array,$=7&c;O.length=1+(c>>3),p.nextBytes(O),$>0?O[0]&=(1<<$)-1:O[0]=0,this.fromString(O,256)}},z.prototype.bitwiseTo=function(c,p,v){var O,$,X=Math.min(c.t,this.t);for(O=0;O<X;++O)v[O]=p(this[O],c[O]);if(c.t<this.t){for($=c.s&this.DM,O=X;O<this.t;++O)v[O]=p(this[O],$);v.t=this.t}else{for($=this.s&this.DM,O=X;O<c.t;++O)v[O]=p($,c[O]);v.t=c.t}v.s=p(this.s,c.s),v.clamp()},z.prototype.changeBit=function(c,p){var v=z.ONE.shiftLeft(c);return this.bitwiseTo(v,p,v),v},z.prototype.addTo=function(c,p){for(var v=0,O=0,$=Math.min(c.t,this.t);v<$;)O+=this[v]+c[v],p[v++]=O&this.DM,O>>=this.DB;if(c.t<this.t){for(O+=c.s;v<this.t;)O+=this[v],p[v++]=O&this.DM,O>>=this.DB;O+=this.s}else{for(O+=this.s;v<c.t;)O+=c[v],p[v++]=O&this.DM,O>>=this.DB;O+=c.s}p.s=O<0?-1:0,O>0?p[v++]=O:O<-1&&(p[v++]=this.DV+O),p.t=v,p.clamp()},z.prototype.dMultiply=function(c){this[this.t]=this.am(0,c-1,this,0,0,this.t),++this.t,this.clamp()},z.prototype.dAddOffset=function(c,p){if(c!=0){for(;this.t<=p;)this[this.t++]=0;for(this[p]+=c;this[p]>=this.DV;)this[p]-=this.DV,++p>=this.t&&(this[this.t++]=0),++this[p]}},z.prototype.multiplyLowerTo=function(c,p,v){var O,$=Math.min(this.t+c.t,p);for(v.s=0,v.t=$;$>0;)v[--$]=0;for(O=v.t-this.t;$<O;++$)v[$+this.t]=this.am(0,c[$],v,$,0,this.t);for(O=Math.min(c.t,p);$<O;++$)this.am(0,c[$],v,$,0,p-$);v.clamp()},z.prototype.multiplyUpperTo=function(c,p,v){--p;var O=v.t=this.t+c.t-p;for(v.s=0;--O>=0;)v[O]=0;for(O=Math.max(p-this.t,0);O<c.t;++O)v[this.t+O-p]=this.am(p-O,c[O],v,0,0,this.t+O-p);v.clamp(),v.drShiftTo(1,v)},z.prototype.modInt=function(c){if(c<=0)return 0;var p=this.DV%c,v=this.s<0?c-1:0;if(this.t>0)if(p==0)v=this[0]%c;else for(var O=this.t-1;O>=0;--O)v=(p*v+this[O])%c;return v},z.prototype.millerRabin=function(c){var p=this.subtract(z.ONE),v=p.getLowestSetBit();if(v<=0)return!1;var O=p.shiftRight(v);(c=c+1>>1)>We.length&&(c=We.length);for(var $=De(),X=0;X<c;++X){$.fromInt(We[Math.floor(Math.random()*We.length)]);var ue=$.modPow(O,this);if(ue.compareTo(z.ONE)!=0&&ue.compareTo(p)!=0){for(var se=1;se++<v&&ue.compareTo(p)!=0;)if((ue=ue.modPowInt(2,this)).compareTo(z.ONE)==0)return!1;if(ue.compareTo(p)!=0)return!1}}return!0},z.prototype.clone=function(){var c=De();return this.copyTo(c),c},z.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},z.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},z.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},z.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},z.prototype.toByteArray=function(){var c=this.t,p=new Array;p[0]=this.s;var v,O=this.DB-c*this.DB%8,$=0;if(c-- >0)for(O<this.DB&&(v=this[c]>>O)!=(this.s&this.DM)>>O&&(p[$++]=v|this.s<<this.DB-O);c>=0;)O<8?(v=(this[c]&(1<<O)-1)<<8-O,v|=this[--c]>>(O+=this.DB-8)):(v=this[c]>>(O-=8)&255,O<=0&&(O+=this.DB,--c)),128&v&&(v|=-256),$==0&&(128&this.s)!=(128&v)&&++$,($>0||v!=this.s)&&(p[$++]=v);return p},z.prototype.equals=function(c){return this.compareTo(c)==0},z.prototype.min=function(c){return this.compareTo(c)<0?this:c},z.prototype.max=function(c){return this.compareTo(c)>0?this:c},z.prototype.and=function(c){var p=De();return this.bitwiseTo(c,Xe,p),p},z.prototype.or=function(c){var p=De();return this.bitwiseTo(c,vt,p),p},z.prototype.xor=function(c){var p=De();return this.bitwiseTo(c,vr,p),p},z.prototype.andNot=function(c){var p=De();return this.bitwiseTo(c,pr,p),p},z.prototype.not=function(){for(var c=De(),p=0;p<this.t;++p)c[p]=this.DM&~this[p];return c.t=this.t,c.s=~this.s,c},z.prototype.shiftLeft=function(c){var p=De();return c<0?this.rShiftTo(-c,p):this.lShiftTo(c,p),p},z.prototype.shiftRight=function(c){var p=De();return c<0?this.lShiftTo(-c,p):this.rShiftTo(c,p),p},z.prototype.getLowestSetBit=function(){for(var c=0;c<this.t;++c)if(this[c]!=0)return c*this.DB+Nt(this[c]);return this.s<0?this.t*this.DB:-1},z.prototype.bitCount=function(){for(var c=0,p=this.s&this.DM,v=0;v<this.t;++v)c+=Fr(this[v]^p);return c},z.prototype.testBit=function(c){var p=Math.floor(c/this.DB);return p>=this.t?this.s!=0:(this[p]&1<<c%this.DB)!=0},z.prototype.setBit=function(c){return this.changeBit(c,vt)},z.prototype.clearBit=function(c){return this.changeBit(c,pr)},z.prototype.flipBit=function(c){return this.changeBit(c,vr)},z.prototype.add=function(c){var p=De();return this.addTo(c,p),p},z.prototype.subtract=function(c){var p=De();return this.subTo(c,p),p},z.prototype.multiply=function(c){var p=De();return this.multiplyTo(c,p),p},z.prototype.divide=function(c){var p=De();return this.divRemTo(c,p,null),p},z.prototype.remainder=function(c){var p=De();return this.divRemTo(c,null,p),p},z.prototype.divideAndRemainder=function(c){var p=De(),v=De();return this.divRemTo(c,p,v),new Array(p,v)},z.prototype.modPow=function(c,p){var v,O,$=c.bitLength(),X=Ct(1);if($<=0)return X;v=$<18?1:$<48?3:$<144?4:$<768?5:6,O=$<8?new Je(p):p.isEven()?new Ye(p):new ke(p);var ue=new Array,se=3,le=v-1,fe=(1<<v)-1;if(ue[1]=O.convert(this),v>1){var ye=De();for(O.sqrTo(ue[1],ye);se<=fe;)ue[se]=De(),O.mulTo(ye,ue[se-2],ue[se]),se+=2}var Se,Ce,Ne=c.t-1,Ke=!0,ze=De();for($=$e(c[Ne])-1;Ne>=0;){for($>=le?Se=c[Ne]>>$-le&fe:(Se=(c[Ne]&(1<<$+1)-1)<<le-$,Ne>0&&(Se|=c[Ne-1]>>this.DB+$-le)),se=v;!(1&Se);)Se>>=1,--se;if(($-=se)<0&&($+=this.DB,--Ne),Ke)ue[Se].copyTo(X),Ke=!1;else{for(;se>1;)O.sqrTo(X,ze),O.sqrTo(ze,X),se-=2;se>0?O.sqrTo(X,ze):(Ce=X,X=ze,ze=Ce),O.mulTo(ze,ue[Se],X)}for(;Ne>=0&&!(c[Ne]&1<<$);)O.sqrTo(X,ze),Ce=X,X=ze,ze=Ce,--$<0&&($=this.DB-1,--Ne)}return O.revert(X)},z.prototype.modInverse=function(c){var p=c.isEven();if(this.isEven()&&p||c.signum()==0)return z.ZERO;for(var v=c.clone(),O=this.clone(),$=Ct(1),X=Ct(0),ue=Ct(0),se=Ct(1);v.signum()!=0;){for(;v.isEven();)v.rShiftTo(1,v),p?($.isEven()&&X.isEven()||($.addTo(this,$),X.subTo(c,X)),$.rShiftTo(1,$)):X.isEven()||X.subTo(c,X),X.rShiftTo(1,X);for(;O.isEven();)O.rShiftTo(1,O),p?(ue.isEven()&&se.isEven()||(ue.addTo(this,ue),se.subTo(c,se)),ue.rShiftTo(1,ue)):se.isEven()||se.subTo(c,se),se.rShiftTo(1,se);v.compareTo(O)>=0?(v.subTo(O,v),p&&$.subTo(ue,$),X.subTo(se,X)):(O.subTo(v,O),p&&ue.subTo($,ue),se.subTo(X,se))}return O.compareTo(z.ONE)!=0?z.ZERO:se.compareTo(c)>=0?se.subtract(c):se.signum()<0?(se.addTo(c,se),se.signum()<0?se.add(c):se):se},z.prototype.pow=function(c){return this.exp(c,new ar)},z.prototype.gcd=function(c){var p=this.s<0?this.negate():this.clone(),v=c.s<0?c.negate():c.clone();if(p.compareTo(v)<0){var O=p;p=v,v=O}var $=p.getLowestSetBit(),X=v.getLowestSetBit();if(X<0)return p;for($<X&&(X=$),X>0&&(p.rShiftTo(X,p),v.rShiftTo(X,v));p.signum()>0;)($=p.getLowestSetBit())>0&&p.rShiftTo($,p),($=v.getLowestSetBit())>0&&v.rShiftTo($,v),p.compareTo(v)>=0?(p.subTo(v,p),p.rShiftTo(1,p)):(v.subTo(p,v),v.rShiftTo(1,v));return X>0&&v.lShiftTo(X,v),v},z.prototype.isProbablePrime=function(c){var p,v=this.abs();if(v.t==1&&v[0]<=We[We.length-1]){for(p=0;p<We.length;++p)if(v[0]==We[p])return!0;return!1}if(v.isEven())return!1;for(p=1;p<We.length;){for(var O=We[p],$=p+1;$<We.length&&O<ee;)O*=We[$++];for(O=v.modInt(O);p<$;)if(O%We[p++]==0)return!1}return v.millerRabin(c)},z.prototype.square=function(){var c=De();return this.squareTo(c),c},M.prototype.init=function(c){var p,v,O;for(p=0;p<256;++p)this.S[p]=p;for(v=0,p=0;p<256;++p)v=v+this.S[p]+c[p%c.length]&255,O=this.S[p],this.S[p]=this.S[v],this.S[v]=O;this.i=0,this.j=0},M.prototype.next=function(){var c;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,c=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=c,this.S[c+this.S[this.i]&255]};var F,K,re;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function B(){(function(c){K[re++]^=255&c,K[re++]^=c>>8&255,K[re++]^=c>>16&255,K[re++]^=c>>24&255,re>=256&&(re-=256)})(new Date().getTime())}if(K==null){var C;if(K=new Array,re=0,N!==void 0&&(N.crypto!==void 0||N.msCrypto!==void 0)){var U=N.crypto||N.msCrypto;if(U.getRandomValues){var ne=new Uint8Array(32);for(U.getRandomValues(ne),C=0;C<32;++C)K[re++]=ne[C]}else if(R.appName=="Netscape"&&R.appVersion<"5"){var Re=N.crypto.random(32);for(C=0;C<Re.length;++C)K[re++]=255&Re.charCodeAt(C)}}for(;re<256;)C=Math.floor(65536*Math.random()),K[re++]=C>>>8,K[re++]=255&C;re=0,B()}function Le(){if(F==null){for(B(),(F=function(){return new M}()).init(K),re=0;re<K.length;++re)K[re]=0;re=0}return F.next()}function qe(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function Et(f,c){return new z(f,c)}function Wt(f,c,p){for(var v="",O=0;v.length<c;)v+=p(String.fromCharCode.apply(String,f.concat([(4278190080&O)>>24,(16711680&O)>>16,(65280&O)>>8,255&O]))),O+=1;return v}function Y(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function te(f,c){this.x=c,this.q=f}function j(f,c,p,v){this.curve=f,this.x=c,this.y=p,this.z=v??z.ONE,this.zinv=null}function S(f,c,p){this.q=f,this.a=this.fromBigInteger(c),this.b=this.fromBigInteger(p),this.infinity=new j(this,null,null)}qe.prototype.nextBytes=function(c){var p;for(p=0;p<c.length;++p)c[p]=Le()},Y.prototype.doPublic=function(c){return c.modPowInt(this.e,this.n)},Y.prototype.setPublic=function(c,p){if(this.isPublic=!0,this.isPrivate=!1,typeof c!="string")this.n=c,this.e=p;else{if(!(c!=null&&p!=null&&c.length>0&&p.length>0))throw"Invalid RSA public key";this.n=Et(c,16),this.e=parseInt(p,16)}},Y.prototype.encrypt=function(c){var p=function(X,ue){if(ue<X.length+11)throw"Message too long for RSA";for(var se=new Array,le=X.length-1;le>=0&&ue>0;){var fe=X.charCodeAt(le--);fe<128?se[--ue]=fe:fe>127&&fe<2048?(se[--ue]=63&fe|128,se[--ue]=fe>>6|192):(se[--ue]=63&fe|128,se[--ue]=fe>>6&63|128,se[--ue]=fe>>12|224)}se[--ue]=0;for(var ye=new qe,Se=new Array;ue>2;){for(Se[0]=0;Se[0]==0;)ye.nextBytes(Se);se[--ue]=Se[0]}return se[--ue]=2,se[--ue]=0,new z(se)}(c,this.n.bitLength()+7>>3);if(p==null)return null;var v=this.doPublic(p);if(v==null)return null;var O=v.toString(16);return 1&O.length?"0"+O:O},Y.prototype.encryptOAEP=function(c,p,v){var O=function(se,le,fe,ye){var Se=w.crypto.MessageDigest,Ce=w.crypto.Util,Ne=null;if(fe||(fe="sha1"),typeof fe=="string"&&(Ne=Se.getCanonicalAlgName(fe),ye=Se.getHashLength(Ne),fe=function(ut){return rt(Ce.hashHex(et(ut),Ne))}),se.length+2*ye+2>le)throw"Message too long for RSA";var Ke,ze="";for(Ke=0;Ke<le-se.length-2*ye-2;Ke+=1)ze+="\0";var Z=fe("")+ze+""+se,he=new Array(ye);new qe().nextBytes(he);var me=Wt(he,Z.length,fe),_e=[];for(Ke=0;Ke<Z.length;Ke+=1)_e[Ke]=Z.charCodeAt(Ke)^me.charCodeAt(Ke);var Be=Wt(_e,he.length,fe),Ge=[0];for(Ke=0;Ke<he.length;Ke+=1)Ge[Ke+1]=he[Ke]^Be.charCodeAt(Ke);return new z(Ge.concat(_e))}(c,this.n.bitLength()+7>>3,p,v);if(O==null)return null;var $=this.doPublic(O);if($==null)return null;var X=$.toString(16);return 1&X.length?"0"+X:X},Y.prototype.type="RSA",te.prototype.equals=function(c){return c==this||this.q.equals(c.q)&&this.x.equals(c.x)},te.prototype.toBigInteger=function(){return this.x},te.prototype.negate=function(){return new te(this.q,this.x.negate().mod(this.q))},te.prototype.add=function(c){return new te(this.q,this.x.add(c.toBigInteger()).mod(this.q))},te.prototype.subtract=function(c){return new te(this.q,this.x.subtract(c.toBigInteger()).mod(this.q))},te.prototype.multiply=function(c){return new te(this.q,this.x.multiply(c.toBigInteger()).mod(this.q))},te.prototype.square=function(){return new te(this.q,this.x.square().mod(this.q))},te.prototype.divide=function(c){return new te(this.q,this.x.multiply(c.toBigInteger().modInverse(this.q)).mod(this.q))},j.prototype.getX=function(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},j.prototype.getY=function(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},j.prototype.equals=function(c){return c==this||(this.isInfinity()?c.isInfinity():c.isInfinity()?this.isInfinity():!!c.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(c.z)).mod(this.curve.q).equals(z.ZERO)&&c.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(c.z)).mod(this.curve.q).equals(z.ZERO))},j.prototype.isInfinity=function(){return this.x==null&&this.y==null||this.z.equals(z.ZERO)&&!this.y.toBigInteger().equals(z.ZERO)},j.prototype.negate=function(){return new j(this.curve,this.x,this.y.negate(),this.z)},j.prototype.add=function(c){if(this.isInfinity())return c;if(c.isInfinity())return this;var p=c.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(c.z)).mod(this.curve.q),v=c.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(c.z)).mod(this.curve.q);if(z.ZERO.equals(v))return z.ZERO.equals(p)?this.twice():this.curve.getInfinity();var O=new z("3"),$=this.x.toBigInteger(),X=this.y.toBigInteger(),ue=(c.x.toBigInteger(),c.y.toBigInteger(),v.square()),se=ue.multiply(v),le=$.multiply(ue),fe=p.square().multiply(this.z),ye=fe.subtract(le.shiftLeft(1)).multiply(c.z).subtract(se).multiply(v).mod(this.curve.q),Se=le.multiply(O).multiply(p).subtract(X.multiply(se)).subtract(fe.multiply(p)).multiply(c.z).add(p.multiply(se)).mod(this.curve.q),Ce=se.multiply(this.z).multiply(c.z).mod(this.curve.q);return new j(this.curve,this.curve.fromBigInteger(ye),this.curve.fromBigInteger(Se),Ce)},j.prototype.twice=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var c=new z("3"),p=this.x.toBigInteger(),v=this.y.toBigInteger(),O=v.multiply(this.z),$=O.multiply(v).mod(this.curve.q),X=this.curve.a.toBigInteger(),ue=p.square().multiply(c);z.ZERO.equals(X)||(ue=ue.add(this.z.square().multiply(X)));var se=(ue=ue.mod(this.curve.q)).square().subtract(p.shiftLeft(3).multiply($)).shiftLeft(1).multiply(O).mod(this.curve.q),le=ue.multiply(c).multiply(p).subtract($.shiftLeft(1)).shiftLeft(2).multiply($).subtract(ue.square().multiply(ue)).mod(this.curve.q),fe=O.square().multiply(O).shiftLeft(3).mod(this.curve.q);return new j(this.curve,this.curve.fromBigInteger(se),this.curve.fromBigInteger(le),fe)},j.prototype.multiply=function(c){if(this.isInfinity())return this;if(c.signum()==0)return this.curve.getInfinity();var p,v=c,O=v.multiply(new z("3")),$=this.negate(),X=this,ue=this.curve.q.subtract(c),se=ue.multiply(new z("3")),le=new j(this.curve,this.x,this.y),fe=le.negate();for(p=O.bitLength()-2;p>0;--p){X=X.twice();var ye=O.testBit(p);ye!=v.testBit(p)&&(X=X.add(ye?this:$))}for(p=se.bitLength()-2;p>0;--p){le=le.twice();var Se=se.testBit(p);Se!=ue.testBit(p)&&(le=le.add(Se?le:fe))}return X},j.prototype.multiplyTwo=function(c,p,v){var O;O=c.bitLength()>v.bitLength()?c.bitLength()-1:v.bitLength()-1;for(var $=this.curve.getInfinity(),X=this.add(p);O>=0;)$=$.twice(),c.testBit(O)?$=v.testBit(O)?$.add(X):$.add(this):v.testBit(O)&&($=$.add(p)),--O;return $},S.prototype.getQ=function(){return this.q},S.prototype.getA=function(){return this.a},S.prototype.getB=function(){return this.b},S.prototype.equals=function(c){return c==this||this.q.equals(c.q)&&this.a.equals(c.a)&&this.b.equals(c.b)},S.prototype.getInfinity=function(){return this.infinity},S.prototype.fromBigInteger=function(c){return new te(this.q,c)},S.prototype.decodePointHex=function(c){switch(parseInt(c.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var p=(c.length-2)/2,v=c.substr(2,p),O=c.substr(p+2,p);return new j(this,this.fromBigInteger(new z(v,16)),this.fromBigInteger(new z(O,16)));default:return null}},te.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},j.prototype.getEncoded=function(f){var c=function(X,ue){var se=X.toByteArrayUnsigned();if(ue<se.length)se=se.slice(se.length-ue);else for(;ue>se.length;)se.unshift(0);return se},p=this.getX().toBigInteger(),v=this.getY().toBigInteger(),O=c(p,32);return f?v.isEven()?O.unshift(2):O.unshift(3):(O.unshift(4),O=O.concat(c(v,32))),O},j.decodeFrom=function(f,c){c[0];var p=c.length-1,v=c.slice(1,1+p/2),O=c.slice(1+p/2,1+p);v.unshift(0),O.unshift(0);var $=new z(v),X=new z(O);return new j(f,f.fromBigInteger($),f.fromBigInteger(X))},j.decodeFromHex=function(f,c){c.substr(0,2);var p=c.length-2,v=c.substr(2,p/2),O=c.substr(2+p/2,p/2),$=new z(v,16),X=new z(O,16);return new j(f,f.fromBigInteger($),f.fromBigInteger(X))},j.prototype.add2D=function(f){if(this.isInfinity())return f;if(f.isInfinity())return this;if(this.x.equals(f.x))return this.y.equals(f.y)?this.twice():this.curve.getInfinity();var c=f.x.subtract(this.x),p=f.y.subtract(this.y).divide(c),v=p.square().subtract(this.x).subtract(f.x),O=p.multiply(this.x.subtract(v)).subtract(this.y);return new j(this.curve,v,O)},j.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var f=this.curve.fromBigInteger(z.valueOf(2)),c=this.curve.fromBigInteger(z.valueOf(3)),p=this.x.square().multiply(c).add(this.curve.a).divide(this.y.multiply(f)),v=p.square().subtract(this.x.multiply(f)),O=p.multiply(this.x.subtract(v)).subtract(this.y);return new j(this.curve,v,O)},j.prototype.multiply2D=function(f){if(this.isInfinity())return this;if(f.signum()==0)return this.curve.getInfinity();var c,p=f,v=p.multiply(new z("3")),O=this.negate(),$=this;for(c=v.bitLength()-2;c>0;--c){$=$.twice();var X=v.testBit(c);X!=p.testBit(c)&&($=$.add2D(X?this:O))}return $},j.prototype.isOnCurve=function(){var f=this.getX().toBigInteger(),c=this.getY().toBigInteger(),p=this.curve.getA().toBigInteger(),v=this.curve.getB().toBigInteger(),O=this.curve.getQ(),$=c.multiply(c).mod(O),X=f.multiply(f).multiply(f).add(p.multiply(f)).add(v).mod(O);return $.equals(X)},j.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},j.prototype.validate=function(){var f=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var c=this.getX().toBigInteger(),p=this.getY().toBigInteger();if(c.compareTo(z.ONE)<0||c.compareTo(f.subtract(z.ONE))>0)throw new Error("x coordinate out of bounds");if(p.compareTo(z.ONE)<0||p.compareTo(f.subtract(z.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(f).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
 */var k=function(){var f=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),c=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),p={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function v(X,ue,se){return ue?p[ue]:String.fromCharCode(parseInt(se,16))}var O=new String(""),$=Object.hasOwnProperty;return function(X,ue){var se,le,fe=X.match(f),ye=fe[0],Se=!1;ye==="{"?se={}:ye==="["?se=[]:(se=[],Se=!0);for(var Ce=[se],Ne=1-Se,Ke=fe.length;Ne<Ke;++Ne){var ze;switch((ye=fe[Ne]).charCodeAt(0)){default:(ze=Ce[0])[le||ze.length]=+ye,le=void 0;break;case 34:if((ye=ye.substring(1,ye.length-1)).indexOf("\\")!==-1&&(ye=ye.replace(c,v)),ze=Ce[0],!le){if(!(ze instanceof Array)){le=ye||O;break}le=ze.length}ze[le]=ye,le=void 0;break;case 91:ze=Ce[0],Ce.unshift(ze[le||ze.length]=[]),le=void 0;break;case 93:Ce.shift();break;case 102:(ze=Ce[0])[le||ze.length]=!1,le=void 0;break;case 110:(ze=Ce[0])[le||ze.length]=null,le=void 0;break;case 116:(ze=Ce[0])[le||ze.length]=!0,le=void 0;break;case 123:ze=Ce[0],Ce.unshift(ze[le||ze.length]={}),le=void 0;break;case 125:Ce.shift()}}if(Se){if(Ce.length!==1)throw new Error;se=se[0]}else if(Ce.length)throw new Error;return ue&&(se=function Z(he,me){var _e=he[me];if(_e&&(_e===void 0?"undefined":A(_e))==="object"){var Be=null;for(var Ge in _e)if($.call(_e,Ge)&&_e!==he){var Dt=Z(_e,Ge);Dt!==void 0?_e[Ge]=Dt:(Be||(Be=[]),Be.push(Ge))}if(Be)for(var ut=Be.length;--ut>=0;)delete _e[Be[ut]]}return ue.call(he,me,_e)}({"":se},"")),se}}();w!==void 0&&w||(n.KJUR=w={}),w.asn1!==void 0&&w.asn1||(w.asn1={}),w.asn1.ASN1Util=new function(){this.integerToByteHex=function(f){var c=f.toString(16);return c.length%2==1&&(c="0"+c),c},this.bigIntToMinTwosComplementsHex=function(f){var c=f.toString(16);if(c.substr(0,1)!="-")c.length%2==1?c="0"+c:c.match(/^[0-7]/)||(c="00"+c);else{var p=c.substr(1).length;p%2==1?p+=1:c.match(/^[0-7]/)||(p+=2);for(var v="",O=0;O<p;O++)v+="f";c=new z(v,16).xor(f).add(z.ONE).toString(16).replace(/^-/,"")}return c},this.getPEMStringFromHex=function(f,c){return Bt(f,c)},this.newObject=function(f){var c=w.asn1,p=c.ASN1Object,v=c.DERBoolean,O=c.DERInteger,$=c.DERBitString,X=c.DEROctetString,ue=c.DERNull,se=c.DERObjectIdentifier,le=c.DEREnumerated,fe=c.DERUTF8String,ye=c.DERNumericString,Se=c.DERPrintableString,Ce=c.DERTeletexString,Ne=c.DERIA5String,Ke=c.DERUTCTime,ze=c.DERGeneralizedTime,Z=c.DERVisibleString,he=c.DERBMPString,me=c.DERSequence,_e=c.DERSet,Be=c.DERTaggedObject,Ge=c.ASN1Util.newObject;if(f instanceof c.ASN1Object)return f;var Dt=Object.keys(f);if(Dt.length!=1)throw new Error("key of param shall be only one.");var ut=Dt[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+ut+":")==-1)throw new Error("undefined key: "+ut);if(ut=="bool")return new v(f[ut]);if(ut=="int")return new O(f[ut]);if(ut=="bitstr")return new $(f[ut]);if(ut=="octstr")return new X(f[ut]);if(ut=="null")return new ue(f[ut]);if(ut=="oid")return new se(f[ut]);if(ut=="enum")return new le(f[ut]);if(ut=="utf8str")return new fe(f[ut]);if(ut=="numstr")return new ye(f[ut]);if(ut=="prnstr")return new Se(f[ut]);if(ut=="telstr")return new Ce(f[ut]);if(ut=="ia5str")return new Ne(f[ut]);if(ut=="utctime")return new Ke(f[ut]);if(ut=="gentime")return new ze(f[ut]);if(ut=="visstr")return new Z(f[ut]);if(ut=="bmpstr")return new he(f[ut]);if(ut=="asn1")return new p(f[ut]);if(ut=="seq"){for(var Ar=f[ut],kt=[],Zt=0;Zt<Ar.length;Zt++){var Zr=Ge(Ar[Zt]);kt.push(Zr)}return new me({array:kt})}if(ut=="set"){for(Ar=f[ut],kt=[],Zt=0;Zt<Ar.length;Zt++)Zr=Ge(Ar[Zt]),kt.push(Zr);return new _e({array:kt})}if(ut=="tag"){var zr=f[ut];if(Object.prototype.toString.call(zr)==="[object Array]"&&zr.length==3){var Vr=Ge(zr[2]);return new Be({tag:zr[0],explicit:zr[1],obj:Vr})}return new Be(zr)}},this.jsonToASN1HEX=function(f){return this.newObject(f).getEncodedHex()}},w.asn1.ASN1Util.oidHexToInt=function(f){for(var c="",p=parseInt(f.substr(0,2),16),v=(c=Math.floor(p/40)+"."+p%40,""),O=2;O<f.length;O+=2){var $=("00000000"+parseInt(f.substr(O,2),16).toString(2)).slice(-8);v+=$.substr(1,7),$.substr(0,1)=="0"&&(c=c+"."+new z(v,2).toString(10),v="")}return c},w.asn1.ASN1Util.oidIntToHex=function(f){var c=function(se){var le=se.toString(16);return le.length==1&&(le="0"+le),le},p=function(se){var le="",fe=new z(se,10).toString(2),ye=7-fe.length%7;ye==7&&(ye=0);for(var Se="",Ce=0;Ce<ye;Ce++)Se+="0";for(fe=Se+fe,Ce=0;Ce<fe.length-1;Ce+=7){var Ne=fe.substr(Ce,7);Ce!=fe.length-7&&(Ne="1"+Ne),le+=c(parseInt(Ne,2))}return le};if(!f.match(/^[0-9.]+$/))throw"malformed oid string: "+f;var v="",O=f.split("."),$=40*parseInt(O[0])+parseInt(O[1]);v+=c($),O.splice(0,2);for(var X=0;X<O.length;X++)v+=p(O[X]);return v},w.asn1.ASN1Object=function(f){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+0+",v="+this.hV);var c=this.hV.length/2,p=c.toString(16);if(p.length%2==1&&(p="0"+p),c<128)return p;var v=p.length/2;if(v>15)throw"ASN.1 length too long to represent by 8x: n = "+c.toString(16);return(128+v).toString(16)+p},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(c){this.params=c},f!=null&&f.tlv!=null&&(this.hTLV=f.tlv,this.isModified=!1)},w.asn1.DERAbstractString=function(f){w.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(c){this.hTLV=null,this.isModified=!0,this.s=c,this.hV=Me(this.s).toLowerCase()},this.setStringHex=function(c){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=c},this.getFreshValueHex=function(){return this.hV},f!==void 0&&(typeof f=="string"?this.setString(f):f.str!==void 0?this.setString(f.str):f.hex!==void 0&&this.setStringHex(f.hex))},Ut(w.asn1.DERAbstractString,w.asn1.ASN1Object),w.asn1.DERAbstractTime=function(f){w.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(c){var p=c.getTime()+6e4*c.getTimezoneOffset();return new Date(p)},this.formatDate=function(c,p,v){var O=this.zeroPadding,$=this.localDateToUTC(c),X=String($.getFullYear());p=="utc"&&(X=X.substr(2,2));var ue=X+O(String($.getMonth()+1),2)+O(String($.getDate()),2)+O(String($.getHours()),2)+O(String($.getMinutes()),2)+O(String($.getSeconds()),2);if(v===!0){var se=$.getMilliseconds();if(se!=0){var le=O(String(se),3);ue=ue+"."+(le=le.replace(/[0]+$/,""))}}return ue+"Z"},this.zeroPadding=function(c,p){return c.length>=p?c:new Array(p-c.length+1).join("0")+c},this.getString=function(){return this.s},this.setString=function(c){this.hTLV=null,this.isModified=!0,this.s=c,this.hV=wt(c)},this.setByDateValue=function(c,p,v,O,$,X){var ue=new Date(Date.UTC(c,p-1,v,O,$,X,0));this.setByDate(ue)},this.getFreshValueHex=function(){return this.hV}},Ut(w.asn1.DERAbstractTime,w.asn1.ASN1Object),w.asn1.DERAbstractStructured=function(f){w.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(c){this.hTLV=null,this.isModified=!0,this.asn1Array=c},this.appendASN1Object=function(c){this.hTLV=null,this.isModified=!0,this.asn1Array.push(c)},this.asn1Array=new Array,f!==void 0&&f.array!==void 0&&(this.asn1Array=f.array)},Ut(w.asn1.DERAbstractStructured,w.asn1.ASN1Object),w.asn1.DERBoolean=function(f){w.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=f==0?"010100":"0101ff"},Ut(w.asn1.DERBoolean,w.asn1.ASN1Object),w.asn1.DERInteger=function(f){w.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(c){this.hTLV=null,this.isModified=!0,this.hV=w.asn1.ASN1Util.bigIntToMinTwosComplementsHex(c)},this.setByInteger=function(c){var p=new z(String(c),10);this.setByBigInteger(p)},this.setValueHex=function(c){this.hV=c},this.getFreshValueHex=function(){return this.hV},f!==void 0&&(f.bigint!==void 0?this.setByBigInteger(f.bigint):f.int!==void 0?this.setByInteger(f.int):typeof f=="number"?this.setByInteger(f):f.hex!==void 0&&this.setValueHex(f.hex))},Ut(w.asn1.DERInteger,w.asn1.ASN1Object),w.asn1.DERBitString=function(f){if(f!==void 0&&f.obj!==void 0){var c=w.asn1.ASN1Util.newObject(f.obj);f.hex="00"+c.getEncodedHex()}w.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(p){this.hTLV=null,this.isModified=!0,this.hV=p},this.setUnusedBitsAndHexValue=function(p,v){if(p<0||7<p)throw"unused bits shall be from 0 to 7: u = "+p;var O="0"+p;this.hTLV=null,this.isModified=!0,this.hV=O+v},this.setByBinaryString=function(p){var v=8-(p=p.replace(/0+$/,"")).length%8;v==8&&(v=0);for(var O=0;O<=v;O++)p+="0";var $="";for(O=0;O<p.length-1;O+=8){var X=p.substr(O,8),ue=parseInt(X,2).toString(16);ue.length==1&&(ue="0"+ue),$+=ue}this.hTLV=null,this.isModified=!0,this.hV="0"+v+$},this.setByBooleanArray=function(p){for(var v="",O=0;O<p.length;O++)p[O]==1?v+="1":v+="0";this.setByBinaryString(v)},this.newFalseArray=function(p){for(var v=new Array(p),O=0;O<p;O++)v[O]=!1;return v},this.getFreshValueHex=function(){return this.hV},f!==void 0&&(typeof f=="string"&&f.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(f):f.hex!==void 0?this.setHexValueIncludingUnusedBits(f.hex):f.bin!==void 0?this.setByBinaryString(f.bin):f.array!==void 0&&this.setByBooleanArray(f.array))},Ut(w.asn1.DERBitString,w.asn1.ASN1Object),w.asn1.DEROctetString=function(f){if(f!==void 0&&f.obj!==void 0){var c=w.asn1.ASN1Util.newObject(f.obj);f.hex=c.getEncodedHex()}w.asn1.DEROctetString.superclass.constructor.call(this,f),this.hT="04"},Ut(w.asn1.DEROctetString,w.asn1.DERAbstractString),w.asn1.DERNull=function(){w.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},Ut(w.asn1.DERNull,w.asn1.ASN1Object),w.asn1.DERObjectIdentifier=function(f){w.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(c){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=c},this.setValueOidString=function(c){var p=function(O){var $=function(Se){var Ce=Se.toString(16);return Ce.length==1&&(Ce="0"+Ce),Ce},X=function(Se){var Ce="",Ne=parseInt(Se,10).toString(2),Ke=7-Ne.length%7;Ke==7&&(Ke=0);for(var ze="",Z=0;Z<Ke;Z++)ze+="0";for(Ne=ze+Ne,Z=0;Z<Ne.length-1;Z+=7){var he=Ne.substr(Z,7);Z!=Ne.length-7&&(he="1"+he),Ce+=$(parseInt(he,2))}return Ce};try{if(!O.match(/^[0-9.]+$/))return null;var ue="",se=O.split("."),le=40*parseInt(se[0],10)+parseInt(se[1],10);ue+=$(le),se.splice(0,2);for(var fe=0;fe<se.length;fe++)ue+=X(se[fe]);return ue}catch{return null}}(c);if(p==null)throw new Error("malformed oid string: "+c);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=p},this.setValueName=function(c){var p=w.asn1.x509.OID.name2oid(c);if(p==="")throw new Error("DERObjectIdentifier oidName undefined: "+c);this.setValueOidString(p)},this.setValueNameOrOid=function(c){c.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(c):this.setValueName(c)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(c){typeof c=="string"?this.setValueNameOrOid(c):c.oid!==void 0?this.setValueNameOrOid(c.oid):c.name!==void 0?this.setValueNameOrOid(c.name):c.hex!==void 0&&this.setValueHex(c.hex)},f!==void 0&&this.setByParam(f)},Ut(w.asn1.DERObjectIdentifier,w.asn1.ASN1Object),w.asn1.DEREnumerated=function(f){w.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(c){this.hTLV=null,this.isModified=!0,this.hV=w.asn1.ASN1Util.bigIntToMinTwosComplementsHex(c)},this.setByInteger=function(c){var p=new z(String(c),10);this.setByBigInteger(p)},this.setValueHex=function(c){this.hV=c},this.getFreshValueHex=function(){return this.hV},f!==void 0&&(f.int!==void 0?this.setByInteger(f.int):typeof f=="number"?this.setByInteger(f):f.hex!==void 0&&this.setValueHex(f.hex))},Ut(w.asn1.DEREnumerated,w.asn1.ASN1Object),w.asn1.DERUTF8String=function(f){w.asn1.DERUTF8String.superclass.constructor.call(this,f),this.hT="0c"},Ut(w.asn1.DERUTF8String,w.asn1.DERAbstractString),w.asn1.DERNumericString=function(f){w.asn1.DERNumericString.superclass.constructor.call(this,f),this.hT="12"},Ut(w.asn1.DERNumericString,w.asn1.DERAbstractString),w.asn1.DERPrintableString=function(f){w.asn1.DERPrintableString.superclass.constructor.call(this,f),this.hT="13"},Ut(w.asn1.DERPrintableString,w.asn1.DERAbstractString),w.asn1.DERTeletexString=function(f){w.asn1.DERTeletexString.superclass.constructor.call(this,f),this.hT="14"},Ut(w.asn1.DERTeletexString,w.asn1.DERAbstractString),w.asn1.DERIA5String=function(f){w.asn1.DERIA5String.superclass.constructor.call(this,f),this.hT="16"},Ut(w.asn1.DERIA5String,w.asn1.DERAbstractString),w.asn1.DERVisibleString=function(f){w.asn1.DERIA5String.superclass.constructor.call(this,f),this.hT="1a"},Ut(w.asn1.DERVisibleString,w.asn1.DERAbstractString),w.asn1.DERBMPString=function(f){w.asn1.DERBMPString.superclass.constructor.call(this,f),this.hT="1e"},Ut(w.asn1.DERBMPString,w.asn1.DERAbstractString),w.asn1.DERUTCTime=function(f){w.asn1.DERUTCTime.superclass.constructor.call(this,f),this.hT="17",this.setByDate=function(c){this.hTLV=null,this.isModified=!0,this.date=c,this.s=this.formatDate(this.date,"utc"),this.hV=wt(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=wt(this.s)),this.hV},f!==void 0&&(f.str!==void 0?this.setString(f.str):typeof f=="string"&&f.match(/^[0-9]{12}Z$/)?this.setString(f):f.hex!==void 0?this.setStringHex(f.hex):f.date!==void 0&&this.setByDate(f.date))},Ut(w.asn1.DERUTCTime,w.asn1.DERAbstractTime),w.asn1.DERGeneralizedTime=function(f){w.asn1.DERGeneralizedTime.superclass.constructor.call(this,f),this.hT="18",this.withMillis=!1,this.setByDate=function(c){this.hTLV=null,this.isModified=!0,this.date=c,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=wt(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=wt(this.s)),this.hV},f!==void 0&&(f.str!==void 0?this.setString(f.str):typeof f=="string"&&f.match(/^[0-9]{14}Z$/)?this.setString(f):f.hex!==void 0?this.setStringHex(f.hex):f.date!==void 0&&this.setByDate(f.date),f.millis===!0&&(this.withMillis=!0))},Ut(w.asn1.DERGeneralizedTime,w.asn1.DERAbstractTime),w.asn1.DERSequence=function(f){w.asn1.DERSequence.superclass.constructor.call(this,f),this.hT="30",this.getFreshValueHex=function(){for(var c="",p=0;p<this.asn1Array.length;p++)c+=this.asn1Array[p].getEncodedHex();return this.hV=c,this.hV}},Ut(w.asn1.DERSequence,w.asn1.DERAbstractStructured),w.asn1.DERSet=function(f){w.asn1.DERSet.superclass.constructor.call(this,f),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var c=new Array,p=0;p<this.asn1Array.length;p++){var v=this.asn1Array[p];c.push(v.getEncodedHex())}return this.sortFlag==1&&c.sort(),this.hV=c.join(""),this.hV},f!==void 0&&f.sortflag!==void 0&&f.sortflag==0&&(this.sortFlag=!1)},Ut(w.asn1.DERSet,w.asn1.DERAbstractStructured),w.asn1.DERTaggedObject=function(f){w.asn1.DERTaggedObject.superclass.constructor.call(this);var c=w.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(p,v,O){this.hT=v,this.isExplicit=p,this.asn1Object=O,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=O.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,v),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(p){p.tag!=null&&(this.hT=p.tag),p.explicit!=null&&(this.isExplicit=p.explicit),p.tage!=null&&(this.hT=p.tage,this.isExplicit=!0),p.tagi!=null&&(this.hT=p.tagi,this.isExplicit=!1),p.obj!=null&&(p.obj instanceof c.ASN1Object?(this.asn1Object=p.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):A(p.obj)=="object"&&(this.asn1Object=c.ASN1Util.newObject(p.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},f!=null&&this.setByParam(f)},Ut(w.asn1.DERTaggedObject,w.asn1.ASN1Object);var w,ce,Ae,de=new function(){};function je(f){for(var c=new Array,p=0;p<f.length;p++)c[p]=f.charCodeAt(p);return c}function Tt(f){for(var c="",p=0;p<f.length;p++)c+=String.fromCharCode(f[p]);return c}function Yt(f){for(var c="",p=0;p<f.length;p++){var v=f[p].toString(16);v.length==1&&(v="0"+v),c+=v}return c}function wt(f){return Yt(je(f))}function we(f){return f=(f=(f=f.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function Ue(f){return f.length%4==2?f+="==":f.length%4==3&&(f+="="),f=(f=f.replace(/-/g,"+")).replace(/_/g,"/")}function ge(f){return f.length%2==1&&(f="0"+f),we(J(f))}function pe(f){return ve(Ue(f))}function Me(f){return _t(gr(f))}function at(f){return decodeURIComponent(cr(f))}function rt(f){for(var c="",p=0;p<f.length-1;p+=2)c+=String.fromCharCode(parseInt(f.substr(p,2),16));return c}function et(f){for(var c="",p=0;p<f.length;p++)c+=("0"+f.charCodeAt(p).toString(16)).slice(-2);return c}function it(f){return J(f)}function Lt(f){var c=it(f).replace(/(.{64})/g,`$1\r
`);return c=c.replace(/\r\n$/,"")}function Ht(f){return ve(f.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Bt(f,c){return"-----BEGIN "+c+`-----\r
`+Lt(f)+`\r
-----END `+c+`-----\r
`}function qt(f,c){if(f.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+c;return Ht(f=c!==void 0?(f=f.replace(new RegExp("^[^]*-----BEGIN "+c+"-----"),"")).replace(new RegExp("-----END "+c+"-----[^]*$"),""):(f=f.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function sr(f){var c,p,v,O,$,X,ue,se,le,fe,ye;if(ye=f.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return se=ye[1],c=parseInt(se),se.length===2&&(50<=c&&c<100?c=1900+c:0<=c&&c<50&&(c=2e3+c)),p=parseInt(ye[2])-1,v=parseInt(ye[3]),O=parseInt(ye[4]),$=parseInt(ye[5]),X=parseInt(ye[6]),ue=0,(le=ye[7])!==""&&(fe=(le.substr(1)+"00").substr(0,3),ue=parseInt(fe)),Date.UTC(c,p,v,O,$,X,ue);throw"unsupported zulu format: "+f}function Vt(f){return~~(sr(f)/1e3)}function _t(f){return f.replace(/%/g,"")}function cr(f){return f.replace(/(..)/g,"%$1")}function ht(f){var c="malformed IPv6 address";if(!f.match(/^[0-9A-Fa-f:]+$/))throw c;var p=(f=f.toLowerCase()).split(":").length-1;if(p<2)throw c;var v=":".repeat(7-p+2),O=(f=f.replace("::",v)).split(":");if(O.length!=8)throw c;for(var $=0;$<8;$++)O[$]=("0000"+O[$]).slice(-4);return O.join("")}function bt(f){if(!f.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var c=(f=f.toLowerCase()).match(/.{1,4}/g),p=0;p<8;p++)c[p]=c[p].replace(/^0+/,""),c[p]==""&&(c[p]="0");var v=(f=":"+c.join(":")+":").match(/:(0:){2,}/g);if(v===null)return f.slice(1,-1);var O="";for(p=0;p<v.length;p++)v[p].length>O.length&&(O=v[p]);return(f=f.replace(O,"::")).slice(1,-1)}function Kt(f){var c="malformed hex value";if(!f.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw c;if(f.length!=8)return f.length==32?bt(f):f;try{return parseInt(f.substr(0,2),16)+"."+parseInt(f.substr(2,2),16)+"."+parseInt(f.substr(4,2),16)+"."+parseInt(f.substr(6,2),16)}catch{throw c}}function Ft(f){return f.match(/.{4}/g).map(function(p){var v=parseInt(p.substr(0,2),16),O=parseInt(p.substr(2),16);if(v==0&O<128)return String.fromCharCode(O);if(v<8){var $=128|63&O;return at((192|(7&v)<<3|(192&O)>>6).toString(16)+$.toString(16))}$=128|(15&v)<<2|(192&O)>>6;var X=128|63&O;return at((224|(240&v)>>4).toString(16)+$.toString(16)+X.toString(16))}).join("")}function gr(f){for(var c=encodeURIComponent(f),p="",v=0;v<c.length;v++)c[v]=="%"?(p+=c.substr(v,3),v+=2):p=p+"%"+wt(c[v]);return p}function zt(f){return!(f.length%2!=0||!f.match(/^[0-9a-f]+$/)&&!f.match(/^[0-9A-F]+$/))}function Ur(f){return f.length%2==1?"0"+f:f.substr(0,1)>"7"?"00"+f:f}de.getLblen=function(f,c){if(f.substr(c+2,1)!="8")return 1;var p=parseInt(f.substr(c+3,1));return p==0?-1:0<p&&p<10?p+1:-2},de.getL=function(f,c){var p=de.getLblen(f,c);return p<1?"":f.substr(c+2,2*p)},de.getVblen=function(f,c){var p;return(p=de.getL(f,c))==""?-1:(p.substr(0,1)==="8"?new z(p.substr(2),16):new z(p,16)).intValue()},de.getVidx=function(f,c){var p=de.getLblen(f,c);return p<0?p:c+2*(p+1)},de.getV=function(f,c){var p=de.getVidx(f,c),v=de.getVblen(f,c);return f.substr(p,2*v)},de.getTLV=function(f,c){return f.substr(c,2)+de.getL(f,c)+de.getV(f,c)},de.getTLVblen=function(f,c){return 2+2*de.getLblen(f,c)+2*de.getVblen(f,c)},de.getNextSiblingIdx=function(f,c){return de.getVidx(f,c)+2*de.getVblen(f,c)},de.getChildIdx=function(f,c){var p,v,O,$=de,X=[];p=$.getVidx(f,c),v=2*$.getVblen(f,c),f.substr(c,2)=="03"&&(p+=2,v-=2),O=0;for(var ue=p;O<=v;){var se=$.getTLVblen(f,ue);if((O+=se)<=v&&X.push(ue),ue+=se,O>=v)break}return X},de.getNthChildIdx=function(f,c,p){return de.getChildIdx(f,c)[p]},de.getIdxbyList=function(f,c,p,v){var O,$,X=de;return p.length==0?v!==void 0&&f.substr(c,2)!==v?-1:c:(O=p.shift())>=($=X.getChildIdx(f,c)).length?-1:X.getIdxbyList(f,$[O],p,v)},de.getIdxbyListEx=function(f,c,p,v){var O,$,X=de;if(p.length==0)return v!==void 0&&f.substr(c,2)!==v?-1:c;O=p.shift(),$=X.getChildIdx(f,c);for(var ue=0,se=0;se<$.length;se++){var le=f.substr($[se],2);if(typeof O=="number"&&!X.isContextTag(le)&&ue==O||typeof O=="string"&&X.isContextTag(le,O))return X.getIdxbyListEx(f,$[se],p,v);X.isContextTag(le)||ue++}return-1},de.getTLVbyList=function(f,c,p,v){var O=de,$=O.getIdxbyList(f,c,p,v);return $==-1||$>=f.length?null:O.getTLV(f,$)},de.getTLVbyListEx=function(f,c,p,v){var O=de,$=O.getIdxbyListEx(f,c,p,v);return $==-1?null:O.getTLV(f,$)},de.getVbyList=function(f,c,p,v,O){var $,X,ue=de;return($=ue.getIdxbyList(f,c,p,v))==-1||$>=f.length?null:(X=ue.getV(f,$),O===!0&&(X=X.substr(2)),X)},de.getVbyListEx=function(f,c,p,v,O){var $,X,ue=de;return($=ue.getIdxbyListEx(f,c,p,v))==-1?null:(X=ue.getV(f,$),f.substr($,2)=="03"&&O!==!1&&(X=X.substr(2)),X)},de.getInt=function(f,c,p){p==null&&(p=-1);try{var v=f.substr(c,2);if(v!="02"&&v!="03")return p;var O=de.getV(f,c);return v=="02"?parseInt(O,16):function(X){try{var ue=X.substr(0,2);if(ue=="00")return parseInt(X.substr(2),16);var se=parseInt(ue,16),le=X.substr(2),fe=parseInt(le,16).toString(2);return fe=="0"&&(fe="00000000"),fe=fe.slice(0,0-se),parseInt(fe,2)}catch{return-1}}(O)}catch{return p}},de.getOID=function(f,c,p){p==null&&(p=null);try{return f.substr(c,2)!="06"?p:function(O){if(!zt(O))return null;try{var $=[],X=O.substr(0,2),ue=parseInt(X,16);$[0]=new String(Math.floor(ue/40)),$[1]=new String(ue%40);for(var se=O.substr(2),le=[],fe=0;fe<se.length/2;fe++)le.push(parseInt(se.substr(2*fe,2),16));var ye=[],Se="";for(fe=0;fe<le.length;fe++)128&le[fe]?Se+=Xt((127&le[fe]).toString(2),7):(Se+=Xt((127&le[fe]).toString(2),7),ye.push(new String(parseInt(Se,2))),Se="");var Ce=$.join(".");return ye.length>0&&(Ce=Ce+"."+ye.join(".")),Ce}catch{return null}}(de.getV(f,c))}catch{return p}},de.getOIDName=function(f,c,p){p==null&&(p=null);try{var v=de.getOID(f,c,p);if(v==p)return p;var O=w.asn1.x509.OID.oid2name(v);return O==""?v:O}catch{return p}},de.getString=function(f,c,p){p==null&&(p=null);try{return rt(de.getV(f,c))}catch{return p}},de.hextooidstr=function(f){var c=function(Se,Ce){return Se.length>=Ce?Se:new Array(Ce-Se.length+1).join("0")+Se},p=[],v=f.substr(0,2),O=parseInt(v,16);p[0]=new String(Math.floor(O/40)),p[1]=new String(O%40);for(var $=f.substr(2),X=[],ue=0;ue<$.length/2;ue++)X.push(parseInt($.substr(2*ue,2),16));var se=[],le="";for(ue=0;ue<X.length;ue++)128&X[ue]?le+=c((127&X[ue]).toString(2),7):(le+=c((127&X[ue]).toString(2),7),se.push(new String(parseInt(le,2))),le="");var fe=p.join(".");return se.length>0&&(fe=fe+"."+se.join(".")),fe},de.dump=function(f,c,p,v){var O=de,$=O.getV,X=O.dump,ue=O.getChildIdx,se=f;f instanceof w.asn1.ASN1Object&&(se=f.getEncodedHex());var le=function(ut,Ar){return ut.length<=2*Ar?ut:ut.substr(0,Ar)+"..(total "+ut.length/2+"bytes).."+ut.substr(ut.length-Ar,Ar)};c===void 0&&(c={ommit_long_octet:32}),p===void 0&&(p=0),v===void 0&&(v="");var fe,ye=c.ommit_long_octet;if((fe=se.substr(p,2))=="01")return(Se=$(se,p))=="00"?v+`BOOLEAN FALSE
`:v+`BOOLEAN TRUE
`;if(fe=="02")return v+"INTEGER "+le(Se=$(se,p),ye)+`
`;if(fe=="03"){var Se=$(se,p);if(O.isASN1HEX(Se.substr(2))){var Ce=v+`BITSTRING, encapsulates
`;return Ce+=X(Se.substr(2),c,0,v+"  ")}return v+"BITSTRING "+le(Se,ye)+`
`}if(fe=="04")return Se=$(se,p),O.isASN1HEX(Se)?(Ce=v+`OCTETSTRING, encapsulates
`,Ce+=X(Se,c,0,v+"  ")):v+"OCTETSTRING "+le(Se,ye)+`
`;if(fe=="05")return v+`NULL
`;if(fe=="06"){var Ne=$(se,p),Ke=w.asn1.ASN1Util.oidHexToInt(Ne),ze=w.asn1.x509.OID.oid2name(Ke),Z=Ke.replace(/\./g," ");return ze!=""?v+"ObjectIdentifier "+ze+" ("+Z+`)
`:v+"ObjectIdentifier ("+Z+`)
`}if(fe=="0a")return v+"ENUMERATED "+parseInt($(se,p))+`
`;if(fe=="0c")return v+"UTF8String '"+at($(se,p))+`'
`;if(fe=="13")return v+"PrintableString '"+at($(se,p))+`'
`;if(fe=="14")return v+"TeletexString '"+at($(se,p))+`'
`;if(fe=="16")return v+"IA5String '"+at($(se,p))+`'
`;if(fe=="17")return v+"UTCTime "+at($(se,p))+`
`;if(fe=="18")return v+"GeneralizedTime "+at($(se,p))+`
`;if(fe=="1a")return v+"VisualString '"+at($(se,p))+`'
`;if(fe=="1e")return v+"BMPString '"+Ft($(se,p))+`'
`;if(fe=="30"){if(se.substr(p,4)=="3000")return v+`SEQUENCE {}
`;Ce=v+`SEQUENCE
`;var he=c;if(((Be=ue(se,p)).length==2||Be.length==3)&&se.substr(Be[0],2)=="06"&&se.substr(Be[Be.length-1],2)=="04"){ze=O.oidname($(se,Be[0]));var me=JSON.parse(JSON.stringify(c));me.x509ExtName=ze,he=me}for(var _e=0;_e<Be.length;_e++)Ce+=X(se,he,Be[_e],v+"  ");return Ce}if(fe=="31"){Ce=v+`SET
`;var Be=ue(se,p);for(_e=0;_e<Be.length;_e++)Ce+=X(se,c,Be[_e],v+"  ");return Ce}if(128&(fe=parseInt(fe,16))){var Ge=31&fe;if(32&fe){for(Ce=v+"["+Ge+`]
`,Be=ue(se,p),_e=0;_e<Be.length;_e++)Ce+=X(se,c,Be[_e],v+"  ");return Ce}if(Se=$(se,p),de.isASN1HEX(Se)){var Ce=v+"["+Ge+`]
`;return Ce+=X(Se,c,0,v+"  ")}return(Se.substr(0,8)=="68747470"||c.x509ExtName==="subjectAltName"&&Ge==2)&&(Se=at(Se)),Ce=v+"["+Ge+"] "+Se+`
`}return v+"UNKNOWN("+fe+") "+$(se,p)+`
`},de.isContextTag=function(f,c){var p,v;f=f.toLowerCase();try{p=parseInt(f,16)}catch{return-1}if(c===void 0)return(192&p)==128;try{return c.match(/^\[[0-9]+\]$/)!=null&&!((v=parseInt(c.substr(1,c.length-1),10))>31)&&(192&p)==128&&(31&p)==v}catch{return!1}},de.isASN1HEX=function(f){var c=de;if(f.length%2==1)return!1;var p=c.getVblen(f,0),v=f.substr(0,2),O=c.getL(f,0);return f.length-v.length-O.length==2*p},de.checkStrictDER=function(f,c,p,v,O){var $=de;if(p===void 0){if(typeof f!="string")throw new Error("not hex string");if(f=f.toLowerCase(),!w.lang.String.isHex(f))throw new Error("not hex string");p=f.length,O=(v=f.length/2)<128?1:Math.ceil(v.toString(16))+1}if($.getL(f,c).length>2*O)throw new Error("L of TLV too long: idx="+c);var X=$.getVblen(f,c);if(X>v)throw new Error("value of L too long than hex: idx="+c);var ue=$.getTLV(f,c),se=ue.length-2-$.getL(f,c).length;if(se!==2*X)throw new Error("V string length and L's value not the same:"+se+"/"+2*X);if(c===0&&f.length!=ue.length)throw new Error("total length and TLV length unmatch:"+f.length+"!="+ue.length);var le=f.substr(c,2);if(le==="02"){var fe=$.getVidx(f,c);if(f.substr(fe,2)=="00"&&f.charCodeAt(fe+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(le,16)){for(var ye=$.getVblen(f,c),Se=0,Ce=$.getChildIdx(f,c),Ne=0;Ne<Ce.length;Ne++)Se+=$.getTLV(f,Ce[Ne]).length,$.checkStrictDER(f,Ce[Ne],p,v,O);if(2*ye!=Se)throw new Error("sum of children's TLV length and L unmatch: "+2*ye+"!="+Se)}},de.oidname=function(f){var c=w.asn1;w.lang.String.isHex(f)&&(f=c.ASN1Util.oidHexToInt(f));var p=c.x509.OID.oid2name(f);return p===""&&(p=f),p},w!==void 0&&w||(n.KJUR=w={}),w.lang!==void 0&&w.lang||(w.lang={}),w.lang.String=function(){},typeof s=="function"?(n.utf8tob64u=ce=function(c){return we(s.from(c,"utf8").toString("base64"))},n.b64utoutf8=Ae=function(c){return s.from(Ue(c),"base64").toString("utf8")}):(n.utf8tob64u=ce=function(c){return ge(_t(gr(c)))},n.b64utoutf8=Ae=function(c){return decodeURIComponent(cr(pe(c)))}),w.lang.String.isInteger=function(f){return!!f.match(/^[0-9]+$/)||!!f.match(/^-[0-9]+$/)},w.lang.String.isHex=function(f){return zt(f)},w.lang.String.isBase64=function(f){return!(!(f=f.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||f.length%4!=0)},w.lang.String.isBase64URL=function(f){return!f.match(/[+/=]/)&&(f=Ue(f),w.lang.String.isBase64(f))},w.lang.String.isIntegerArray=function(f){return!!(f=f.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},w.lang.String.isPrintable=function(f){return f.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},w.lang.String.isIA5=function(f){return f.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},w.lang.String.isMail=function(f){return f.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var Xt=function(c,p,v){return v==null&&(v="0"),c.length>=p?c:new Array(p-c.length+1).join(v)+c};function Ut(f,c){var p=function(){};p.prototype=c.prototype,f.prototype=new p,f.prototype.constructor=f,f.superclass=c.prototype,c.prototype.constructor==Object.prototype.constructor&&(c.prototype.constructor=c)}w!==void 0&&w||(n.KJUR=w={}),w.crypto!==void 0&&w.crypto||(w.crypto={}),w.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:L.algo.MD5,sha1:L.algo.SHA1,sha224:L.algo.SHA224,sha256:L.algo.SHA256,sha384:L.algo.SHA384,sha512:L.algo.SHA512,ripemd160:L.algo.RIPEMD160},this.getDigestInfoHex=function(f,c){if(this.DIGESTINFOHEAD[c]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+c;return this.DIGESTINFOHEAD[c]+f},this.getPaddedDigestInfoHex=function(f,c,p){var v=this.getDigestInfoHex(f,c),O=p/4;if(v.length+22>O)throw"key is too short for SigAlg: keylen="+p+","+c;for(var $="0001",X="00"+v,ue="",se=O-$.length-X.length,le=0;le<se;le+=2)ue+="ff";return $+ue+X},this.hashString=function(f,c){return new w.crypto.MessageDigest({alg:c}).digestString(f)},this.hashHex=function(f,c){return new w.crypto.MessageDigest({alg:c}).digestHex(f)},this.sha1=function(f){return this.hashString(f,"sha1")},this.sha256=function(f){return this.hashString(f,"sha256")},this.sha256Hex=function(f){return this.hashHex(f,"sha256")},this.sha512=function(f){return this.hashString(f,"sha512")},this.sha512Hex=function(f){return this.hashHex(f,"sha512")},this.isKey=function(f){return f instanceof Y||f instanceof w.crypto.DSA||f instanceof w.crypto.ECDSA}},w.crypto.Util.md5=function(f){return new w.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(f)},w.crypto.Util.ripemd160=function(f){return new w.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(f)},w.crypto.Util.SECURERANDOMGEN=new qe,w.crypto.Util.getRandomHexOfNbytes=function(f){var c=new Array(f);return w.crypto.Util.SECURERANDOMGEN.nextBytes(c),Yt(c)},w.crypto.Util.getRandomBigIntegerOfNbytes=function(f){return new z(w.crypto.Util.getRandomHexOfNbytes(f),16)},w.crypto.Util.getRandomHexOfNbits=function(f){var c=f%8,p=new Array((f-c)/8+1);return w.crypto.Util.SECURERANDOMGEN.nextBytes(p),p[0]=(255<<c&255^255)&p[0],Yt(p)},w.crypto.Util.getRandomBigIntegerOfNbits=function(f){return new z(w.crypto.Util.getRandomHexOfNbits(f),16)},w.crypto.Util.getRandomBigIntegerZeroToMax=function(f){for(var c=f.bitLength();;){var p=w.crypto.Util.getRandomBigIntegerOfNbits(c);if(f.compareTo(p)!=-1)return p}},w.crypto.Util.getRandomBigIntegerMinToMax=function(f,c){var p=f.compareTo(c);if(p==1)throw"biMin is greater than biMax";if(p==0)return f;var v=c.subtract(f);return w.crypto.Util.getRandomBigIntegerZeroToMax(v).add(f)},w.crypto.MessageDigest=function(f){this.setAlgAndProvider=function(c,p){if((c=w.crypto.MessageDigest.getCanonicalAlgName(c))!==null&&p===void 0&&(p=w.crypto.Util.DEFAULTPROVIDER[c]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(c)!=-1&&p=="cryptojs"){try{this.md=w.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[c].create()}catch(v){throw"setAlgAndProvider hash alg set fail alg="+c+"/"+v}this.updateString=function(v){this.md.update(v)},this.updateHex=function(v){var O=L.enc.Hex.parse(v);this.md.update(O)},this.digest=function(){return this.md.finalize().toString(L.enc.Hex)},this.digestString=function(v){return this.updateString(v),this.digest()},this.digestHex=function(v){return this.updateHex(v),this.digest()}}if(":sha256:".indexOf(c)!=-1&&p=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(v){throw"setAlgAndProvider hash alg set fail alg="+c+"/"+v}this.updateString=function(v){this.md.update(v)},this.updateHex=function(v){var O=sjcl.codec.hex.toBits(v);this.md.update(O)},this.digest=function(){var v=this.md.finalize();return sjcl.codec.hex.fromBits(v)},this.digestString=function(v){return this.updateString(v),this.digest()},this.digestHex=function(v){return this.updateHex(v),this.digest()}}},this.updateString=function(c){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(c){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(c){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(c){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},f!==void 0&&f.alg!==void 0&&(this.algName=f.alg,f.prov===void 0&&(this.provName=w.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},w.crypto.MessageDigest.getCanonicalAlgName=function(f){return typeof f=="string"&&(f=(f=f.toLowerCase()).replace(/-/,"")),f},w.crypto.MessageDigest.getHashLength=function(f){var c=w.crypto.MessageDigest,p=c.getCanonicalAlgName(f);if(c.HASHLENGTH[p]===void 0)throw"not supported algorithm: "+f;return c.HASHLENGTH[p]},w.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},w.crypto.Mac=function(f){this.setAlgAndProvider=function(c,p){if((c=c.toLowerCase())==null&&(c="hmacsha1"),(c=c.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+c;p===void 0&&(p=w.crypto.Util.DEFAULTPROVIDER[c]),this.algProv=c+"/"+p;var v=c.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(v)!=-1&&p=="cryptojs"){try{var O=w.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[v];this.mac=L.algo.HMAC.create(O,this.pass)}catch($){throw"setAlgAndProvider hash alg set fail hashAlg="+v+"/"+$}this.updateString=function($){this.mac.update($)},this.updateHex=function($){var X=L.enc.Hex.parse($);this.mac.update(X)},this.doFinal=function(){return this.mac.finalize().toString(L.enc.Hex)},this.doFinalString=function($){return this.updateString($),this.doFinal()},this.doFinalHex=function($){return this.updateHex($),this.doFinal()}}},this.updateString=function(c){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(c){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(c){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(c){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(c){if(typeof c=="string"){var p=c;return c.length%2!=1&&c.match(/^[0-9A-Fa-f]+$/)||(p=et(c)),void(this.pass=L.enc.Hex.parse(p))}if((c===void 0?"undefined":A(c))!="object")throw"KJUR.crypto.Mac unsupported password type: "+c;if(p=null,c.hex!==void 0){if(c.hex.length%2!=0||!c.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+c.hex;p=c.hex}if(c.utf8!==void 0&&(p=Me(c.utf8)),c.rstr!==void 0&&(p=et(c.rstr)),c.b64!==void 0&&(p=ve(c.b64)),c.b64u!==void 0&&(p=pe(c.b64u)),p==null)throw"KJUR.crypto.Mac unsupported password type: "+c;this.pass=L.enc.Hex.parse(p)},f!==void 0&&(f.pass!==void 0&&this.setPassword(f.pass),f.alg!==void 0&&(this.algName=f.alg,f.prov===void 0&&(this.provName=w.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},w.crypto.Signature=function(f){var c=null;if(this._setAlgNames=function(){var p=this.algName.match(/^(.+)with(.+)$/);p&&(this.mdAlgName=p[1].toLowerCase(),this.pubkeyAlgName=p[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(p,v){for(var O="",$=v/4-p.length,X=0;X<$;X++)O+="0";return O+p},this.setAlgAndProvider=function(p,v){if(this._setAlgNames(),v!="cryptojs/jsrsa")throw new Error("provider not supported: "+v);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new w.crypto.MessageDigest({alg:this.mdAlgName})}catch(O){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+O)}this.init=function(O,$){var X=null;try{X=$===void 0?It.getKey(O):It.getKey(O,$)}catch(ue){throw"init failed:"+ue}if(X.isPrivate===!0)this.prvKey=X,this.state="SIGN";else{if(X.isPublic!==!0)throw"init failed.:"+X;this.pubKey=X,this.state="VERIFY"}},this.updateString=function(O){this.md.updateString(O)},this.updateHex=function(O){this.md.updateHex(O)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&w.crypto.ECDSA!==void 0&&(this.prvKey=new w.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof Y&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Y&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof w.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof w.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(O){return this.updateString(O),this.sign()},this.signHex=function(O){return this.updateHex(O),this.sign()},this.verify=function(O){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&w.crypto.ECDSA!==void 0&&(this.pubKey=new w.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof Y&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,O,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Y&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,O);if(w.crypto.ECDSA!==void 0&&this.pubKey instanceof w.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,O);if(w.crypto.DSA!==void 0&&this.pubKey instanceof w.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,O);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(p,v){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(p){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(p){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(p){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(p){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(p){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=f,f!==void 0&&(f.alg!==void 0&&(this.algName=f.alg,f.prov===void 0?this.provName=w.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=f.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),f.psssaltlen!==void 0&&(this.pssSaltLen=f.psssaltlen),f.prvkeypem!==void 0)){if(f.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{c=It.getKey(f.prvkeypem),this.init(c)}catch(p){throw"fatal error to load pem private key: "+p}}},w.crypto.Cipher=function(f){},w.crypto.Cipher.encrypt=function(f,c,p){if(c instanceof Y&&c.isPublic){var v=w.crypto.Cipher.getAlgByKeyAndName(c,p);if(v==="RSA")return c.encrypt(f);if(v==="RSAOAEP")return c.encryptOAEP(f,"sha1");var O=v.match(/^RSAOAEP(\d+)$/);if(O!==null)return c.encryptOAEP(f,"sha"+O[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+p}throw"Cipher.encrypt: unsupported key or algorithm"},w.crypto.Cipher.decrypt=function(f,c,p){if(c instanceof Y&&c.isPrivate){var v=w.crypto.Cipher.getAlgByKeyAndName(c,p);if(v==="RSA")return c.decrypt(f);if(v==="RSAOAEP")return c.decryptOAEP(f,"sha1");var O=v.match(/^RSAOAEP(\d+)$/);if(O!==null)return c.decryptOAEP(f,"sha"+O[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+p}throw"Cipher.decrypt: unsupported key or algorithm"},w.crypto.Cipher.getAlgByKeyAndName=function(f,c){if(f instanceof Y){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(c)!=-1)return c;if(c==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+c}throw"getAlgByKeyAndName: not supported algorithm name: "+c},w.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},w!==void 0&&w||(n.KJUR=w={}),w.crypto!==void 0&&w.crypto||(w.crypto={}),w.crypto.ECDSA=function(f){var c=Error,p=z,v=j,O=w.crypto.ECDSA,$=w.crypto.ECParameterDB,X=O.getName,ue=de,se=ue.getVbyListEx,le=ue.isASN1HEX,fe=new qe;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(ye){return new p(ye.bitLength(),fe).mod(ye.subtract(p.ONE)).add(p.ONE)},this.setNamedCurve=function(ye){this.ecparams=$.getByName(ye),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=ye},this.setPrivateKeyHex=function(ye){this.isPrivate=!0,this.prvKeyHex=ye},this.setPublicKeyHex=function(ye){this.isPublic=!0,this.pubKeyHex=ye},this.getPublicKeyXYHex=function(){var ye=this.pubKeyHex;if(ye.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var Se=this.ecparams.keylen/4;if(ye.length!==2+2*Se)throw"malformed public key hex length";var Ce={};return Ce.x=ye.substr(2,Se),Ce.y=ye.substr(2+Se),Ce},this.getShortNISTPCurveName=function(){var ye=this.curveName;return ye==="secp256r1"||ye==="NIST P-256"||ye==="P-256"||ye==="prime256v1"?"P-256":ye==="secp384r1"||ye==="NIST P-384"||ye==="P-384"?"P-384":null},this.generateKeyPairHex=function(){var ye=this.ecparams.n,Se=this.getBigRandom(ye),Ce=this.ecparams.G.multiply(Se),Ne=Ce.getX().toBigInteger(),Ke=Ce.getY().toBigInteger(),ze=this.ecparams.keylen/4,Z=("0000000000"+Se.toString(16)).slice(-ze),he="04"+("0000000000"+Ne.toString(16)).slice(-ze)+("0000000000"+Ke.toString(16)).slice(-ze);return this.setPrivateKeyHex(Z),this.setPublicKeyHex(he),{ecprvhex:Z,ecpubhex:he}},this.signWithMessageHash=function(ye){return this.signHex(ye,this.prvKeyHex)},this.signHex=function(ye,Se){var Ce=new p(Se,16),Ne=this.ecparams.n,Ke=new p(ye.substring(0,this.ecparams.keylen/4),16);do var ze=this.getBigRandom(Ne),Z=this.ecparams.G.multiply(ze).getX().toBigInteger().mod(Ne);while(Z.compareTo(p.ZERO)<=0);var he=ze.modInverse(Ne).multiply(Ke.add(Ce.multiply(Z))).mod(Ne);return O.biRSSigToASN1Sig(Z,he)},this.sign=function(ye,Se){var Ce=Se,Ne=this.ecparams.n,Ke=p.fromByteArrayUnsigned(ye);do var ze=this.getBigRandom(Ne),Z=this.ecparams.G.multiply(ze).getX().toBigInteger().mod(Ne);while(Z.compareTo(z.ZERO)<=0);var he=ze.modInverse(Ne).multiply(Ke.add(Ce.multiply(Z))).mod(Ne);return this.serializeSig(Z,he)},this.verifyWithMessageHash=function(ye,Se){return this.verifyHex(ye,Se,this.pubKeyHex)},this.verifyHex=function(ye,Se,Ce){try{var Ne,Ke,ze=O.parseSigHex(Se);Ne=ze.r,Ke=ze.s;var Z=v.decodeFromHex(this.ecparams.curve,Ce),he=new p(ye.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(he,Ne,Ke,Z)}catch{return!1}},this.verify=function(ye,Se,Ce){var Ne,Ke,ze;if(Bitcoin.Util.isArray(Se)){var Z=this.parseSig(Se);Ne=Z.r,Ke=Z.s}else{if((Se===void 0?"undefined":A(Se))!=="object"||!Se.r||!Se.s)throw"Invalid value for signature";Ne=Se.r,Ke=Se.s}if(Ce instanceof j)ze=Ce;else{if(!Bitcoin.Util.isArray(Ce))throw"Invalid format for pubkey value, must be byte array or ECPointFp";ze=v.decodeFrom(this.ecparams.curve,Ce)}var he=p.fromByteArrayUnsigned(ye);return this.verifyRaw(he,Ne,Ke,ze)},this.verifyRaw=function(ye,Se,Ce,Ne){var Ke=this.ecparams.n,ze=this.ecparams.G;if(Se.compareTo(p.ONE)<0||Se.compareTo(Ke)>=0||Ce.compareTo(p.ONE)<0||Ce.compareTo(Ke)>=0)return!1;var Z=Ce.modInverse(Ke),he=ye.multiply(Z).mod(Ke),me=Se.multiply(Z).mod(Ke);return ze.multiply(he).add(Ne.multiply(me)).getX().toBigInteger().mod(Ke).equals(Se)},this.serializeSig=function(ye,Se){var Ce=ye.toByteArraySigned(),Ne=Se.toByteArraySigned(),Ke=[];return Ke.push(2),Ke.push(Ce.length),(Ke=Ke.concat(Ce)).push(2),Ke.push(Ne.length),(Ke=Ke.concat(Ne)).unshift(Ke.length),Ke.unshift(48),Ke},this.parseSig=function(ye){var Se;if(ye[0]!=48)throw new Error("Signature not a valid DERSequence");if(ye[Se=2]!=2)throw new Error("First element in signature must be a DERInteger");var Ce=ye.slice(Se+2,Se+2+ye[Se+1]);if(ye[Se+=2+ye[Se+1]]!=2)throw new Error("Second element in signature must be a DERInteger");var Ne=ye.slice(Se+2,Se+2+ye[Se+1]);return Se+=2+ye[Se+1],{r:p.fromByteArrayUnsigned(Ce),s:p.fromByteArrayUnsigned(Ne)}},this.parseSigCompact=function(ye){if(ye.length!==65)throw"Signature has the wrong length";var Se=ye[0]-27;if(Se<0||Se>7)throw"Invalid signature type";var Ce=this.ecparams.n;return{r:p.fromByteArrayUnsigned(ye.slice(1,33)).mod(Ce),s:p.fromByteArrayUnsigned(ye.slice(33,65)).mod(Ce),i:Se}},this.readPKCS5PrvKeyHex=function(ye){if(le(ye)===!1)throw new Error("not ASN.1 hex string");var Se,Ce,Ne;try{Se=se(ye,0,["[0]",0],"06"),Ce=se(ye,0,[1],"04");try{Ne=se(ye,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=X(Se),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(Ne),this.setPrivateKeyHex(Ce),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(ye){if(le(ye)===!1)throw new c("not ASN.1 hex string");var Se,Ce,Ne;try{se(ye,0,[1,0],"06"),Se=se(ye,0,[1,1],"06"),Ce=se(ye,0,[2,0,1],"04");try{Ne=se(ye,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new c("malformed PKCS#8 plain ECC private key")}if(this.curveName=X(Se),this.curveName===void 0)throw new c("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Ne),this.setPrivateKeyHex(Ce),this.isPublic=!1},this.readPKCS8PubKeyHex=function(ye){if(le(ye)===!1)throw new c("not ASN.1 hex string");var Se,Ce;try{se(ye,0,[0,0],"06"),Se=se(ye,0,[0,1],"06"),Ce=se(ye,0,[1],"03")}catch{throw new c("malformed PKCS#8 ECC public key")}if(this.curveName=X(Se),this.curveName===null)throw new c("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Ce)},this.readCertPubKeyHex=function(ye,Se){if(le(ye)===!1)throw new c("not ASN.1 hex string");var Ce,Ne;try{Ce=se(ye,0,[0,5,0,1],"06"),Ne=se(ye,0,[0,5,1],"03")}catch{throw new c("malformed X.509 certificate ECC public key")}if(this.curveName=X(Ce),this.curveName===null)throw new c("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Ne)},f!==void 0&&f.curve!==void 0&&(this.curveName=f.curve),this.curveName===void 0&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),f!==void 0&&(f.prv!==void 0&&this.setPrivateKeyHex(f.prv),f.pub!==void 0&&this.setPublicKeyHex(f.pub))},w.crypto.ECDSA.parseSigHex=function(f){var c=w.crypto.ECDSA.parseSigHexInHexRS(f);return{r:new z(c.r,16),s:new z(c.s,16)}},w.crypto.ECDSA.parseSigHexInHexRS=function(f){var c=de,p=c.getChildIdx,v=c.getV;if(c.checkStrictDER(f,0),f.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var O=p(f,0);if(O.length!=2)throw new Error("signature shall have two elements");var $=O[0],X=O[1];if(f.substr($,2)!="02")throw new Error("1st item not ASN.1 integer");if(f.substr(X,2)!="02")throw new Error("2nd item not ASN.1 integer");return{r:v(f,$),s:v(f,X)}},w.crypto.ECDSA.asn1SigToConcatSig=function(f){var c=w.crypto.ECDSA.parseSigHexInHexRS(f),p=c.r,v=c.s;if(p.substr(0,2)=="00"&&p.length%32==2&&(p=p.substr(2)),v.substr(0,2)=="00"&&v.length%32==2&&(v=v.substr(2)),p.length%32==30&&(p="00"+p),v.length%32==30&&(v="00"+v),p.length%32!=0)throw"unknown ECDSA sig r length error";if(v.length%32!=0)throw"unknown ECDSA sig s length error";return p+v},w.crypto.ECDSA.concatSigToASN1Sig=function(f){if(f.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var c=f.substr(0,f.length/2),p=f.substr(f.length/2);return w.crypto.ECDSA.hexRSSigToASN1Sig(c,p)},w.crypto.ECDSA.hexRSSigToASN1Sig=function(f,c){var p=new z(f,16),v=new z(c,16);return w.crypto.ECDSA.biRSSigToASN1Sig(p,v)},w.crypto.ECDSA.biRSSigToASN1Sig=function(f,c){var p=w.asn1,v=new p.DERInteger({bigint:f}),O=new p.DERInteger({bigint:c});return new p.DERSequence({array:[v,O]}).getEncodedHex()},w.crypto.ECDSA.getName=function(f){return f==="2b8104001f"?"secp192k1":f==="2a8648ce3d030107"?"secp256r1":f==="2b8104000a"?"secp256k1":f==="2b81040021"?"secp224r1":f==="2b81040022"?"secp384r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(f)!==-1?"secp256r1":"|secp256k1|".indexOf(f)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(f)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(f)!==-1?"secp384r1":null},w!==void 0&&w||(n.KJUR=w={}),w.crypto!==void 0&&w.crypto||(w.crypto={}),w.crypto.ECParameterDB=new function(){var f={},c={};function p(v){return new z(v,16)}this.getByName=function(v){var O=v;if(c[O]!==void 0&&(O=c[v]),f[O]!==void 0)return f[O];throw"unregistered EC curve name: "+O},this.regist=function(v,O,$,X,ue,se,le,fe,ye,Se,Ce,Ne){f[v]={};var Ke=p($),ze=p(X),Z=p(ue),he=p(se),me=p(le),_e=new S(Ke,ze,Z),Be=_e.decodePointHex("04"+fe+ye);f[v].name=v,f[v].keylen=O,f[v].curve=_e,f[v].G=Be,f[v].n=he,f[v].h=me,f[v].oid=Ce,f[v].info=Ne;for(var Ge=0;Ge<Se.length;Ge++)c[Se[Ge]]=v}},w.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),w.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),w.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),w.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),w.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),w.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),w.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),w.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),w.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),w.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var It=function(){var f=function(le,fe,ye){return c(L.AES,le,fe,ye)},c=function(le,fe,ye,Se){var Ce=L.enc.Hex.parse(fe),Ne=L.enc.Hex.parse(ye),Ke=L.enc.Hex.parse(Se),ze={};ze.key=Ne,ze.iv=Ke,ze.ciphertext=Ce;var Z=le.decrypt(ze,Ne,{iv:Ke});return L.enc.Hex.stringify(Z)},p=function(le,fe,ye){return v(L.AES,le,fe,ye)},v=function(le,fe,ye,Se){var Ce=L.enc.Hex.parse(fe),Ne=L.enc.Hex.parse(ye),Ke=L.enc.Hex.parse(Se),ze=le.encrypt(Ce,Ne,{iv:Ke}),Z=L.enc.Hex.parse(ze.toString());return L.enc.Base64.stringify(Z)},O={"AES-256-CBC":{proc:f,eproc:p,keylen:32,ivlen:16},"AES-192-CBC":{proc:f,eproc:p,keylen:24,ivlen:16},"AES-128-CBC":{proc:f,eproc:p,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(le,fe,ye){return c(L.TripleDES,le,fe,ye)},eproc:function(le,fe,ye){return v(L.TripleDES,le,fe,ye)},keylen:24,ivlen:8},"DES-CBC":{proc:function(le,fe,ye){return c(L.DES,le,fe,ye)},eproc:function(le,fe,ye){return v(L.DES,le,fe,ye)},keylen:8,ivlen:8}},$=function(le){var fe={},ye=le.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));ye&&(fe.cipher=ye[1],fe.ivsalt=ye[2]);var Se=le.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));Se&&(fe.type=Se[1]);var Ce=-1,Ne=0;le.indexOf(`\r
\r
`)!=-1&&(Ce=le.indexOf(`\r
\r
`),Ne=2),le.indexOf(`

`)!=-1&&(Ce=le.indexOf(`

`),Ne=1);var Ke=le.indexOf("-----END");if(Ce!=-1&&Ke!=-1){var ze=le.substring(Ce+2*Ne,Ke-Ne);ze=ze.replace(/\s+/g,""),fe.data=ze}return fe},X=function(le,fe,ye){for(var Se=ye.substring(0,16),Ce=L.enc.Hex.parse(Se),Ne=L.enc.Utf8.parse(fe),Ke=O[le].keylen+O[le].ivlen,ze="",Z=null;;){var he=L.algo.MD5.create();if(Z!=null&&he.update(Z),he.update(Ne),he.update(Ce),Z=he.finalize(),(ze+=L.enc.Hex.stringify(Z)).length>=2*Ke)break}var me={};return me.keyhex=ze.substr(0,2*O[le].keylen),me.ivhex=ze.substr(2*O[le].keylen,2*O[le].ivlen),me},ue=function(le,fe,ye,Se){var Ce=L.enc.Base64.parse(le),Ne=L.enc.Hex.stringify(Ce);return(0,O[fe].proc)(Ne,ye,Se)};return{version:"1.0.0",parsePKCS5PEM:function(le){return $(le)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(le,fe,ye){return X(le,fe,ye)},decryptKeyB64:function(le,fe,ye,Se){return ue(le,fe,ye,Se)},getDecryptedKeyHex:function(le,fe){var ye=$(le),Se=ye.cipher,Ce=ye.ivsalt,Ne=ye.data,Ke=X(Se,fe,Ce).keyhex;return ue(Ne,Se,Ke,Ce)},getEncryptedPKCS5PEMFromPrvKeyHex:function(le,fe,ye,Se,Ce){var Ne="";if(Se!==void 0&&Se!=null||(Se="AES-256-CBC"),O[Se]===void 0)throw new Error("KEYUTIL unsupported algorithm: "+Se);Ce!==void 0&&Ce!=null||(Ce=function(Z){var he=L.lib.WordArray.random(Z);return L.enc.Hex.stringify(he)}(O[Se].ivlen).toUpperCase());var Ke=function(Z,he,me,_e){return(0,O[he].eproc)(Z,me,_e)}(fe,Se,X(Se,ye,Ce).keyhex,Ce);return Ne="-----BEGIN "+le+` PRIVATE KEY-----\r
`,Ne+=`Proc-Type: 4,ENCRYPTED\r
`,Ne+="DEK-Info: "+Se+","+Ce+`\r
`,Ne+=`\r
`,Ne+=Ke.replace(/(.{64})/g,`$1\r
`),Ne+=`\r
-----END `+le+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(le){var fe=de,ye=fe.getChildIdx,Se=fe.getV,Ce={},Ne=ye(le,0);if(Ne.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+Ne.length);Ce.ciphertext=Se(le,Ne[1]);var Ke=ye(le,Ne[0]);if(Ke.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+Ke.length);if(Se(le,Ke[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var ze=ye(le,Ke[1]);if(Ke.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+ze.length);var Z=ye(le,ze[1]);if(Z.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+Z.length);if(Se(le,Z[0])!="2a864886f70d0307")throw"this only supports TripleDES";Ce.encryptionSchemeAlg="TripleDES",Ce.encryptionSchemeIV=Se(le,Z[1]);var he=ye(le,ze[0]);if(he.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+he.length);if(Se(le,he[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var me=ye(le,he[1]);if(me.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+me.length);Ce.pbkdf2Salt=Se(le,me[0]);var _e=Se(le,me[1]);try{Ce.pbkdf2Iter=parseInt(_e,16)}catch{throw new Error("malformed format pbkdf2Iter: "+_e)}return Ce},getPBKDF2KeyHexFromParam:function(le,fe){var ye=L.enc.Hex.parse(le.pbkdf2Salt),Se=le.pbkdf2Iter,Ce=L.PBKDF2(fe,ye,{keySize:6,iterations:Se});return L.enc.Hex.stringify(Ce)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(le,fe){var ye=qt(le,"ENCRYPTED PRIVATE KEY"),Se=this.parseHexOfEncryptedPKCS8(ye),Ce=It.getPBKDF2KeyHexFromParam(Se,fe),Ne={};Ne.ciphertext=L.enc.Hex.parse(Se.ciphertext);var Ke=L.enc.Hex.parse(Ce),ze=L.enc.Hex.parse(Se.encryptionSchemeIV),Z=L.TripleDES.decrypt(Ne,Ke,{iv:ze});return L.enc.Hex.stringify(Z)},getKeyFromEncryptedPKCS8PEM:function(le,fe){var ye=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(le,fe);return this.getKeyFromPlainPrivatePKCS8Hex(ye)},parsePlainPrivatePKCS8Hex:function(le){var fe=de,ye=fe.getChildIdx,Se=fe.getV,Ce={algparam:null};if(le.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var Ne=ye(le,0);if(Ne.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(le.substr(Ne[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var Ke=ye(le,Ne[1]);if(Ke.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(le.substr(Ke[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(Ce.algoid=Se(le,Ke[0]),le.substr(Ke[1],2)=="06"&&(Ce.algparam=Se(le,Ke[1])),le.substr(Ne[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return Ce.keyidx=fe.getVidx(le,Ne[2]),Ce},getKeyFromPlainPrivatePKCS8PEM:function(le){var fe=qt(le,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(fe)},getKeyFromPlainPrivatePKCS8Hex:function(le){var fe,ye=this.parsePlainPrivatePKCS8Hex(le);if(ye.algoid=="2a864886f70d010101")fe=new Y;else if(ye.algoid=="2a8648ce380401")fe=new w.crypto.DSA;else{if(ye.algoid!="2a8648ce3d0201")throw new Error("unsupported private key algorithm");fe=new w.crypto.ECDSA}return fe.readPKCS8PrvKeyHex(le),fe},_getKeyFromPublicPKCS8Hex:function(le){var fe,ye=de.getVbyList(le,0,[0,0],"06");if(ye==="2a864886f70d010101")fe=new Y;else if(ye==="2a8648ce380401")fe=new w.crypto.DSA;else{if(ye!=="2a8648ce3d0201")throw new Error("unsupported PKCS#8 public key hex");fe=new w.crypto.ECDSA}return fe.readPKCS8PubKeyHex(le),fe},parsePublicRawRSAKeyHex:function(le){var fe=de,ye=fe.getChildIdx,Se=fe.getV,Ce={};if(le.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var Ne=ye(le,0);if(Ne.length!=2)throw new Error("malformed RSA key(code:002)");if(le.substr(Ne[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(Ce.n=Se(le,Ne[0]),le.substr(Ne[1],2)!="02")throw new Error("malformed RSA key(code:004)");return Ce.e=Se(le,Ne[1]),Ce},parsePublicPKCS8Hex:function(le){var fe=de,ye=fe.getChildIdx,Se=fe.getV,Ce={algparam:null},Ne=ye(le,0);if(Ne.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+Ne.length);var Ke=Ne[0];if(le.substr(Ke,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var ze=ye(le,Ke);if(ze.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(le.substr(ze[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(Ce.algoid=Se(le,ze[0]),le.substr(ze[1],2)=="06"?Ce.algparam=Se(le,ze[1]):le.substr(ze[1],2)=="30"&&(Ce.algparam={},Ce.algparam.p=fe.getVbyList(le,ze[1],[0],"02"),Ce.algparam.q=fe.getVbyList(le,ze[1],[1],"02"),Ce.algparam.g=fe.getVbyList(le,ze[1],[2],"02")),le.substr(Ne[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return Ce.key=Se(le,Ne[1]).substr(2),Ce}}}();It.getKey=function(f,c,p){var v=(ze=de).getChildIdx,O=(ze.getV,ze.getVbyList),$=w.crypto,X=$.ECDSA,ue=$.DSA,se=Y,le=qt,fe=It;if(se!==void 0&&f instanceof se||X!==void 0&&f instanceof X||ue!==void 0&&f instanceof ue)return f;if(f.curve!==void 0&&f.xy!==void 0&&f.d===void 0)return new X({pub:f.xy,curve:f.curve});if(f.curve!==void 0&&f.d!==void 0)return new X({prv:f.d,curve:f.curve});if(f.kty===void 0&&f.n!==void 0&&f.e!==void 0&&f.d===void 0)return(Zt=new se).setPublic(f.n,f.e),Zt;if(f.kty===void 0&&f.n!==void 0&&f.e!==void 0&&f.d!==void 0&&f.p!==void 0&&f.q!==void 0&&f.dp!==void 0&&f.dq!==void 0&&f.co!==void 0&&f.qi===void 0)return(Zt=new se).setPrivateEx(f.n,f.e,f.d,f.p,f.q,f.dp,f.dq,f.co),Zt;if(f.kty===void 0&&f.n!==void 0&&f.e!==void 0&&f.d!==void 0&&f.p===void 0)return(Zt=new se).setPrivate(f.n,f.e,f.d),Zt;if(f.p!==void 0&&f.q!==void 0&&f.g!==void 0&&f.y!==void 0&&f.x===void 0)return(Zt=new ue).setPublic(f.p,f.q,f.g,f.y),Zt;if(f.p!==void 0&&f.q!==void 0&&f.g!==void 0&&f.y!==void 0&&f.x!==void 0)return(Zt=new ue).setPrivate(f.p,f.q,f.g,f.y,f.x),Zt;if(f.kty==="RSA"&&f.n!==void 0&&f.e!==void 0&&f.d===void 0)return(Zt=new se).setPublic(pe(f.n),pe(f.e)),Zt;if(f.kty==="RSA"&&f.n!==void 0&&f.e!==void 0&&f.d!==void 0&&f.p!==void 0&&f.q!==void 0&&f.dp!==void 0&&f.dq!==void 0&&f.qi!==void 0)return(Zt=new se).setPrivateEx(pe(f.n),pe(f.e),pe(f.d),pe(f.p),pe(f.q),pe(f.dp),pe(f.dq),pe(f.qi)),Zt;if(f.kty==="RSA"&&f.n!==void 0&&f.e!==void 0&&f.d!==void 0)return(Zt=new se).setPrivate(pe(f.n),pe(f.e),pe(f.d)),Zt;if(f.kty==="EC"&&f.crv!==void 0&&f.x!==void 0&&f.y!==void 0&&f.d===void 0){var ye=(kt=new X({curve:f.crv})).ecparams.keylen/4,Se="04"+("0000000000"+pe(f.x)).slice(-ye)+("0000000000"+pe(f.y)).slice(-ye);return kt.setPublicKeyHex(Se),kt}if(f.kty==="EC"&&f.crv!==void 0&&f.x!==void 0&&f.y!==void 0&&f.d!==void 0){ye=(kt=new X({curve:f.crv})).ecparams.keylen/4,Se="04"+("0000000000"+pe(f.x)).slice(-ye)+("0000000000"+pe(f.y)).slice(-ye);var Ce=("0000000000"+pe(f.d)).slice(-ye);return kt.setPublicKeyHex(Se),kt.setPrivateKeyHex(Ce),kt}if(p==="pkcs5prv"){var Ne,Ke=f,ze=de;if((Ne=v(Ke,0)).length===9)(Zt=new se).readPKCS5PrvKeyHex(Ke);else if(Ne.length===6)(Zt=new ue).readPKCS5PrvKeyHex(Ke);else{if(!(Ne.length>2&&Ke.substr(Ne[1],2)==="04"))throw new Error("unsupported PKCS#1/5 hexadecimal key");(Zt=new X).readPKCS5PrvKeyHex(Ke)}return Zt}if(p==="pkcs8prv")return Zt=fe.getKeyFromPlainPrivatePKCS8Hex(f);if(p==="pkcs8pub")return fe._getKeyFromPublicPKCS8Hex(f);if(p==="x509pub")return dr.getPublicKeyFromCertHex(f);if(f.indexOf("-END CERTIFICATE-",0)!=-1||f.indexOf("-END X509 CERTIFICATE-",0)!=-1||f.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return dr.getPublicKeyFromCertPEM(f);if(f.indexOf("-END PUBLIC KEY-")!=-1){var Z=qt(f,"PUBLIC KEY");return fe._getKeyFromPublicPKCS8Hex(Z)}if(f.indexOf("-END RSA PRIVATE KEY-")!=-1&&f.indexOf("4,ENCRYPTED")==-1){var he=le(f,"RSA PRIVATE KEY");return fe.getKey(he,null,"pkcs5prv")}if(f.indexOf("-END DSA PRIVATE KEY-")!=-1&&f.indexOf("4,ENCRYPTED")==-1){var me=O(Vr=le(f,"DSA PRIVATE KEY"),0,[1],"02"),_e=O(Vr,0,[2],"02"),Be=O(Vr,0,[3],"02"),Ge=O(Vr,0,[4],"02"),Dt=O(Vr,0,[5],"02");return(Zt=new ue).setPrivate(new z(me,16),new z(_e,16),new z(Be,16),new z(Ge,16),new z(Dt,16)),Zt}if(f.indexOf("-END EC PRIVATE KEY-")!=-1&&f.indexOf("4,ENCRYPTED")==-1)return he=le(f,"EC PRIVATE KEY"),fe.getKey(he,null,"pkcs5prv");if(f.indexOf("-END PRIVATE KEY-")!=-1)return fe.getKeyFromPlainPrivatePKCS8PEM(f);if(f.indexOf("-END RSA PRIVATE KEY-")!=-1&&f.indexOf("4,ENCRYPTED")!=-1){var ut=fe.getDecryptedKeyHex(f,c),Ar=new Y;return Ar.readPKCS5PrvKeyHex(ut),Ar}if(f.indexOf("-END EC PRIVATE KEY-")!=-1&&f.indexOf("4,ENCRYPTED")!=-1){var kt,Zt=O(Vr=fe.getDecryptedKeyHex(f,c),0,[1],"04"),Zr=O(Vr,0,[2,0],"06"),zr=O(Vr,0,[3,0],"03").substr(2);if(w.crypto.OID.oidhex2name[Zr]===void 0)throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+Zr);return(kt=new X({curve:w.crypto.OID.oidhex2name[Zr]})).setPublicKeyHex(zr),kt.setPrivateKeyHex(Zt),kt.isPublic=!1,kt}if(f.indexOf("-END DSA PRIVATE KEY-")!=-1&&f.indexOf("4,ENCRYPTED")!=-1){var Vr;return me=O(Vr=fe.getDecryptedKeyHex(f,c),0,[1],"02"),_e=O(Vr,0,[2],"02"),Be=O(Vr,0,[3],"02"),Ge=O(Vr,0,[4],"02"),Dt=O(Vr,0,[5],"02"),(Zt=new ue).setPrivate(new z(me,16),new z(_e,16),new z(Be,16),new z(Ge,16),new z(Dt,16)),Zt}if(f.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return fe.getKeyFromEncryptedPKCS8PEM(f,c);throw new Error("not supported argument")},It.generateKeypair=function(f,c){if(f=="RSA"){var p=c;(X=new Y).generate(p,"10001"),X.isPrivate=!0,X.isPublic=!0;var v=new Y,O=X.n.toString(16),$=X.e.toString(16);return v.setPublic(O,$),v.isPrivate=!1,v.isPublic=!0,(ue={}).prvKeyObj=X,ue.pubKeyObj=v,ue}if(f=="EC"){var X,ue,se=c,le=new w.crypto.ECDSA({curve:se}).generateKeyPairHex();return(X=new w.crypto.ECDSA({curve:se})).setPublicKeyHex(le.ecpubhex),X.setPrivateKeyHex(le.ecprvhex),X.isPrivate=!0,X.isPublic=!1,(v=new w.crypto.ECDSA({curve:se})).setPublicKeyHex(le.ecpubhex),v.isPrivate=!1,v.isPublic=!0,(ue={}).prvKeyObj=X,ue.pubKeyObj=v,ue}throw new Error("unknown algorithm: "+f)},It.getPEM=function(f,c,p,v,O,$){var X=w,ue=X.asn1,se=ue.DERObjectIdentifier,le=ue.DERInteger,fe=ue.ASN1Util.newObject,ye=ue.x509.SubjectPublicKeyInfo,Se=X.crypto,Ce=Se.DSA,Ne=Se.ECDSA,Ke=Y;function ze(kt){return fe({seq:[{int:0},{int:{bigint:kt.n}},{int:kt.e},{int:{bigint:kt.d}},{int:{bigint:kt.p}},{int:{bigint:kt.q}},{int:{bigint:kt.dmp1}},{int:{bigint:kt.dmq1}},{int:{bigint:kt.coeff}}]})}function Z(kt){return fe({seq:[{int:1},{octstr:{hex:kt.prvKeyHex}},{tag:["a0",!0,{oid:{name:kt.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+kt.pubKeyHex}}]}]})}function he(kt){return fe({seq:[{int:0},{int:{bigint:kt.p}},{int:{bigint:kt.q}},{int:{bigint:kt.g}},{int:{bigint:kt.y}},{int:{bigint:kt.x}}]})}if((Ke!==void 0&&f instanceof Ke||Ce!==void 0&&f instanceof Ce||Ne!==void 0&&f instanceof Ne)&&f.isPublic==1&&(c===void 0||c=="PKCS8PUB"))return Bt(Ge=new ye(f).getEncodedHex(),"PUBLIC KEY");if(c=="PKCS1PRV"&&Ke!==void 0&&f instanceof Ke&&(p===void 0||p==null)&&f.isPrivate==1)return Bt(Ge=ze(f).getEncodedHex(),"RSA PRIVATE KEY");if(c=="PKCS1PRV"&&Ne!==void 0&&f instanceof Ne&&(p===void 0||p==null)&&f.isPrivate==1){var me=new se({name:f.curveName}).getEncodedHex(),_e=Z(f).getEncodedHex(),Be="";return Be+=Bt(me,"EC PARAMETERS"),Be+=Bt(_e,"EC PRIVATE KEY")}if(c=="PKCS1PRV"&&Ce!==void 0&&f instanceof Ce&&(p===void 0||p==null)&&f.isPrivate==1)return Bt(Ge=he(f).getEncodedHex(),"DSA PRIVATE KEY");if(c=="PKCS5PRV"&&Ke!==void 0&&f instanceof Ke&&p!==void 0&&p!=null&&f.isPrivate==1){var Ge=ze(f).getEncodedHex();return v===void 0&&(v="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",Ge,p,v,$)}if(c=="PKCS5PRV"&&Ne!==void 0&&f instanceof Ne&&p!==void 0&&p!=null&&f.isPrivate==1)return Ge=Z(f).getEncodedHex(),v===void 0&&(v="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",Ge,p,v,$);if(c=="PKCS5PRV"&&Ce!==void 0&&f instanceof Ce&&p!==void 0&&p!=null&&f.isPrivate==1)return Ge=he(f).getEncodedHex(),v===void 0&&(v="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",Ge,p,v,$);var Dt=function(Zt,Zr){var zr=ut(Zt,Zr);return new fe({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:zr.pbkdf2Salt}},{int:zr.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:zr.encryptionSchemeIV}}]}]}]},{octstr:{hex:zr.ciphertext}}]}).getEncodedHex()},ut=function(Zt,Zr){var zr=L.lib.WordArray.random(8),Vr=L.lib.WordArray.random(8),nr=L.PBKDF2(Zr,zr,{keySize:6,iterations:100}),Gr=L.enc.Hex.parse(Zt),xr=L.TripleDES.encrypt(Gr,nr,{iv:Vr})+"",jr={};return jr.ciphertext=xr,jr.pbkdf2Salt=L.enc.Hex.stringify(zr),jr.pbkdf2Iter=100,jr.encryptionSchemeAlg="DES-EDE3-CBC",jr.encryptionSchemeIV=L.enc.Hex.stringify(Vr),jr};if(c=="PKCS8PRV"&&Ke!=null&&f instanceof Ke&&f.isPrivate==1){var Ar=ze(f).getEncodedHex();return Ge=fe({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:Ar}}]}).getEncodedHex(),p===void 0||p==null?Bt(Ge,"PRIVATE KEY"):Bt(_e=Dt(Ge,p),"ENCRYPTED PRIVATE KEY")}if(c=="PKCS8PRV"&&Ne!==void 0&&f instanceof Ne&&f.isPrivate==1)return Ar=new fe({seq:[{int:1},{octstr:{hex:f.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+f.pubKeyHex}}]}]}).getEncodedHex(),Ge=fe({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:f.curveName}}]},{octstr:{hex:Ar}}]}).getEncodedHex(),p===void 0||p==null?Bt(Ge,"PRIVATE KEY"):Bt(_e=Dt(Ge,p),"ENCRYPTED PRIVATE KEY");if(c=="PKCS8PRV"&&Ce!==void 0&&f instanceof Ce&&f.isPrivate==1)return Ar=new le({bigint:f.x}).getEncodedHex(),Ge=fe({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:f.p}},{int:{bigint:f.q}},{int:{bigint:f.g}}]}]},{octstr:{hex:Ar}}]}).getEncodedHex(),p===void 0||p==null?Bt(Ge,"PRIVATE KEY"):Bt(_e=Dt(Ge,p),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},It.getKeyFromCSRPEM=function(f){var c=qt(f,"CERTIFICATE REQUEST");return It.getKeyFromCSRHex(c)},It.getKeyFromCSRHex=function(f){var c=It.parseCSRHex(f);return It.getKey(c.p8pubkeyhex,null,"pkcs8pub")},It.parseCSRHex=function(f){var c=de,p=c.getChildIdx,v=c.getTLV,O={},$=f;if($.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var X=p($,0);if(X.length<1)throw new Error("malformed CSR(code:002)");if($.substr(X[0],2)!="30")throw new Error("malformed CSR(code:003)");var ue=p($,X[0]);if(ue.length<3)throw new Error("malformed CSR(code:004)");return O.p8pubkeyhex=v($,ue[2]),O},It.getKeyID=function(f){var c=It,p=de;typeof f=="string"&&f.indexOf("BEGIN ")!=-1&&(f=c.getKey(f));var v=qt(c.getPEM(f)),O=p.getIdxbyList(v,0,[1]),$=p.getV(v,O).substring(2);return w.crypto.Util.hashHex($,"sha1")},It.getJWKFromKey=function(f){var c={};if(f instanceof Y&&f.isPrivate)return c.kty="RSA",c.n=ge(f.n.toString(16)),c.e=ge(f.e.toString(16)),c.d=ge(f.d.toString(16)),c.p=ge(f.p.toString(16)),c.q=ge(f.q.toString(16)),c.dp=ge(f.dmp1.toString(16)),c.dq=ge(f.dmq1.toString(16)),c.qi=ge(f.coeff.toString(16)),c;if(f instanceof Y&&f.isPublic)return c.kty="RSA",c.n=ge(f.n.toString(16)),c.e=ge(f.e.toString(16)),c;if(f instanceof w.crypto.ECDSA&&f.isPrivate){if((v=f.getShortNISTPCurveName())!=="P-256"&&v!=="P-384")throw new Error("unsupported curve name for JWT: "+v);var p=f.getPublicKeyXYHex();return c.kty="EC",c.crv=v,c.x=ge(p.x),c.y=ge(p.y),c.d=ge(f.prvKeyHex),c}if(f instanceof w.crypto.ECDSA&&f.isPublic){var v;if((v=f.getShortNISTPCurveName())!=="P-256"&&v!=="P-384")throw new Error("unsupported curve name for JWT: "+v);return p=f.getPublicKeyXYHex(),c.kty="EC",c.crv=v,c.x=ge(p.x),c.y=ge(p.y),c}throw new Error("not supported key object")},Y.getPosArrayOfChildrenFromHex=function(f){return de.getChildIdx(f,0)},Y.getHexValueArrayOfChildrenFromHex=function(f){var c,p=de.getV,v=p(f,(c=Y.getPosArrayOfChildrenFromHex(f))[0]),O=p(f,c[1]),$=p(f,c[2]),X=p(f,c[3]),ue=p(f,c[4]),se=p(f,c[5]),le=p(f,c[6]),fe=p(f,c[7]),ye=p(f,c[8]);return(c=new Array).push(v,O,$,X,ue,se,le,fe,ye),c},Y.prototype.readPrivateKeyFromPEMString=function(f){var c=qt(f),p=Y.getHexValueArrayOfChildrenFromHex(c);this.setPrivateEx(p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8])},Y.prototype.readPKCS5PrvKeyHex=function(f){var c=Y.getHexValueArrayOfChildrenFromHex(f);this.setPrivateEx(c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8])},Y.prototype.readPKCS8PrvKeyHex=function(f){var c,p,v,O,$,X,ue,se,le=de,fe=le.getVbyListEx;if(le.isASN1HEX(f)===!1)throw new Error("not ASN.1 hex string");try{c=fe(f,0,[2,0,1],"02"),p=fe(f,0,[2,0,2],"02"),v=fe(f,0,[2,0,3],"02"),O=fe(f,0,[2,0,4],"02"),$=fe(f,0,[2,0,5],"02"),X=fe(f,0,[2,0,6],"02"),ue=fe(f,0,[2,0,7],"02"),se=fe(f,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(c,p,v,O,$,X,ue,se)},Y.prototype.readPKCS5PubKeyHex=function(f){var c=de,p=c.getV;if(c.isASN1HEX(f)===!1)throw new Error("keyHex is not ASN.1 hex string");var v=c.getChildIdx(f,0);if(v.length!==2||f.substr(v[0],2)!=="02"||f.substr(v[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var O=p(f,v[0]),$=p(f,v[1]);this.setPublic(O,$)},Y.prototype.readPKCS8PubKeyHex=function(f){var c=de;if(c.isASN1HEX(f)===!1)throw new Error("not ASN.1 hex string");if(c.getTLVbyListEx(f,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var p=c.getTLVbyListEx(f,0,[1,0]);this.readPKCS5PubKeyHex(p)},Y.prototype.readCertPubKeyHex=function(f,c){var p,v;(p=new dr).readCertHex(f),v=p.getPublicKeyHex(),this.readPKCS8PubKeyHex(v)};function Wr(f,c){for(var p="",v=c/4-f.length,O=0;O<v;O++)p+="0";return p+f}function Or(f,c,p){for(var v="",O=0;v.length<c;)v+=rt(p(et(f+String.fromCharCode.apply(String,[(4278190080&O)>>24,(16711680&O)>>16,(65280&O)>>8,255&O])))),O+=1;return v}function Mr(f){for(var c in w.crypto.Util.DIGESTINFOHEAD){var p=w.crypto.Util.DIGESTINFOHEAD[c],v=p.length;if(f.substring(0,v)==p)return[c,f.substring(v)]}return[]}function dr(f){var c,p=de,v=p.getChildIdx,O=p.getV,$=p.getTLV,X=p.getVbyList,ue=p.getVbyListEx,se=p.getTLVbyList,le=p.getTLVbyListEx,fe=p.getIdxbyList,ye=p.getIdxbyListEx,Se=p.getVidx,Ce=p.getInt,Ne=p.oidname,Ke=p.hextooidstr,ze=qt;try{c=w.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var Z=se(this.hex,0,[0,0]);if(Z.substr(0,2)=="a0"){var he=se(Z,0,[0]),me=Ce(he,0);if(me<0||2<me)throw new Error("malformed version field");return this.version=me+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return ue(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var Z=le(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(Z)},this.getAlgorithmIdentifierName=function(Z){for(var he in c)if(Z===c[he])return he;return Ne(ue(Z,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return se(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return se(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var Z=X(this.hex,0,[0,4+this.foffset,0]);return Z=Z.replace(/(..)/g,"%$1"),Z=decodeURIComponent(Z)},this.getNotAfter=function(){var Z=X(this.hex,0,[0,4+this.foffset,1]);return Z=Z.replace(/(..)/g,"%$1"),Z=decodeURIComponent(Z)},this.getPublicKeyHex=function(){return p.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return fe(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var Z=this.getPublicKeyIdx();return fe(this.hex,Z,[1,0],"30")},this.getPublicKey=function(){return It.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var Z=se(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(Z)},this.getSignatureValueHex=function(){return X(this.hex,0,[2],"03",!0)},this.verifySignature=function(Z){var he=this.getSignatureAlgorithmField(),me=this.getSignatureValueHex(),_e=se(this.hex,0,[0],"30"),Be=new w.crypto.Signature({alg:he});return Be.init(Z),Be.updateHex(_e),Be.verify(me)},this.parseExt=function(Z){var he,me,_e;if(Z===void 0){if(_e=this.hex,this.version!==3)return-1;he=fe(_e,0,[0,7,0],"30"),me=v(_e,he)}else{_e=qt(Z);var Be=fe(_e,0,[0,3,0,0],"06");if(O(_e,Be)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);he=fe(_e,0,[0,3,0,1,0],"30"),me=v(_e,he),this.hex=_e}this.aExtInfo=new Array;for(var Ge=0;Ge<me.length;Ge++){var Dt={critical:!1},ut=0;v(_e,me[Ge]).length===3&&(Dt.critical=!0,ut=1),Dt.oid=p.hextooidstr(X(_e,me[Ge],[0],"06"));var Ar=fe(_e,me[Ge],[1+ut]);Dt.vidx=Se(_e,Ar),this.aExtInfo.push(Dt)}},this.getExtInfo=function(Z){var he=this.aExtInfo,me=Z;if(Z.match(/^[0-9.]+$/)||(me=w.asn1.x509.OID.name2oid(Z)),me!==""){for(var _e=0;_e<he.length;_e++)if(he[_e].oid===me)return he[_e]}},this.getExtBasicConstraints=function(Z,he){if(Z===void 0&&he===void 0){var me=this.getExtInfo("basicConstraints");if(me===void 0)return;Z=$(this.hex,me.vidx),he=me.critical}var _e={extname:"basicConstraints"};if(he&&(_e.critical=!0),Z==="3000")return _e;if(Z==="30030101ff")return _e.cA=!0,_e;if(Z.substr(0,12)==="30060101ff02"){var Be=O(Z,10),Ge=parseInt(Be,16);return _e.cA=!0,_e.pathLen=Ge,_e}throw new Error("hExtV parse error: "+Z)},this.getExtKeyUsage=function(Z,he){if(Z===void 0&&he===void 0){var me=this.getExtInfo("keyUsage");if(me===void 0)return;Z=$(this.hex,me.vidx),he=me.critical}var _e={extname:"keyUsage"};return he&&(_e.critical=!0),_e.names=this.getExtKeyUsageString(Z).split(","),_e},this.getExtKeyUsageBin=function(Z){if(Z===void 0){var he=this.getExtInfo("keyUsage");if(he===void 0)return"";Z=$(this.hex,he.vidx)}if(Z.length!=8&&Z.length!=10)throw new Error("malformed key usage value: "+Z);var me="000000000000000"+parseInt(Z.substr(6),16).toString(2);return Z.length==8&&(me=me.slice(-8)),Z.length==10&&(me=me.slice(-16)),(me=me.replace(/0+$/,""))==""&&(me="0"),me},this.getExtKeyUsageString=function(Z){for(var he=this.getExtKeyUsageBin(Z),me=new Array,_e=0;_e<he.length;_e++)he.substr(_e,1)=="1"&&me.push(dr.KEYUSAGE_NAME[_e]);return me.join(",")},this.getExtSubjectKeyIdentifier=function(Z,he){if(Z===void 0&&he===void 0){var me=this.getExtInfo("subjectKeyIdentifier");if(me===void 0)return;Z=$(this.hex,me.vidx),he=me.critical}var _e={extname:"subjectKeyIdentifier"};he&&(_e.critical=!0);var Be=O(Z,0);return _e.kid={hex:Be},_e},this.getExtAuthorityKeyIdentifier=function(Z,he){if(Z===void 0&&he===void 0){var me=this.getExtInfo("authorityKeyIdentifier");if(me===void 0)return;Z=$(this.hex,me.vidx),he=me.critical}var _e={extname:"authorityKeyIdentifier"};he&&(_e.critical=!0);for(var Be=v(Z,0),Ge=0;Ge<Be.length;Ge++){var Dt=Z.substr(Be[Ge],2);if(Dt==="80"&&(_e.kid={hex:O(Z,Be[Ge])}),Dt==="a1"){var ut=$(Z,Be[Ge]),Ar=this.getGeneralNames(ut);_e.issuer=Ar[0].dn}Dt==="82"&&(_e.sn={hex:O(Z,Be[Ge])})}return _e},this.getExtExtKeyUsage=function(Z,he){if(Z===void 0&&he===void 0){var me=this.getExtInfo("extKeyUsage");if(me===void 0)return;Z=$(this.hex,me.vidx),he=me.critical}var _e={extname:"extKeyUsage",array:[]};he&&(_e.critical=!0);for(var Be=v(Z,0),Ge=0;Ge<Be.length;Ge++)_e.array.push(Ne(O(Z,Be[Ge])));return _e},this.getExtExtKeyUsageName=function(){var Z=this.getExtInfo("extKeyUsage");if(Z===void 0)return Z;var he=new Array,me=$(this.hex,Z.vidx);if(me==="")return he;for(var _e=v(me,0),Be=0;Be<_e.length;Be++)he.push(Ne(O(me,_e[Be])));return he},this.getExtSubjectAltName=function(Z,he){if(Z===void 0&&he===void 0){var me=this.getExtInfo("subjectAltName");if(me===void 0)return;Z=$(this.hex,me.vidx),he=me.critical}var _e={extname:"subjectAltName",array:[]};return he&&(_e.critical=!0),_e.array=this.getGeneralNames(Z),_e},this.getExtIssuerAltName=function(Z,he){if(Z===void 0&&he===void 0){var me=this.getExtInfo("issuerAltName");if(me===void 0)return;Z=$(this.hex,me.vidx),he=me.critical}var _e={extname:"issuerAltName",array:[]};return he&&(_e.critical=!0),_e.array=this.getGeneralNames(Z),_e},this.getGeneralNames=function(Z){for(var he=v(Z,0),me=[],_e=0;_e<he.length;_e++){var Be=this.getGeneralName($(Z,he[_e]));Be!==void 0&&me.push(Be)}return me},this.getGeneralName=function(Z){var he=Z.substr(0,2),me=O(Z,0),_e=rt(me);return he=="81"?{rfc822:_e}:he=="82"?{dns:_e}:he=="86"?{uri:_e}:he=="87"?{ip:Kt(me)}:he=="a4"?{dn:this.getX500Name(me)}:void 0},this.getExtSubjectAltName2=function(){var Z,he,me,_e=this.getExtInfo("subjectAltName");if(_e===void 0)return _e;for(var Be=new Array,Ge=$(this.hex,_e.vidx),Dt=v(Ge,0),ut=0;ut<Dt.length;ut++)me=Ge.substr(Dt[ut],2),Z=O(Ge,Dt[ut]),me==="81"&&(he=at(Z),Be.push(["MAIL",he])),me==="82"&&(he=at(Z),Be.push(["DNS",he])),me==="84"&&(he=dr.hex2dn(Z,0),Be.push(["DN",he])),me==="86"&&(he=at(Z),Be.push(["URI",he])),me==="87"&&(he=Kt(Z),Be.push(["IP",he]));return Be},this.getExtCRLDistributionPoints=function(Z,he){if(Z===void 0&&he===void 0){var me=this.getExtInfo("cRLDistributionPoints");if(me===void 0)return;Z=$(this.hex,me.vidx),he=me.critical}var _e={extname:"cRLDistributionPoints",array:[]};he&&(_e.critical=!0);for(var Be=v(Z,0),Ge=0;Ge<Be.length;Ge++){var Dt=$(Z,Be[Ge]);_e.array.push(this.getDistributionPoint(Dt))}return _e},this.getDistributionPoint=function(Z){for(var he={},me=v(Z,0),_e=0;_e<me.length;_e++){var Be=Z.substr(me[_e],2),Ge=$(Z,me[_e]);Be=="a0"&&(he.dpname=this.getDistributionPointName(Ge))}return he},this.getDistributionPointName=function(Z){for(var he={},me=v(Z,0),_e=0;_e<me.length;_e++){var Be=Z.substr(me[_e],2),Ge=$(Z,me[_e]);Be=="a0"&&(he.full=this.getGeneralNames(Ge))}return he},this.getExtCRLDistributionPointsURI=function(){var Z=this.getExtInfo("cRLDistributionPoints");if(Z===void 0)return Z;for(var he=new Array,me=v(this.hex,Z.vidx),_e=0;_e<me.length;_e++)try{var Be=at(X(this.hex,me[_e],[0,0,0],"86"));he.push(Be)}catch{}return he},this.getExtAIAInfo=function(){var Z=this.getExtInfo("authorityInfoAccess");if(Z===void 0)return Z;for(var he={ocsp:[],caissuer:[]},me=v(this.hex,Z.vidx),_e=0;_e<me.length;_e++){var Be=X(this.hex,me[_e],[0],"06"),Ge=X(this.hex,me[_e],[1],"86");Be==="2b06010505073001"&&he.ocsp.push(at(Ge)),Be==="2b06010505073002"&&he.caissuer.push(at(Ge))}return he},this.getExtAuthorityInfoAccess=function(Z,he){if(Z===void 0&&he===void 0){var me=this.getExtInfo("authorityInfoAccess");if(me===void 0)return;Z=$(this.hex,me.vidx),he=me.critical}var _e={extname:"authorityInfoAccess",array:[]};he&&(_e.critical=!0);for(var Be=v(Z,0),Ge=0;Ge<Be.length;Ge++){var Dt=ue(Z,Be[Ge],[0],"06"),ut=at(X(Z,Be[Ge],[1],"86"));if(Dt=="2b06010505073001")_e.array.push({ocsp:ut});else{if(Dt!="2b06010505073002")throw new Error("unknown method: "+Dt);_e.array.push({caissuer:ut})}}return _e},this.getExtCertificatePolicies=function(Z,he){if(Z===void 0&&he===void 0){var me=this.getExtInfo("certificatePolicies");if(me===void 0)return;Z=$(this.hex,me.vidx),he=me.critical}var _e={extname:"certificatePolicies",array:[]};he&&(_e.critical=!0);for(var Be=v(Z,0),Ge=0;Ge<Be.length;Ge++){var Dt=$(Z,Be[Ge]),ut=this.getPolicyInformation(Dt);_e.array.push(ut)}return _e},this.getPolicyInformation=function(Z){var he={},me=X(Z,0,[0],"06");he.policyoid=Ne(me);var _e=ye(Z,0,[1],"30");if(_e!=-1){he.array=[];for(var Be=v(Z,_e),Ge=0;Ge<Be.length;Ge++){var Dt=$(Z,Be[Ge]),ut=this.getPolicyQualifierInfo(Dt);he.array.push(ut)}}return he},this.getPolicyQualifierInfo=function(Z){var he={},me=X(Z,0,[0],"06");if(me==="2b06010505070201"){var _e=ue(Z,0,[1],"16");he.cps=rt(_e)}else if(me==="2b06010505070202"){var Be=se(Z,0,[1],"30");he.unotice=this.getUserNotice(Be)}return he},this.getUserNotice=function(Z){for(var he={},me=v(Z,0),_e=0;_e<me.length;_e++){var Be=$(Z,me[_e]);Be.substr(0,2)!="30"&&(he.exptext=this.getDisplayText(Be))}return he},this.getDisplayText=function(Z){var he={};return he.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[Z.substr(0,2)],he.str=rt(O(Z,0)),he},this.getExtCRLNumber=function(Z,he){var me={extname:"cRLNumber"};if(he&&(me.critical=!0),Z.substr(0,2)=="02")return me.num={hex:O(Z,0)},me;throw new Error("hExtV parse error: "+Z)},this.getExtCRLReason=function(Z,he){var me={extname:"cRLReason"};if(he&&(me.critical=!0),Z.substr(0,2)=="0a")return me.code=parseInt(O(Z,0),16),me;throw new Error("hExtV parse error: "+Z)},this.getExtOcspNonce=function(Z,he){var me={extname:"ocspNonce"};he&&(me.critical=!0);var _e=O(Z,0);return me.hex=_e,me},this.getExtOcspNoCheck=function(Z,he){var me={extname:"ocspNoCheck"};return he&&(me.critical=!0),me},this.getExtAdobeTimeStamp=function(Z,he){if(Z===void 0&&he===void 0){var me=this.getExtInfo("adobeTimeStamp");if(me===void 0)return;Z=$(this.hex,me.vidx),he=me.critical}var _e={extname:"adobeTimeStamp"};he&&(_e.critical=!0);var Be=v(Z,0);if(Be.length>1){var Ge=$(Z,Be[1]),Dt=this.getGeneralName(Ge);Dt.uri!=null&&(_e.uri=Dt.uri)}if(Be.length>2){var ut=$(Z,Be[2]);ut=="0101ff"&&(_e.reqauth=!0),ut=="010100"&&(_e.reqauth=!1)}return _e},this.getX500NameRule=function(Z){for(var he=null,me=[],_e=0;_e<Z.length;_e++)for(var Be=Z[_e],Ge=0;Ge<Be.length;Ge++)me.push(Be[Ge]);for(_e=0;_e<me.length;_e++){var Dt=me[_e],ut=Dt.ds,Ar=Dt.value,kt=Dt.type;if(ut!="prn"&&ut!="utf8"&&ut!="ia5")return"mixed";if(ut=="ia5"){if(kt!="CN")return"mixed";if(w.lang.String.isMail(Ar))continue;return"mixed"}if(kt=="C"){if(ut=="prn")continue;return"mixed"}if(he==null)he=ut;else if(he!==ut)return"mixed"}return he??"prn"},this.getX500Name=function(Z){var he=this.getX500NameArray(Z);return{array:he,str:this.dnarraytostr(he)}},this.getX500NameArray=function(Z){for(var he=[],me=v(Z,0),_e=0;_e<me.length;_e++)he.push(this.getRDN($(Z,me[_e])));return he},this.getRDN=function(Z){for(var he=[],me=v(Z,0),_e=0;_e<me.length;_e++)he.push(this.getAttrTypeAndValue($(Z,me[_e])));return he},this.getAttrTypeAndValue=function(Z){var he={type:null,value:null,ds:null},me=v(Z,0),_e=X(Z,me[0],[],"06"),Be=X(Z,me[1],[]),Ge=w.asn1.ASN1Util.oidHexToInt(_e);return he.type=w.asn1.x509.OID.oid2atype(Ge),he.ds=this.HEX2STAG[Z.substr(me[1],2)],he.ds!="bmp"?he.value=at(Be):he.value=Ft(Be),he},this.readCertPEM=function(Z){this.readCertHex(ze(Z))},this.readCertHex=function(Z){this.hex=Z,this.getVersion();try{fe(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var Z={};return Z.version=this.getVersion(),Z.serial={hex:this.getSerialNumberHex()},Z.sigalg=this.getSignatureAlgorithmField(),Z.issuer=this.getIssuer(),Z.notbefore=this.getNotBefore(),Z.notafter=this.getNotAfter(),Z.subject=this.getSubject(),Z.sbjpubkey=Bt(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(Z.ext=this.getExtParamArray()),Z.sighex=this.getSignatureValueHex(),Z},this.getExtParamArray=function(Z){Z==null&&ye(this.hex,0,[0,"[3]"])!=-1&&(Z=le(this.hex,0,[0,"[3]",0],"30"));for(var he=[],me=v(Z,0),_e=0;_e<me.length;_e++){var Be=$(Z,me[_e]),Ge=this.getExtParam(Be);Ge!=null&&he.push(Ge)}return he},this.getExtParam=function(Z){var he=v(Z,0).length;if(he!=2&&he!=3)throw new Error("wrong number elements in Extension: "+he+" "+Z);var me=Ke(X(Z,0,[0],"06")),_e=!1;he==3&&se(Z,0,[1])=="0101ff"&&(_e=!0);var Be=se(Z,0,[he-1,0]),Ge=void 0;if(me=="2.5.29.14"?Ge=this.getExtSubjectKeyIdentifier(Be,_e):me=="2.5.29.15"?Ge=this.getExtKeyUsage(Be,_e):me=="2.5.29.17"?Ge=this.getExtSubjectAltName(Be,_e):me=="2.5.29.18"?Ge=this.getExtIssuerAltName(Be,_e):me=="2.5.29.19"?Ge=this.getExtBasicConstraints(Be,_e):me=="2.5.29.31"?Ge=this.getExtCRLDistributionPoints(Be,_e):me=="2.5.29.32"?Ge=this.getExtCertificatePolicies(Be,_e):me=="2.5.29.35"?Ge=this.getExtAuthorityKeyIdentifier(Be,_e):me=="2.5.29.37"?Ge=this.getExtExtKeyUsage(Be,_e):me=="1.3.6.1.5.5.7.1.1"?Ge=this.getExtAuthorityInfoAccess(Be,_e):me=="2.5.29.20"?Ge=this.getExtCRLNumber(Be,_e):me=="2.5.29.21"?Ge=this.getExtCRLReason(Be,_e):me=="1.3.6.1.5.5.7.48.1.2"?Ge=this.getExtOcspNonce(Be,_e):me=="1.3.6.1.5.5.7.48.1.5"?Ge=this.getExtOcspNoCheck(Be,_e):me=="1.2.840.113583.1.1.9.1"&&(Ge=this.getExtAdobeTimeStamp(Be,_e)),Ge!=null)return Ge;var Dt={extname:me,extn:Be};return _e&&(Dt.critical=!0),Dt},this.findExt=function(Z,he){for(var me=0;me<Z.length;me++)if(Z[me].extname==he)return Z[me];return null},this.updateExtCDPFullURI=function(Z,he){var me=this.findExt(Z,"cRLDistributionPoints");if(me!=null&&me.array!=null){for(var _e=me.array,Be=0;Be<_e.length;Be++)if(_e[Be].dpname!=null&&_e[Be].dpname.full!=null)for(var Ge=_e[Be].dpname.full,Dt=0;Dt<Ge.length;Dt++){var ut=Ge[Be];ut.uri!=null&&(ut.uri=he)}}},this.updateExtAIAOCSP=function(Z,he){var me=this.findExt(Z,"authorityInfoAccess");if(me!=null&&me.array!=null)for(var _e=me.array,Be=0;Be<_e.length;Be++)_e[Be].ocsp!=null&&(_e[Be].ocsp=he)},this.updateExtAIACAIssuer=function(Z,he){var me=this.findExt(Z,"authorityInfoAccess");if(me!=null&&me.array!=null)for(var _e=me.array,Be=0;Be<_e.length;Be++)_e[Be].caissuer!=null&&(_e[Be].caissuer=he)},this.dnarraytostr=function(Z){return"/"+Z.map(function(he){return function(_e){return _e.map(function(Be){return function(Dt){return Dt.type+"="+Dt.value}(Be).replace(/\+/,"\\+")}).join("+")}(he).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var Z,he,me,_e=function(nr){return JSON.stringify(nr.array).replace(/[\[\]\{\}\"]/g,"")},Be=function(nr){for(var Gr="",xr=nr.array,jr=0;jr<xr.length;jr++){var br=xr[jr];if(Gr+="    policy oid: "+br.policyoid+`
`,br.array!==void 0)for(var on=0;on<br.array.length;on++){var sn=br.array[on];sn.cps!==void 0&&(Gr+="    cps: "+sn.cps+`
`)}}return Gr},Ge=function(nr){for(var Gr="",xr=nr.array,jr=0;jr<xr.length;jr++){var br=xr[jr];try{br.dpname.full[0].uri!==void 0&&(Gr+="    "+br.dpname.full[0].uri+`
`)}catch{}try{br.dname.full[0].dn.hex!==void 0&&(Gr+="    "+dr.hex2dn(br.dpname.full[0].dn.hex)+`
`)}catch{}}return Gr},Dt=function(nr){for(var Gr="",xr=nr.array,jr=0;jr<xr.length;jr++){var br=xr[jr];br.caissuer!==void 0&&(Gr+="    caissuer: "+br.caissuer+`
`),br.ocsp!==void 0&&(Gr+="    ocsp: "+br.ocsp+`
`)}return Gr};if(Z=`Basic Fields
`,Z+="  serial number: "+this.getSerialNumberHex()+`
`,Z+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,Z+="  issuer: "+this.getIssuerString()+`
`,Z+="  notBefore: "+this.getNotBefore()+`
`,Z+="  notAfter: "+this.getNotAfter()+`
`,Z+="  subject: "+this.getSubjectString()+`
`,Z+=`  subject public key info: 
`,Z+="    key algorithm: "+(he=this.getPublicKey()).type+`
`,he.type==="RSA"&&(Z+="    n="+Ur(he.n.toString(16)).substr(0,16)+`...
`,Z+="    e="+Ur(he.e.toString(16))+`
`),(me=this.aExtInfo)!=null){Z+=`X509v3 Extensions:
`;for(var ut=0;ut<me.length;ut++){var Ar=me[ut],kt=w.asn1.x509.OID.oid2name(Ar.oid);kt===""&&(kt=Ar.oid);var Zt="";if(Ar.critical===!0&&(Zt="CRITICAL"),Z+="  "+kt+" "+Zt+`:
`,kt==="basicConstraints"){var Zr=this.getExtBasicConstraints();Zr.cA===void 0?Z+=`    {}
`:(Z+="    cA=true",Zr.pathLen!==void 0&&(Z+=", pathLen="+Zr.pathLen),Z+=`
`)}else if(kt==="keyUsage")Z+="    "+this.getExtKeyUsageString()+`
`;else if(kt==="subjectKeyIdentifier")Z+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(kt==="authorityKeyIdentifier"){var zr=this.getExtAuthorityKeyIdentifier();zr.kid!==void 0&&(Z+="    kid="+zr.kid.hex+`
`)}else kt==="extKeyUsage"?Z+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:kt==="subjectAltName"?Z+="    "+_e(this.getExtSubjectAltName())+`
`:kt==="cRLDistributionPoints"?Z+=Ge(this.getExtCRLDistributionPoints()):kt==="authorityInfoAccess"?Z+=Dt(this.getExtAuthorityInfoAccess()):kt==="certificatePolicies"&&(Z+=Be(this.getExtCertificatePolicies()))}}return Z+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,Z+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof f=="string"&&(f.indexOf("-----BEGIN")!=-1?this.readCertPEM(f):w.lang.String.isHex(f)&&this.readCertHex(f))}Y.prototype.sign=function(f,c){var p=function(O){return w.crypto.Util.hashString(O,c)}(f);return this.signWithMessageHash(p,c)},Y.prototype.signWithMessageHash=function(f,c){var p=Et(w.crypto.Util.getPaddedDigestInfoHex(f,c,this.n.bitLength()),16);return Wr(this.doPrivate(p).toString(16),this.n.bitLength())},Y.prototype.signPSS=function(f,c,p){var v=function($){return w.crypto.Util.hashHex($,c)}(et(f));return p===void 0&&(p=-1),this.signWithMessageHashPSS(v,c,p)},Y.prototype.signWithMessageHashPSS=function(f,c,p){var v,O=rt(f),$=O.length,X=this.n.bitLength()-1,ue=Math.ceil(X/8),se=function(Z){return w.crypto.Util.hashHex(Z,c)};if(p===-1||p===void 0)p=$;else if(p===-2)p=ue-$-2;else if(p<-2)throw new Error("invalid salt length");if(ue<$+p+2)throw new Error("data too long");var le="";p>0&&(le=new Array(p),new qe().nextBytes(le),le=String.fromCharCode.apply(String,le));var fe=rt(se(et("\0\0\0\0\0\0\0\0"+O+le))),ye=[];for(v=0;v<ue-p-$-2;v+=1)ye[v]=0;var Se=String.fromCharCode.apply(String,ye)+""+le,Ce=Or(fe,Se.length,se),Ne=[];for(v=0;v<Se.length;v+=1)Ne[v]=Se.charCodeAt(v)^Ce.charCodeAt(v);var Ke=65280>>8*ue-X&255;for(Ne[0]&=~Ke,v=0;v<$;v++)Ne.push(fe.charCodeAt(v));return Ne.push(188),Wr(this.doPrivate(new z(Ne)).toString(16),this.n.bitLength())},Y.prototype.verify=function(f,c){if((c=c.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var p=Et(c,16),v=this.n.bitLength();if(p.bitLength()>v)return!1;var O=this.doPublic(p).toString(16);if(O.length+3!=v/4)return!1;var $=Mr(O.replace(/^1f+00/,""));if($.length==0)return!1;var X=$[0];return $[1]==function(se){return w.crypto.Util.hashString(se,X)}(f)},Y.prototype.verifyWithMessageHash=function(f,c){if(c.length!=Math.ceil(this.n.bitLength()/4))return!1;var p=Et(c,16);if(p.bitLength()>this.n.bitLength())return 0;var v=Mr(this.doPublic(p).toString(16).replace(/^1f+00/,""));return v.length==0?!1:(v[0],v[1]==f)},Y.prototype.verifyPSS=function(f,c,p,v){var O=function(X){return w.crypto.Util.hashHex(X,p)}(et(f));return v===void 0&&(v=-1),this.verifyWithMessageHashPSS(O,c,p,v)},Y.prototype.verifyWithMessageHashPSS=function(f,c,p,v){if(c.length!=Math.ceil(this.n.bitLength()/4))return!1;var O,$=new z(c,16),X=function(me){return w.crypto.Util.hashHex(me,p)},ue=rt(f),se=ue.length,le=this.n.bitLength()-1,fe=Math.ceil(le/8);if(v===-1||v===void 0)v=se;else if(v===-2)v=fe-se-2;else if(v<-2)throw new Error("invalid salt length");if(fe<se+v+2)throw new Error("data too long");var ye=this.doPublic($).toByteArray();for(O=0;O<ye.length;O+=1)ye[O]&=255;for(;ye.length<fe;)ye.unshift(0);if(ye[fe-1]!==188)throw new Error("encoded message does not end in 0xbc");var Se=(ye=String.fromCharCode.apply(String,ye)).substr(0,fe-se-1),Ce=ye.substr(Se.length,se),Ne=65280>>8*fe-le&255;if(Se.charCodeAt(0)&Ne)throw new Error("bits beyond keysize not zero");var Ke=Or(Ce,Se.length,X),ze=[];for(O=0;O<Se.length;O+=1)ze[O]=Se.charCodeAt(O)^Ke.charCodeAt(O);ze[0]&=~Ne;var Z=fe-se-v-2;for(O=0;O<Z;O+=1)if(ze[O]!==0)throw new Error("leftmost octets not zero");if(ze[Z]!==1)throw new Error("0x01 marker not found");return Ce===rt(X(et("\0\0\0\0\0\0\0\0"+ue+String.fromCharCode.apply(String,ze.slice(-v)))))},Y.SALT_LEN_HLEN=-1,Y.SALT_LEN_MAX=-2,Y.SALT_LEN_RECOVER=-2,dr.hex2dn=function(f,c){c===void 0&&(c=0);var p=new dr;return de.getTLV(f,c),p.getX500Name(f).str},dr.hex2rdn=function(f,c){if(c===void 0&&(c=0),f.substr(c,2)!=="31")throw new Error("malformed RDN");for(var p=new Array,v=de.getChildIdx(f,c),O=0;O<v.length;O++)p.push(dr.hex2attrTypeValue(f,v[O]));return(p=p.map(function($){return $.replace("+","\\+")})).join("+")},dr.hex2attrTypeValue=function(f,c){var p=de,v=p.getV;if(c===void 0&&(c=0),f.substr(c,2)!=="30")throw new Error("malformed attribute type and value");var O=p.getChildIdx(f,c);O.length!==2||f.substr(O[0],2);var $=v(f,O[0]),X=w.asn1.ASN1Util.oidHexToInt($);return w.asn1.x509.OID.oid2atype(X)+"="+rt(v(f,O[1]))},dr.getPublicKeyFromCertHex=function(f){var c=new dr;return c.readCertHex(f),c.getPublicKey()},dr.getPublicKeyFromCertPEM=function(f){var c=new dr;return c.readCertPEM(f),c.getPublicKey()},dr.getPublicKeyInfoPropOfCertPEM=function(f){var c,p,v=de.getVbyList,O={};return O.algparam=null,(c=new dr).readCertPEM(f),p=c.getPublicKeyHex(),O.keyhex=v(p,0,[1],"03").substr(2),O.algoid=v(p,0,[0,0],"06"),O.algoid==="2a8648ce3d0201"&&(O.algparam=v(p,0,[0,1],"06")),O},dr.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],w!==void 0&&w||(n.KJUR=w={}),w.jws!==void 0&&w.jws||(w.jws={}),w.jws.JWS=function(){var f=w.jws.JWS.isSafeJSONString;this.parseJWS=function(c,p){if(this.parsedJWS===void 0||!p&&this.parsedJWS.sigvalH===void 0){var v=c.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(v==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var O=v[1],$=v[2],X=v[3],ue=O+"."+$;if(this.parsedJWS={},this.parsedJWS.headB64U=O,this.parsedJWS.payloadB64U=$,this.parsedJWS.sigvalB64U=X,this.parsedJWS.si=ue,!p){var se=pe(X),le=Et(se,16);this.parsedJWS.sigvalH=se,this.parsedJWS.sigvalBI=le}var fe=Ae(O),ye=Ae($);if(this.parsedJWS.headS=fe,this.parsedJWS.payloadS=ye,!f(fe,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+fe}}},w.jws.JWS.sign=function(f,c,p,v,O){var $,X,ue,se=w,le=se.jws.JWS,fe=le.readSafeJSONString,ye=le.isSafeJSONString,Se=se.crypto,Ce=(Se.ECDSA,Se.Mac),Ne=Se.Signature,Ke=JSON;if(typeof c!="string"&&(c===void 0?"undefined":A(c))!="object")throw"spHeader must be JSON string or object: "+c;if((c===void 0?"undefined":A(c))=="object"&&(X=c,$=Ke.stringify(X)),typeof c=="string"){if(!ye($=c))throw"JWS Head is not safe JSON string: "+$;X=fe($)}if(ue=p,(p===void 0?"undefined":A(p))=="object"&&(ue=Ke.stringify(p)),f!=""&&f!=null||X.alg===void 0||(f=X.alg),f!=""&&f!=null&&X.alg===void 0&&(X.alg=f,$=Ke.stringify(X)),f!==X.alg)throw"alg and sHeader.alg doesn't match: "+f+"!="+X.alg;var ze=null;if(le.jwsalg2sigalg[f]===void 0)throw"unsupported alg name: "+f;ze=le.jwsalg2sigalg[f];var Z=ce($)+"."+ce(ue),he="";if(ze.substr(0,4)=="Hmac"){if(v===void 0)throw"mac key shall be specified for HS* alg";var me=new Ce({alg:ze,prov:"cryptojs",pass:v});me.updateString(Z),he=me.doFinal()}else if(ze.indexOf("withECDSA")!=-1){(Be=new Ne({alg:ze})).init(v,O),Be.updateString(Z);var _e=Be.sign();he=w.crypto.ECDSA.asn1SigToConcatSig(_e)}else{var Be;ze!="none"&&((Be=new Ne({alg:ze})).init(v,O),Be.updateString(Z),he=Be.sign())}return Z+"."+ge(he)},w.jws.JWS.verify=function(f,c,p){var v,O=w,$=O.jws.JWS,X=$.readSafeJSONString,ue=O.crypto,se=ue.ECDSA,le=ue.Mac,fe=ue.Signature;A(Y)!==void 0&&(v=Y);var ye=f.split(".");if(ye.length!==3)return!1;var Se=ye[0]+"."+ye[1],Ce=pe(ye[2]),Ne=X(Ae(ye[0])),Ke=null,ze=null;if(Ne.alg===void 0)throw"algorithm not specified in header";if(ze=(Ke=Ne.alg).substr(0,2),p!=null&&Object.prototype.toString.call(p)==="[object Array]"&&p.length>0&&(":"+p.join(":")+":").indexOf(":"+Ke+":")==-1)throw"algorithm '"+Ke+"' not accepted in the list";if(Ke!="none"&&c===null)throw"key shall be specified to verify.";if(typeof c=="string"&&c.indexOf("-----BEGIN ")!=-1&&(c=It.getKey(c)),!(ze!="RS"&&ze!="PS"||c instanceof v))throw"key shall be a RSAKey obj for RS* and PS* algs";if(ze=="ES"&&!(c instanceof se))throw"key shall be a ECDSA obj for ES* algs";var Z=null;if($.jwsalg2sigalg[Ne.alg]===void 0)throw"unsupported alg name: "+Ke;if((Z=$.jwsalg2sigalg[Ke])=="none")throw"not supported";if(Z.substr(0,4)=="Hmac"){if(c===void 0)throw"hexadecimal key shall be specified for HMAC";var he=new le({alg:Z,pass:c});return he.updateString(Se),Ce==he.doFinal()}if(Z.indexOf("withECDSA")!=-1){var me,_e=null;try{_e=se.concatSigToASN1Sig(Ce)}catch{return!1}return(me=new fe({alg:Z})).init(c),me.updateString(Se),me.verify(_e)}return(me=new fe({alg:Z})).init(c),me.updateString(Se),me.verify(Ce)},w.jws.JWS.parse=function(f){var c,p,v,O=f.split("."),$={};if(O.length!=2&&O.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return c=O[0],p=O[1],O.length==3&&(v=O[2]),$.headerObj=w.jws.JWS.readSafeJSONString(Ae(c)),$.payloadObj=w.jws.JWS.readSafeJSONString(Ae(p)),$.headerPP=JSON.stringify($.headerObj,null,"  "),$.payloadObj==null?$.payloadPP=Ae(p):$.payloadPP=JSON.stringify($.payloadObj,null,"  "),v!==void 0&&($.sigHex=pe(v)),$},w.jws.JWS.verifyJWT=function(f,c,p){var v=w.jws,O=v.JWS,$=O.readSafeJSONString,X=O.inArray,ue=O.includedArray,se=f.split("."),le=se[0],fe=se[1],ye=(pe(se[2]),$(Ae(le))),Se=$(Ae(fe));if(ye.alg===void 0)return!1;if(p.alg===void 0)throw"acceptField.alg shall be specified";if(!X(ye.alg,p.alg)||Se.iss!==void 0&&A(p.iss)==="object"&&!X(Se.iss,p.iss)||Se.sub!==void 0&&A(p.sub)==="object"&&!X(Se.sub,p.sub))return!1;if(Se.aud!==void 0&&A(p.aud)==="object"){if(typeof Se.aud=="string"){if(!X(Se.aud,p.aud))return!1}else if(A(Se.aud)=="object"&&!ue(Se.aud,p.aud))return!1}var Ce=v.IntDate.getNow();return p.verifyAt!==void 0&&typeof p.verifyAt=="number"&&(Ce=p.verifyAt),p.gracePeriod!==void 0&&typeof p.gracePeriod=="number"||(p.gracePeriod=0),!(Se.exp!==void 0&&typeof Se.exp=="number"&&Se.exp+p.gracePeriod<Ce)&&!(Se.nbf!==void 0&&typeof Se.nbf=="number"&&Ce<Se.nbf-p.gracePeriod)&&!(Se.iat!==void 0&&typeof Se.iat=="number"&&Ce<Se.iat-p.gracePeriod)&&(Se.jti===void 0||p.jti===void 0||Se.jti===p.jti)&&!!O.verify(f,c,p.alg)},w.jws.JWS.includedArray=function(f,c){var p=w.jws.JWS.inArray;if(f===null||(f===void 0?"undefined":A(f))!=="object"||typeof f.length!="number")return!1;for(var v=0;v<f.length;v++)if(!p(f[v],c))return!1;return!0},w.jws.JWS.inArray=function(f,c){if(c===null||(c===void 0?"undefined":A(c))!=="object"||typeof c.length!="number")return!1;for(var p=0;p<c.length;p++)if(c[p]==f)return!0;return!1},w.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},w.jws.JWS.isSafeJSONString=function(f,c,p){var v=null;try{return((v=k(f))===void 0?"undefined":A(v))!="object"||v.constructor===Array?0:(c&&(c[p]=v),1)}catch{return 0}},w.jws.JWS.readSafeJSONString=function(f){var c=null;try{return((c=k(f))===void 0?"undefined":A(c))!="object"||c.constructor===Array?null:c}catch{return null}},w.jws.JWS.getEncodedSignatureValueFromJWS=function(f){var c=f.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(c==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return c[1]},w.jws.JWS.getJWKthumbprint=function(f){if(f.kty!=="RSA"&&f.kty!=="EC"&&f.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var c="{";if(f.kty==="RSA"){if(typeof f.n!="string"||typeof f.e!="string")throw"wrong n and e value for RSA key";c+='"e":"'+f.e+'",',c+='"kty":"'+f.kty+'",',c+='"n":"'+f.n+'"}'}else if(f.kty==="EC"){if(typeof f.crv!="string"||typeof f.x!="string"||typeof f.y!="string")throw"wrong crv, x and y value for EC key";c+='"crv":"'+f.crv+'",',c+='"kty":"'+f.kty+'",',c+='"x":"'+f.x+'",',c+='"y":"'+f.y+'"}'}else if(f.kty==="oct"){if(typeof f.k!="string")throw"wrong k value for oct(symmetric) key";c+='"kty":"'+f.kty+'",',c+='"k":"'+f.k+'"}'}var p=et(c);return ge(w.crypto.Util.hashHex(p,"sha256"))},w.jws.IntDate={},w.jws.IntDate.get=function(f){var c=w.jws.IntDate,p=c.getNow,v=c.getZulu;if(f=="now")return p();if(f=="now + 1hour")return p()+3600;if(f=="now + 1day")return p()+86400;if(f=="now + 1month")return p()+2592e3;if(f=="now + 1year")return p()+31536e3;if(f.match(/Z$/))return v(f);if(f.match(/^[0-9]+$/))return parseInt(f);throw"unsupported format: "+f},w.jws.IntDate.getZulu=function(f){return Vt(f)},w.jws.IntDate.getNow=function(){return~~(new Date/1e3)},w.jws.IntDate.intDate2UTCString=function(f){return new Date(1e3*f).toUTCString()},w.jws.IntDate.intDate2Zulu=function(f){var c=new Date(1e3*f);return("0000"+c.getUTCFullYear()).slice(-4)+("00"+(c.getUTCMonth()+1)).slice(-2)+("00"+c.getUTCDate()).slice(-2)+("00"+c.getUTCHours()).slice(-2)+("00"+c.getUTCMinutes()).slice(-2)+("00"+c.getUTCSeconds()).slice(-2)+"Z"},n.SecureRandom=qe,n.rng_seed_time=B,n.BigInteger=z,n.RSAKey=Y;var Rr=w.crypto.EDSA;n.EDSA=Rr;var nn=w.crypto.DSA;n.DSA=nn;var Xr=w.crypto.Signature;n.Signature=Xr;var Br=w.crypto.MessageDigest;n.MessageDigest=Br;var ct=w.crypto.Mac;n.Mac=ct;var vn=w.crypto.Cipher;n.Cipher=vn,n.KEYUTIL=It,n.ASN1HEX=de,n.X509=dr,n.CryptoJS=L,n.b64tohex=ve,n.b64toBA=Fe,n.stoBA=je,n.BAtos=Tt,n.BAtohex=Yt,n.stohex=wt,n.stob64=function(c){return J(wt(c))},n.stob64u=function(c){return we(J(wt(c)))},n.b64utos=function(c){return Tt(Fe(Ue(c)))},n.b64tob64u=we,n.b64utob64=Ue,n.hex2b64=J,n.hextob64u=ge,n.b64utohex=pe,n.utf8tob64u=ce,n.b64utoutf8=Ae,n.utf8tob64=function(c){return J(_t(gr(c)))},n.b64toutf8=function(c){return decodeURIComponent(cr(ve(c)))},n.utf8tohex=Me,n.hextoutf8=at,n.hextorstr=rt,n.rstrtohex=et,n.hextob64=it,n.hextob64nl=Lt,n.b64nltohex=Ht,n.hextopem=Bt,n.pemtohex=qt,n.hextoArrayBuffer=function(c){if(c.length%2!=0)throw"input is not even length";if(c.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var p=new ArrayBuffer(c.length/2),v=new DataView(p),O=0;O<c.length/2;O++)v.setUint8(O,parseInt(c.substr(2*O,2),16));return p},n.ArrayBuffertohex=function(c){for(var p="",v=new DataView(c),O=0;O<c.byteLength;O++)p+=("00"+v.getUint8(O).toString(16)).slice(-2);return p},n.zulutomsec=sr,n.zulutosec=Vt,n.zulutodate=function(c){return new Date(sr(c))},n.datetozulu=function(c,p,v){var O,$=c.getUTCFullYear();if(p){if($<1950||2049<$)throw"not proper year for UTCTime: "+$;O=(""+$).slice(-2)}else O=("000"+$).slice(-4);if(O+=("0"+(c.getUTCMonth()+1)).slice(-2),O+=("0"+c.getUTCDate()).slice(-2),O+=("0"+c.getUTCHours()).slice(-2),O+=("0"+c.getUTCMinutes()).slice(-2),O+=("0"+c.getUTCSeconds()).slice(-2),v){var X=c.getUTCMilliseconds();X!==0&&(O+="."+(X=(X=("00"+X).slice(-3)).replace(/0+$/g,"")))}return O+="Z"},n.uricmptohex=_t,n.hextouricmp=cr,n.ipv6tohex=ht,n.hextoipv6=bt,n.hextoip=Kt,n.iptohex=function(c){var p="malformed IP address";if(!(c=c.toLowerCase(c)).match(/^[0-9.]+$/)){if(c.match(/^[0-9a-f:]+$/)&&c.indexOf(":")!==-1)return ht(c);throw p}var v=c.split(".");if(v.length!==4)throw p;var O="";try{for(var $=0;$<4;$++)O+=("0"+parseInt(v[$]).toString(16)).slice(-2);return O}catch{throw p}},n.encodeURIComponentAll=gr,n.newline_toUnix=function(c){return c=c.replace(/\r\n/gm,`
`)},n.newline_toDos=function(c){return c=(c=c.replace(/\r\n/gm,`
`)).replace(/\n/gm,`\r
`)},n.hextoposhex=Ur,n.intarystrtohex=function(c){c=(c=(c=c.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return c.split(/,/).map(function(p,v,O){var $=parseInt(p);if($<0||255<$)throw"integer not in range 0-255";return("00"+$.toString(16)).slice(-2)}).join("")}catch(p){throw"malformed integer array string: "+p}},n.strdiffidx=function(c,p){var v=c.length;c.length>p.length&&(v=p.length);for(var O=0;O<v;O++)if(c.charCodeAt(O)!=p.charCodeAt(O))return O;return c.length!=p.length?v:-1},n.KJUR=w;var Ln=w.crypto;n.crypto=Ln;var ui=w.asn1;n.asn1=ui;var Tn=w.jws;n.jws=Tn;var bn=w.lang;n.lang=bn}).call(this,i(28).Buffer)},function(r,n,i){(function(s){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var a=i(30),l=i(31),y=i(32);function d(){return g.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function m(ee,M){if(d()<M)throw new RangeError("Invalid typed array length");return g.TYPED_ARRAY_SUPPORT?(ee=new Uint8Array(M)).__proto__=g.prototype:(ee===null&&(ee=new g(M)),ee.length=M),ee}function g(ee,M,F){if(!(g.TYPED_ARRAY_SUPPORT||this instanceof g))return new g(ee,M,F);if(typeof ee=="number"){if(typeof M=="string")throw new Error("If encoding is specified then the first argument must be a string");return P(this,ee)}return E(this,ee,M,F)}function E(ee,M,F,K){if(typeof M=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&M instanceof ArrayBuffer?function(B,C,U,ne){if(C.byteLength,U<0||C.byteLength<U)throw new RangeError("'offset' is out of bounds");if(C.byteLength<U+(ne||0))throw new RangeError("'length' is out of bounds");return C=U===void 0&&ne===void 0?new Uint8Array(C):ne===void 0?new Uint8Array(C,U):new Uint8Array(C,U,ne),g.TYPED_ARRAY_SUPPORT?(B=C).__proto__=g.prototype:B=I(B,C),B}(ee,M,F,K):typeof M=="string"?function(B,C,U){if(typeof U=="string"&&U!==""||(U="utf8"),!g.isEncoding(U))throw new TypeError('"encoding" must be a valid string encoding');var ne=0|A(C,U),Re=(B=m(B,ne)).write(C,U);return Re!==ne&&(B=B.slice(0,Re)),B}(ee,M,F):function(B,C){if(g.isBuffer(C)){var U=0|D(C.length);return(B=m(B,U)).length===0||C.copy(B,0,0,U),B}if(C){if(typeof ArrayBuffer<"u"&&C.buffer instanceof ArrayBuffer||"length"in C)return typeof C.length!="number"||function(Re){return Re!=Re}(C.length)?m(B,0):I(B,C);if(C.type==="Buffer"&&y(C.data))return I(B,C.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(ee,M)}function b(ee){if(typeof ee!="number")throw new TypeError('"size" argument must be a number');if(ee<0)throw new RangeError('"size" argument must not be negative')}function P(ee,M){if(b(M),ee=m(ee,M<0?0:0|D(M)),!g.TYPED_ARRAY_SUPPORT)for(var F=0;F<M;++F)ee[F]=0;return ee}function I(ee,M){var F=M.length<0?0:0|D(M.length);ee=m(ee,F);for(var K=0;K<F;K+=1)ee[K]=255&M[K];return ee}function D(ee){if(ee>=d())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d().toString(16)+" bytes");return 0|ee}function A(ee,M){if(g.isBuffer(ee))return ee.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(ee)||ee instanceof ArrayBuffer))return ee.byteLength;typeof ee!="string"&&(ee=""+ee);var F=ee.length;if(F===0)return 0;for(var K=!1;;)switch(M){case"ascii":case"latin1":case"binary":return F;case"utf8":case"utf-8":case void 0:return Pt(ee).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*F;case"hex":return F>>>1;case"base64":return Ye(ee).length;default:if(K)return Pt(ee).length;M=(""+M).toLowerCase(),K=!0}}function R(ee,M,F){var K=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((F===void 0||F>this.length)&&(F=this.length),F<=0)||(F>>>=0)<=(M>>>=0))return"";for(ee||(ee="utf8");;)switch(ee){case"hex":return Ct(this,M,F);case"utf8":case"utf-8":return ft(this,M,F);case"ascii":return He(this,M,F);case"latin1":case"binary":return st(this,M,F);case"base64":return xt(this,M,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $e(this,M,F);default:if(K)throw new TypeError("Unknown encoding: "+ee);ee=(ee+"").toLowerCase(),K=!0}}function N(ee,M,F){var K=ee[M];ee[M]=ee[F],ee[F]=K}function L(ee,M,F,K,re){if(ee.length===0)return-1;if(typeof F=="string"?(K=F,F=0):F>2147483647?F=2147483647:F<-2147483648&&(F=-2147483648),F=+F,isNaN(F)&&(F=re?0:ee.length-1),F<0&&(F=ee.length+F),F>=ee.length){if(re)return-1;F=ee.length-1}else if(F<0){if(!re)return-1;F=0}if(typeof M=="string"&&(M=g.from(M,K)),g.isBuffer(M))return M.length===0?-1:W(ee,M,F,K,re);if(typeof M=="number")return M&=255,g.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?re?Uint8Array.prototype.indexOf.call(ee,M,F):Uint8Array.prototype.lastIndexOf.call(ee,M,F):W(ee,[M],F,K,re);throw new TypeError("val must be string, number or Buffer")}function W(ee,M,F,K,re){var B,C=1,U=ee.length,ne=M.length;if(K!==void 0&&((K=String(K).toLowerCase())==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(ee.length<2||M.length<2)return-1;C=2,U/=2,ne/=2,F/=2}function Re(Wt,Y){return C===1?Wt[Y]:Wt.readUInt16BE(Y*C)}if(re){var Le=-1;for(B=F;B<U;B++)if(Re(ee,B)===Re(M,Le===-1?0:B-Le)){if(Le===-1&&(Le=B),B-Le+1===ne)return Le*C}else Le!==-1&&(B-=B-Le),Le=-1}else for(F+ne>U&&(F=U-ne),B=F;B>=0;B--){for(var qe=!0,Et=0;Et<ne;Et++)if(Re(ee,B+Et)!==Re(M,Et)){qe=!1;break}if(qe)return B}return-1}function q(ee,M,F,K){F=Number(F)||0;var re=ee.length-F;K?(K=Number(K))>re&&(K=re):K=re;var B=M.length;if(B%2!=0)throw new TypeError("Invalid hex string");K>B/2&&(K=B/2);for(var C=0;C<K;++C){var U=parseInt(M.substr(2*C,2),16);if(isNaN(U))return C;ee[F+C]=U}return C}function J(ee,M,F,K){return We(Pt(M,ee.length-F),ee,F,K)}function ve(ee,M,F,K){return We(function(B){for(var C=[],U=0;U<B.length;++U)C.push(255&B.charCodeAt(U));return C}(M),ee,F,K)}function Fe(ee,M,F,K){return ve(ee,M,F,K)}function z(ee,M,F,K){return We(Ye(M),ee,F,K)}function De(ee,M,F,K){return We(function(B,C){for(var U,ne,Re,Le=[],qe=0;qe<B.length&&!((C-=2)<0);++qe)ne=(U=B.charCodeAt(qe))>>8,Re=U%256,Le.push(Re),Le.push(ne);return Le}(M,ee.length-F),ee,F,K)}function xt(ee,M,F){return M===0&&F===ee.length?a.fromByteArray(ee):a.fromByteArray(ee.slice(M,F))}function ft(ee,M,F){F=Math.min(ee.length,F);for(var K=[],re=M;re<F;){var B,C,U,ne,Re=ee[re],Le=null,qe=Re>239?4:Re>223?3:Re>191?2:1;if(re+qe<=F)switch(qe){case 1:Re<128&&(Le=Re);break;case 2:(192&(B=ee[re+1]))==128&&(ne=(31&Re)<<6|63&B)>127&&(Le=ne);break;case 3:B=ee[re+1],C=ee[re+2],(192&B)==128&&(192&C)==128&&(ne=(15&Re)<<12|(63&B)<<6|63&C)>2047&&(ne<55296||ne>57343)&&(Le=ne);break;case 4:B=ee[re+1],C=ee[re+2],U=ee[re+3],(192&B)==128&&(192&C)==128&&(192&U)==128&&(ne=(15&Re)<<18|(63&B)<<12|(63&C)<<6|63&U)>65535&&ne<1114112&&(Le=ne)}Le===null?(Le=65533,qe=1):Le>65535&&(Le-=65536,K.push(Le>>>10&1023|55296),Le=56320|1023&Le),K.push(Le),re+=qe}return function(Wt){var Y=Wt.length;if(Y<=Te)return String.fromCharCode.apply(String,Wt);for(var te="",j=0;j<Y;)te+=String.fromCharCode.apply(String,Wt.slice(j,j+=Te));return te}(K)}n.Buffer=g,n.SlowBuffer=function(M){return+M!=M&&(M=0),g.alloc(+M)},n.INSPECT_MAX_BYTES=50,g.TYPED_ARRAY_SUPPORT=s.TYPED_ARRAY_SUPPORT!==void 0?s.TYPED_ARRAY_SUPPORT:function(){try{var M=new Uint8Array(1);return M.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},M.foo()===42&&typeof M.subarray=="function"&&M.subarray(1,1).byteLength===0}catch{return!1}}(),n.kMaxLength=d(),g.poolSize=8192,g._augment=function(ee){return ee.__proto__=g.prototype,ee},g.from=function(ee,M,F){return E(null,ee,M,F)},g.TYPED_ARRAY_SUPPORT&&(g.prototype.__proto__=Uint8Array.prototype,g.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&g[Symbol.species]===g&&Object.defineProperty(g,Symbol.species,{value:null,configurable:!0})),g.alloc=function(ee,M,F){return function(re,B,C,U){return b(B),B<=0?m(re,B):C!==void 0?typeof U=="string"?m(re,B).fill(C,U):m(re,B).fill(C):m(re,B)}(null,ee,M,F)},g.allocUnsafe=function(ee){return P(null,ee)},g.allocUnsafeSlow=function(ee){return P(null,ee)},g.isBuffer=function(M){return!(M==null||!M._isBuffer)},g.compare=function(M,F){if(!g.isBuffer(M)||!g.isBuffer(F))throw new TypeError("Arguments must be Buffers");if(M===F)return 0;for(var K=M.length,re=F.length,B=0,C=Math.min(K,re);B<C;++B)if(M[B]!==F[B]){K=M[B],re=F[B];break}return K<re?-1:re<K?1:0},g.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(M,F){if(!y(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return g.alloc(0);var K;if(F===void 0)for(F=0,K=0;K<M.length;++K)F+=M[K].length;var re=g.allocUnsafe(F),B=0;for(K=0;K<M.length;++K){var C=M[K];if(!g.isBuffer(C))throw new TypeError('"list" argument must be an Array of Buffers');C.copy(re,B),B+=C.length}return re},g.byteLength=A,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var M=this.length;if(M%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var F=0;F<M;F+=2)N(this,F,F+1);return this},g.prototype.swap32=function(){var M=this.length;if(M%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var F=0;F<M;F+=4)N(this,F,F+3),N(this,F+1,F+2);return this},g.prototype.swap64=function(){var M=this.length;if(M%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var F=0;F<M;F+=8)N(this,F,F+7),N(this,F+1,F+6),N(this,F+2,F+5),N(this,F+3,F+4);return this},g.prototype.toString=function(){var M=0|this.length;return M===0?"":arguments.length===0?ft(this,0,M):R.apply(this,arguments)},g.prototype.equals=function(M){if(!g.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M||g.compare(this,M)===0},g.prototype.inspect=function(){var M="",F=n.INSPECT_MAX_BYTES;return this.length>0&&(M=this.toString("hex",0,F).match(/.{2}/g).join(" "),this.length>F&&(M+=" ... ")),"<Buffer "+M+">"},g.prototype.compare=function(M,F,K,re,B){if(!g.isBuffer(M))throw new TypeError("Argument must be a Buffer");if(F===void 0&&(F=0),K===void 0&&(K=M?M.length:0),re===void 0&&(re=0),B===void 0&&(B=this.length),F<0||K>M.length||re<0||B>this.length)throw new RangeError("out of range index");if(re>=B&&F>=K)return 0;if(re>=B)return-1;if(F>=K)return 1;if(this===M)return 0;for(var C=(B>>>=0)-(re>>>=0),U=(K>>>=0)-(F>>>=0),ne=Math.min(C,U),Re=this.slice(re,B),Le=M.slice(F,K),qe=0;qe<ne;++qe)if(Re[qe]!==Le[qe]){C=Re[qe],U=Le[qe];break}return C<U?-1:U<C?1:0},g.prototype.includes=function(M,F,K){return this.indexOf(M,F,K)!==-1},g.prototype.indexOf=function(M,F,K){return L(this,M,F,K,!0)},g.prototype.lastIndexOf=function(M,F,K){return L(this,M,F,K,!1)},g.prototype.write=function(M,F,K,re){if(F===void 0)re="utf8",K=this.length,F=0;else if(K===void 0&&typeof F=="string")re=F,K=this.length,F=0;else{if(!isFinite(F))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");F|=0,isFinite(K)?(K|=0,re===void 0&&(re="utf8")):(re=K,K=void 0)}var B=this.length-F;if((K===void 0||K>B)&&(K=B),M.length>0&&(K<0||F<0)||F>this.length)throw new RangeError("Attempt to write outside buffer bounds");re||(re="utf8");for(var C=!1;;)switch(re){case"hex":return q(this,M,F,K);case"utf8":case"utf-8":return J(this,M,F,K);case"ascii":return ve(this,M,F,K);case"latin1":case"binary":return Fe(this,M,F,K);case"base64":return z(this,M,F,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return De(this,M,F,K);default:if(C)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),C=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Te=4096;function He(ee,M,F){var K="";F=Math.min(ee.length,F);for(var re=M;re<F;++re)K+=String.fromCharCode(127&ee[re]);return K}function st(ee,M,F){var K="";F=Math.min(ee.length,F);for(var re=M;re<F;++re)K+=String.fromCharCode(ee[re]);return K}function Ct(ee,M,F){var K=ee.length;(!M||M<0)&&(M=0),(!F||F<0||F>K)&&(F=K);for(var re="",B=M;B<F;++B)re+=ar(ee[B]);return re}function $e(ee,M,F){for(var K=ee.slice(M,F),re="",B=0;B<K.length;B+=2)re+=String.fromCharCode(K[B]+256*K[B+1]);return re}function Je(ee,M,F){if(ee%1!=0||ee<0)throw new RangeError("offset is not uint");if(ee+M>F)throw new RangeError("Trying to access beyond buffer length")}function ke(ee,M,F,K,re,B){if(!g.isBuffer(ee))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>re||M<B)throw new RangeError('"value" argument is out of bounds');if(F+K>ee.length)throw new RangeError("Index out of range")}function Xe(ee,M,F,K){M<0&&(M=65535+M+1);for(var re=0,B=Math.min(ee.length-F,2);re<B;++re)ee[F+re]=(M&255<<8*(K?re:1-re))>>>8*(K?re:1-re)}function vt(ee,M,F,K){M<0&&(M=4294967295+M+1);for(var re=0,B=Math.min(ee.length-F,4);re<B;++re)ee[F+re]=M>>>8*(K?re:3-re)&255}function vr(ee,M,F,K,re,B){if(F+K>ee.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("Index out of range")}function pr(ee,M,F,K,re){return re||vr(ee,0,F,4),l.write(ee,M,F,K,23,4),F+4}function Nt(ee,M,F,K,re){return re||vr(ee,0,F,8),l.write(ee,M,F,K,52,8),F+8}g.prototype.slice=function(M,F){var K,re=this.length;if((M=~~M)<0?(M+=re)<0&&(M=0):M>re&&(M=re),(F=F===void 0?re:~~F)<0?(F+=re)<0&&(F=0):F>re&&(F=re),F<M&&(F=M),g.TYPED_ARRAY_SUPPORT)(K=this.subarray(M,F)).__proto__=g.prototype;else{var B=F-M;K=new g(B,void 0);for(var C=0;C<B;++C)K[C]=this[C+M]}return K},g.prototype.readUIntLE=function(M,F,K){M|=0,F|=0,K||Je(M,F,this.length);for(var re=this[M],B=1,C=0;++C<F&&(B*=256);)re+=this[M+C]*B;return re},g.prototype.readUIntBE=function(M,F,K){M|=0,F|=0,K||Je(M,F,this.length);for(var re=this[M+--F],B=1;F>0&&(B*=256);)re+=this[M+--F]*B;return re},g.prototype.readUInt8=function(M,F){return F||Je(M,1,this.length),this[M]},g.prototype.readUInt16LE=function(M,F){return F||Je(M,2,this.length),this[M]|this[M+1]<<8},g.prototype.readUInt16BE=function(M,F){return F||Je(M,2,this.length),this[M]<<8|this[M+1]},g.prototype.readUInt32LE=function(M,F){return F||Je(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+16777216*this[M+3]},g.prototype.readUInt32BE=function(M,F){return F||Je(M,4,this.length),16777216*this[M]+(this[M+1]<<16|this[M+2]<<8|this[M+3])},g.prototype.readIntLE=function(M,F,K){M|=0,F|=0,K||Je(M,F,this.length);for(var re=this[M],B=1,C=0;++C<F&&(B*=256);)re+=this[M+C]*B;return re>=(B*=128)&&(re-=Math.pow(2,8*F)),re},g.prototype.readIntBE=function(M,F,K){M|=0,F|=0,K||Je(M,F,this.length);for(var re=F,B=1,C=this[M+--re];re>0&&(B*=256);)C+=this[M+--re]*B;return C>=(B*=128)&&(C-=Math.pow(2,8*F)),C},g.prototype.readInt8=function(M,F){return F||Je(M,1,this.length),128&this[M]?-1*(255-this[M]+1):this[M]},g.prototype.readInt16LE=function(M,F){F||Je(M,2,this.length);var K=this[M]|this[M+1]<<8;return 32768&K?4294901760|K:K},g.prototype.readInt16BE=function(M,F){F||Je(M,2,this.length);var K=this[M+1]|this[M]<<8;return 32768&K?4294901760|K:K},g.prototype.readInt32LE=function(M,F){return F||Je(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},g.prototype.readInt32BE=function(M,F){return F||Je(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},g.prototype.readFloatLE=function(M,F){return F||Je(M,4,this.length),l.read(this,M,!0,23,4)},g.prototype.readFloatBE=function(M,F){return F||Je(M,4,this.length),l.read(this,M,!1,23,4)},g.prototype.readDoubleLE=function(M,F){return F||Je(M,8,this.length),l.read(this,M,!0,52,8)},g.prototype.readDoubleBE=function(M,F){return F||Je(M,8,this.length),l.read(this,M,!1,52,8)},g.prototype.writeUIntLE=function(M,F,K,re){M=+M,F|=0,K|=0,re||ke(this,M,F,K,Math.pow(2,8*K)-1,0);var B=1,C=0;for(this[F]=255&M;++C<K&&(B*=256);)this[F+C]=M/B&255;return F+K},g.prototype.writeUIntBE=function(M,F,K,re){M=+M,F|=0,K|=0,re||ke(this,M,F,K,Math.pow(2,8*K)-1,0);var B=K-1,C=1;for(this[F+B]=255&M;--B>=0&&(C*=256);)this[F+B]=M/C&255;return F+K},g.prototype.writeUInt8=function(M,F,K){return M=+M,F|=0,K||ke(this,M,F,1,255,0),g.TYPED_ARRAY_SUPPORT||(M=Math.floor(M)),this[F]=255&M,F+1},g.prototype.writeUInt16LE=function(M,F,K){return M=+M,F|=0,K||ke(this,M,F,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[F]=255&M,this[F+1]=M>>>8):Xe(this,M,F,!0),F+2},g.prototype.writeUInt16BE=function(M,F,K){return M=+M,F|=0,K||ke(this,M,F,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[F]=M>>>8,this[F+1]=255&M):Xe(this,M,F,!1),F+2},g.prototype.writeUInt32LE=function(M,F,K){return M=+M,F|=0,K||ke(this,M,F,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[F+3]=M>>>24,this[F+2]=M>>>16,this[F+1]=M>>>8,this[F]=255&M):vt(this,M,F,!0),F+4},g.prototype.writeUInt32BE=function(M,F,K){return M=+M,F|=0,K||ke(this,M,F,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[F]=M>>>24,this[F+1]=M>>>16,this[F+2]=M>>>8,this[F+3]=255&M):vt(this,M,F,!1),F+4},g.prototype.writeIntLE=function(M,F,K,re){if(M=+M,F|=0,!re){var B=Math.pow(2,8*K-1);ke(this,M,F,K,B-1,-B)}var C=0,U=1,ne=0;for(this[F]=255&M;++C<K&&(U*=256);)M<0&&ne===0&&this[F+C-1]!==0&&(ne=1),this[F+C]=(M/U>>0)-ne&255;return F+K},g.prototype.writeIntBE=function(M,F,K,re){if(M=+M,F|=0,!re){var B=Math.pow(2,8*K-1);ke(this,M,F,K,B-1,-B)}var C=K-1,U=1,ne=0;for(this[F+C]=255&M;--C>=0&&(U*=256);)M<0&&ne===0&&this[F+C+1]!==0&&(ne=1),this[F+C]=(M/U>>0)-ne&255;return F+K},g.prototype.writeInt8=function(M,F,K){return M=+M,F|=0,K||ke(this,M,F,1,127,-128),g.TYPED_ARRAY_SUPPORT||(M=Math.floor(M)),M<0&&(M=255+M+1),this[F]=255&M,F+1},g.prototype.writeInt16LE=function(M,F,K){return M=+M,F|=0,K||ke(this,M,F,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[F]=255&M,this[F+1]=M>>>8):Xe(this,M,F,!0),F+2},g.prototype.writeInt16BE=function(M,F,K){return M=+M,F|=0,K||ke(this,M,F,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[F]=M>>>8,this[F+1]=255&M):Xe(this,M,F,!1),F+2},g.prototype.writeInt32LE=function(M,F,K){return M=+M,F|=0,K||ke(this,M,F,4,2147483647,-2147483648),g.TYPED_ARRAY_SUPPORT?(this[F]=255&M,this[F+1]=M>>>8,this[F+2]=M>>>16,this[F+3]=M>>>24):vt(this,M,F,!0),F+4},g.prototype.writeInt32BE=function(M,F,K){return M=+M,F|=0,K||ke(this,M,F,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),g.TYPED_ARRAY_SUPPORT?(this[F]=M>>>24,this[F+1]=M>>>16,this[F+2]=M>>>8,this[F+3]=255&M):vt(this,M,F,!1),F+4},g.prototype.writeFloatLE=function(M,F,K){return pr(this,M,F,!0,K)},g.prototype.writeFloatBE=function(M,F,K){return pr(this,M,F,!1,K)},g.prototype.writeDoubleLE=function(M,F,K){return Nt(this,M,F,!0,K)},g.prototype.writeDoubleBE=function(M,F,K){return Nt(this,M,F,!1,K)},g.prototype.copy=function(M,F,K,re){if(K||(K=0),re||re===0||(re=this.length),F>=M.length&&(F=M.length),F||(F=0),re>0&&re<K&&(re=K),re===K||M.length===0||this.length===0)return 0;if(F<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("sourceStart out of bounds");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length),M.length-F<re-K&&(re=M.length-F+K);var B,C=re-K;if(this===M&&K<F&&F<re)for(B=C-1;B>=0;--B)M[B+F]=this[B+K];else if(C<1e3||!g.TYPED_ARRAY_SUPPORT)for(B=0;B<C;++B)M[B+F]=this[B+K];else Uint8Array.prototype.set.call(M,this.subarray(K,K+C),F);return C},g.prototype.fill=function(M,F,K,re){if(typeof M=="string"){if(typeof F=="string"?(re=F,F=0,K=this.length):typeof K=="string"&&(re=K,K=this.length),M.length===1){var B=M.charCodeAt(0);B<256&&(M=B)}if(re!==void 0&&typeof re!="string")throw new TypeError("encoding must be a string");if(typeof re=="string"&&!g.isEncoding(re))throw new TypeError("Unknown encoding: "+re)}else typeof M=="number"&&(M&=255);if(F<0||this.length<F||this.length<K)throw new RangeError("Out of range index");if(K<=F)return this;var C;if(F>>>=0,K=K===void 0?this.length:K>>>0,M||(M=0),typeof M=="number")for(C=F;C<K;++C)this[C]=M;else{var U=g.isBuffer(M)?M:Pt(new g(M,re).toString()),ne=U.length;for(C=0;C<K-F;++C)this[C+F]=U[C%ne]}return this};var Fr=/[^+\/0-9A-Za-z-_]/g;function ar(ee){return ee<16?"0"+ee.toString(16):ee.toString(16)}function Pt(ee,M){var F;M=M||1/0;for(var K=ee.length,re=null,B=[],C=0;C<K;++C){if((F=ee.charCodeAt(C))>55295&&F<57344){if(!re){if(F>56319){(M-=3)>-1&&B.push(239,191,189);continue}if(C+1===K){(M-=3)>-1&&B.push(239,191,189);continue}re=F;continue}if(F<56320){(M-=3)>-1&&B.push(239,191,189),re=F;continue}F=65536+(re-55296<<10|F-56320)}else re&&(M-=3)>-1&&B.push(239,191,189);if(re=null,F<128){if((M-=1)<0)break;B.push(F)}else if(F<2048){if((M-=2)<0)break;B.push(F>>6|192,63&F|128)}else if(F<65536){if((M-=3)<0)break;B.push(F>>12|224,F>>6&63|128,63&F|128)}else{if(!(F<1114112))throw new Error("Invalid code point");if((M-=4)<0)break;B.push(F>>18|240,F>>12&63|128,F>>6&63|128,63&F|128)}}return B}function Ye(ee){return a.toByteArray(function(F){if((F=function(re){return re.trim?re.trim():re.replace(/^\s+|\s+$/g,"")}(F).replace(Fr,"")).length<2)return"";for(;F.length%4!=0;)F+="=";return F}(ee))}function We(ee,M,F,K){for(var re=0;re<K&&!(re+F>=M.length||re>=ee.length);++re)M[re+F]=ee[re];return re}}).call(this,i(29))},function(r,n){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}r.exports=i},function(r,n,i){n.byteLength=function(P){var I=g(P),D=I[0],A=I[1];return 3*(D+A)/4-A},n.toByteArray=function(P){var I,D,A=g(P),R=A[0],N=A[1],L=new l(function(ve,Fe,z){return 3*(Fe+z)/4-z}(0,R,N)),W=0,q=N>0?R-4:R;for(D=0;D<q;D+=4)I=a[P.charCodeAt(D)]<<18|a[P.charCodeAt(D+1)]<<12|a[P.charCodeAt(D+2)]<<6|a[P.charCodeAt(D+3)],L[W++]=I>>16&255,L[W++]=I>>8&255,L[W++]=255&I;return N===2&&(I=a[P.charCodeAt(D)]<<2|a[P.charCodeAt(D+1)]>>4,L[W++]=255&I),N===1&&(I=a[P.charCodeAt(D)]<<10|a[P.charCodeAt(D+1)]<<4|a[P.charCodeAt(D+2)]>>2,L[W++]=I>>8&255,L[W++]=255&I),L},n.fromByteArray=function(P){for(var I,D=P.length,A=D%3,R=[],N=16383,L=0,W=D-A;L<W;L+=N)R.push(E(P,L,L+N>W?W:L+N));return A===1?(I=P[D-1],R.push(s[I>>2]+s[I<<4&63]+"==")):A===2&&(I=(P[D-2]<<8)+P[D-1],R.push(s[I>>10]+s[I>>4&63]+s[I<<2&63]+"=")),R.join("")};for(var s=[],a=[],l=typeof Uint8Array<"u"?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,m=y.length;d<m;++d)s[d]=y[d],a[y.charCodeAt(d)]=d;function g(b){var P=b.length;if(P%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var I=b.indexOf("=");return I===-1&&(I=P),[I,I===P?0:4-I%4]}function E(b,P,I){for(var D,A,R=[],N=P;N<I;N+=3)D=(b[N]<<16&16711680)+(b[N+1]<<8&65280)+(255&b[N+2]),R.push(s[(A=D)>>18&63]+s[A>>12&63]+s[A>>6&63]+s[63&A]);return R.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(r,n){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */n.read=function(i,s,a,l,y){var d,m,g=8*y-l-1,E=(1<<g)-1,b=E>>1,P=-7,I=a?y-1:0,D=a?-1:1,A=i[s+I];for(I+=D,d=A&(1<<-P)-1,A>>=-P,P+=g;P>0;d=256*d+i[s+I],I+=D,P-=8);for(m=d&(1<<-P)-1,d>>=-P,P+=l;P>0;m=256*m+i[s+I],I+=D,P-=8);if(d===0)d=1-b;else{if(d===E)return m?NaN:1/0*(A?-1:1);m+=Math.pow(2,l),d-=b}return(A?-1:1)*m*Math.pow(2,d-l)},n.write=function(i,s,a,l,y,d){var m,g,E,b=8*d-y-1,P=(1<<b)-1,I=P>>1,D=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=l?0:d-1,R=l?1:-1,N=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(g=isNaN(s)?1:0,m=P):(m=Math.floor(Math.log(s)/Math.LN2),s*(E=Math.pow(2,-m))<1&&(m--,E*=2),(s+=m+I>=1?D/E:D*Math.pow(2,1-I))*E>=2&&(m++,E/=2),m+I>=P?(g=0,m=P):m+I>=1?(g=(s*E-1)*Math.pow(2,y),m+=I):(g=s*Math.pow(2,I-1)*Math.pow(2,y),m=0));y>=8;i[a+A]=255&g,A+=R,g/=256,y-=8);for(m=m<<y|g,b+=y;b>0;i[a+A]=255&m,A+=R,m/=256,b-=8);i[a+A-R]|=128*N}},function(r,n){var i={}.toString;r.exports=Array.isArray||function(s){return i.call(s)=="[object Array]"}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(l){var y=l.jws,d=l.KeyUtil,m=l.X509,g=l.crypto,E=l.hextob64u,b=l.b64tohex,P=l.AllowedSigningAlgs;return function(){function I(){(function(A,R){if(!(A instanceof R))throw new TypeError("Cannot call a class as a function")})(this,I)}return I.parseJwt=function(A){s.Log.debug("JoseUtil.parseJwt");try{var R=y.JWS.parse(A);return{header:R.headerObj,payload:R.payloadObj}}catch(N){s.Log.error(N)}},I.validateJwt=function(A,R,N,L,W,q,J){s.Log.debug("JoseUtil.validateJwt");try{if(R.kty==="RSA")if(R.e&&R.n)R=d.getKey(R);else{if(!R.x5c||!R.x5c.length)return s.Log.error("JoseUtil.validateJwt: RSA key missing key material",R),Promise.reject(new Error("RSA key missing key material"));var ve=b(R.x5c[0]);R=m.getPublicKeyFromCertHex(ve)}else{if(R.kty!=="EC")return s.Log.error("JoseUtil.validateJwt: Unsupported key type",R&&R.kty),Promise.reject(new Error(R.kty));if(!(R.crv&&R.x&&R.y))return s.Log.error("JoseUtil.validateJwt: EC key missing key material",R),Promise.reject(new Error("EC key missing key material"));R=d.getKey(R)}return I._validateJwt(A,R,N,L,W,q,J)}catch(Fe){return s.Log.error(Fe&&Fe.message||Fe),Promise.reject("JWT validation failed")}},I.validateJwtAttributes=function(A,R,N,L,W,q){L||(L=0),W||(W=parseInt(Date.now()/1e3));var J=I.parseJwt(A).payload;if(!J.iss)return s.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(J.iss!==R)return s.Log.error("JoseUtil._validateJwt: Invalid issuer in token",J.iss),Promise.reject(new Error("Invalid issuer in token: "+J.iss));if(!J.aud)return s.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(J.aud===N||Array.isArray(J.aud)&&J.aud.indexOf(N)>=0))return s.Log.error("JoseUtil._validateJwt: Invalid audience in token",J.aud),Promise.reject(new Error("Invalid audience in token: "+J.aud));if(J.azp&&J.azp!==N)return s.Log.error("JoseUtil._validateJwt: Invalid azp in token",J.azp),Promise.reject(new Error("Invalid azp in token: "+J.azp));if(!q){var ve=W+L,Fe=W-L;if(!J.iat)return s.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(ve<J.iat)return s.Log.error("JoseUtil._validateJwt: iat is in the future",J.iat),Promise.reject(new Error("iat is in the future: "+J.iat));if(J.nbf&&ve<J.nbf)return s.Log.error("JoseUtil._validateJwt: nbf is in the future",J.nbf),Promise.reject(new Error("nbf is in the future: "+J.nbf));if(!J.exp)return s.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(J.exp<Fe)return s.Log.error("JoseUtil._validateJwt: exp is in the past",J.exp),Promise.reject(new Error("exp is in the past:"+J.exp))}return Promise.resolve(J)},I._validateJwt=function(A,R,N,L,W,q,J){return I.validateJwtAttributes(A,N,L,W,q,J).then(function(ve){try{return y.JWS.verify(A,R,P)?ve:(s.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(Fe){return s.Log.error(Fe&&Fe.message||Fe),Promise.reject(new Error("signature validation failed"))}})},I.hashString=function(A,R){try{return g.Util.hashString(A,R)}catch(N){s.Log.error(N)}},I.hexToBase64Url=function(A){try{return E(A)}catch(R){s.Log.error(R)}},I}()};var s=i(0);r.exports=n.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SigninResponse=void 0;var s=function(){function y(d,m){for(var g=0;g<m.length;g++){var E=m[g];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(d,E.key,E)}}return function(d,m,g){return m&&y(d.prototype,m),g&&y(d,g),d}}(),a=i(3);function l(y,d){if(!(y instanceof d))throw new TypeError("Cannot call a class as a function")}n.SigninResponse=function(){function y(d){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#";l(this,y);var g=a.UrlUtility.parseUrlFragment(d,m);this.error=g.error,this.error_description=g.error_description,this.error_uri=g.error_uri,this.code=g.code,this.state=g.state,this.id_token=g.id_token,this.session_state=g.session_state,this.access_token=g.access_token,this.token_type=g.token_type,this.scope=g.scope,this.profile=void 0,this.expires_in=g.expires_in}return s(y,[{key:"expires_in",get:function(){if(this.expires_at){var m=parseInt(Date.now()/1e3);return this.expires_at-m}},set:function(m){var g=parseInt(m);if(typeof g=="number"&&g>0){var E=parseInt(Date.now()/1e3);this.expires_at=E+g}}},{key:"expired",get:function(){var m=this.expires_in;if(m!==void 0)return m<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),y}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SignoutRequest=void 0;var s=i(0),a=i(3),l=i(9);n.SignoutRequest=function y(d){var m=d.url,g=d.id_token_hint,E=d.post_logout_redirect_uri,b=d.data,P=d.extraQueryParams,I=d.request_type;if(function(R,N){if(!(R instanceof N))throw new TypeError("Cannot call a class as a function")}(this,y),!m)throw s.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var D in g&&(m=a.UrlUtility.addQueryParam(m,"id_token_hint",g)),E&&(m=a.UrlUtility.addQueryParam(m,"post_logout_redirect_uri",E),b&&(this.state=new l.State({data:b,request_type:I}),m=a.UrlUtility.addQueryParam(m,"state",this.state.id))),P)m=a.UrlUtility.addQueryParam(m,D,P[D]);this.url=m}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SignoutResponse=void 0;var s=i(3);n.SignoutResponse=function a(l){(function(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")})(this,a);var y=s.UrlUtility.parseUrlFragment(l,"?");this.error=y.error,this.error_description=y.error_description,this.error_uri=y.error_uri,this.state=y.state}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.InMemoryWebStorage=void 0;var s=function(){function l(y,d){for(var m=0;m<d.length;m++){var g=d[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(y,g.key,g)}}return function(y,d,m){return d&&l(y.prototype,d),m&&l(y,m),y}}(),a=i(0);n.InMemoryWebStorage=function(){function l(){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,l),this._data={}}return l.prototype.getItem=function(d){return a.Log.debug("InMemoryWebStorage.getItem",d),this._data[d]},l.prototype.setItem=function(d,m){a.Log.debug("InMemoryWebStorage.setItem",d),this._data[d]=m},l.prototype.removeItem=function(d){a.Log.debug("InMemoryWebStorage.removeItem",d),delete this._data[d]},l.prototype.key=function(d){return Object.getOwnPropertyNames(this._data)[d]},s(l,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),l}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.UserManager=void 0;var s=function(){function N(L,W){for(var q=0;q<W.length;q++){var J=W[q];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(L,J.key,J)}}return function(L,W,q){return W&&N(L.prototype,W),q&&N(L,q),L}}(),a=i(0),l=i(10),y=i(39),d=i(15),m=i(45),g=i(47),E=i(18),b=i(8),P=i(20),I=i(11),D=i(4);function A(N,L){if(!(N instanceof L))throw new TypeError("Cannot call a class as a function")}function R(N,L){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!L||typeof L!="object"&&typeof L!="function"?N:L}n.UserManager=function(N){function L(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g.SilentRenewService,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:E.SessionMonitor,ve=arguments.length>3&&arguments[3]!==void 0?arguments[3]:P.TokenRevocationClient,Fe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:I.TokenClient,z=arguments.length>5&&arguments[5]!==void 0?arguments[5]:D.JoseUtil;A(this,L),W instanceof y.UserManagerSettings||(W=new y.UserManagerSettings(W));var De=R(this,N.call(this,W));return De._events=new m.UserManagerEvents(W),De._silentRenewService=new q(De),De.settings.automaticSilentRenew&&(a.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),De.startSilentRenew()),De.settings.monitorSession&&(a.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),De._sessionMonitor=new J(De)),De._tokenRevocationClient=new ve(De._settings),De._tokenClient=new Fe(De._settings),De._joseUtil=z,De}return function(q,J){if(typeof J!="function"&&J!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof J);q.prototype=Object.create(J&&J.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),J&&(Object.setPrototypeOf?Object.setPrototypeOf(q,J):q.__proto__=J)}(L,N),L.prototype.getUser=function(){var q=this;return this._loadUser().then(function(J){return J?(a.Log.info("UserManager.getUser: user loaded"),q._events.load(J,!1),J):(a.Log.info("UserManager.getUser: user not found in storage"),null)})},L.prototype.removeUser=function(){var q=this;return this.storeUser(null).then(function(){a.Log.info("UserManager.removeUser: user removed from storage"),q._events.unload()})},L.prototype.signinRedirect=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(q=Object.assign({},q)).request_type="si:r";var J={useReplaceToNavigate:q.useReplaceToNavigate};return this._signinStart(q,this._redirectNavigator,J).then(function(){a.Log.info("UserManager.signinRedirect: successful")})},L.prototype.signinRedirectCallback=function(q){return this._signinEnd(q||this._redirectNavigator.url).then(function(J){return J.profile&&J.profile.sub?a.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",J.profile.sub):a.Log.info("UserManager.signinRedirectCallback: no sub"),J})},L.prototype.signinPopup=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(q=Object.assign({},q)).request_type="si:p";var J=q.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return J?(q.redirect_uri=J,q.display="popup",this._signin(q,this._popupNavigator,{startUrl:J,popupWindowFeatures:q.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:q.popupWindowTarget||this.settings.popupWindowTarget}).then(function(ve){return ve&&(ve.profile&&ve.profile.sub?a.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",ve.profile.sub):a.Log.info("UserManager.signinPopup: no sub")),ve})):(a.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},L.prototype.signinPopupCallback=function(q){return this._signinCallback(q,this._popupNavigator).then(function(J){return J&&(J.profile&&J.profile.sub?a.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",J.profile.sub):a.Log.info("UserManager.signinPopupCallback: no sub")),J}).catch(function(J){a.Log.error(J.message)})},L.prototype.signinSilent=function(){var q=this,J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return J=Object.assign({},J),this._loadUser().then(function(ve){return ve&&ve.refresh_token?(J.refresh_token=ve.refresh_token,q._useRefreshToken(J)):(J.request_type="si:s",J.id_token_hint=J.id_token_hint||q.settings.includeIdTokenInSilentRenew&&ve&&ve.id_token,ve&&q._settings.validateSubOnSilentRenew&&(a.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",ve.profile.sub),J.current_sub=ve.profile.sub),q._signinSilentIframe(J))})},L.prototype._useRefreshToken=function(){var q=this,J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._tokenClient.exchangeRefreshToken(J).then(function(ve){return ve?ve.access_token?q._loadUser().then(function(Fe){if(Fe){var z=Promise.resolve();return ve.id_token&&(z=q._validateIdTokenFromTokenRefreshToken(Fe.profile,ve.id_token)),z.then(function(){return a.Log.debug("UserManager._useRefreshToken: refresh token response success"),Fe.id_token=ve.id_token||Fe.id_token,Fe.access_token=ve.access_token,Fe.refresh_token=ve.refresh_token||Fe.refresh_token,Fe.expires_in=ve.expires_in,q.storeUser(Fe).then(function(){return q._events.load(Fe),Fe})})}return null}):(a.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(a.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},L.prototype._validateIdTokenFromTokenRefreshToken=function(q,J){var ve=this;return this._metadataService.getIssuer().then(function(Fe){return ve.settings.getEpochTime().then(function(z){return ve._joseUtil.validateJwtAttributes(J,Fe,ve._settings.client_id,ve._settings.clockSkew,z).then(function(De){return De?De.sub!==q.sub?(a.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):De.auth_time&&De.auth_time!==q.auth_time?(a.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):De.azp&&De.azp!==q.azp?(a.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!De.azp&&q.azp?(a.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(a.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))})})})},L.prototype._signinSilentIframe=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=q.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return J?(q.redirect_uri=J,q.prompt=q.prompt||"none",this._signin(q,this._iframeNavigator,{startUrl:J,silentRequestTimeout:q.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(ve){return ve&&(ve.profile&&ve.profile.sub?a.Log.info("UserManager.signinSilent: successful, signed in sub: ",ve.profile.sub):a.Log.info("UserManager.signinSilent: no sub")),ve})):(a.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},L.prototype.signinSilentCallback=function(q){return this._signinCallback(q,this._iframeNavigator).then(function(J){return J&&(J.profile&&J.profile.sub?a.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",J.profile.sub):a.Log.info("UserManager.signinSilentCallback: no sub")),J})},L.prototype.signinCallback=function(q){var J=this;return this.readSigninResponseState(q).then(function(ve){var Fe=ve.state;return ve.response,Fe.request_type==="si:r"?J.signinRedirectCallback(q):Fe.request_type==="si:p"?J.signinPopupCallback(q):Fe.request_type==="si:s"?J.signinSilentCallback(q):Promise.reject(new Error("invalid response_type in state"))})},L.prototype.signoutCallback=function(q,J){var ve=this;return this.readSignoutResponseState(q).then(function(Fe){var z=Fe.state,De=Fe.response;return z?z.request_type==="so:r"?ve.signoutRedirectCallback(q):z.request_type==="so:p"?ve.signoutPopupCallback(q,J):Promise.reject(new Error("invalid response_type in state")):De})},L.prototype.querySessionStatus=function(){var q=this,J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(J=Object.assign({},J)).request_type="si:s";var ve=J.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return ve?(J.redirect_uri=ve,J.prompt="none",J.response_type=J.response_type||this.settings.query_status_response_type,J.scope=J.scope||"openid",J.skipUserInfo=!0,this._signinStart(J,this._iframeNavigator,{startUrl:ve,silentRequestTimeout:J.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(Fe){return q.processSigninResponse(Fe.url).then(function(z){if(a.Log.debug("UserManager.querySessionStatus: got signin response"),z.session_state&&z.profile.sub)return a.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",z.profile.sub),{session_state:z.session_state,sub:z.profile.sub,sid:z.profile.sid};a.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(z){if(z.session_state&&q.settings.monitorAnonymousSession&&(z.message=="login_required"||z.message=="consent_required"||z.message=="interaction_required"||z.message=="account_selection_required"))return a.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:z.session_state};throw z})})):(a.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},L.prototype._signin=function(q,J){var ve=this,Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._signinStart(q,J,Fe).then(function(z){return ve._signinEnd(z.url,q)})},L.prototype._signinStart=function(q,J){var ve=this,Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return J.prepare(Fe).then(function(z){return a.Log.debug("UserManager._signinStart: got navigator window handle"),ve.createSigninRequest(q).then(function(De){return a.Log.debug("UserManager._signinStart: got signin request"),Fe.url=De.url,Fe.id=De.state.id,z.navigate(Fe)}).catch(function(De){throw z.close&&(a.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),z.close()),De})})},L.prototype._signinEnd=function(q){var J=this,ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.processSigninResponse(q).then(function(Fe){a.Log.debug("UserManager._signinEnd: got signin response");var z=new d.User(Fe);if(ve.current_sub){if(ve.current_sub!==z.profile.sub)return a.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",z.profile.sub),Promise.reject(new Error("login_required"));a.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return J.storeUser(z).then(function(){return a.Log.debug("UserManager._signinEnd: user stored"),J._events.load(z),z})})},L.prototype._signinCallback=function(q,J){a.Log.debug("UserManager._signinCallback");var ve=this._settings.response_mode==="query"||!this._settings.response_mode&&b.SigninRequest.isCode(this._settings.response_type)?"?":"#";return J.callback(q,void 0,ve)},L.prototype.signoutRedirect=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(q=Object.assign({},q)).request_type="so:r";var J=q.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;J&&(q.post_logout_redirect_uri=J);var ve={useReplaceToNavigate:q.useReplaceToNavigate};return this._signoutStart(q,this._redirectNavigator,ve).then(function(){a.Log.info("UserManager.signoutRedirect: successful")})},L.prototype.signoutRedirectCallback=function(q){return this._signoutEnd(q||this._redirectNavigator.url).then(function(J){return a.Log.info("UserManager.signoutRedirectCallback: successful"),J})},L.prototype.signoutPopup=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(q=Object.assign({},q)).request_type="so:p";var J=q.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return q.post_logout_redirect_uri=J,q.display="popup",q.post_logout_redirect_uri&&(q.state=q.state||{}),this._signout(q,this._popupNavigator,{startUrl:J,popupWindowFeatures:q.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:q.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){a.Log.info("UserManager.signoutPopup: successful")})},L.prototype.signoutPopupCallback=function(q,J){return J===void 0&&typeof q=="boolean"&&(J=q,q=null),this._popupNavigator.callback(q,J,"?").then(function(){a.Log.info("UserManager.signoutPopupCallback: successful")})},L.prototype._signout=function(q,J){var ve=this,Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._signoutStart(q,J,Fe).then(function(z){return ve._signoutEnd(z.url)})},L.prototype._signoutStart=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=this,ve=arguments[1],Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ve.prepare(Fe).then(function(z){return a.Log.debug("UserManager._signoutStart: got navigator window handle"),J._loadUser().then(function(De){return a.Log.debug("UserManager._signoutStart: loaded current user from storage"),(J._settings.revokeAccessTokenOnSignout?J._revokeInternal(De):Promise.resolve()).then(function(){var xt=q.id_token_hint||De&&De.id_token;return xt&&(a.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),q.id_token_hint=xt),J.removeUser().then(function(){return a.Log.debug("UserManager._signoutStart: user removed, creating signout request"),J.createSignoutRequest(q).then(function(ft){return a.Log.debug("UserManager._signoutStart: got signout request"),Fe.url=ft.url,ft.state&&(Fe.id=ft.state.id),z.navigate(Fe)})})})}).catch(function(De){throw z.close&&(a.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),z.close()),De})})},L.prototype._signoutEnd=function(q){return this.processSignoutResponse(q).then(function(J){return a.Log.debug("UserManager._signoutEnd: got signout response"),J})},L.prototype.revokeAccessToken=function(){var q=this;return this._loadUser().then(function(J){return q._revokeInternal(J,!0).then(function(ve){if(ve)return a.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),J.access_token=null,J.refresh_token=null,J.expires_at=null,J.token_type=null,q.storeUser(J).then(function(){a.Log.debug("UserManager.revokeAccessToken: user stored"),q._events.load(J)})})}).then(function(){a.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},L.prototype._revokeInternal=function(q,J){var ve=this;if(q){var Fe=q.access_token,z=q.refresh_token;return this._revokeAccessTokenInternal(Fe,J).then(function(De){return ve._revokeRefreshTokenInternal(z,J).then(function(xt){return De||xt||a.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),De||xt})})}return Promise.resolve(!1)},L.prototype._revokeAccessTokenInternal=function(q,J){return!q||q.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(q,J).then(function(){return!0})},L.prototype._revokeRefreshTokenInternal=function(q,J){return q?this._tokenRevocationClient.revoke(q,J,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},L.prototype.startSilentRenew=function(){this._silentRenewService.start()},L.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},L.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function(q){return q?(a.Log.debug("UserManager._loadUser: user storageString loaded"),d.User.fromStorageString(q)):(a.Log.debug("UserManager._loadUser: no user storageString"),null)})},L.prototype.storeUser=function(q){if(q){a.Log.debug("UserManager.storeUser: storing user");var J=q.toStorageString();return this._userStore.set(this._userStoreKey,J)}return a.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},s(L,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),L}(l.OidcClient)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.UserManagerSettings=void 0;var s=function(){function I(D,A){for(var R=0;R<A.length;R++){var N=A[R];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(D,N.key,N)}}return function(D,A,R){return A&&I(D.prototype,A),R&&I(D,R),D}}(),a=(i(0),i(5)),l=i(40),y=i(41),d=i(43),m=i(6),g=i(1),E=i(8);function b(I,D){if(!(I instanceof D))throw new TypeError("Cannot call a class as a function")}function P(I,D){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!D||typeof D!="object"&&typeof D!="function"?I:D}n.UserManagerSettings=function(I){function D(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},R=A.popup_redirect_uri,N=A.popup_post_logout_redirect_uri,L=A.popupWindowFeatures,W=A.popupWindowTarget,q=A.silent_redirect_uri,J=A.silentRequestTimeout,ve=A.automaticSilentRenew,Fe=ve!==void 0&&ve,z=A.validateSubOnSilentRenew,De=z!==void 0&&z,xt=A.includeIdTokenInSilentRenew,ft=xt===void 0||xt,Te=A.monitorSession,He=Te===void 0||Te,st=A.monitorAnonymousSession,Ct=st!==void 0&&st,$e=A.checkSessionInterval,Je=$e===void 0?2e3:$e,ke=A.stopCheckSessionOnError,Xe=ke===void 0||ke,vt=A.query_status_response_type,vr=A.revokeAccessTokenOnSignout,pr=vr!==void 0&&vr,Nt=A.accessTokenExpiringNotificationTime,Fr=Nt===void 0?60:Nt,ar=A.redirectNavigator,Pt=ar===void 0?new l.RedirectNavigator:ar,Ye=A.popupNavigator,We=Ye===void 0?new y.PopupNavigator:Ye,ee=A.iframeNavigator,M=ee===void 0?new d.IFrameNavigator:ee,F=A.userStore,K=F===void 0?new m.WebStorageStateStore({store:g.Global.sessionStorage}):F;b(this,D);var re=P(this,I.call(this,arguments[0]));return re._popup_redirect_uri=R,re._popup_post_logout_redirect_uri=N,re._popupWindowFeatures=L,re._popupWindowTarget=W,re._silent_redirect_uri=q,re._silentRequestTimeout=J,re._automaticSilentRenew=Fe,re._validateSubOnSilentRenew=De,re._includeIdTokenInSilentRenew=ft,re._accessTokenExpiringNotificationTime=Fr,re._monitorSession=He,re._monitorAnonymousSession=Ct,re._checkSessionInterval=Je,re._stopCheckSessionOnError=Xe,vt?re._query_status_response_type=vt:arguments[0]&&arguments[0].response_type?re._query_status_response_type=E.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":re._query_status_response_type="id_token",re._revokeAccessTokenOnSignout=pr,re._redirectNavigator=Pt,re._popupNavigator=We,re._iframeNavigator=M,re._userStore=K,re}return function(R,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);R.prototype=Object.create(N&&N.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(R,N):R.__proto__=N)}(D,I),s(D,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),D}(a.OidcClientSettings)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.RedirectNavigator=void 0;var s=function(){function l(y,d){for(var m=0;m<d.length;m++){var g=d[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(y,g.key,g)}}return function(y,d,m){return d&&l(y.prototype,d),m&&l(y,m),y}}(),a=i(0);n.RedirectNavigator=function(){function l(){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,l)}return l.prototype.prepare=function(){return Promise.resolve(this)},l.prototype.navigate=function(d){return d&&d.url?(d.useReplaceToNavigate?window.location.replace(d.url):window.location=d.url,Promise.resolve()):(a.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},s(l,[{key:"url",get:function(){return window.location.href}}]),l}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.PopupNavigator=void 0;var s=i(0),a=i(42);n.PopupNavigator=function(){function l(){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,l)}return l.prototype.prepare=function(d){var m=new a.PopupWindow(d);return Promise.resolve(m)},l.prototype.callback=function(d,m,g){s.Log.debug("PopupNavigator.callback");try{return a.PopupWindow.notifyOpener(d,m,g),Promise.resolve()}catch(E){return Promise.reject(E)}},l}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.PopupWindow=void 0;var s=function(){function y(d,m){for(var g=0;g<m.length;g++){var E=m[g];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(d,E.key,E)}}return function(d,m,g){return m&&y(d.prototype,m),g&&y(d,g),d}}(),a=i(0),l=i(3);n.PopupWindow=function(){function y(d){var m=this;(function(P,I){if(!(P instanceof I))throw new TypeError("Cannot call a class as a function")})(this,y),this._promise=new Promise(function(b,P){m._resolve=b,m._reject=P});var g=d.popupWindowTarget||"_blank",E=d.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;";this._popup=window.open("",g,E),this._popup&&(a.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return y.prototype.navigate=function(m){return this._popup?m&&m.url?(a.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=m.id,this._id&&(window["popupCallback_"+m.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=m.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},y.prototype._success=function(m){a.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(m)},y.prototype._error=function(m){a.Log.error("PopupWindow.error: ",m),this._cleanup(),this._reject(new Error(m))},y.prototype.close=function(){this._cleanup(!1)},y.prototype._cleanup=function(m){a.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!m&&this._popup.close(),this._popup=null},y.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},y.prototype._callback=function(m,g){this._cleanup(g),m?(a.Log.debug("PopupWindow.callback success"),this._success({url:m})):(a.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},y.notifyOpener=function(m,g,E){if(window.opener){if(m=m||window.location.href){var b=l.UrlUtility.parseUrlFragment(m,E);if(b.state){var P="popupCallback_"+b.state,I=window.opener[P];I?(a.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),I(m,g)):a.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else a.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else a.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},s(y,[{key:"promise",get:function(){return this._promise}}]),y}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.IFrameNavigator=void 0;var s=i(0),a=i(44);n.IFrameNavigator=function(){function l(){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,l)}return l.prototype.prepare=function(d){var m=new a.IFrameWindow(d);return Promise.resolve(m)},l.prototype.callback=function(d){s.Log.debug("IFrameNavigator.callback");try{return a.IFrameWindow.notifyParent(d),Promise.resolve()}catch(m){return Promise.reject(m)}},l}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.IFrameWindow=void 0;var s=function(){function l(y,d){for(var m=0;m<d.length;m++){var g=d[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(y,g.key,g)}}return function(y,d,m){return d&&l(y.prototype,d),m&&l(y,m),y}}(),a=i(0);n.IFrameWindow=function(){function l(y){var d=this;(function(g,E){if(!(g instanceof E))throw new TypeError("Cannot call a class as a function")})(this,l),this._promise=new Promise(function(m,g){d._resolve=m,d._reject=g}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return l.prototype.navigate=function(d){if(d&&d.url){var m=d.silentRequestTimeout||1e4;a.Log.debug("IFrameWindow.navigate: Using timeout of:",m),this._timer=window.setTimeout(this._timeout.bind(this),m),this._frame.src=d.url}else this._error("No url provided");return this.promise},l.prototype._success=function(d){this._cleanup(),a.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(d)},l.prototype._error=function(d){this._cleanup(),a.Log.error(d),this._reject(new Error(d))},l.prototype.close=function(){this._cleanup()},l.prototype._cleanup=function(){this._frame&&(a.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},l.prototype._timeout=function(){a.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},l.prototype._message=function(d){if(a.Log.debug("IFrameWindow.message"),this._timer&&d.origin===this._origin&&d.source===this._frame.contentWindow&&typeof d.data=="string"&&(d.data.startsWith("http://")||d.data.startsWith("https://"))){var m=d.data;m?this._success({url:m}):this._error("Invalid response from frame")}},l.notifyParent=function(d){a.Log.debug("IFrameWindow.notifyParent"),(d=d||window.location.href)&&(a.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(d,location.protocol+"//"+location.host))},s(l,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),l}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.UserManagerEvents=void 0;var s=i(0),a=i(16),l=i(17);n.UserManagerEvents=function(y){function d(m){(function(b,P){if(!(b instanceof P))throw new TypeError("Cannot call a class as a function")})(this,d);var g=function(b,P){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!P||typeof P!="object"&&typeof P!="function"?b:P}(this,y.call(this,m));return g._userLoaded=new l.Event("User loaded"),g._userUnloaded=new l.Event("User unloaded"),g._silentRenewError=new l.Event("Silent renew error"),g._userSignedIn=new l.Event("User signed in"),g._userSignedOut=new l.Event("User signed out"),g._userSessionChanged=new l.Event("User session changed"),g}return function(g,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);g.prototype=Object.create(E&&E.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(g,E):g.__proto__=E)}(d,y),d.prototype.load=function(g){var E=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];s.Log.debug("UserManagerEvents.load"),y.prototype.load.call(this,g),E&&this._userLoaded.raise(g)},d.prototype.unload=function(){s.Log.debug("UserManagerEvents.unload"),y.prototype.unload.call(this),this._userUnloaded.raise()},d.prototype.addUserLoaded=function(g){this._userLoaded.addHandler(g)},d.prototype.removeUserLoaded=function(g){this._userLoaded.removeHandler(g)},d.prototype.addUserUnloaded=function(g){this._userUnloaded.addHandler(g)},d.prototype.removeUserUnloaded=function(g){this._userUnloaded.removeHandler(g)},d.prototype.addSilentRenewError=function(g){this._silentRenewError.addHandler(g)},d.prototype.removeSilentRenewError=function(g){this._silentRenewError.removeHandler(g)},d.prototype._raiseSilentRenewError=function(g){s.Log.debug("UserManagerEvents._raiseSilentRenewError",g.message),this._silentRenewError.raise(g)},d.prototype.addUserSignedIn=function(g){this._userSignedIn.addHandler(g)},d.prototype.removeUserSignedIn=function(g){this._userSignedIn.removeHandler(g)},d.prototype._raiseUserSignedIn=function(){s.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},d.prototype.addUserSignedOut=function(g){this._userSignedOut.addHandler(g)},d.prototype.removeUserSignedOut=function(g){this._userSignedOut.removeHandler(g)},d.prototype._raiseUserSignedOut=function(){s.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},d.prototype.addUserSessionChanged=function(g){this._userSessionChanged.addHandler(g)},d.prototype.removeUserSessionChanged=function(g){this._userSessionChanged.removeHandler(g)},d.prototype._raiseUserSessionChanged=function(){s.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},d}(a.AccessTokenEvents)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.Timer=void 0;var s=function(){function g(E,b){for(var P=0;P<b.length;P++){var I=b[P];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(E,I.key,I)}}return function(E,b,P){return b&&g(E.prototype,b),P&&g(E,P),E}}(),a=i(0),l=i(1),y=i(17);function d(g,E){if(!(g instanceof E))throw new TypeError("Cannot call a class as a function")}function m(g,E){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!E||typeof E!="object"&&typeof E!="function"?g:E}n.Timer=function(g){function E(b){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.Global.timer,I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;d(this,E);var D=m(this,g.call(this,b));return D._timer=P,D._nowFunc=I||function(){return Date.now()/1e3},D}return function(P,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);P.prototype=Object.create(I&&I.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(P,I):P.__proto__=I)}(E,g),E.prototype.init=function(P){P<=0&&(P=1),P=parseInt(P);var I=this.now+P;if(this.expiration===I&&this._timerHandle)a.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),a.Log.debug("Timer.init timer "+this._name+" for duration:",P),this._expiration=I;var D=5;P<D&&(D=P),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*D)}},E.prototype.cancel=function(){this._timerHandle&&(a.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},E.prototype._callback=function(){var P=this._expiration-this.now;a.Log.debug("Timer.callback; "+this._name+" timer expires in:",P),this._expiration<=this.now&&(this.cancel(),g.prototype.raise.call(this))},s(E,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),E}(y.Event)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SilentRenewService=void 0;var s=i(0);n.SilentRenewService=function(){function a(l){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,a),this._userManager=l}return a.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(y){}).catch(function(y){s.Log.error("SilentRenewService.start: Error from getUser:",y.message)}))},a.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},a.prototype._tokenExpiring=function(){var y=this;this._userManager.signinSilent().then(function(d){s.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(d){s.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",d.message),y._userManager.events._raiseSilentRenewError(d)})},a}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.CordovaPopupNavigator=void 0;var s=i(21);n.CordovaPopupNavigator=function(){function a(){(function(y,d){if(!(y instanceof d))throw new TypeError("Cannot call a class as a function")})(this,a)}return a.prototype.prepare=function(y){var d=new s.CordovaPopupWindow(y);return Promise.resolve(d)},a}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.CordovaIFrameNavigator=void 0;var s=i(21);n.CordovaIFrameNavigator=function(){function a(){(function(y,d){if(!(y instanceof d))throw new TypeError("Cannot call a class as a function")})(this,a)}return a.prototype.prepare=function(y){y.popupWindowFeatures="hidden=yes";var d=new s.CordovaPopupWindow(y);return Promise.resolve(d)},a}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.Version="1.11.6"}])})})(x3);var Ci=bi();function C3(e,t){var r,n,i,s;throw e.error==="invalid_redirect_uri"?new Error(`Dynamic client registration failed: the provided redirect uri [${(r=t.redirectUrl)===null||r===void 0?void 0:r.toString()}] is invalid - ${(n=e.error_description)!==null&&n!==void 0?n:""}`):e.error==="invalid_client_metadata"?new Error(`Dynamic client registration failed: the provided client metadata ${JSON.stringify(t)} is invalid - ${(i=e.error_description)!==null&&i!==void 0?i:""}`):new Error(`Dynamic client registration failed: ${e.error} - ${(s=e.error_description)!==null&&s!==void 0?s:""}`)}function P3(e,t){if(e.client_id===void 0)throw new Error(`Dynamic client registration failed: no client_id has been found on ${JSON.stringify(e)}`);if(t.redirectUrl&&(e.redirect_uris===void 0||e.redirect_uris[0]!==t.redirectUrl.toString()))throw new Error(`Dynamic client registration failed: the returned redirect URIs ${JSON.stringify(e.redirect_uris)} don't match the provided ${JSON.stringify([t.redirectUrl.toString()])}`)}async function T3(e,t){var r;if(!t.registrationEndpoint)throw new Error("Dynamic Registration could not be completed because the issuer has no registration endpoint.");if(!Array.isArray(t.idTokenSigningAlgValuesSupported))throw new Error("The OIDC issuer discovery profile is missing the 'id_token_signing_alg_values_supported' value, which is mandatory.");const n=Ci.determineSigningAlg(t.idTokenSigningAlgValuesSupported,Ci.PREFERRED_SIGNING_ALG),i={client_name:e.clientName,application_type:"web",redirect_uris:[(r=e.redirectUrl)===null||r===void 0?void 0:r.toString()],subject_type:"public",token_endpoint_auth_method:"client_secret_basic",id_token_signed_response_alg:n,grant_types:["authorization_code","refresh_token"]},s={"Content-Type":"application/json"},a=await fetch(t.registrationEndpoint.toString(),{method:"POST",headers:s,body:JSON.stringify(i)});if(a.ok){const l=await a.json();return P3(l,e),{clientId:l.client_id,clientSecret:l.client_secret,idTokenSignedResponseAlg:l.id_token_signed_response_alg,clientType:"dynamic"}}throw a.status===400&&C3(await a.json(),e),new Error(`Dynamic client registration failed: the server returned ${a.status} ${a.statusText} - ${await a.text()}`)}function F3(e){return e.error!==void 0&&typeof e.error=="string"}function Ub(e){return e.error_description!==void 0&&typeof e.error_description=="string"}function I3(e){return e.error_uri!==void 0&&typeof e.error_uri=="string"}function k3(e){return e.access_token!==void 0&&typeof e.access_token=="string"}function O3(e){return e.id_token!==void 0&&typeof e.id_token=="string"}function N3(e){return e.refresh_token!==void 0&&typeof e.refresh_token=="string"}function U3(e){return e.token_type!==void 0&&typeof e.token_type=="string"}function D3(e){return e.expires_in===void 0||typeof e.expires_in=="number"}function L3(e,t){if(t.grantType&&(!e.grantTypesSupported||!e.grantTypesSupported.includes(t.grantType)))throw new Error(`The issuer [${e.issuer}] does not support the [${t.grantType}] grant`);if(!e.tokenEndpoint)throw new Error(`This issuer [${e.issuer}] does not have a token endpoint`)}function rx(e,t){if(F3(e))throw new Ci.OidcProviderError(`Token endpoint returned error [${e.error}]${Ub(e)?`: ${e.error_description}`:""}${I3(e)?` (see ${e.error_uri})`:""}`,e.error,Ub(e)?e.error_description:void 0);if(!k3(e))throw new Ci.InvalidResponseError(["access_token"]);if(!O3(e))throw new Ci.InvalidResponseError(["id_token"]);if(!U3(e))throw new Ci.InvalidResponseError(["token_type"]);if(!D3(e))throw new Ci.InvalidResponseError(["expires_in"]);if(!t&&e.token_type.toLowerCase()!=="bearer")throw new Error(`Invalid token endpoint response: requested a [Bearer] token, but got a 'token_type' value of [${e.token_type}].`);return e}async function M3(e,t,r,n){L3(e,r);const i={"content-type":"application/x-www-form-urlencoded"};let s;n&&(s=await Ci.generateDpopKeyPair(),i.DPoP=await Ci.createDpopHeader(e.tokenEndpoint,"POST",s)),t.clientSecret&&(i.Authorization=`Basic ${btoa(`${t.clientId}:${t.clientSecret}`)}`);const a={grant_type:r.grantType,redirect_uri:r.redirectUrl,code:r.code,code_verifier:r.codeVerifier,client_id:t.clientId},l={method:"POST",headers:i,body:new URLSearchParams(a).toString()},d=await(await await fetch(e.tokenEndpoint,l)).json(),m=rx(d,n),g=await Ci.getWebidFromTokenPayload(m.id_token,e.jwksUri,e.issuer,t.clientId);return{accessToken:m.access_token,idToken:m.id_token,refreshToken:N3(m)?m.refresh_token:void 0,webId:g,dpopKey:s,expiresIn:m.expires_in}}async function B3(e){let t;try{const r=new mi.OidcClient({response_mode:"query",loadUserInfo:!1});if(t=await r.processSigninResponse(e),r.settings.metadata===void 0)throw new Error("Cannot retrieve issuer metadata from client information in storage.");if(r.settings.metadata.jwks_uri===void 0)throw new Error("Missing some issuer metadata from client information in storage: 'jwks_uri' is undefined");if(r.settings.metadata.issuer===void 0)throw new Error("Missing some issuer metadata from client information in storage: 'issuer' is undefined");if(r.settings.client_id===void 0)throw new Error("Missing some client information in storage: 'client_id' is undefined");const n=await Ci.getWebidFromTokenPayload(t.id_token,r.settings.metadata.jwks_uri,r.settings.metadata.issuer,r.settings.client_id);return{accessToken:t.access_token,idToken:t.id_token,webId:n,refreshToken:t.refresh_token}}catch(r){throw new Error(`Problem handling Auth Code Grant (Flow) redirect - URL [${e}]: ${r}`)}}async function j3(e,t,r){return M3(e,t,r,!0)}const H3=e=>{try{return new URL(e),!0}catch{return!1}};async function $3(e,t,r,n){if(r.clientId===void 0)throw new Error("No client ID available when trying to refresh the access token.");const i={grant_type:"refresh_token",refresh_token:e,scope:Ci.DEFAULT_SCOPES};let s={};n!==void 0&&(s={DPoP:await Ci.createDpopHeader(t.tokenEndpoint,"POST",n)});let a={};r.clientSecret!==void 0?a={Authorization:`Basic ${btoa(`${r.clientId}:${r.clientSecret}`)}`}:H3(r.clientId)&&(i.client_id=r.clientId);const l=await fetch(t.tokenEndpoint,{method:"POST",body:new URLSearchParams(i).toString(),headers:{...s,...a,"Content-Type":"application/x-www-form-urlencoded"}});let y;try{y=await l.json()}catch{throw new Error(`The token endpoint of issuer ${t.issuer} returned a malformed response.`)}const d=rx(y,n!==void 0),m=await Ci.getWebidFromTokenPayload(d.id_token,t.jwksUri,t.issuer,r.clientId);return{accessToken:d.access_token,idToken:d.id_token,refreshToken:typeof d.refresh_token=="string"?d.refresh_token:void 0,webId:m,dpopKey:n,expiresIn:d.expires_in}}function W3(e){const t=new URL(e);return t.searchParams.delete("code"),t.searchParams.delete("state"),t.hash="",t.toString()}async function K3(){await new mi.OidcClient({response_mode:"query"}).clearStaleState(new mi.WebStorageStateStore({}));const t=window.localStorage,r=[];for(let n=0;n<=t.length;n+=1){const i=t.key(n);i&&(i.match(/^oidc\..+$/)||i.match(/^solidClientAuthenticationUser:.+$/))&&r.push(i)}r.forEach(n=>t.removeItem(n))}const V3=Object.freeze(Object.defineProperty({__proto__:null,CordovaIFrameNavigator:mi.CordovaIFrameNavigator,CordovaPopupNavigator:mi.CordovaPopupNavigator,InMemoryWebStorage:mi.InMemoryWebStorage,Log:mi.Log,OidcClient:mi.OidcClient,SessionMonitor:mi.SessionMonitor,User:mi.User,UserManager:mi.UserManager,Version:mi.Version,WebStorageStateStore:mi.WebStorageStateStore,clearOidcPersistentStorage:K3,getBearerToken:B3,getDpopToken:j3,refresh:$3,registerClient:T3,removeOidcQueryParam:W3},Symbol.toStringTag,{value:"Module"})),Yu=zy(V3);var Db;function z3(){if(Db)return Pf;Db=1,Object.defineProperty(Pf,"__esModule",{value:!0});const e=bi(),t=Yu,r=(i,s)=>window.fetch(i,s);let n=class{constructor(s,a,l,y,d){this.loginHandler=s,this.redirectHandler=a,this.logoutHandler=l,this.sessionInfoManager=y,this.issuerConfigFetcher=d,this.login=async(m,g)=>{var E,b;await this.sessionInfoManager.clear(m.sessionId);const P=(E=m.redirectUrl)!==null&&E!==void 0?E:(0,t.removeOidcQueryParam)(window.location.href);if(!(0,e.isValidRedirectUrl)(P))throw new Error(`${P} is not a valid redirect URL, it is either a malformed IRI or it includes a hash fragment.`);await this.loginHandler.handle({...m,redirectUrl:P,clientName:(b=m.clientName)!==null&&b!==void 0?b:m.clientId,eventEmitter:g})},this.fetch=r,this.logout=async m=>{await this.logoutHandler.handle(m),this.fetch=r},this.getSessionInfo=async m=>this.sessionInfoManager.get(m),this.getAllSessionInfo=async()=>this.sessionInfoManager.getAll(),this.validateCurrentSession=async m=>{const g=await this.sessionInfoManager.get(m);return g===void 0||g.clientAppId===void 0||g.issuer===void 0?null:g},this.handleIncomingRedirect=async(m,g)=>{try{const E=await this.redirectHandler.handle(m,g);return this.fetch=E.fetch.bind(window),this.cleanUrlAfterRedirect(m),{isLoggedIn:E.isLoggedIn,webId:E.webId,sessionId:E.sessionId,expirationDate:E.expirationDate}}catch(E){this.cleanUrlAfterRedirect(m),g.emit(e.EVENTS.ERROR,"redirect",E);return}}}cleanUrlAfterRedirect(s){const a=new URL(s);a.searchParams.delete("state"),a.searchParams.delete("code"),a.searchParams.delete("id_token"),a.searchParams.delete("access_token"),a.searchParams.delete("error"),a.searchParams.delete("error_description"),a.searchParams.delete("iss"),window.history.replaceState(null,"",a.toString())}};return Pf.default=n,Pf}var Tf={},Lb;function q3(){if(Lb)return Tf;Lb=1,Object.defineProperty(Tf,"__esModule",{value:!0});const e=bi();function t(i){return typeof i.oidcIssuer=="string"}function r(i){return typeof i.redirectUrl=="string"}let n=class{constructor(s,a,l,y){this.storageUtility=s,this.oidcHandler=a,this.issuerConfigFetcher=l,this.clientRegistrar=y}async canHandle(s){return t(s)&&r(s)}async handle(s){if(!t(s))throw new e.ConfigurationError(`OidcLoginHandler requires an OIDC issuer: missing property 'oidcIssuer' in ${JSON.stringify(s)}`);if(!r(s))throw new e.ConfigurationError(`OidcLoginHandler requires a redirect URL: missing property 'redirectUrl' in ${JSON.stringify(s)}`);const a=await this.issuerConfigFetcher.fetchConfig(s.oidcIssuer),l=await(0,e.handleRegistration)(s,a,this.storageUtility,this.clientRegistrar),y={issuer:a.issuer,dpop:s.tokenType.toLowerCase()==="dpop",...s,issuerConfiguration:a,client:l};return this.oidcHandler.handle(y)}};return Tf.default=n,Tf}var Ff={},Mb;function G3(){if(Mb)return Ff;Mb=1,Object.defineProperty(Ff,"__esModule",{value:!0});const e=bi(),t=Yu;let r=class{constructor(i,s){this.storageUtility=i,this.redirector=s}async canHandle(i){return!!(i.issuerConfiguration.grantTypesSupported&&i.issuerConfiguration.grantTypesSupported.indexOf("authorization_code")>-1)}async handle(i){var s;const a={authority:i.issuer.toString(),client_id:i.client.clientId,client_secret:i.client.clientSecret,redirect_uri:i.redirectUrl.toString(),post_logout_redirect_uri:i.redirectUrl.toString(),response_type:"code",scope:e.DEFAULT_SCOPES,filterProtocolClaims:!0,loadUserInfo:!1,code_verifier:!0,prompt:(s=i.prompt)!==null&&s!==void 0?s:"consent"},l=new t.OidcClient(a),{redirector:y}=this,d=this.storageUtility;try{const m=await l.createSigninRequest();await Promise.all([d.setForUser(m.state._id,{sessionId:i.sessionId}),d.setForUser(i.sessionId,{codeVerifier:m.state._code_verifier,issuer:i.issuer.toString(),redirectUrl:i.redirectUrl,dpop:i.dpop?"true":"false"})]),y.redirect(m.url.toString(),{handleRedirect:i.handleRedirect})}catch(m){console.error(m)}}};return Ff.default=r,Ff}var T0={},Bb;function J3(){return Bb||(Bb=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WELL_KNOWN_OPENID_CONFIG=void 0;const t=bi();e.WELL_KNOWN_OPENID_CONFIG=".well-known/openid-configuration";const r={issuer:{toKey:"issuer",convertToUrl:!0},authorization_endpoint:{toKey:"authorizationEndpoint",convertToUrl:!0},token_endpoint:{toKey:"tokenEndpoint",convertToUrl:!0},userinfo_endpoint:{toKey:"userinfoEndpoint",convertToUrl:!0},jwks_uri:{toKey:"jwksUri",convertToUrl:!0},registration_endpoint:{toKey:"registrationEndpoint",convertToUrl:!0},scopes_supported:{toKey:"scopesSupported"},response_types_supported:{toKey:"responseTypesSupported"},response_modes_supported:{toKey:"responseModesSupported"},grant_types_supported:{toKey:"grantTypesSupported"},acr_values_supported:{toKey:"acrValuesSupported"},subject_types_supported:{toKey:"subjectTypesSupported"},id_token_signing_alg_values_supported:{toKey:"idTokenSigningAlgValuesSupported"},id_token_encryption_alg_values_supported:{toKey:"idTokenEncryptionAlgValuesSupported"},id_token_encryption_enc_values_supported:{toKey:"idTokenEncryptionEncValuesSupported"},userinfo_signing_alg_values_supported:{toKey:"userinfoSigningAlgValuesSupported"},userinfo_encryption_alg_values_supported:{toKey:"userinfoEncryptionAlgValuesSupported"},userinfo_encryption_enc_values_supported:{toKey:"userinfoEncryptionEncValuesSupported"},request_object_signing_alg_values_supported:{toKey:"requestObjectSigningAlgValuesSupported"},request_object_encryption_alg_values_supported:{toKey:"requestObjectEncryptionAlgValuesSupported"},request_object_encryption_enc_values_supported:{toKey:"requestObjectEncryptionEncValuesSupported"},token_endpoint_auth_methods_supported:{toKey:"tokenEndpointAuthMethodsSupported"},token_endpoint_auth_signing_alg_values_supported:{toKey:"tokenEndpointAuthSigningAlgValuesSupported"},display_values_supported:{toKey:"displayValuesSupported"},claim_types_supported:{toKey:"claimTypesSupported"},claims_supported:{toKey:"claimsSupported"},service_documentation:{toKey:"serviceDocumentation"},claims_locales_supported:{toKey:"claimsLocalesSupported"},ui_locales_supported:{toKey:"uiLocalesSupported"},claims_parameter_supported:{toKey:"claimsParameterSupported"},request_parameter_supported:{toKey:"requestParameterSupported"},request_uri_parameter_supported:{toKey:"requestUriParameterSupported"},require_request_uri_registration:{toKey:"requireRequestUriRegistration"},op_policy_uri:{toKey:"opPolicyUri",convertToUrl:!0},op_tos_uri:{toKey:"opTosUri",convertToUrl:!0}};function n(s){const a={};return Object.keys(s).forEach(l=>{r[l]&&(a[r[l].toKey]=s[l])}),Array.isArray(a.scopesSupported)||(a.scopesSupported=["openid"]),a}class i{constructor(a){this.storageUtility=a}static getLocalStorageKey(a){return`issuerConfig:${a}`}async fetchConfig(a){let l;const y=new URL(e.WELL_KNOWN_OPENID_CONFIG,a).href,d=await window.fetch(y);try{l=n(await d.json())}catch(m){throw new t.ConfigurationError(`[${a.toString()}] has an invalid configuration: ${m.message}`)}return await this.storageUtility.set(i.getLocalStorageKey(a),JSON.stringify(l)),l}}e.default=i}(T0)),T0}var ql={},zo={},jb;function vv(){if(jb)return zo;jb=1,Object.defineProperty(zo,"__esModule",{value:!0}),zo.SessionInfoManager=zo.clear=zo.getUnauthenticatedSession=void 0;const e=bi(),t=pp(),r=Yu;function n(){return{isLoggedIn:!1,sessionId:(0,t.v4)(),fetch}}zo.getUnauthenticatedSession=n;async function i(a,l){await Promise.all([l.deleteAllUserData(a,{secure:!1}),l.deleteAllUserData(a,{secure:!0}),l.delete("clientKey",{secure:!1})]),await(0,r.clearOidcPersistentStorage)()}zo.clear=i;let s=class{constructor(l){this.storageUtility=l}update(l,y){throw new Error("Not Implemented")}async get(l){var y;const d=await this.storageUtility.getForUser(l,"isLoggedIn",{secure:!0}),m=await this.storageUtility.getForUser(l,"webId",{secure:!0}),g=await this.storageUtility.getForUser(l,"clientId",{secure:!1}),E=await this.storageUtility.getForUser(l,"clientSecret",{secure:!1}),b=await this.storageUtility.getForUser(l,"redirectUrl",{secure:!1}),P=await this.storageUtility.getForUser(l,"refreshToken",{secure:!0}),I=await this.storageUtility.getForUser(l,"issuer",{secure:!1}),D=(y=await this.storageUtility.getForUser(l,"tokenType",{secure:!1}))!==null&&y!==void 0?y:"DPoP";if(!(0,e.isSupportedTokenType)(D))throw new Error(`Tokens of type [${D}] are not supported.`);if(!(g===void 0&&d===void 0&&m===void 0&&P===void 0))return{sessionId:l,webId:m,isLoggedIn:d==="true",redirectUrl:b,refreshToken:P,issuer:I,clientAppId:g,clientAppSecret:E,tokenType:D}}async getAll(){throw new Error("Not implemented")}async clear(l){return i(l,this.storageUtility)}async register(l){throw new Error("Not implemented")}async getRegisteredSessionIdAll(){throw new Error("Not implemented")}async clearAll(){throw new Error("Not implemented")}};return zo.SessionInfoManager=s,zo}var Hb;function Q3(){if(Hb)return ql;Hb=1,Object.defineProperty(ql,"__esModule",{value:!0}),ql.FallbackRedirectHandler=void 0;const e=vv();let t=class{async canHandle(n){try{return new URL(n),!0}catch(i){throw new Error(`[${n}] is not a valid URL, and cannot be used as a redirect URL: ${i}`)}}async handle(n){return(0,e.getUnauthenticatedSession)()}};return ql.FallbackRedirectHandler=t,ql}var If={},$b;function Y3(){if($b)return If;$b=1,Object.defineProperty(If,"__esModule",{value:!0});let e=class{constructor(r){this.sessionInfoManager=r}async canHandle(){return!0}async handle(r){await this.sessionInfoManager.clear(r)}};return If.default=e,If}var Gl={},Wb;function X3(){if(Wb)return Gl;Wb=1,Object.defineProperty(Gl,"__esModule",{value:!0}),Gl.AuthCodeRedirectHandler=void 0;const e=bi(),t=Yu;let r=class{constructor(i,s,a,l,y){this.storageUtility=i,this.sessionInfoManager=s,this.issuerConfigFetcher=a,this.clientRegistrar=l,this.tokerRefresher=y}async canHandle(i){try{const s=new URL(i);return s.searchParams.get("code")!==null&&s.searchParams.get("state")!==null}catch(s){throw new Error(`[${i}] is not a valid URL, and cannot be used as a redirect URL: ${s}`)}}async handle(i,s){if(!await this.canHandle(i))throw new Error(`AuthCodeRedirectHandler cannot handle [${i}]: it is missing one of [code, state].`);const a=new URL(i),l=a.searchParams.get("state"),y=await this.storageUtility.getForUser(l,"sessionId",{errorIfNull:!0}),{issuerConfig:d,codeVerifier:m,redirectUrl:g,dpop:E}=await(0,e.loadOidcContextFromStorage)(y,this.storageUtility,this.issuerConfigFetcher),b=a.searchParams.get("iss");if(typeof b=="string"&&b!==d.issuer)throw new Error(`The value of the iss parameter (${b}) does not match the issuer identifier of the authorization server (${d.issuer}). See [rfc9207](https://www.rfc-editor.org/rfc/rfc9207.html#section-2.3-3.1.1)`);if(m===void 0)throw new Error(`The code verifier for session ${y} is missing from storage.`);if(g===void 0)throw new Error(`The redirect URL for session ${y} is missing from storage.`);const P=await this.clientRegistrar.getClient({sessionId:y},d);let I;const D=Date.now();E?(I=await(0,t.getDpopToken)(d,P,{grantType:"authorization_code",code:a.searchParams.get("code"),codeVerifier:m,redirectUrl:g}),window.localStorage.removeItem(`oidc.${l}`)):I=await(0,t.getBearerToken)(a.toString());let A;I.refreshToken!==void 0&&(A={sessionId:y,refreshToken:I.refreshToken,tokenRefresher:this.tokerRefresher});const R=await(0,e.buildAuthenticatedFetch)(fetch,I.accessToken,{dpopKey:I.dpopKey,refreshOptions:A,eventEmitter:s,expiresIn:I.expiresIn});await this.storageUtility.setForUser(y,{webId:I.webId,isLoggedIn:"true"},{secure:!0}),a.searchParams.delete("code"),await this.storageUtility.setForUser(y,{redirectUrl:a.toString()},{secure:!1});const N=await this.sessionInfoManager.get(y);if(!N)throw new Error(`Could not retrieve session: [${y}].`);return Object.assign(N,{fetch:R,expirationDate:typeof I.expiresIn=="number"?D+I.expiresIn*1e3:null})}};return Gl.AuthCodeRedirectHandler=r,Gl}var kf={},Kb;function Z3(){if(Kb)return kf;Kb=1,Object.defineProperty(kf,"__esModule",{value:!0});const e=bi();let t=class extends e.AggregateHandler{constructor(n){super(n)}};return kf.default=t,kf}var Of={},Vb;function eD(){if(Vb)return Of;Vb=1,Object.defineProperty(Of,"__esModule",{value:!0});let e=class{get storage(){return window.localStorage}async get(r){return this.storage.getItem(r)||void 0}async set(r,n){this.storage.setItem(r,n)}async delete(r){this.storage.removeItem(r)}};return Of.default=e,Of}var Nf={},zb;function tD(){if(zb)return Nf;zb=1,Object.defineProperty(Nf,"__esModule",{value:!0});let e=class{redirect(r,n){n&&n.handleRedirect?n.handleRedirect(r):n&&n.redirectByReplacingState?window.history.replaceState({},"",r):window.location.href=r}};return Nf.default=e,Nf}var Uf={},qb;function rD(){if(qb)return Uf;qb=1,Object.defineProperty(Uf,"__esModule",{value:!0});const e=Yu;let t=class{constructor(n){this.storageUtility=n}async getClient(n,i){const[s,a]=await Promise.all([this.storageUtility.getForUser(n.sessionId,"clientId",{secure:!1}),this.storageUtility.getForUser(n.sessionId,"clientSecret",{secure:!1})]);if(s)return{clientId:s,clientSecret:a,clientType:"dynamic"};try{const l=await(0,e.registerClient)(n,i),y={clientId:l.clientId};return l.clientSecret&&(y.clientSecret=l.clientSecret),l.idTokenSignedResponseAlg&&(y.idTokenSignedResponseAlg=l.idTokenSignedResponseAlg),await this.storageUtility.setForUser(n.sessionId,y,{secure:!1}),l}catch(l){throw new Error(`Client registration failed: [${l}]`)}}};return Uf.default=t,Uf}var Jl={},Gb;function nD(){if(Gb)return Jl;Gb=1,Object.defineProperty(Jl,"__esModule",{value:!0}),Jl.ErrorOidcHandler=void 0;const e=bi(),t=vv();let r=class{async canHandle(i){try{return new URL(i).searchParams.has("error")}catch(s){throw new Error(`[${i}] is not a valid URL, and cannot be used as a redirect URL: ${s}`)}}async handle(i,s){if(s!==void 0){const a=new URL(i),l=a.searchParams.get("error"),y=a.searchParams.get("error_description");s.emit(e.EVENTS.ERROR,l,y)}return(0,t.getUnauthenticatedSession)()}};return Jl.ErrorOidcHandler=r,Jl}var Df={},Jb;function iD(){if(Jb)return Df;Jb=1,Object.defineProperty(Df,"__esModule",{value:!0});const e=bi(),t=Yu;let r=class{constructor(i,s,a){this.storageUtility=i,this.issuerConfigFetcher=s,this.clientRegistrar=a}async refresh(i,s,a,l){const y=await(0,e.loadOidcContextFromStorage)(i,this.storageUtility,this.issuerConfigFetcher),d=await this.clientRegistrar.getClient({sessionId:i},y.issuerConfig);if(s===void 0)throw new Error(`Session [${i}] has no refresh token to allow it to refresh its access token.`);if(y.dpop&&a===void 0)throw new Error(`For session [${i}], the key bound to the DPoP access token must be provided to refresh said access token.`);const m=await(0,t.refresh)(s,y.issuerConfig,d,a);return m.refreshToken!==void 0&&(l==null||l.emit(e.EVENTS.NEW_REFRESH_TOKEN,m.refreshToken),await this.storageUtility.setForUser(i,{refreshToken:m.refreshToken})),m}};return Df.default=r,Df}var Qb;function nx(){if(Qb)return zl;Qb=1;var e=mo&&mo.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(zl,"__esModule",{value:!0}),zl.getClientAuthenticationWithDependencies=void 0;const t=bi(),r=e(R3()),n=e(z3()),i=e(q3()),s=e(G3()),a=e(J3()),l=Q3(),y=e(Y3()),d=vv(),m=X3(),g=e(Z3()),E=e(eD()),b=e(tD()),P=e(rD()),I=nD(),D=e(iD());function A(R){const N=new t.InMemoryStorage,L=R.secureStorage||N,W=R.insecureStorage||new E.default,q=new r.default(L,W),J=new a.default(q),ve=new P.default(q),Fe=new d.SessionInfoManager(q),z=new D.default(q,J,ve),De=new i.default(q,new s.default(q,new b.default),J,ve),xt=new g.default([new I.ErrorOidcHandler,new m.AuthCodeRedirectHandler(q,Fe,J,ve,z),new l.FallbackRedirectHandler]);return new n.default(De,xt,new y.default(Fe),Fe,J)}return zl.getClientAuthenticationWithDependencies=A,zl}var ia={},Yb;function oD(){if(Yb)return ia;Yb=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.KEY_CURRENT_URL=ia.KEY_CURRENT_SESSION=void 0;const e=bi();return ia.KEY_CURRENT_SESSION=`${e.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentSession`,ia.KEY_CURRENT_URL=`${e.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentUrl`,ia}var Xb;function ix(){if(Xb)return na;Xb=1,Object.defineProperty(na,"__esModule",{value:!0}),na.Session=na.silentlyAuthenticate=void 0;const e=up(),t=bi(),r=pp(),n=nx(),i=oD();async function s(y,d,m){var g;const E=await d.validateCurrentSession(y);return E!==null?(window.localStorage.setItem(i.KEY_CURRENT_URL,window.location.href),await d.login({sessionId:y,prompt:"none",oidcIssuer:E.issuer,redirectUrl:E.redirectUrl,clientId:E.clientAppId,clientSecret:E.clientAppSecret,tokenType:(g=E.tokenType)!==null&&g!==void 0?g:"DPoP"},m),!0):!1}na.silentlyAuthenticate=s;function a(y){return!!(y!=null&&y.isLoggedIn)}let l=class extends e.EventEmitter{constructor(d={},m=void 0){super(),this.tokenRequestInProgress=!1,this.login=async g=>{var E;return await this.clientAuthentication.login({sessionId:this.info.sessionId,...g,tokenType:(E=g.tokenType)!==null&&E!==void 0?E:"DPoP"},this),new Promise(()=>{})},this.fetch=async(g,E)=>this.clientAuthentication.fetch(g,E),this.internalLogout=async g=>{window.localStorage.removeItem(i.KEY_CURRENT_SESSION),await this.clientAuthentication.logout(this.info.sessionId),this.info.isLoggedIn=!1,g&&this.emit(t.EVENTS.LOGOUT)},this.logout=async()=>this.internalLogout(!0),this.handleIncomingRedirect=async(g={})=>{var E;if(this.info.isLoggedIn)return this.info;if(this.tokenRequestInProgress)return;const b=typeof g=="string"?{url:g}:g,P=(E=b.url)!==null&&E!==void 0?E:window.location.href;this.tokenRequestInProgress=!0;const I=await this.clientAuthentication.handleIncomingRedirect(P,this);if(a(I)){this.setSessionInfo(I);const D=window.localStorage.getItem(i.KEY_CURRENT_URL);D===null?this.emit(t.EVENTS.LOGIN):(window.localStorage.removeItem(i.KEY_CURRENT_URL),this.emit(t.EVENTS.SESSION_RESTORED,D))}else if(b.restorePreviousSession===!0){const D=window.localStorage.getItem(i.KEY_CURRENT_SESSION);if(D!==null&&await s(D,this.clientAuthentication,this))return new Promise(()=>{})}return this.tokenRequestInProgress=!1,I},d.clientAuthentication?this.clientAuthentication=d.clientAuthentication:d.secureStorage&&d.insecureStorage?this.clientAuthentication=(0,n.getClientAuthenticationWithDependencies)({secureStorage:d.secureStorage,insecureStorage:d.insecureStorage}):this.clientAuthentication=(0,n.getClientAuthenticationWithDependencies)({}),d.sessionInfo?this.info={sessionId:d.sessionInfo.sessionId,isLoggedIn:!1,webId:d.sessionInfo.webId}:this.info={sessionId:m??(0,r.v4)(),isLoggedIn:!1},this.on(t.EVENTS.LOGIN,()=>window.localStorage.setItem(i.KEY_CURRENT_SESSION,this.info.sessionId)),this.on(t.EVENTS.SESSION_EXPIRED,()=>this.internalLogout(!1)),this.on(t.EVENTS.ERROR,()=>this.internalLogout(!1))}onLogin(d){this.on(t.EVENTS.LOGIN,d)}onLogout(d){this.on(t.EVENTS.LOGOUT,d)}onError(d){this.on(t.EVENTS.ERROR,d)}onSessionRestore(d){this.on(t.EVENTS.SESSION_RESTORED,d)}onSessionExpiration(d){this.on(t.EVENTS.SESSION_EXPIRED,d)}setSessionInfo(d){this.info.isLoggedIn=d.isLoggedIn,this.info.webId=d.webId,this.info.sessionId=d.sessionId,this.info.expirationDate=d.expirationDate,this.on(t.EVENTS.SESSION_EXTENDED,m=>{this.info.expirationDate=Date.now()+m*1e3})}};return na.Session=l,na}var Kn={},Zb;function sD(){if(Zb)return Kn;Zb=1,Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.onSessionRestore=Kn.onLogout=Kn.onLogin=Kn.handleIncomingRedirect=Kn.logout=Kn.login=Kn.fetch=Kn.getDefaultSession=void 0;const e=ix();let t;function r(){return typeof t>"u"&&(t=new e.Session),t}Kn.getDefaultSession=r;const n=(...m)=>r().fetch(...m);Kn.fetch=n;const i=(...m)=>r().login(...m);Kn.login=i;const s=(...m)=>r().logout(...m);Kn.logout=s;const a=(...m)=>r().handleIncomingRedirect(...m);Kn.handleIncomingRedirect=a;const l=(...m)=>r().onLogin(...m);Kn.onLogin=l;const y=(...m)=>r().onLogout(...m);Kn.onLogout=y;const d=(...m)=>r().onSessionRestore(...m);return Kn.onSessionRestore=d,Kn}var eE;function aD(){return eE||(eE=1,function(e){var t=mo&&mo.__createBinding||(Object.create?function(a,l,y,d){d===void 0&&(d=y);var m=Object.getOwnPropertyDescriptor(l,y);(!m||("get"in m?!l.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return l[y]}}),Object.defineProperty(a,d,m)}:function(a,l,y,d){d===void 0&&(d=y),a[d]=l[y]}),r=mo&&mo.__exportStar||function(a,l){for(var y in a)y!=="default"&&!Object.prototype.hasOwnProperty.call(l,y)&&t(l,a,y)};Object.defineProperty(e,"__esModule",{value:!0}),e.InMemoryStorage=e.ConfigurationError=e.NotImplementedError=e.getClientAuthenticationWithDependencies=e.Session=void 0;var n=ix();Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return n.Session}});var i=nx();Object.defineProperty(e,"getClientAuthenticationWithDependencies",{enumerable:!0,get:function(){return i.getClientAuthenticationWithDependencies}}),r(sD(),e);var s=bi();Object.defineProperty(e,"NotImplementedError",{enumerable:!0,get:function(){return s.NotImplementedError}}),Object.defineProperty(e,"ConfigurationError",{enumerable:!0,get:function(){return s.ConfigurationError}}),Object.defineProperty(e,"InMemoryStorage",{enumerable:!0,get:function(){return s.InMemoryStorage}})}(x0)),x0}var F0={},tE;function uD(){return tE||(tE=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Ki;/*! *****************************************************************************
		Copyright (c) Microsoft Corporation.

		Permission to use, copy, modify, and/or distribute this software for any
		purpose with or without fee is hereby granted.

		THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		PERFORMANCE OF THIS SOFTWARE.
		***************************************************************************** */function r(S,k,w,ce){function Ae(de){return de instanceof w?de:new w(function(je){je(de)})}return new(w||(w=Promise))(function(de,je){function Tt(we){try{wt(ce.next(we))}catch(Ue){je(Ue)}}function Yt(we){try{wt(ce.throw(we))}catch(Ue){je(Ue)}}function wt(we){we.done?de(we.value):Ae(we.value).then(Tt,Yt)}wt((ce=ce.apply(S,k||[])).next())})}function n(S,k){var w={label:0,sent:function(){if(de[0]&1)throw de[1];return de[1]},trys:[],ops:[]},ce,Ae,de,je;return je={next:Tt(0),throw:Tt(1),return:Tt(2)},typeof Symbol=="function"&&(je[Symbol.iterator]=function(){return this}),je;function Tt(wt){return function(we){return Yt([wt,we])}}function Yt(wt){if(ce)throw new TypeError("Generator is already executing.");for(;w;)try{if(ce=1,Ae&&(de=wt[0]&2?Ae.return:wt[0]?Ae.throw||((de=Ae.return)&&de.call(Ae),0):Ae.next)&&!(de=de.call(Ae,wt[1])).done)return de;switch(Ae=0,de&&(wt=[wt[0]&2,de.value]),wt[0]){case 0:case 1:de=wt;break;case 4:return w.label++,{value:wt[1],done:!1};case 5:w.label++,Ae=wt[1],wt=[0];continue;case 7:wt=w.ops.pop(),w.trys.pop();continue;default:if(de=w.trys,!(de=de.length>0&&de[de.length-1])&&(wt[0]===6||wt[0]===2)){w=0;continue}if(wt[0]===3&&(!de||wt[1]>de[0]&&wt[1]<de[3])){w.label=wt[1];break}if(wt[0]===6&&w.label<de[1]){w.label=de[1],de=wt;break}if(de&&w.label<de[2]){w.label=de[2],w.ops.push(wt);break}de[2]&&w.ops.pop(),w.trys.pop();continue}wt=k.call(S,w)}catch(we){wt=[6,we],Ae=0}finally{ce=de=0}if(wt[0]&5)throw wt[1];return{value:wt[0]?wt[1]:void 0,done:!0}}}var i=function(){},s=i(),a=Object,l=function(S){return S===s},y=function(S){return typeof S=="function"},d=function(S,k){return a.assign({},S,k)},m="undefined",g=function(){return typeof window!=m},E=function(){return typeof document!=m},b=function(){return g()&&typeof window.requestAnimationFrame!=m},P=new WeakMap,I=0,D=function(S){var k=typeof S,w=S&&S.constructor,ce=w==Date,Ae,de;if(a(S)===S&&!ce&&w!=RegExp){if(Ae=P.get(S),Ae)return Ae;if(Ae=++I+"~",P.set(S,Ae),w==Array){for(Ae="@",de=0;de<S.length;de++)Ae+=D(S[de])+",";P.set(S,Ae)}if(w==a){Ae="#";for(var je=a.keys(S).sort();!l(de=je.pop());)l(S[de])||(Ae+=de+":"+D(S[de])+",");P.set(S,Ae)}}else Ae=ce?S.toJSON():k=="symbol"?S.toString():k=="string"?JSON.stringify(S):""+S;return Ae},A=!0,R=function(){return A},N=g(),L=E(),W=N&&window.addEventListener?window.addEventListener.bind(window):i,q=L?document.addEventListener.bind(document):i,J=N&&window.removeEventListener?window.removeEventListener.bind(window):i,ve=L?document.removeEventListener.bind(document):i,Fe=function(){var S=L&&document.visibilityState;return l(S)||S!=="hidden"},z=function(S){return q("visibilitychange",S),W("focus",S),function(){ve("visibilitychange",S),J("focus",S)}},De=function(S){var k=function(){A=!0,S()},w=function(){A=!1};return W("online",k),W("offline",w),function(){J("online",k),J("offline",w)}},xt={isOnline:R,isVisible:Fe},ft={initFocus:z,initReconnect:De},Te=!g()||"Deno"in window,He=function(S){return b()?window.requestAnimationFrame(S):setTimeout(S,1)},st=Te?t.useEffect:t.useLayoutEffect,Ct=typeof navigator<"u"&&navigator.connection,$e=!Te&&Ct&&(["slow-2g","2g"].includes(Ct.effectiveType)||Ct.saveData),Je=function(S){if(y(S))try{S=S()}catch{S=""}var k=[].concat(S);S=typeof S=="string"?S:(Array.isArray(S)?S.length:S)?D(S):"";var w=S?"$swr$"+S:"";return[S,k,w]},ke=new WeakMap,Xe=0,vt=1,vr=2,pr=function(S,k,w,ce,Ae,de,je){je===void 0&&(je=!0);var Tt=ke.get(S),Yt=Tt[0],wt=Tt[1],we=Tt[3],Ue=Yt[k],ge=wt[k];if(je&&ge)for(var pe=0;pe<ge.length;++pe)ge[pe](w,ce,Ae);return de&&(delete we[k],Ue&&Ue[0])?Ue[0](vr).then(function(){return S.get(k)}):S.get(k)},Nt=0,Fr=function(){return++Nt},ar=function(){for(var S=[],k=0;k<arguments.length;k++)S[k]=arguments[k];return r(void 0,void 0,void 0,function(){var w,ce,Ae,de,je,Tt,Yt,wt,we,Ue,ge,pe,Me,at,rt,et,it,Lt,Ht,Bt,qt;return n(this,function(sr){switch(sr.label){case 0:if(w=S[0],ce=S[1],Ae=S[2],de=S[3],je=typeof de=="boolean"?{revalidate:de}:de||{},Tt=l(je.populateCache)?!0:je.populateCache,Yt=je.revalidate!==!1,wt=je.rollbackOnError!==!1,we=je.optimisticData,Ue=Je(ce),ge=Ue[0],pe=Ue[2],!ge)return[2];if(Me=ke.get(w),at=Me[2],S.length<3)return[2,pr(w,ge,w.get(ge),s,s,Yt,!0)];if(rt=Ae,it=Fr(),at[ge]=[it,0],Lt=!l(we),Ht=w.get(ge),Lt&&(Bt=y(we)?we(Ht):we,w.set(ge,Bt),pr(w,ge,Bt)),y(rt))try{rt=rt(w.get(ge))}catch(Vt){et=Vt}return rt&&y(rt.then)?[4,rt.catch(function(Vt){et=Vt})]:[3,2];case 1:if(rt=sr.sent(),it!==at[ge][0]){if(et)throw et;return[2,rt]}else et&&Lt&&wt&&(Tt=!0,rt=Ht,w.set(ge,Ht));sr.label=2;case 2:return Tt&&(et||(y(Tt)&&(rt=Tt(rt,Ht)),w.set(ge,rt)),w.set(pe,d(w.get(pe),{error:et}))),at[ge][1]=Fr(),[4,pr(w,ge,rt,et,s,Yt,!!Tt)];case 3:if(qt=sr.sent(),et)throw et;return[2,Tt?qt:rt]}})})},Pt=function(S,k){for(var w in S)S[w][0]&&S[w][0](k)},Ye=function(S,k){if(!ke.has(S)){var w=d(ft,k),ce={},Ae=ar.bind(s,S),de=i;if(ke.set(S,[ce,{},{},{},Ae]),!Te){var je=w.initFocus(setTimeout.bind(s,Pt.bind(s,ce,Xe))),Tt=w.initReconnect(setTimeout.bind(s,Pt.bind(s,ce,vt)));de=function(){je&&je(),Tt&&Tt(),ke.delete(S)}}return[S,Ae,de]}return[S,ke.get(S)[4]]},We=function(S,k,w,ce,Ae){var de=w.errorRetryCount,je=Ae.retryCount,Tt=~~((Math.random()+.5)*(1<<(je<8?je:8)))*w.errorRetryInterval;!l(de)&&je>de||setTimeout(ce,Tt,Ae)},ee=Ye(new Map),M=ee[0],F=ee[1],K=d({onLoadingSlow:i,onSuccess:i,onError:i,onErrorRetry:We,onDiscarded:i,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:$e?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:$e?5e3:3e3,compare:function(S,k){return D(S)==D(k)},isPaused:function(){return!1},cache:M,mutate:F,fallback:{}},xt),re=function(S,k){var w=d(S,k);if(k){var ce=S.use,Ae=S.fallback,de=k.use,je=k.fallback;ce&&de&&(w.use=ce.concat(de)),Ae&&je&&(w.fallback=d(Ae,je))}return w},B=t.createContext({}),C=function(S){var k=S.value,w=re(t.useContext(B),k),ce=k&&k.provider,Ae=t.useState(function(){return ce?Ye(ce(w.cache||M),k):s})[0];return Ae&&(w.cache=Ae[0],w.mutate=Ae[1]),st(function(){return Ae?Ae[2]:s},[]),t.createElement(B.Provider,d(S,{value:w}))},U=function(S,k){var w=t.useState({})[1],ce=t.useRef(S),Ae=t.useRef({data:!1,error:!1,isValidating:!1}),de=t.useCallback(function(je){var Tt=!1,Yt=ce.current;for(var wt in je){var we=wt;Yt[we]!==je[we]&&(Yt[we]=je[we],Ae.current[we]&&(Tt=!0))}Tt&&!k.current&&w({})},[]);return st(function(){ce.current=S}),[ce,Ae.current,de]},ne=function(S){return y(S[1])?[S[0],S[1],S[2]||{}]:[S[0],null,(S[1]===null?S[2]:S[1])||{}]},Re=function(){return d(K,t.useContext(B))},Le=function(S){return function(){for(var w=[],ce=0;ce<arguments.length;ce++)w[ce]=arguments[ce];var Ae=Re(),de=ne(w),je=de[0],Tt=de[1],Yt=de[2],wt=re(Ae,Yt),we=S,Ue=wt.use;if(Ue)for(var ge=Ue.length;ge-- >0;)we=Ue[ge](we);return we(je,Tt||wt.fetcher,wt)}},qe=function(S,k,w){var ce=k[S]||(k[S]=[]);return ce.push(w),function(){var Ae=ce.indexOf(w);Ae>=0&&(ce[Ae]=ce[ce.length-1],ce.pop())}},Et={dedupe:!0},Wt=function(S,k,w){var ce=w.cache,Ae=w.compare,de=w.fallbackData,je=w.suspense,Tt=w.revalidateOnMount,Yt=w.refreshInterval,wt=w.refreshWhenHidden,we=w.refreshWhenOffline,Ue=ke.get(ce),ge=Ue[0],pe=Ue[1],Me=Ue[2],at=Ue[3],rt=Je(S),et=rt[0],it=rt[1],Lt=rt[2],Ht=t.useRef(!1),Bt=t.useRef(!1),qt=t.useRef(et),sr=t.useRef(k),Vt=t.useRef(w),_t=function(){return Vt.current},cr=function(){return _t().isVisible()&&_t().isOnline()},ht=function(Xr){return ce.set(Lt,d(ce.get(Lt),Xr))},bt=ce.get(et),Kt=l(de)?w.fallback[et]:de,Ft=l(bt)?Kt:bt,gr=ce.get(Lt)||{},zt=gr.error,Ur=!Ht.current,Xt=function(){return Ur&&!l(Tt)?Tt:_t().isPaused()?!1:je?l(Ft)?!1:w.revalidateIfStale:l(Ft)||w.revalidateIfStale},Ut=function(){return!et||!k?!1:gr.isValidating?!0:Ur&&Xt()},It=Ut(),Wr=U({data:Ft,error:zt,isValidating:It},Bt),Or=Wr[0],Mr=Wr[1],dr=Wr[2],Rr=t.useCallback(function(Xr){return r(void 0,void 0,void 0,function(){var Br,ct,vn,Ln,ui,Tn,bn,f,c,p,v,O,$;return n(this,function(X){switch(X.label){case 0:if(Br=sr.current,!et||!Br||Bt.current||_t().isPaused())return[2,!1];Ln=!0,ui=Xr||{},Tn=!at[et]||!ui.dedupe,bn=function(){return!Bt.current&&et===qt.current&&Ht.current},f=function(){var ue=at[et];ue&&ue[1]===vn&&delete at[et]},c={isValidating:!1},p=function(){ht({isValidating:!1}),bn()&&dr(c)},ht({isValidating:!0}),dr({isValidating:!0}),X.label=1;case 1:return X.trys.push([1,3,,4]),Tn&&(pr(ce,et,Or.current.data,Or.current.error,!0),w.loadingTimeout&&!ce.get(et)&&setTimeout(function(){Ln&&bn()&&_t().onLoadingSlow(et,w)},w.loadingTimeout),at[et]=[Br.apply(void 0,it),Fr()]),$=at[et],ct=$[0],vn=$[1],[4,ct];case 2:return ct=X.sent(),Tn&&setTimeout(f,w.dedupingInterval),!at[et]||at[et][1]!==vn?(Tn&&bn()&&_t().onDiscarded(et),[2,!1]):(ht({error:s}),c.error=s,v=Me[et],!l(v)&&(vn<=v[0]||vn<=v[1]||v[1]===0)?(p(),Tn&&bn()&&_t().onDiscarded(et),[2,!1]):(Ae(Or.current.data,ct)?c.data=Or.current.data:c.data=ct,Ae(ce.get(et),ct)||ce.set(et,ct),Tn&&bn()&&_t().onSuccess(ct,et,w),[3,4]));case 3:return O=X.sent(),f(),_t().isPaused()||(ht({error:O}),c.error=O,Tn&&bn()&&(_t().onError(O,et,w),(typeof w.shouldRetryOnError=="boolean"&&w.shouldRetryOnError||y(w.shouldRetryOnError)&&w.shouldRetryOnError(O))&&cr()&&_t().onErrorRetry(O,et,w,Rr,{retryCount:(ui.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return Ln=!1,p(),bn()&&Tn&&pr(ce,et,c.data,c.error,!1),[2,!0]}})})},[et]),nn=t.useCallback(ar.bind(s,ce,function(){return qt.current}),[]);if(st(function(){sr.current=k,Vt.current=w}),st(function(){if(et){var Xr=et!==qt.current,Br=Rr.bind(s,Et),ct=function(bn,f,c){dr(d({error:f,isValidating:c},Ae(Or.current.data,bn)?s:{data:bn}))},vn=0,Ln=function(bn){if(bn==Xe){var f=Date.now();_t().revalidateOnFocus&&f>vn&&cr()&&(vn=f+_t().focusThrottleInterval,Br())}else if(bn==vt)_t().revalidateOnReconnect&&cr()&&Br();else if(bn==vr)return Rr()},ui=qe(et,pe,ct),Tn=qe(et,ge,Ln);return Bt.current=!1,qt.current=et,Ht.current=!0,Xr&&dr({data:Ft,error:zt,isValidating:It}),Xt()&&(l(Ft)||Te?Br():He(Br)),function(){Bt.current=!0,ui(),Tn()}}},[et,Rr]),st(function(){var Xr;function Br(){var vn=y(Yt)?Yt(Ft):Yt;vn&&Xr!==-1&&(Xr=setTimeout(ct,vn))}function ct(){!Or.current.error&&(wt||_t().isVisible())&&(we||_t().isOnline())?Rr(Et).then(Br):Br()}return Br(),function(){Xr&&(clearTimeout(Xr),Xr=-1)}},[Yt,wt,we,Rr]),t.useDebugValue(Ft),je&&l(Ft)&&et)throw sr.current=k,Vt.current=w,Bt.current=!1,l(zt)?Rr(Et):zt;return{mutate:nn,get data(){return Mr.data=!0,Ft},get error(){return Mr.error=!0,zt},get isValidating(){return Mr.isValidating=!0,It}}},Y=a.defineProperty(C,"default",{value:K}),te=function(S){return Je(S)[0]},j=Le(Wt);e.SWRConfig=Y,e.default=j,e.mutate=F,e.unstable_serialize=te,e.useSWRConfig=Re}(F0)),F0}var Oh={},lD={get exports(){return Oh},set exports(e){Oh=e}},hc={},cD={get exports(){return hc},set exports(e){hc=e}},rE;function dD(){return rE||(rE=1,function(e,t){(function(r,n){n(t,Ki)})(mo,function(r,n){function i(x,V,Q,ie,be,ae,Ee){try{var Qe=x[ae](Ee),Ve=Qe.value}catch(Ze){return void Q(Ze)}Qe.done?V(Ve):Promise.resolve(Ve).then(ie,be)}function s(x){return function(){var V=this,Q=arguments;return new Promise(function(ie,be){var ae=x.apply(V,Q);function Ee(Ve){i(ae,ie,be,Ee,Qe,"next",Ve)}function Qe(Ve){i(ae,ie,be,Ee,Qe,"throw",Ve)}Ee(void 0)})}}function a(){return(a=Object.assign||function(x){for(var V=1;V<arguments.length;V++){var Q=arguments[V];for(var ie in Q)Object.prototype.hasOwnProperty.call(Q,ie)&&(x[ie]=Q[ie])}return x}).apply(this,arguments)}function l(x,V){if(x==null)return{};var Q,ie,be={},ae=Object.keys(x);for(ie=0;ie<ae.length;ie++)Q=ae[ie],V.indexOf(Q)>=0||(be[Q]=x[Q]);return be}function y(x){var V=function(Q,ie){if(typeof Q!="object"||Q===null)return Q;var be=Q[Symbol.toPrimitive];if(be!==void 0){var ae=be.call(Q,ie||"default");if(typeof ae!="object")return ae;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ie==="string"?String:Number)(Q)}(x,"string");return typeof V=="symbol"?V:String(V)}n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;var d={init:"init"},m=function(x){var V=x.value;return V===void 0?"":V},g=function(){return n.createElement(n.Fragment,null,"")},E={Cell:m,width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function b(){for(var x=arguments.length,V=new Array(x),Q=0;Q<x;Q++)V[Q]=arguments[Q];return V.reduce(function(ie,be){var ae=be.style,Ee=be.className;return ie=a({},ie,{},l(be,["style","className"])),ae&&(ie.style=ie.style?a({},ie.style||{},{},ae||{}):ae),Ee&&(ie.className=ie.className?ie.className+" "+Ee:Ee),ie.className===""&&delete ie.className,ie},{})}var P=function(x,V){return V===void 0&&(V={}),function(Q){return Q===void 0&&(Q={}),[].concat(x,[Q]).reduce(function(ie,be){return function ae(Ee,Qe,Ve){return typeof Qe=="function"?ae({},Qe(Ee,Ve)):Array.isArray(Qe)?b.apply(void 0,[Ee].concat(Qe)):b(Ee,Qe)}(ie,be,a({},V,{userProps:Q}))},{})}},I=function(x,V,Q,ie){return Q===void 0&&(Q={}),x.reduce(function(be,ae){return ae(be,Q)},V)},D=function(x,V,Q){return Q===void 0&&(Q={}),x.forEach(function(ie){ie(V,Q)})};function A(x,V,Q,ie){x.findIndex(function(be){return be.pluginName===Q}),V.forEach(function(be){x.findIndex(function(ae){return ae.pluginName===be})})}function R(x,V){return typeof x=="function"?x(V):x}function N(x){var V=n.useRef();return V.current=x,n.useCallback(function(){return V.current},[])}var L=typeof document<"u"?n.useLayoutEffect:n.useEffect;function W(x,V){var Q=n.useRef(!1);L(function(){Q.current&&x(),Q.current=!0},V)}function q(x,V,Q){return Q===void 0&&(Q={}),function(ie,be){be===void 0&&(be={});var ae=typeof ie=="string"?V[ie]:ie;if(ae===void 0)throw console.info(V),new Error("Renderer Error ");return J(ae,a({},x,{column:V},Q,{},be))}}function J(x,V){return function(ie){return typeof ie=="function"&&(be=Object.getPrototypeOf(ie)).prototype&&be.prototype.isReactComponent;var be}(Q=x)||typeof Q=="function"||function(ie){return typeof ie=="object"&&typeof ie.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(ie.$$typeof.description)}(Q)?n.createElement(x,V):x;var Q}function ve(x,V,Q){return Q===void 0&&(Q=0),x.map(function(ie){return z(ie=a({},ie,{parent:V,depth:Q})),ie.columns&&(ie.columns=ve(ie.columns,ie,Q+1)),ie})}function Fe(x){return st(x,"columns")}function z(x){var V=x.id,Q=x.accessor,ie=x.Header;if(typeof Q=="string"){V=V||Q;var be=Q.split(".");Q=function(ae){return function(Ee,Qe,Ve){if(!Qe)return Ee;var Ze,pt=typeof Qe=="function"?Qe:JSON.stringify(Qe),lt=ft.get(pt)||function(){var gt=function(nt){return function yt(Rt,Ot){if(Ot===void 0&&(Ot=[]),Array.isArray(Rt))for(var Gt=0;Gt<Rt.length;Gt+=1)yt(Rt[Gt],Ot);else Ot.push(Rt);return Ot}(nt).map(function(yt){return String(yt).replace(".","_")}).join(".").replace(vt,".").replace(vr,"").split(".")}(Qe);return ft.set(pt,gt),gt}();try{Ze=lt.reduce(function(gt,nt){return gt[nt]},Ee)}catch{}return Ze!==void 0?Ze:Ve}(ae,be)}}if(!V&&typeof ie=="string"&&ie&&(V=ie),!V&&x.columns)throw console.error(x),new Error('A column ID (or unique "Header" value) is required!');if(!V)throw console.error(x),new Error("A column ID (or string accessor) is required!");return Object.assign(x,{id:V,accessor:Q}),x}function De(x,V){if(!V)throw new Error;return Object.assign(x,a({Header:g,Footer:g},E,{},V,{},x)),Object.assign(x,{originalWidth:x.width}),x}function xt(x,V,Q){Q===void 0&&(Q=function(){return{}});for(var ie=[],be=x,ae=0,Ee=function(){return ae++},Qe=function(){var Ve={headers:[]},Ze=[],pt=be.some(function(lt){return lt.parent});be.forEach(function(lt){var gt,nt=[].concat(Ze).reverse()[0];pt&&(lt.parent?gt=a({},lt.parent,{originalId:lt.parent.id,id:lt.parent.id+"_"+Ee(),headers:[lt]},Q(lt)):gt=De(a({originalId:lt.id+"_placeholder",id:lt.id+"_placeholder_"+Ee(),placeholderOf:lt,headers:[lt]},Q(lt)),V),nt&&nt.originalId===gt.originalId?nt.headers.push(lt):Ze.push(gt)),Ve.headers.push(lt)}),ie.push(Ve),be=Ze};be.length;)Qe();return ie.reverse()}var ft=new Map;function Te(){for(var x=arguments.length,V=new Array(x),Q=0;Q<x;Q++)V[Q]=arguments[Q];for(var ie=0;ie<V.length;ie+=1)if(V[ie]!==void 0)return V[ie]}function He(x){if(typeof x=="function")return x}function st(x,V){var Q=[];return function ie(be){be.forEach(function(ae){ae[V]?ie(ae[V]):Q.push(ae)})}(x),Q}function Ct(x,V){var Q=V.manualExpandedKey,ie=V.expanded,be=V.expandSubRows,ae=be===void 0||be,Ee=[];return x.forEach(function(Qe){return function Ve(Ze,pt){pt===void 0&&(pt=!0),Ze.isExpanded=Ze.original&&Ze.original[Q]||ie[Ze.id],Ze.canExpand=Ze.subRows&&!!Ze.subRows.length,pt&&Ee.push(Ze),Ze.subRows&&Ze.subRows.length&&Ze.isExpanded&&Ze.subRows.forEach(function(lt){return Ve(lt,ae)})}(Qe)}),Ee}function $e(x,V,Q){return He(x)||V[x]||Q[x]||Q.text}function Je(x,V,Q){return x?x(V,Q):V===void 0}function ke(){throw new Error("React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.")}var Xe=null,vt=/\[/g,vr=/\]/g,pr=function(x){return a({role:"table"},x)},Nt=function(x){return a({role:"rowgroup"},x)},Fr=function(x,V){var Q=V.column;return a({key:"header_"+Q.id,colSpan:Q.totalVisibleHeaderCount,role:"columnheader"},x)},ar=function(x,V){var Q=V.column;return a({key:"footer_"+Q.id,colSpan:Q.totalVisibleHeaderCount},x)},Pt=function(x,V){return a({key:"headerGroup_"+V.index,role:"row"},x)},Ye=function(x,V){return a({key:"footerGroup_"+V.index},x)},We=function(x,V){return a({key:"row_"+V.row.id,role:"row"},x)},ee=function(x,V){var Q=V.cell;return a({key:"cell_"+Q.row.id+"_"+Q.column.id,role:"cell"},x)};function M(){return{useOptions:[],stateReducers:[],useControlledState:[],columns:[],columnsDeps:[],allColumns:[],allColumnsDeps:[],accessValue:[],materializedColumns:[],materializedColumnsDeps:[],useInstanceAfterData:[],visibleColumns:[],visibleColumnsDeps:[],headerGroups:[],headerGroupsDeps:[],useInstanceBeforeDimensions:[],useInstance:[],prepareRow:[],getTableProps:[pr],getTableBodyProps:[Nt],getHeaderGroupProps:[Pt],getFooterGroupProps:[Ye],getHeaderProps:[Fr],getFooterProps:[ar],getRowProps:[We],getCellProps:[ee],useFinalInstance:[]}}d.resetHiddenColumns="resetHiddenColumns",d.toggleHideColumn="toggleHideColumn",d.setHiddenColumns="setHiddenColumns",d.toggleHideAllColumns="toggleHideAllColumns";var F=function(x){x.getToggleHiddenProps=[K],x.getToggleHideAllColumnsProps=[re],x.stateReducers.push(B),x.useInstanceBeforeDimensions.push(C),x.headerGroupsDeps.push(function(V,Q){var ie=Q.instance;return[].concat(V,[ie.state.hiddenColumns])}),x.useInstance.push(U)};F.pluginName="useColumnVisibility";var K=function(x,V){var Q=V.column;return[x,{onChange:function(ie){Q.toggleHidden(!ie.target.checked)},style:{cursor:"pointer"},checked:Q.isVisible,title:"Toggle Column Visible"}]},re=function(x,V){var Q=V.instance;return[x,{onChange:function(ie){Q.toggleHideAllColumns(!ie.target.checked)},style:{cursor:"pointer"},checked:!Q.allColumnsHidden&&!Q.state.hiddenColumns.length,title:"Toggle All Columns Hidden",indeterminate:!Q.allColumnsHidden&&Q.state.hiddenColumns.length}]};function B(x,V,Q,ie){if(V.type===d.init)return a({hiddenColumns:[]},x);if(V.type===d.resetHiddenColumns)return a({},x,{hiddenColumns:ie.initialState.hiddenColumns||[]});if(V.type===d.toggleHideColumn){var be=(V.value!==void 0?V.value:!x.hiddenColumns.includes(V.columnId))?[].concat(x.hiddenColumns,[V.columnId]):x.hiddenColumns.filter(function(ae){return ae!==V.columnId});return a({},x,{hiddenColumns:be})}return V.type===d.setHiddenColumns?a({},x,{hiddenColumns:R(V.value,x.hiddenColumns)}):V.type===d.toggleHideAllColumns?a({},x,{hiddenColumns:(V.value!==void 0?V.value:!x.hiddenColumns.length)?ie.allColumns.map(function(ae){return ae.id}):[]}):void 0}function C(x){var V=x.headers,Q=x.state.hiddenColumns;n.useRef(!1).current;var ie=0;V.forEach(function(be){return ie+=function ae(Ee,Qe){Ee.isVisible=Qe&&!Q.includes(Ee.id);var Ve=0;return Ee.headers&&Ee.headers.length?Ee.headers.forEach(function(Ze){return Ve+=ae(Ze,Ee.isVisible)}):Ve=Ee.isVisible?1:0,Ee.totalVisibleHeaderCount=Ve,Ve}(be,!0)})}function U(x){var V=x.columns,Q=x.flatHeaders,ie=x.dispatch,be=x.allColumns,ae=x.getHooks,Ee=x.state.hiddenColumns,Qe=x.autoResetHiddenColumns,Ve=Qe===void 0||Qe,Ze=N(x),pt=be.length===Ee.length,lt=n.useCallback(function(Ot,Gt){return ie({type:d.toggleHideColumn,columnId:Ot,value:Gt})},[ie]),gt=n.useCallback(function(Ot){return ie({type:d.setHiddenColumns,value:Ot})},[ie]),nt=n.useCallback(function(Ot){return ie({type:d.toggleHideAllColumns,value:Ot})},[ie]),yt=P(ae().getToggleHideAllColumnsProps,{instance:Ze()});Q.forEach(function(Ot){Ot.toggleHidden=function(Gt){ie({type:d.toggleHideColumn,columnId:Ot.id,value:Gt})},Ot.getToggleHiddenProps=P(ae().getToggleHiddenProps,{instance:Ze(),column:Ot})});var Rt=N(Ve);W(function(){Rt()&&ie({type:d.resetHiddenColumns})},[ie,V]),Object.assign(x,{allColumnsHidden:pt,toggleHideColumn:lt,setHiddenColumns:gt,toggleHideAllColumns:nt,getToggleHideAllColumnsProps:yt})}var ne={},Re={},Le=function(x,V,Q){return x},qe=function(x,V){return x.subRows||[]},Et=function(x,V,Q){return""+(Q?[Q.id,V].join("."):V)},Wt=function(x){return x};function Y(x){var V=x.initialState,Q=V===void 0?ne:V,ie=x.defaultColumn,be=ie===void 0?Re:ie,ae=x.getSubRows,Ee=ae===void 0?qe:ae,Qe=x.getRowId,Ve=Qe===void 0?Et:Qe,Ze=x.stateReducer,pt=Ze===void 0?Le:Ze,lt=x.useControlledState,gt=lt===void 0?Wt:lt;return a({},l(x,["initialState","defaultColumn","getSubRows","getRowId","stateReducer","useControlledState"]),{initialState:Q,defaultColumn:be,getSubRows:Ee,getRowId:Ve,stateReducer:pt,useControlledState:gt})}function te(x,V){V===void 0&&(V=0);var Q=0,ie=0,be=0,ae=0;return x.forEach(function(Ee){var Qe=Ee.headers;if(Ee.totalLeft=V,Qe&&Qe.length){var Ve=te(Qe,V),Ze=Ve[0],pt=Ve[1],lt=Ve[2],gt=Ve[3];Ee.totalMinWidth=Ze,Ee.totalWidth=pt,Ee.totalMaxWidth=lt,Ee.totalFlexWidth=gt}else Ee.totalMinWidth=Ee.minWidth,Ee.totalWidth=Math.min(Math.max(Ee.minWidth,Ee.width),Ee.maxWidth),Ee.totalMaxWidth=Ee.maxWidth,Ee.totalFlexWidth=Ee.canResize?Ee.totalWidth:0;Ee.isVisible&&(V+=Ee.totalWidth,Q+=Ee.totalMinWidth,ie+=Ee.totalWidth,be+=Ee.totalMaxWidth,ae+=Ee.totalFlexWidth)}),[Q,ie,be,ae]}function j(x){var V=x.data,Q=x.rows,ie=x.flatRows,be=x.rowsById,ae=x.column,Ee=x.getRowId,Qe=x.getSubRows,Ve=x.accessValueHooks,Ze=x.getInstance;V.forEach(function(pt,lt){return function gt(nt,yt,Rt,Ot,Gt){Rt===void 0&&(Rt=0);var _r=nt,Jt=Ee(nt,yt,Ot),St=be[Jt];if(St)St.subRows&&St.originalSubRows.forEach(function(Mt,hr){return gt(Mt,hr,Rt+1,St)});else if((St={id:Jt,original:_r,index:yt,depth:Rt,cells:[{}]}).cells.map=ke,St.cells.filter=ke,St.cells.forEach=ke,St.cells[0].getCellProps=ke,St.values={},Gt.push(St),ie.push(St),be[Jt]=St,St.originalSubRows=Qe(nt,yt),St.originalSubRows){var fr=[];St.originalSubRows.forEach(function(Mt,hr){return gt(Mt,hr,Rt+1,St,fr)}),St.subRows=fr}ae.accessor&&(St.values[ae.id]=ae.accessor(nt,yt,St,Gt,V)),St.values[ae.id]=I(Ve,St.values[ae.id],{row:St,column:ae,instance:Ze()})}(pt,lt,0,void 0,Q)})}d.resetExpanded="resetExpanded",d.toggleRowExpanded="toggleRowExpanded",d.toggleAllRowsExpanded="toggleAllRowsExpanded";var S=function(x){x.getToggleAllRowsExpandedProps=[k],x.getToggleRowExpandedProps=[w],x.stateReducers.push(ce),x.useInstance.push(Ae),x.prepareRow.push(de)};S.pluginName="useExpanded";var k=function(x,V){var Q=V.instance;return[x,{onClick:function(ie){Q.toggleAllRowsExpanded()},style:{cursor:"pointer"},title:"Toggle All Rows Expanded"}]},w=function(x,V){var Q=V.row;return[x,{onClick:function(){Q.toggleRowExpanded()},style:{cursor:"pointer"},title:"Toggle Row Expanded"}]};function ce(x,V,Q,ie){if(V.type===d.init)return a({expanded:{}},x);if(V.type===d.resetExpanded)return a({},x,{expanded:ie.initialState.expanded||{}});if(V.type===d.toggleAllRowsExpanded){var be=V.value,ae=ie.rowsById,Ee=Object.keys(ae).length===Object.keys(x.expanded).length;if(be!==void 0?be:!Ee){var Qe={};return Object.keys(ae).forEach(function(yt){Qe[yt]=!0}),a({},x,{expanded:Qe})}return a({},x,{expanded:{}})}if(V.type===d.toggleRowExpanded){var Ve,Ze=V.id,pt=V.value,lt=x.expanded[Ze],gt=pt!==void 0?pt:!lt;if(!lt&&gt)return a({},x,{expanded:a({},x.expanded,(Ve={},Ve[Ze]=!0,Ve))});if(lt&&!gt){var nt=x.expanded;return nt[Ze],a({},x,{expanded:l(nt,[Ze].map(y))})}return x}}function Ae(x){var V=x.data,Q=x.rows,ie=x.rowsById,be=x.manualExpandedKey,ae=be===void 0?"expanded":be,Ee=x.paginateExpandedRows,Qe=Ee===void 0||Ee,Ve=x.expandSubRows,Ze=Ve===void 0||Ve,pt=x.autoResetExpanded,lt=pt===void 0||pt,gt=x.getHooks,nt=x.plugins,yt=x.state.expanded,Rt=x.dispatch;A(nt,["useSortBy","useGroupBy","usePivotColumns","useGlobalFilter"],"useExpanded");var Ot=N(lt),Gt=Boolean(Object.keys(ie).length&&Object.keys(yt).length);Gt&&Object.keys(ie).some(function(Ir){return!yt[Ir]})&&(Gt=!1),W(function(){Ot()&&Rt({type:d.resetExpanded})},[Rt,V]);var _r=n.useCallback(function(Ir,tr){Rt({type:d.toggleRowExpanded,id:Ir,value:tr})},[Rt]),Jt=n.useCallback(function(Ir){return Rt({type:d.toggleAllRowsExpanded,value:Ir})},[Rt]),St=n.useMemo(function(){return Qe?Ct(Q,{manualExpandedKey:ae,expanded:yt,expandSubRows:Ze}):Q},[Qe,Q,ae,yt,Ze]),fr=n.useMemo(function(){return function(Ir){var tr=0;return Object.keys(Ir).forEach(function(tt){var Hr=tt.split(".");tr=Math.max(tr,Hr.length)}),tr}(yt)},[yt]),Mt=N(x),hr=P(gt().getToggleAllRowsExpandedProps,{instance:Mt()});Object.assign(x,{preExpandedRows:Q,expandedRows:St,rows:St,expandedDepth:fr,isAllRowsExpanded:Gt,toggleRowExpanded:_r,toggleAllRowsExpanded:Jt,getToggleAllRowsExpandedProps:hr})}function de(x,V){var Q=V.instance.getHooks,ie=V.instance;x.toggleRowExpanded=function(be){return ie.toggleRowExpanded(x.id,be)},x.getToggleRowExpandedProps=P(Q().getToggleRowExpandedProps,{instance:ie,row:x})}var je=function(x,V,Q){return x=x.filter(function(ie){return V.some(function(be){var ae=ie.values[be];return String(ae).toLowerCase().includes(String(Q).toLowerCase())})})};je.autoRemove=function(x){return!x};var Tt=function(x,V,Q){return x.filter(function(ie){return V.some(function(be){var ae=ie.values[be];return ae===void 0||String(ae).toLowerCase()===String(Q).toLowerCase()})})};Tt.autoRemove=function(x){return!x};var Yt=function(x,V,Q){return x.filter(function(ie){return V.some(function(be){var ae=ie.values[be];return ae===void 0||String(ae)===String(Q)})})};Yt.autoRemove=function(x){return!x};var wt=function(x,V,Q){return x.filter(function(ie){return V.some(function(be){return ie.values[be].includes(Q)})})};wt.autoRemove=function(x){return!x||!x.length};var we=function(x,V,Q){return x.filter(function(ie){return V.some(function(be){var ae=ie.values[be];return ae&&ae.length&&Q.every(function(Ee){return ae.includes(Ee)})})})};we.autoRemove=function(x){return!x||!x.length};var Ue=function(x,V,Q){return x.filter(function(ie){return V.some(function(be){var ae=ie.values[be];return ae&&ae.length&&Q.some(function(Ee){return ae.includes(Ee)})})})};Ue.autoRemove=function(x){return!x||!x.length};var ge=function(x,V,Q){return x.filter(function(ie){return V.some(function(be){var ae=ie.values[be];return Q.includes(ae)})})};ge.autoRemove=function(x){return!x||!x.length};var pe=function(x,V,Q){return x.filter(function(ie){return V.some(function(be){return ie.values[be]===Q})})};pe.autoRemove=function(x){return x===void 0};var Me=function(x,V,Q){return x.filter(function(ie){return V.some(function(be){return ie.values[be]==Q})})};Me.autoRemove=function(x){return x==null};var at=function(x,V,Q){var ie=Q||[],be=ie[0],ae=ie[1];if((be=typeof be=="number"?be:-1/0)>(ae=typeof ae=="number"?ae:1/0)){var Ee=be;be=ae,ae=Ee}return x.filter(function(Qe){return V.some(function(Ve){var Ze=Qe.values[Ve];return Ze>=be&&Ze<=ae})})};at.autoRemove=function(x){return!x||typeof x[0]!="number"&&typeof x[1]!="number"};var rt=Object.freeze({__proto__:null,text:je,exactText:Tt,exactTextCase:Yt,includes:wt,includesAll:we,includesSome:Ue,includesValue:ge,exact:pe,equals:Me,between:at});d.resetFilters="resetFilters",d.setFilter="setFilter",d.setAllFilters="setAllFilters";var et=function(x){x.stateReducers.push(it),x.useInstance.push(Lt)};function it(x,V,Q,ie){if(V.type===d.init)return a({filters:[]},x);if(V.type===d.resetFilters)return a({},x,{filters:ie.initialState.filters||[]});if(V.type===d.setFilter){var be=V.columnId,ae=V.filterValue,Ee=ie.allColumns,Qe=ie.filterTypes,Ve=Ee.find(function(Rt){return Rt.id===be});if(!Ve)throw new Error("React-Table: Could not find a column with id: "+be);var Ze=$e(Ve.filter,Qe||{},rt),pt=x.filters.find(function(Rt){return Rt.id===be}),lt=R(ae,pt&&pt.value);return Je(Ze.autoRemove,lt,Ve)?a({},x,{filters:x.filters.filter(function(Rt){return Rt.id!==be})}):a({},x,pt?{filters:x.filters.map(function(Rt){return Rt.id===be?{id:be,value:lt}:Rt})}:{filters:[].concat(x.filters,[{id:be,value:lt}])})}if(V.type===d.setAllFilters){var gt=V.filters,nt=ie.allColumns,yt=ie.filterTypes;return a({},x,{filters:R(gt,x.filters).filter(function(Rt){var Ot=nt.find(function(Gt){return Gt.id===Rt.id});return!Je($e(Ot.filter,yt||{},rt).autoRemove,Rt.value,Ot)})})}}function Lt(x){var V=x.data,Q=x.rows,ie=x.flatRows,be=x.rowsById,ae=x.allColumns,Ee=x.filterTypes,Qe=x.manualFilters,Ve=x.defaultCanFilter,Ze=Ve!==void 0&&Ve,pt=x.disableFilters,lt=x.state.filters,gt=x.dispatch,nt=x.autoResetFilters,yt=nt===void 0||nt,Rt=n.useCallback(function(Mt,hr){gt({type:d.setFilter,columnId:Mt,filterValue:hr})},[gt]),Ot=n.useCallback(function(Mt){gt({type:d.setAllFilters,filters:Mt})},[gt]);ae.forEach(function(Mt){var hr=Mt.id,Ir=Mt.accessor,tr=Mt.defaultCanFilter,tt=Mt.disableFilters;Mt.canFilter=Ir?Te(tt!==!0&&void 0,pt!==!0&&void 0,!0):Te(tr,Ze,!1),Mt.setFilter=function(lr){return Rt(Mt.id,lr)};var Hr=lt.find(function(lr){return lr.id===hr});Mt.filterValue=Hr&&Hr.value});var Gt=n.useMemo(function(){if(Qe||!lt.length)return[Q,ie,be];var Mt=[],hr={};return[function Ir(tr,tt){tt===void 0&&(tt=0);var Hr=tr;return(Hr=lt.reduce(function(lr,Dr){var kr=Dr.id,Qr=Dr.value,Qt=ae.find(function(an){return an.id===kr});if(!Qt)return lr;tt===0&&(Qt.preFilteredRows=lr);var Nr=$e(Qt.filter,Ee||{},rt);return Nr?(Qt.filteredRows=Nr(lr,[kr],Qr),Qt.filteredRows):(console.warn("Could not find a valid 'column.filter' for column with the ID: "+Qt.id+"."),lr)},tr)).forEach(function(lr){Mt.push(lr),hr[lr.id]=lr,lr.subRows&&(lr.subRows=lr.subRows&&lr.subRows.length>0?Ir(lr.subRows,tt+1):lr.subRows)}),Hr}(Q),Mt,hr]},[Qe,lt,Q,ie,be,ae,Ee]),_r=Gt[0],Jt=Gt[1],St=Gt[2];n.useMemo(function(){ae.filter(function(Mt){return!lt.find(function(hr){return hr.id===Mt.id})}).forEach(function(Mt){Mt.preFilteredRows=_r,Mt.filteredRows=_r})},[_r,lt,ae]);var fr=N(yt);W(function(){fr()&&gt({type:d.resetFilters})},[gt,Qe?null:V]),Object.assign(x,{preFilteredRows:Q,preFilteredFlatRows:ie,preFilteredRowsById:be,filteredRows:_r,filteredFlatRows:Jt,filteredRowsById:St,rows:_r,flatRows:Jt,rowsById:St,setFilter:Rt,setAllFilters:Ot})}et.pluginName="useFilters",d.resetGlobalFilter="resetGlobalFilter",d.setGlobalFilter="setGlobalFilter";var Ht=function(x){x.stateReducers.push(Bt),x.useInstance.push(qt)};function Bt(x,V,Q,ie){if(V.type===d.resetGlobalFilter)return a({},x,{globalFilter:ie.initialState.globalFilter||void 0});if(V.type===d.setGlobalFilter){var be=V.filterValue,ae=ie.userFilterTypes,Ee=$e(ie.globalFilter,ae||{},rt),Qe=R(be,x.globalFilter);return Je(Ee.autoRemove,Qe)?(x.globalFilter,l(x,["globalFilter"])):a({},x,{globalFilter:Qe})}}function qt(x){var V=x.data,Q=x.rows,ie=x.flatRows,be=x.rowsById,ae=x.allColumns,Ee=x.filterTypes,Qe=x.globalFilter,Ve=x.manualGlobalFilter,Ze=x.state.globalFilter,pt=x.dispatch,lt=x.autoResetGlobalFilter,gt=lt===void 0||lt,nt=x.disableGlobalFilter,yt=n.useCallback(function(St){pt({type:d.setGlobalFilter,filterValue:St})},[pt]),Rt=n.useMemo(function(){if(Ve||Ze===void 0)return[Q,ie,be];var St=[],fr={},Mt=$e(Qe,Ee||{},rt);if(!Mt)return console.warn("Could not find a valid 'globalFilter' option."),Q;ae.forEach(function(Ir){var tr=Ir.disableGlobalFilter;Ir.canFilter=Te(tr!==!0&&void 0,nt!==!0&&void 0,!0)});var hr=ae.filter(function(Ir){return Ir.canFilter===!0});return[function Ir(tr){return(tr=Mt(tr,hr.map(function(tt){return tt.id}),Ze)).forEach(function(tt){St.push(tt),fr[tt.id]=tt,tt.subRows=tt.subRows&&tt.subRows.length?Ir(tt.subRows):tt.subRows}),tr}(Q),St,fr]},[Ve,Ze,Qe,Ee,ae,Q,ie,be,nt]),Ot=Rt[0],Gt=Rt[1],_r=Rt[2],Jt=N(gt);W(function(){Jt()&&pt({type:d.resetGlobalFilter})},[pt,Ve?null:V]),Object.assign(x,{preGlobalFilteredRows:Q,preGlobalFilteredFlatRows:ie,preGlobalFilteredRowsById:be,globalFilteredRows:Ot,globalFilteredFlatRows:Gt,globalFilteredRowsById:_r,rows:Ot,flatRows:Gt,rowsById:_r,setGlobalFilter:yt,disableGlobalFilter:nt})}function sr(x,V){return V.reduce(function(Q,ie){return Q+(typeof ie=="number"?ie:0)},0)}Ht.pluginName="useGlobalFilter";var Vt=Object.freeze({__proto__:null,sum:sr,min:function(x){var V=x[0]||0;return x.forEach(function(Q){typeof Q=="number"&&(V=Math.min(V,Q))}),V},max:function(x){var V=x[0]||0;return x.forEach(function(Q){typeof Q=="number"&&(V=Math.max(V,Q))}),V},minMax:function(x){var V=x[0]||0,Q=x[0]||0;return x.forEach(function(ie){typeof ie=="number"&&(V=Math.min(V,ie),Q=Math.max(Q,ie))}),V+".."+Q},average:function(x){return sr(0,x)/x.length},median:function(x){if(!x.length)return null;var V=Math.floor(x.length/2),Q=[].concat(x).sort(function(ie,be){return ie-be});return x.length%2!=0?Q[V]:(Q[V-1]+Q[V])/2},unique:function(x){return Array.from(new Set(x).values())},uniqueCount:function(x){return new Set(x).size},count:function(x){return x.length}}),_t=[],cr={};d.resetGroupBy="resetGroupBy",d.setGroupBy="setGroupBy",d.toggleGroupBy="toggleGroupBy";var ht=function(x){x.getGroupByToggleProps=[bt],x.stateReducers.push(Kt),x.visibleColumnsDeps.push(function(V,Q){var ie=Q.instance;return[].concat(V,[ie.state.groupBy])}),x.visibleColumns.push(Ft),x.useInstance.push(zt),x.prepareRow.push(Ur)};ht.pluginName="useGroupBy";var bt=function(x,V){var Q=V.header;return[x,{onClick:Q.canGroupBy?function(ie){ie.persist(),Q.toggleGroupBy()}:void 0,style:{cursor:Q.canGroupBy?"pointer":void 0},title:"Toggle GroupBy"}]};function Kt(x,V,Q,ie){if(V.type===d.init)return a({groupBy:[]},x);if(V.type===d.resetGroupBy)return a({},x,{groupBy:ie.initialState.groupBy||[]});if(V.type===d.setGroupBy)return a({},x,{groupBy:V.value});if(V.type===d.toggleGroupBy){var be=V.columnId,ae=V.value,Ee=ae!==void 0?ae:!x.groupBy.includes(be);return a({},x,Ee?{groupBy:[].concat(x.groupBy,[be])}:{groupBy:x.groupBy.filter(function(Qe){return Qe!==be})})}}function Ft(x,V){var Q=V.instance.state.groupBy,ie=Q.map(function(ae){return x.find(function(Ee){return Ee.id===ae})}).filter(Boolean),be=x.filter(function(ae){return!Q.includes(ae.id)});return(x=[].concat(ie,be)).forEach(function(ae){ae.isGrouped=Q.includes(ae.id),ae.groupedIndex=Q.indexOf(ae.id)}),x}var gr={};function zt(x){var V=x.data,Q=x.rows,ie=x.flatRows,be=x.rowsById,ae=x.allColumns,Ee=x.flatHeaders,Qe=x.groupByFn,Ve=Qe===void 0?Xt:Qe,Ze=x.manualGroupBy,pt=x.aggregations,lt=pt===void 0?gr:pt,gt=x.plugins,nt=x.state.groupBy,yt=x.dispatch,Rt=x.autoResetGroupBy,Ot=Rt===void 0||Rt,Gt=x.disableGroupBy,_r=x.defaultCanGroupBy,Jt=x.getHooks;A(gt,["useColumnOrder","useFilters"],"useGroupBy");var St=N(x);ae.forEach(function(Qt){var Nr=Qt.accessor,an=Qt.defaultGroupBy,Mn=Qt.disableGroupBy;Qt.canGroupBy=Nr?Te(Qt.canGroupBy,Mn!==!0&&void 0,Gt!==!0&&void 0,!0):Te(Qt.canGroupBy,an,_r,!1),Qt.canGroupBy&&(Qt.toggleGroupBy=function(){return x.toggleGroupBy(Qt.id)}),Qt.Aggregated=Qt.Aggregated||Qt.Cell});var fr=n.useCallback(function(Qt,Nr){yt({type:d.toggleGroupBy,columnId:Qt,value:Nr})},[yt]),Mt=n.useCallback(function(Qt){yt({type:d.setGroupBy,value:Qt})},[yt]);Ee.forEach(function(Qt){Qt.getGroupByToggleProps=P(Jt().getGroupByToggleProps,{instance:St(),header:Qt})});var hr=n.useMemo(function(){if(Ze||!nt.length)return[Q,ie,be,_t,cr,ie,be];var Qt=nt.filter(function(Sr){return ae.find(function(Di){return Di.id===Sr})}),Nr=[],an={},Mn=[],rr={},un=[],wn={},_n=function Sr(Di,Cr,Xu){if(Cr===void 0&&(Cr=0),Cr===Qt.length)return Di.map(function($s){return a({},$s,{depth:Cr})});var xa=Qt[Cr],Gc=Ve(Di,xa);return Object.entries(Gc).map(function($s,Jc){var Zu=$s[0],Ca=$s[1],Ao=xa+":"+Zu,Pa=Sr(Ca,Cr+1,Ao=Xu?Xu+">"+Ao:Ao),el=Cr?st(Ca,"leafRows"):Ca,Qc=function(Fn,cn,Yc){var Ws={};return ae.forEach(function(En){if(Qt.includes(En.id))Ws[En.id]=cn[0]?cn[0].values[En.id]:null;else{var tl=typeof En.aggregate=="function"?En.aggregate:lt[En.aggregate]||Vt[En.aggregate];if(tl){var Xc=cn.map(function(ds){return ds.values[En.id]}),Zc=Fn.map(function(ds){var Ta=ds.values[En.id];if(!Yc&&En.aggregateValue){var rl=typeof En.aggregateValue=="function"?En.aggregateValue:lt[En.aggregateValue]||Vt[En.aggregateValue];if(!rl)throw console.info({column:En}),new Error("React Table: Invalid column.aggregateValue option for column listed above");Ta=rl(Ta,ds,En)}return Ta});Ws[En.id]=tl(Zc,Xc)}else{if(En.aggregate)throw console.info({column:En}),new Error("React Table: Invalid column.aggregate option for column listed above");Ws[En.id]=null}}}),Ws}(el,Ca,Cr),jo={id:Ao,isGrouped:!0,groupByID:xa,groupByVal:Zu,values:Qc,subRows:Pa,leafRows:el,depth:Cr,index:Jc};return Pa.forEach(function(Fn){Nr.push(Fn),an[Fn.id]=Fn,Fn.isGrouped?(Mn.push(Fn),rr[Fn.id]=Fn):(un.push(Fn),wn[Fn.id]=Fn)}),jo})}(Q);return _n.forEach(function(Sr){Nr.push(Sr),an[Sr.id]=Sr,Sr.isGrouped?(Mn.push(Sr),rr[Sr.id]=Sr):(un.push(Sr),wn[Sr.id]=Sr)}),[_n,Nr,an,Mn,rr,un,wn]},[Ze,nt,Q,ie,be,ae,lt,Ve]),Ir=hr[0],tr=hr[1],tt=hr[2],Hr=hr[3],lr=hr[4],Dr=hr[5],kr=hr[6],Qr=N(Ot);W(function(){Qr()&&yt({type:d.resetGroupBy})},[yt,Ze?null:V]),Object.assign(x,{preGroupedRows:Q,preGroupedFlatRow:ie,preGroupedRowsById:be,groupedRows:Ir,groupedFlatRows:tr,groupedRowsById:tt,onlyGroupedFlatRows:Hr,onlyGroupedRowsById:lr,nonGroupedFlatRows:Dr,nonGroupedRowsById:kr,rows:Ir,flatRows:tr,rowsById:tt,toggleGroupBy:fr,setGroupBy:Mt})}function Ur(x){x.allCells.forEach(function(V){var Q;V.isGrouped=V.column.isGrouped&&V.column.id===x.groupByID,V.isPlaceholder=!V.isGrouped&&V.column.isGrouped,V.isAggregated=!V.isGrouped&&!V.isPlaceholder&&((Q=x.subRows)==null?void 0:Q.length)})}function Xt(x,V){return x.reduce(function(Q,ie,be){var ae=""+ie.values[V];return Q[ae]=Array.isArray(Q[ae])?Q[ae]:[],Q[ae].push(ie),Q},{})}var Ut=/([0-9]+)/gm;function It(x,V){return x===V?0:x>V?1:-1}function Wr(x,V,Q){return[x.values[Q],V.values[Q]]}function Or(x){return typeof x=="number"?isNaN(x)||x===1/0||x===-1/0?"":String(x):typeof x=="string"?x:""}var Mr=Object.freeze({__proto__:null,alphanumeric:function(x,V,Q){var ie=Wr(x,V,Q),be=ie[0],ae=ie[1];for(be=Or(be),ae=Or(ae),be=be.split(Ut).filter(Boolean),ae=ae.split(Ut).filter(Boolean);be.length&&ae.length;){var Ee=be.shift(),Qe=ae.shift(),Ve=parseInt(Ee,10),Ze=parseInt(Qe,10),pt=[Ve,Ze].sort();if(isNaN(pt[0])){if(Ee>Qe)return 1;if(Qe>Ee)return-1}else{if(isNaN(pt[1]))return isNaN(Ve)?-1:1;if(Ve>Ze)return 1;if(Ze>Ve)return-1}}return be.length-ae.length},datetime:function(x,V,Q){var ie=Wr(x,V,Q),be=ie[0],ae=ie[1];return It(be=be.getTime(),ae=ae.getTime())},basic:function(x,V,Q){var ie=Wr(x,V,Q);return It(ie[0],ie[1])},string:function(x,V,Q){var ie=Wr(x,V,Q),be=ie[0],ae=ie[1];for(be=be.split("").filter(Boolean),ae=ae.split("").filter(Boolean);be.length&&ae.length;){var Ee=be.shift(),Qe=ae.shift(),Ve=Ee.toLowerCase(),Ze=Qe.toLowerCase();if(Ve>Ze)return 1;if(Ze>Ve)return-1;if(Ee>Qe)return 1;if(Qe>Ee)return-1}return be.length-ae.length},number:function(x,V,Q){var ie=Wr(x,V,Q),be=ie[0],ae=ie[1],Ee=/[^0-9.]/gi;return It(be=Number(String(be).replace(Ee,"")),ae=Number(String(ae).replace(Ee,"")))}});d.resetSortBy="resetSortBy",d.setSortBy="setSortBy",d.toggleSortBy="toggleSortBy",d.clearSortBy="clearSortBy",E.sortType="alphanumeric",E.sortDescFirst=!1;var dr=function(x){x.getSortByToggleProps=[Rr],x.stateReducers.push(nn),x.useInstance.push(Xr)};dr.pluginName="useSortBy";var Rr=function(x,V){var Q=V.instance,ie=V.column,be=Q.isMultiSortEvent,ae=be===void 0?function(Ee){return Ee.shiftKey}:be;return[x,{onClick:ie.canSort?function(Ee){Ee.persist(),ie.toggleSortBy(void 0,!Q.disableMultiSort&&ae(Ee))}:void 0,style:{cursor:ie.canSort?"pointer":void 0},title:ie.canSort?"Toggle SortBy":void 0}]};function nn(x,V,Q,ie){if(V.type===d.init)return a({sortBy:[]},x);if(V.type===d.resetSortBy)return a({},x,{sortBy:ie.initialState.sortBy||[]});if(V.type===d.clearSortBy)return a({},x,{sortBy:x.sortBy.filter(function(St){return St.id!==V.columnId})});if(V.type===d.setSortBy)return a({},x,{sortBy:V.sortBy});if(V.type===d.toggleSortBy){var be,ae=V.columnId,Ee=V.desc,Qe=V.multi,Ve=ie.allColumns,Ze=ie.disableMultiSort,pt=ie.disableSortRemove,lt=ie.disableMultiRemove,gt=ie.maxMultiSortColCount,nt=gt===void 0?Number.MAX_SAFE_INTEGER:gt,yt=x.sortBy,Rt=Ve.find(function(St){return St.id===ae}).sortDescFirst,Ot=yt.find(function(St){return St.id===ae}),Gt=yt.findIndex(function(St){return St.id===ae}),_r=Ee!=null,Jt=[];return(be=!Ze&&Qe?Ot?"toggle":"add":Gt!==yt.length-1||yt.length!==1?"replace":Ot?"toggle":"replace")!="toggle"||pt||_r||Qe&&lt||!(Ot&&Ot.desc&&!Rt||!Ot.desc&&Rt)||(be="remove"),be==="replace"?Jt=[{id:ae,desc:_r?Ee:Rt}]:be==="add"?(Jt=[].concat(yt,[{id:ae,desc:_r?Ee:Rt}])).splice(0,Jt.length-nt):be==="toggle"?Jt=yt.map(function(St){return St.id===ae?a({},St,{desc:_r?Ee:!Ot.desc}):St}):be==="remove"&&(Jt=yt.filter(function(St){return St.id!==ae})),a({},x,{sortBy:Jt})}}function Xr(x){var V=x.data,Q=x.rows,ie=x.flatRows,be=x.allColumns,ae=x.orderByFn,Ee=ae===void 0?Br:ae,Qe=x.sortTypes,Ve=x.manualSortBy,Ze=x.defaultCanSort,pt=x.disableSortBy,lt=x.flatHeaders,gt=x.state.sortBy,nt=x.dispatch,yt=x.plugins,Rt=x.getHooks,Ot=x.autoResetSortBy,Gt=Ot===void 0||Ot;A(yt,["useFilters","useGlobalFilter","useGroupBy","usePivotColumns"],"useSortBy");var _r=n.useCallback(function(tr){nt({type:d.setSortBy,sortBy:tr})},[nt]),Jt=n.useCallback(function(tr,tt,Hr){nt({type:d.toggleSortBy,columnId:tr,desc:tt,multi:Hr})},[nt]),St=N(x);lt.forEach(function(tr){var tt=tr.accessor,Hr=tr.canSort,lr=tr.disableSortBy,Dr=tr.id,kr=tt?Te(lr!==!0&&void 0,pt!==!0&&void 0,!0):Te(Ze,Hr,!1);tr.canSort=kr,tr.canSort&&(tr.toggleSortBy=function(Qt,Nr){return Jt(tr.id,Qt,Nr)},tr.clearSortBy=function(){nt({type:d.clearSortBy,columnId:tr.id})}),tr.getSortByToggleProps=P(Rt().getSortByToggleProps,{instance:St(),column:tr});var Qr=gt.find(function(Qt){return Qt.id===Dr});tr.isSorted=!!Qr,tr.sortedIndex=gt.findIndex(function(Qt){return Qt.id===Dr}),tr.isSortedDesc=tr.isSorted?Qr.desc:void 0});var fr=n.useMemo(function(){if(Ve||!gt.length)return[Q,ie];var tr=[],tt=gt.filter(function(Hr){return be.find(function(lr){return lr.id===Hr.id})});return[function Hr(lr){var Dr=Ee(lr,tt.map(function(kr){var Qr=be.find(function(an){return an.id===kr.id});if(!Qr)throw new Error("React-Table: Could not find a column with id: "+kr.id+" while sorting");var Qt=Qr.sortType,Nr=He(Qt)||(Qe||{})[Qt]||Mr[Qt];if(!Nr)throw new Error("React-Table: Could not find a valid sortType of '"+Qt+"' for column '"+kr.id+"'.");return function(an,Mn){return Nr(an,Mn,kr.id,kr.desc)}}),tt.map(function(kr){var Qr=be.find(function(Qt){return Qt.id===kr.id});return Qr&&Qr.sortInverted?kr.desc:!kr.desc}));return Dr.forEach(function(kr){tr.push(kr),kr.subRows&&kr.subRows.length!==0&&(kr.subRows=Hr(kr.subRows))}),Dr}(Q),tr]},[Ve,gt,Q,ie,be,Ee,Qe]),Mt=fr[0],hr=fr[1],Ir=N(Gt);W(function(){Ir()&&nt({type:d.resetSortBy})},[Ve?null:V]),Object.assign(x,{preSortedRows:Q,preSortedFlatRows:ie,sortedRows:Mt,sortedFlatRows:hr,rows:Mt,flatRows:hr,setSortBy:_r,toggleSortBy:Jt})}function Br(x,V,Q){return[].concat(x).sort(function(ie,be){for(var ae=0;ae<V.length;ae+=1){var Ee=V[ae],Qe=Q[ae]===!1||Q[ae]==="desc",Ve=Ee(ie,be);if(Ve!==0)return Qe?-Ve:Ve}return Q[0]?ie.index-be.index:be.index-ie.index})}d.resetPage="resetPage",d.gotoPage="gotoPage",d.setPageSize="setPageSize";var ct=function(x){x.stateReducers.push(vn),x.useInstance.push(Ln)};function vn(x,V,Q,ie){if(V.type===d.init)return a({pageSize:10,pageIndex:0},x);if(V.type===d.resetPage)return a({},x,{pageIndex:ie.initialState.pageIndex||0});if(V.type===d.gotoPage){var be=ie.pageCount,ae=ie.page,Ee=R(V.pageIndex,x.pageIndex),Qe=!1;return Ee>x.pageIndex?Qe=be===-1?ae.length>=x.pageSize:Ee<be:Ee<x.pageIndex&&(Qe=Ee>-1),Qe?a({},x,{pageIndex:Ee}):x}if(V.type===d.setPageSize){var Ve=V.pageSize,Ze=x.pageSize*x.pageIndex;return a({},x,{pageIndex:Math.floor(Ze/Ve),pageSize:Ve})}}function Ln(x){var V=x.rows,Q=x.autoResetPage,ie=Q===void 0||Q,be=x.manualExpandedKey,ae=be===void 0?"expanded":be,Ee=x.plugins,Qe=x.pageCount,Ve=x.paginateExpandedRows,Ze=Ve===void 0||Ve,pt=x.expandSubRows,lt=pt===void 0||pt,gt=x.state,nt=gt.pageSize,yt=gt.pageIndex,Rt=gt.expanded,Ot=gt.globalFilter,Gt=gt.filters,_r=gt.groupBy,Jt=gt.sortBy,St=x.dispatch,fr=x.data,Mt=x.manualPagination;A(Ee,["useGlobalFilter","useFilters","useGroupBy","useSortBy","useExpanded"],"usePagination");var hr=N(ie);W(function(){hr()&&St({type:d.resetPage})},[St,Mt?null:fr,Ot,Gt,_r,Jt]);var Ir=Mt?Qe:Math.ceil(V.length/nt),tr=n.useMemo(function(){return Ir>0?[].concat(new Array(Ir)).fill(null).map(function(Nr,an){return an}):[]},[Ir]),tt=n.useMemo(function(){var Nr;if(Mt)Nr=V;else{var an=nt*yt,Mn=an+nt;Nr=V.slice(an,Mn)}return Ze?Nr:Ct(Nr,{manualExpandedKey:ae,expanded:Rt,expandSubRows:lt})},[lt,Rt,ae,Mt,yt,nt,Ze,V]),Hr=yt>0,lr=Ir===-1?tt.length>=nt:yt<Ir-1,Dr=n.useCallback(function(Nr){St({type:d.gotoPage,pageIndex:Nr})},[St]),kr=n.useCallback(function(){return Dr(function(Nr){return Nr-1})},[Dr]),Qr=n.useCallback(function(){return Dr(function(Nr){return Nr+1})},[Dr]),Qt=n.useCallback(function(Nr){St({type:d.setPageSize,pageSize:Nr})},[St]);Object.assign(x,{pageOptions:tr,pageCount:Ir,page:tt,canPreviousPage:Hr,canNextPage:lr,gotoPage:Dr,previousPage:kr,nextPage:Qr,setPageSize:Qt})}ct.pluginName="usePagination",d.resetPivot="resetPivot",d.togglePivot="togglePivot";var ui=function(x){x.getPivotToggleProps=[bn],x.stateReducers.push(f),x.useInstanceAfterData.push(c),x.allColumns.push(p),x.accessValue.push(v),x.materializedColumns.push(O),x.materializedColumnsDeps.push($),x.visibleColumns.push(X),x.visibleColumnsDeps.push(ue),x.useInstance.push(se),x.prepareRow.push(le)};ui.pluginName="usePivotColumns";var Tn=[],bn=function(x,V){var Q=V.header;return[x,{onClick:Q.canPivot?function(ie){ie.persist(),Q.togglePivot()}:void 0,style:{cursor:Q.canPivot?"pointer":void 0},title:"Toggle Pivot"}]};function f(x,V,Q,ie){if(V.type===d.init)return a({pivotColumns:Tn},x);if(V.type===d.resetPivot)return a({},x,{pivotColumns:ie.initialState.pivotColumns||Tn});if(V.type===d.togglePivot){var be=V.columnId,ae=V.value,Ee=ae!==void 0?ae:!x.pivotColumns.includes(be);return a({},x,Ee?{pivotColumns:[].concat(x.pivotColumns,[be])}:{pivotColumns:x.pivotColumns.filter(function(Qe){return Qe!==be})})}}function c(x){x.allColumns.forEach(function(V){V.isPivotSource=x.state.pivotColumns.includes(V.id)})}function p(x,V){var Q=V.instance;return x.forEach(function(ie){ie.isPivotSource=Q.state.pivotColumns.includes(ie.id),ie.uniqueValues=new Set}),x}function v(x,V){var Q=V.column;return Q.uniqueValues&&x!==void 0&&Q.uniqueValues.add(x),x}function O(x,V){var Q=V.instance,ie=Q.allColumns,be=Q.state;if(!be.pivotColumns.length||!be.groupBy||!be.groupBy.length)return x;var ae=be.pivotColumns.map(function(Ve){return ie.find(function(Ze){return Ze.id===Ve})}).filter(Boolean),Ee=ie.filter(function(Ve){return!Ve.isPivotSource&&!be.groupBy.includes(Ve.id)&&!be.pivotColumns.includes(Ve.id)}),Qe=Fe(function Ve(Ze,pt,lt){Ze===void 0&&(Ze=0),lt===void 0&&(lt=[]);var gt=ae[Ze];return gt?Array.from(gt.uniqueValues).sort().map(function(nt){var yt=a({},gt,{Header:gt.PivotHeader||typeof gt.header=="string"?gt.Header+": "+nt:nt,isPivotGroup:!0,parent:pt,depth:Ze,id:pt?pt.id+"."+gt.id+"."+nt:gt.id+"."+nt,pivotValue:nt});return yt.columns=Ve(Ze+1,yt,[].concat(lt,[function(Rt){return Rt.values[gt.id]===nt}])),yt}):Ee.map(function(nt){return a({},nt,{canPivot:!1,isPivoted:!0,parent:pt,depth:Ze,id:""+(pt?pt.id+"."+nt.id:nt.id),accessor:function(yt,Rt,Ot){if(lt.every(function(Gt){return Gt(Ot)}))return Ot.values[nt.id]}})})}());return[].concat(x,Qe)}function $(x,V){var Q=V.instance.state,ie=Q.pivotColumns,be=Q.groupBy;return[].concat(x,[ie,be])}function X(x,V){var Q=V.instance.state;return x=x.filter(function(ie){return!ie.isPivotSource}),Q.pivotColumns.length&&Q.groupBy&&Q.groupBy.length&&(x=x.filter(function(ie){return ie.isGrouped||ie.isPivoted})),x}function ue(x,V){var Q=V.instance;return[].concat(x,[Q.state.pivotColumns,Q.state.groupBy])}function se(x){var V=x.columns,Q=x.allColumns,ie=x.flatHeaders,be=x.getHooks,ae=x.plugins,Ee=x.dispatch,Qe=x.autoResetPivot,Ve=Qe===void 0||Qe,Ze=x.manaulPivot,pt=x.disablePivot,lt=x.defaultCanPivot;A(ae,["useGroupBy"],"usePivotColumns");var gt=N(x);Q.forEach(function(yt){var Rt=yt.accessor,Ot=yt.defaultPivot,Gt=yt.disablePivot;yt.canPivot=Rt?Te(yt.canPivot,Gt!==!0&&void 0,pt!==!0&&void 0,!0):Te(yt.canPivot,Ot,lt,!1),yt.canPivot&&(yt.togglePivot=function(){return x.togglePivot(yt.id)}),yt.Aggregated=yt.Aggregated||yt.Cell}),ie.forEach(function(yt){yt.getPivotToggleProps=P(be().getPivotToggleProps,{instance:gt(),header:yt})});var nt=N(Ve);W(function(){nt()&&Ee({type:d.resetPivot})},[Ee,Ze?null:V]),Object.assign(x,{togglePivot:function(yt,Rt){Ee({type:d.togglePivot,columnId:yt,value:Rt})}})}function le(x){x.allCells.forEach(function(V){V.isPivoted=V.column.isPivoted})}d.resetSelectedRows="resetSelectedRows",d.toggleAllRowsSelected="toggleAllRowsSelected",d.toggleRowSelected="toggleRowSelected",d.toggleAllPageRowsSelected="toggleAllPageRowsSelected";var fe=function(x){x.getToggleRowSelectedProps=[ye],x.getToggleAllRowsSelectedProps=[Se],x.getToggleAllPageRowsSelectedProps=[Ce],x.stateReducers.push(Ne),x.useInstance.push(Ke),x.prepareRow.push(ze)};fe.pluginName="useRowSelect";var ye=function(x,V){var Q=V.instance,ie=V.row,be=Q.manualRowSelectedKey,ae=be===void 0?"isSelected":be;return[x,{onChange:function(Ee){ie.toggleRowSelected(Ee.target.checked)},style:{cursor:"pointer"},checked:!(!ie.original||!ie.original[ae])||ie.isSelected,title:"Toggle Row Selected",indeterminate:ie.isSomeSelected}]},Se=function(x,V){var Q=V.instance;return[x,{onChange:function(ie){Q.toggleAllRowsSelected(ie.target.checked)},style:{cursor:"pointer"},checked:Q.isAllRowsSelected,title:"Toggle All Rows Selected",indeterminate:Boolean(!Q.isAllRowsSelected&&Object.keys(Q.state.selectedRowIds).length)}]},Ce=function(x,V){var Q=V.instance;return[x,{onChange:function(ie){Q.toggleAllPageRowsSelected(ie.target.checked)},style:{cursor:"pointer"},checked:Q.isAllPageRowsSelected,title:"Toggle All Current Page Rows Selected",indeterminate:Boolean(!Q.isAllPageRowsSelected&&Q.page.some(function(ie){var be=ie.id;return Q.state.selectedRowIds[be]}))}]};function Ne(x,V,Q,ie){if(V.type===d.init)return a({selectedRowIds:{}},x);if(V.type===d.resetSelectedRows)return a({},x,{selectedRowIds:ie.initialState.selectedRowIds||{}});if(V.type===d.toggleAllRowsSelected){var be=V.value,ae=ie.isAllRowsSelected,Ee=ie.rowsById,Qe=ie.nonGroupedRowsById,Ve=Qe===void 0?Ee:Qe,Ze=be!==void 0?be:!ae,pt=Object.assign({},x.selectedRowIds);return Ze?Object.keys(Ve).forEach(function(Dr){pt[Dr]=!0}):Object.keys(Ve).forEach(function(Dr){delete pt[Dr]}),a({},x,{selectedRowIds:pt})}if(V.type===d.toggleRowSelected){var lt=V.id,gt=V.value,nt=ie.rowsById,yt=ie.selectSubRows,Rt=yt===void 0||yt,Ot=ie.getSubRows,Gt=x.selectedRowIds[lt],_r=gt!==void 0?gt:!Gt;if(Gt===_r)return x;var Jt=a({},x.selectedRowIds);return function Dr(kr){var Qr=nt[kr];if(Qr&&(Qr.isGrouped||(_r?Jt[kr]=!0:delete Jt[kr]),Rt&&Ot(Qr)))return Ot(Qr).forEach(function(Qt){return Dr(Qt.id)})}(lt),a({},x,{selectedRowIds:Jt})}if(V.type===d.toggleAllPageRowsSelected){var St=V.value,fr=ie.page,Mt=ie.rowsById,hr=ie.selectSubRows,Ir=hr===void 0||hr,tr=ie.isAllPageRowsSelected,tt=ie.getSubRows,Hr=St!==void 0?St:!tr,lr=a({},x.selectedRowIds);return fr.forEach(function(Dr){return function kr(Qr){var Qt=Mt[Qr];if(Qt.isGrouped||(Hr?lr[Qr]=!0:delete lr[Qr]),Ir&&tt(Qt))return tt(Qt).forEach(function(Nr){return kr(Nr.id)})}(Dr.id)}),a({},x,{selectedRowIds:lr})}return x}function Ke(x){var V=x.data,Q=x.rows,ie=x.getHooks,be=x.plugins,ae=x.rowsById,Ee=x.nonGroupedRowsById,Qe=Ee===void 0?ae:Ee,Ve=x.autoResetSelectedRows,Ze=Ve===void 0||Ve,pt=x.state.selectedRowIds,lt=x.selectSubRows,gt=lt===void 0||lt,nt=x.dispatch,yt=x.page,Rt=x.getSubRows;A(be,["useFilters","useGroupBy","useSortBy","useExpanded","usePagination"],"useRowSelect");var Ot=n.useMemo(function(){var tt=[];return Q.forEach(function(Hr){var lr=gt?function Dr(kr,Qr,Qt){if(Qr[kr.id])return!0;var Nr=Qt(kr);if(Nr&&Nr.length){var an=!0,Mn=!1;return Nr.forEach(function(rr){Mn&&!an||(Dr(rr,Qr,Qt)?Mn=!0:an=!1)}),!!an||!!Mn&&null}return!1}(Hr,pt,Rt):!!pt[Hr.id];Hr.isSelected=!!lr,Hr.isSomeSelected=lr===null,lr&&tt.push(Hr)}),tt},[Q,gt,pt,Rt]),Gt=Boolean(Object.keys(Qe).length&&Object.keys(pt).length),_r=Gt;Gt&&Object.keys(Qe).some(function(tt){return!pt[tt]})&&(Gt=!1),Gt||yt&&yt.length&&yt.some(function(tt){var Hr=tt.id;return!pt[Hr]})&&(_r=!1);var Jt=N(Ze);W(function(){Jt()&&nt({type:d.resetSelectedRows})},[nt,V]);var St=n.useCallback(function(tt){return nt({type:d.toggleAllRowsSelected,value:tt})},[nt]),fr=n.useCallback(function(tt){return nt({type:d.toggleAllPageRowsSelected,value:tt})},[nt]),Mt=n.useCallback(function(tt,Hr){return nt({type:d.toggleRowSelected,id:tt,value:Hr})},[nt]),hr=N(x),Ir=P(ie().getToggleAllRowsSelectedProps,{instance:hr()}),tr=P(ie().getToggleAllPageRowsSelectedProps,{instance:hr()});Object.assign(x,{selectedFlatRows:Ot,isAllRowsSelected:Gt,isAllPageRowsSelected:_r,toggleRowSelected:Mt,toggleAllRowsSelected:St,getToggleAllRowsSelectedProps:Ir,getToggleAllPageRowsSelectedProps:tr,toggleAllPageRowsSelected:fr})}function ze(x,V){var Q=V.instance;x.toggleRowSelected=function(ie){return Q.toggleRowSelected(x.id,ie)},x.getToggleRowSelectedProps=P(Q.getHooks().getToggleRowSelectedProps,{instance:Q,row:x})}var Z=function(x){return{}},he=function(x){return{}};d.setRowState="setRowState",d.setCellState="setCellState",d.resetRowState="resetRowState";var me=function(x){x.stateReducers.push(_e),x.useInstance.push(Be),x.prepareRow.push(Ge)};function _e(x,V,Q,ie){var be=ie.initialRowStateAccessor,ae=be===void 0?Z:be,Ee=ie.initialCellStateAccessor,Qe=Ee===void 0?he:Ee,Ve=ie.rowsById;if(V.type===d.init)return a({rowState:{}},x);if(V.type===d.resetRowState)return a({},x,{rowState:ie.initialState.rowState||{}});if(V.type===d.setRowState){var Ze,pt=V.rowId,lt=V.value,gt=x.rowState[pt]!==void 0?x.rowState[pt]:ae(Ve[pt]);return a({},x,{rowState:a({},x.rowState,(Ze={},Ze[pt]=R(lt,gt),Ze))})}if(V.type===d.setCellState){var nt,yt,Rt,Ot,Gt,_r=V.rowId,Jt=V.columnId,St=V.value,fr=x.rowState[_r]!==void 0?x.rowState[_r]:ae(Ve[_r]),Mt=(fr==null||(nt=fr.cellState)==null?void 0:nt[Jt])!==void 0?fr.cellState[Jt]:Qe((yt=Ve[_r])==null||(Rt=yt.cells)==null?void 0:Rt.find(function(hr){return hr.column.id===Jt}));return a({},x,{rowState:a({},x.rowState,(Gt={},Gt[_r]=a({},fr,{cellState:a({},fr.cellState||{},(Ot={},Ot[Jt]=R(St,Mt),Ot))}),Gt))})}}function Be(x){var V=x.autoResetRowState,Q=V===void 0||V,ie=x.data,be=x.dispatch,ae=n.useCallback(function(Ve,Ze){return be({type:d.setRowState,rowId:Ve,value:Ze})},[be]),Ee=n.useCallback(function(Ve,Ze,pt){return be({type:d.setCellState,rowId:Ve,columnId:Ze,value:pt})},[be]),Qe=N(Q);W(function(){Qe()&&be({type:d.resetRowState})},[ie]),Object.assign(x,{setRowState:ae,setCellState:Ee})}function Ge(x,V){var Q=V.instance,ie=Q.initialRowStateAccessor,be=ie===void 0?Z:ie,ae=Q.initialCellStateAccessor,Ee=ae===void 0?he:ae,Qe=Q.state.rowState;x&&(x.state=Qe[x.id]!==void 0?Qe[x.id]:be(x),x.setState=function(Ve){return Q.setRowState(x.id,Ve)},x.cells.forEach(function(Ve){x.state.cellState||(x.state.cellState={}),Ve.state=x.state.cellState[Ve.column.id]!==void 0?x.state.cellState[Ve.column.id]:Ee(Ve),Ve.setState=function(Ze){return Q.setCellState(x.id,Ve.column.id,Ze)}}))}me.pluginName="useRowState",d.resetColumnOrder="resetColumnOrder",d.setColumnOrder="setColumnOrder";var Dt=function(x){x.stateReducers.push(ut),x.visibleColumnsDeps.push(function(V,Q){var ie=Q.instance;return[].concat(V,[ie.state.columnOrder])}),x.visibleColumns.push(Ar),x.useInstance.push(kt)};function ut(x,V,Q,ie){return V.type===d.init?a({columnOrder:[]},x):V.type===d.resetColumnOrder?a({},x,{columnOrder:ie.initialState.columnOrder||[]}):V.type===d.setColumnOrder?a({},x,{columnOrder:R(V.columnOrder,x.columnOrder)}):void 0}function Ar(x,V){var Q=V.instance.state.columnOrder;if(!Q||!Q.length)return x;for(var ie=[].concat(Q),be=[].concat(x),ae=[],Ee=function(){var Qe=ie.shift(),Ve=be.findIndex(function(Ze){return Ze.id===Qe});Ve>-1&&ae.push(be.splice(Ve,1)[0])};be.length&&ie.length;)Ee();return[].concat(ae,be)}function kt(x){var V=x.dispatch;x.setColumnOrder=n.useCallback(function(Q){return V({type:d.setColumnOrder,columnOrder:Q})},[V])}Dt.pluginName="useColumnOrder",E.canResize=!0,d.columnStartResizing="columnStartResizing",d.columnResizing="columnResizing",d.columnDoneResizing="columnDoneResizing",d.resetResize="resetResize";var Zt=function(x){x.getResizerProps=[Zr],x.getHeaderProps.push({style:{position:"relative"}}),x.stateReducers.push(zr),x.useInstance.push(nr),x.useInstanceBeforeDimensions.push(Vr)},Zr=function(x,V){var Q=V.instance,ie=V.header,be=Q.dispatch,ae=function(Ee,Qe){var Ve=!1;if(Ee.type==="touchstart"){if(Ee.touches&&Ee.touches.length>1)return;Ve=!0}var Ze,pt,lt=function(Jt){var St=[];return function fr(Mt){Mt.columns&&Mt.columns.length&&Mt.columns.map(fr),St.push(Mt)}(Jt),St}(Qe).map(function(Jt){return[Jt.id,Jt.totalWidth]}),gt=Ve?Math.round(Ee.touches[0].clientX):Ee.clientX,nt=function(){window.cancelAnimationFrame(Ze),Ze=null,be({type:d.columnDoneResizing})},yt=function(){window.cancelAnimationFrame(Ze),Ze=null,be({type:d.columnResizing,clientX:pt})},Rt=function(Jt){pt=Jt,Ze||(Ze=window.requestAnimationFrame(yt))},Ot={mouse:{moveEvent:"mousemove",moveHandler:function(Jt){return Rt(Jt.clientX)},upEvent:"mouseup",upHandler:function(Jt){document.removeEventListener("mousemove",Ot.mouse.moveHandler),document.removeEventListener("mouseup",Ot.mouse.upHandler),nt()}},touch:{moveEvent:"touchmove",moveHandler:function(Jt){return Jt.cancelable&&(Jt.preventDefault(),Jt.stopPropagation()),Rt(Jt.touches[0].clientX),!1},upEvent:"touchend",upHandler:function(Jt){document.removeEventListener(Ot.touch.moveEvent,Ot.touch.moveHandler),document.removeEventListener(Ot.touch.upEvent,Ot.touch.moveHandler),nt()}}},Gt=Ve?Ot.touch:Ot.mouse,_r=!!function(){if(typeof Xe=="boolean")return Xe;var Jt=!1;try{var St={get passive(){return Jt=!0,!1}};window.addEventListener("test",null,St),window.removeEventListener("test",null,St)}catch{Jt=!1}return Xe=Jt}()&&{passive:!1};document.addEventListener(Gt.moveEvent,Gt.moveHandler,_r),document.addEventListener(Gt.upEvent,Gt.upHandler,_r),be({type:d.columnStartResizing,columnId:Qe.id,columnWidth:Qe.totalWidth,headerIdWidths:lt,clientX:gt})};return[x,{onMouseDown:function(Ee){return Ee.persist()||ae(Ee,ie)},onTouchStart:function(Ee){return Ee.persist()||ae(Ee,ie)},style:{cursor:"col-resize"},draggable:!1,role:"separator"}]};function zr(x,V){if(V.type===d.init)return a({columnResizing:{columnWidths:{}}},x);if(V.type===d.resetResize)return a({},x,{columnResizing:{columnWidths:{}}});if(V.type===d.columnStartResizing){var Q=V.clientX,ie=V.columnId,be=V.columnWidth,ae=V.headerIdWidths;return a({},x,{columnResizing:a({},x.columnResizing,{startX:Q,headerIdWidths:ae,columnWidth:be,isResizingColumn:ie})})}if(V.type===d.columnResizing){var Ee=V.clientX,Qe=x.columnResizing,Ve=Qe.startX,Ze=Qe.columnWidth,pt=Qe.headerIdWidths,lt=(Ee-Ve)/Ze,gt={};return(pt===void 0?[]:pt).forEach(function(nt){var yt=nt[0],Rt=nt[1];gt[yt]=Math.max(Rt+Rt*lt,0)}),a({},x,{columnResizing:a({},x.columnResizing,{columnWidths:a({},x.columnResizing.columnWidths,{},gt)})})}return V.type===d.columnDoneResizing?a({},x,{columnResizing:a({},x.columnResizing,{startX:null,isResizingColumn:null})}):void 0}Zt.pluginName="useResizeColumns";var Vr=function(x){var V=x.flatHeaders,Q=x.disableResizing,ie=x.getHooks,be=x.state.columnResizing,ae=N(x);V.forEach(function(Ee){var Qe=Te(Ee.disableResizing!==!0&&void 0,Q!==!0&&void 0,!0);Ee.canResize=Qe,Ee.width=be.columnWidths[Ee.id]||Ee.originalWidth||Ee.width,Ee.isResizing=be.isResizingColumn===Ee.id,Qe&&(Ee.getResizerProps=P(ie().getResizerProps,{instance:ae(),header:Ee}))})};function nr(x){var V=x.plugins,Q=x.dispatch,ie=x.autoResetResize,be=ie===void 0||ie,ae=x.columns;A(V,["useAbsoluteLayout"],"useResizeColumns");var Ee=N(be);W(function(){Ee()&&Q({type:d.resetResize})},[ae]);var Qe=n.useCallback(function(){return Q({type:d.resetResize})},[Q]);Object.assign(x,{resetResizing:Qe})}var Gr={position:"absolute",top:0},xr=function(x){x.getTableBodyProps.push(jr),x.getRowProps.push(jr),x.getHeaderGroupProps.push(jr),x.getFooterGroupProps.push(jr),x.getHeaderProps.push(function(V,Q){var ie=Q.column;return[V,{style:a({},Gr,{left:ie.totalLeft+"px",width:ie.totalWidth+"px"})}]}),x.getCellProps.push(function(V,Q){var ie=Q.cell;return[V,{style:a({},Gr,{left:ie.column.totalLeft+"px",width:ie.column.totalWidth+"px"})}]}),x.getFooterProps.push(function(V,Q){var ie=Q.column;return[V,{style:a({},Gr,{left:ie.totalLeft+"px",width:ie.totalWidth+"px"})}]})};xr.pluginName="useAbsoluteLayout";var jr=function(x,V){return[x,{style:{position:"relative",width:V.instance.totalColumnsWidth+"px"}}]},br={display:"inline-block",boxSizing:"border-box"},on=function(x,V){return[x,{style:{display:"flex",width:V.instance.totalColumnsWidth+"px"}}]},sn=function(x){x.getRowProps.push(on),x.getHeaderGroupProps.push(on),x.getFooterGroupProps.push(on),x.getHeaderProps.push(function(V,Q){var ie=Q.column;return[V,{style:a({},br,{width:ie.totalWidth+"px"})}]}),x.getCellProps.push(function(V,Q){var ie=Q.cell;return[V,{style:a({},br,{width:ie.column.totalWidth+"px"})}]}),x.getFooterProps.push(function(V,Q){var ie=Q.column;return[V,{style:a({},br,{width:ie.totalWidth+"px"})}]})};function Tr(x){x.getTableProps.push(so),x.getRowProps.push(ei),x.getHeaderGroupProps.push(ei),x.getFooterGroupProps.push(ei),x.getHeaderProps.push(ao),x.getCellProps.push(fn),x.getFooterProps.push(uo)}sn.pluginName="useBlockLayout",Tr.pluginName="useFlexLayout";var so=function(x,V){return[x,{style:{minWidth:V.instance.totalColumnsMinWidth+"px"}}]},ei=function(x,V){return[x,{style:{display:"flex",flex:"1 0 auto",minWidth:V.instance.totalColumnsMinWidth+"px"}}]},ao=function(x,V){var Q=V.column;return[x,{style:{boxSizing:"border-box",flex:Q.totalFlexWidth?Q.totalFlexWidth+" 0 auto":void 0,minWidth:Q.totalMinWidth+"px",width:Q.totalWidth+"px"}}]},fn=function(x,V){var Q=V.cell;return[x,{style:{boxSizing:"border-box",flex:Q.column.totalFlexWidth+" 0 auto",minWidth:Q.column.totalMinWidth+"px",width:Q.column.totalWidth+"px"}}]},uo=function(x,V){var Q=V.column;return[x,{style:{boxSizing:"border-box",flex:Q.totalFlexWidth?Q.totalFlexWidth+" 0 auto":void 0,minWidth:Q.totalMinWidth+"px",width:Q.totalWidth+"px"}}]};function ti(x){x.stateReducers.push(Bo),x.getTableProps.push(li),x.getHeaderProps.push(Ui),x.getRowProps.push(Ei)}d.columnStartResizing="columnStartResizing",d.columnResizing="columnResizing",d.columnDoneResizing="columnDoneResizing",d.resetResize="resetResize",ti.pluginName="useGridLayout";var li=function(x,V){var Q=V.instance;return[x,{style:{display:"grid",gridTemplateColumns:Q.visibleColumns.map(function(ie){var be;return Q.state.gridLayout.columnWidths[ie.id]?Q.state.gridLayout.columnWidths[ie.id]+"px":(be=Q.state.columnResizing)!=null&&be.isResizingColumn?Q.state.gridLayout.startWidths[ie.id]+"px":typeof ie.width=="number"?ie.width+"px":ie.width}).join(" ")}}]},Ui=function(x,V){var Q=V.column;return[x,{id:"header-cell-"+Q.id,style:{position:"sticky",gridColumn:"span "+Q.totalVisibleHeaderCount}}]},Ei=function(x,V){var Q=V.row;return Q.isExpanded?[x,{style:{gridColumn:"1 / "+(Q.cells.length+1)}}]:[x,{}]};function Bo(x,V,Q,ie){if(V.type===d.init)return a({gridLayout:{columnWidths:{}}},x);if(V.type===d.resetResize)return a({},x,{gridLayout:{columnWidths:{}}});if(V.type===d.columnStartResizing){var be=V.columnId,ae=V.headerIdWidths,Ee=gn(be);if(Ee!==void 0){var Qe=ie.visibleColumns.reduce(function(St,fr){var Mt;return a({},St,((Mt={})[fr.id]=gn(fr.id),Mt))},{}),Ve=ie.visibleColumns.reduce(function(St,fr){var Mt;return a({},St,((Mt={})[fr.id]=fr.minWidth,Mt))},{}),Ze=ie.visibleColumns.reduce(function(St,fr){var Mt;return a({},St,((Mt={})[fr.id]=fr.maxWidth,Mt))},{}),pt=ae.map(function(St){var fr=St[0];return[fr,gn(fr)]});return a({},x,{gridLayout:a({},x.gridLayout,{startWidths:Qe,minWidths:Ve,maxWidths:Ze,headerIdGridWidths:pt,columnWidth:Ee})})}return x}if(V.type===d.columnResizing){var lt=V.clientX,gt=x.columnResizing.startX,nt=x.gridLayout,yt=nt.columnWidth,Rt=nt.minWidths,Ot=nt.maxWidths,Gt=nt.headerIdGridWidths,_r=(lt-gt)/yt,Jt={};return(Gt===void 0?[]:Gt).forEach(function(St){var fr=St[0],Mt=St[1];Jt[fr]=Math.min(Math.max(Rt[fr],Mt+Mt*_r),Ot[fr])}),a({},x,{gridLayout:a({},x.gridLayout,{columnWidths:a({},x.gridLayout.columnWidths,{},Jt)})})}return V.type===d.columnDoneResizing?a({},x,{gridLayout:a({},x.gridLayout,{startWidths:{},minWidths:{},maxWidths:{}})}):void 0}function gn(x){var V,Q=(V=document.getElementById("header-cell-"+x))==null?void 0:V.offsetWidth;if(Q!==void 0)return Q}r._UNSTABLE_usePivotColumns=ui,r.actions=d,r.defaultColumn=E,r.defaultGroupByFn=Xt,r.defaultOrderByFn=Br,r.defaultRenderer=m,r.emptyRenderer=g,r.ensurePluginOrder=A,r.flexRender=J,r.functionalUpdate=R,r.loopHooks=D,r.makePropGetter=P,r.makeRenderer=q,r.reduceHooks=I,r.safeUseLayoutEffect=L,r.useAbsoluteLayout=xr,r.useAsyncDebounce=function(x,V){V===void 0&&(V=0);var Q=n.useRef({}),ie=N(x),be=N(V);return n.useCallback(function(){var ae=s(regeneratorRuntime.mark(function Ee(){var Qe,Ve,Ze,pt=arguments;return regeneratorRuntime.wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:for(Qe=pt.length,Ve=new Array(Qe),Ze=0;Ze<Qe;Ze++)Ve[Ze]=pt[Ze];return Q.current.promise||(Q.current.promise=new Promise(function(gt,nt){Q.current.resolve=gt,Q.current.reject=nt})),Q.current.timeout&&clearTimeout(Q.current.timeout),Q.current.timeout=setTimeout(s(regeneratorRuntime.mark(function gt(){return regeneratorRuntime.wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return delete Q.current.timeout,nt.prev=1,nt.t0=Q.current,nt.next=5,ie().apply(void 0,Ve);case 5:nt.t1=nt.sent,nt.t0.resolve.call(nt.t0,nt.t1),nt.next=12;break;case 9:nt.prev=9,nt.t2=nt.catch(1),Q.current.reject(nt.t2);case 12:return nt.prev=12,delete Q.current.promise,nt.finish(12);case 15:case"end":return nt.stop()}},gt,null,[[1,9,12,15]])})),be()),lt.abrupt("return",Q.current.promise);case 5:case"end":return lt.stop()}},Ee)}));return function(){return ae.apply(this,arguments)}}(),[ie,be])},r.useBlockLayout=sn,r.useColumnOrder=Dt,r.useExpanded=S,r.useFilters=et,r.useFlexLayout=Tr,r.useGetLatest=N,r.useGlobalFilter=Ht,r.useGridLayout=ti,r.useGroupBy=ht,r.useMountedLayoutEffect=W,r.usePagination=ct,r.useResizeColumns=Zt,r.useRowSelect=fe,r.useRowState=me,r.useSortBy=dr,r.useTable=function(x){for(var V=arguments.length,Q=new Array(V>1?V-1:0),ie=1;ie<V;ie++)Q[ie-1]=arguments[ie];x=Y(x),Q=[F].concat(Q);var be=n.useRef({}),ae=N(be.current);Object.assign(ae(),a({},x,{plugins:Q,hooks:M()})),Q.filter(Boolean).forEach(function(rr){rr(ae().hooks)});var Ee=N(ae().hooks);ae().getHooks=Ee,delete ae().hooks,Object.assign(ae(),I(Ee().useOptions,Y(x)));var Qe=ae(),Ve=Qe.data,Ze=Qe.columns,pt=Qe.initialState,lt=Qe.defaultColumn,gt=Qe.getSubRows,nt=Qe.getRowId,yt=Qe.stateReducer,Rt=Qe.useControlledState,Ot=N(yt),Gt=n.useCallback(function(rr,un){if(!un.type)throw console.info({action:un}),new Error("Unknown Action ");return[].concat(Ee().stateReducers,Array.isArray(Ot())?Ot():[Ot()]).reduce(function(wn,_n){return _n(wn,un,rr,ae())||wn},rr)},[Ee,Ot,ae]),_r=n.useReducer(Gt,void 0,function(){return Gt(pt,{type:d.init})}),Jt=_r[0],St=_r[1],fr=I([].concat(Ee().useControlledState,[Rt]),Jt,{instance:ae()});Object.assign(ae(),{state:fr,dispatch:St});var Mt=n.useMemo(function(){return ve(I(Ee().columns,Ze,{instance:ae()}))},[Ee,ae,Ze].concat(I(Ee().columnsDeps,[],{instance:ae()})));ae().columns=Mt;var hr=n.useMemo(function(){return I(Ee().allColumns,Fe(Mt),{instance:ae()}).map(z)},[Mt,Ee,ae].concat(I(Ee().allColumnsDeps,[],{instance:ae()})));ae().allColumns=hr;var Ir=n.useMemo(function(){for(var rr=[],un=[],wn={},_n=[].concat(hr);_n.length;){var Sr=_n.shift();j({data:Ve,rows:rr,flatRows:un,rowsById:wn,column:Sr,getRowId:nt,getSubRows:gt,accessValueHooks:Ee().accessValue,getInstance:ae})}return[rr,un,wn]},[hr,Ve,nt,gt,Ee,ae]),tr=Ir[0],tt=Ir[1],Hr=Ir[2];Object.assign(ae(),{rows:tr,initialRows:[].concat(tr),flatRows:tt,rowsById:Hr}),D(Ee().useInstanceAfterData,ae());var lr=n.useMemo(function(){return I(Ee().visibleColumns,hr,{instance:ae()}).map(function(rr){return De(rr,lt)})},[Ee,hr,ae,lt].concat(I(Ee().visibleColumnsDeps,[],{instance:ae()})));hr=n.useMemo(function(){var rr=[].concat(lr);return hr.forEach(function(un){rr.find(function(wn){return wn.id===un.id})||rr.push(un)}),rr},[hr,lr]),ae().allColumns=hr;var Dr=n.useMemo(function(){return I(Ee().headerGroups,xt(lr,lt),ae())},[Ee,lr,lt,ae].concat(I(Ee().headerGroupsDeps,[],{instance:ae()})));ae().headerGroups=Dr;var kr=n.useMemo(function(){return Dr.length?Dr[0].headers:[]},[Dr]);ae().headers=kr,ae().flatHeaders=Dr.reduce(function(rr,un){return[].concat(rr,un.headers)},[]),D(Ee().useInstanceBeforeDimensions,ae());var Qr=lr.filter(function(rr){return rr.isVisible}).map(function(rr){return rr.id}).sort().join("_");lr=n.useMemo(function(){return lr.filter(function(rr){return rr.isVisible})},[lr,Qr]),ae().visibleColumns=lr;var Qt=te(kr),Nr=Qt[0],an=Qt[1],Mn=Qt[2];return ae().totalColumnsMinWidth=Nr,ae().totalColumnsWidth=an,ae().totalColumnsMaxWidth=Mn,D(Ee().useInstance,ae()),[].concat(ae().flatHeaders,ae().allColumns).forEach(function(rr){rr.render=q(ae(),rr),rr.getHeaderProps=P(Ee().getHeaderProps,{instance:ae(),column:rr}),rr.getFooterProps=P(Ee().getFooterProps,{instance:ae(),column:rr})}),ae().headerGroups=n.useMemo(function(){return Dr.filter(function(rr,un){return rr.headers=rr.headers.filter(function(wn){return wn.headers?function _n(Sr){return Sr.filter(function(Di){return Di.headers?_n(Di.headers):Di.isVisible}).length}(wn.headers):wn.isVisible}),!!rr.headers.length&&(rr.getHeaderGroupProps=P(Ee().getHeaderGroupProps,{instance:ae(),headerGroup:rr,index:un}),rr.getFooterGroupProps=P(Ee().getFooterGroupProps,{instance:ae(),headerGroup:rr,index:un}),!0)})},[Dr,ae,Ee]),ae().footerGroups=[].concat(ae().headerGroups).reverse(),ae().prepareRow=n.useCallback(function(rr){rr.getRowProps=P(Ee().getRowProps,{instance:ae(),row:rr}),rr.allCells=hr.map(function(un){var wn=rr.values[un.id],_n={column:un,row:rr,value:wn};return _n.getCellProps=P(Ee().getCellProps,{instance:ae(),cell:_n}),_n.render=q(ae(),un,{row:rr,cell:_n,value:wn}),_n}),rr.cells=lr.map(function(un){return rr.allCells.find(function(wn){return wn.column.id===un.id})}),D(Ee().prepareRow,rr,{instance:ae()})},[Ee,ae,hr,lr]),ae().getTableProps=P(Ee().getTableProps,{instance:ae()}),ae().getTableBodyProps=P(Ee().getTableBodyProps,{instance:ae()}),D(Ee().useFinalInstance,ae()),ae()},Object.defineProperty(r,"__esModule",{value:!0})})}(cD,hc)),hc}var nE;function fD(){return nE||(nE=1,function(e){e.exports=dD()}(lD)),Oh}(function(e,t){(function(n,i){e.exports=i(Ki,v2(),aD(),uD(),fD())})(mo,(r,n,i,s,a)=>(()=>{var l={577:g=>{g.exports=n},606:g=>{g.exports=i},156:g=>{g.exports=r},767:g=>{g.exports=a},928:g=>{g.exports=s}},y={};function d(g){var E=y[g];if(E!==void 0)return E.exports;var b=y[g]={exports:{}};return l[g](b,b.exports,d),b.exports}d.n=g=>{var E=g&&g.__esModule?()=>g.default:()=>g;return d.d(E,{a:E}),E},d.d=(g,E)=>{for(var b in E)d.o(E,b)&&!d.o(g,b)&&Object.defineProperty(g,b,{enumerable:!0,get:E[b]})},d.o=(g,E)=>Object.prototype.hasOwnProperty.call(g,E),d.r=g=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})};var m={};return(()=>{d.r(m),d.d(m,{CombinedDataProvider:()=>S,DatasetContext:()=>q,DatasetProvider:()=>J,FileUpload:()=>A,Image:()=>Xe,Link:()=>Et,LoginButton:()=>Wt,LogoutButton:()=>Y,SessionContext:()=>I,SessionProvider:()=>D,Table:()=>ce,TableColumn:()=>w,Text:()=>de,ThingContext:()=>Fe,ThingProvider:()=>z,Value:()=>Le,Video:()=>Tt,useDataset:()=>L,useFile:()=>Je,useSession:()=>Yt,useThing:()=>wt});var g=d(156),E=d.n(g),b=d(577),P=d(606);const I=(0,g.createContext)({login:P.login,logout:P.logout,fetch:P.fetch,session:(0,P.getDefaultSession)(),sessionRequestInProgress:!0,profile:void 0}),D=({sessionId:we,children:Ue,onError:ge,sessionRequestInProgress:pe,restorePreviousSession:Me,skipLoadingProfile:at,onSessionRestore:rt})=>{const et=Me||typeof rt<"u",[it,Lt]=(0,g.useState)((0,P.getDefaultSession)()),[Ht,Bt]=(0,g.useState)();(0,g.useEffect)(()=>{rt!==void 0&&(0,P.onSessionRestore)(rt)},[rt]);const qt=typeof pe>"u"?!it.info.isLoggedIn:pe,[sr,Vt]=(0,g.useState)(qt);let _t;typeof window<"u"&&(_t=window.location),(0,g.useEffect)(()=>{(0,P.handleIncomingRedirect)({url:window.location.href,restorePreviousSession:et}).then(async bt=>{if(at!==!0&&(bt==null?void 0:bt.webId)!==void 0){const Kt=await(0,b.getProfileAll)(bt==null?void 0:bt.webId,{fetch:it.fetch});Bt(Kt)}}).catch(bt=>{if(ge)ge(bt);else throw bt}).finally(()=>{Vt(!1)}),(0,P.getDefaultSession)().on("logout",()=>{Lt((0,P.getDefaultSession)())})},[it,we,ge,_t,et,at]);const cr=async bt=>{Vt(!0);try{await(0,P.login)(bt)}catch(Kt){if(ge)ge(Kt);else throw Kt}finally{Vt(!1)}},ht=async()=>{try{await(0,P.logout)(),Bt(void 0)}catch(bt){if(ge)ge(bt);else throw bt}};return E().createElement(I.Provider,{value:{session:it,login:cr,logout:ht,sessionRequestInProgress:sr,setSessionRequestInProgress:Vt,fetch:P.fetch,profile:Ht}},Ue)};function A({saveLocation:we,onError:Ue,onSave:ge,inputProps:pe,autosave:Me}){const{fetch:at}=(0,g.useContext)(I),rt=async et=>{const it=et.target;if(it.files&&Me)try{const Lt=await(0,b.saveFileInContainer)(we,it.files[0],{slug:it.files[0].name?it.files[0].name:void 0,fetch:at});ge&&ge(Lt)}catch(Lt){Ue&&Ue(Lt)}};return E().createElement(E().Fragment,null,E().createElement("input",Object.assign({type:"file"},pe,{onChange:et=>rt(et),"data-testid":"form-input"})))}var R=d(928),N=d.n(R);function L(we,Ue){const{fetch:ge}=(0,g.useContext)(I),{solidDataset:pe}=(0,g.useContext)(q),{data:Me,error:at}=N()(we?[we,Ue,ge]:null,()=>{const et=Object.assign({fetch:ge},Ue);return(0,b.getSolidDataset)(we,et)});return{dataset:we?Me:pe,error:at}}const W=(0,g.createContext)({solidDataset:void 0,setDataset:()=>{}}),q=W,J=({children:we,onError:Ue,solidDataset:ge,datasetUrl:pe,loading:Me,loadingComponent:at})=>{const{dataset:rt,error:et}=L(pe);et&&Ue&&Ue(et);const it=ge??rt,[Lt,Ht]=(0,g.useState)(it);(0,g.useEffect)(()=>{Ht(it)},[it]);let Bt=at&&E().createElement(at,null)||Me||E().createElement("span",null,"Fetching data...");return at===null&&(Bt=null),E().createElement(W.Provider,{value:{solidDataset:Lt,setDataset:Ht}},Lt?we:Bt)},ve=(0,g.createContext)({thing:null,setThing:()=>{}}),Fe=ve,z=({children:we,thing:Ue,thingUrl:ge})=>{const{solidDataset:pe}=(0,g.useContext)(q);let Me=Ue;pe&&ge&&(Me=(0,b.getThing)(pe,ge));const[at,rt]=(0,g.useState)(Me||null);return(0,g.useEffect)(()=>{pe&&ge?rt((0,b.getThing)(pe,ge)):Ue&&rt(Ue)},[pe,ge,Ue]),E().createElement(ve.Provider,{value:{thing:at,setThing:rt}},we)},De=async(we,Ue,ge,pe,Me,at,rt)=>{try{return Me!==void 0&&Ue.size>Me*1024?(ge.setCustomValidity(`The selected file must not be larger than ${Me}kB`),ge.reportValidity(),null):(ge.setCustomValidity(""),await(0,b.overwriteFile)(we,Ue,{fetch:pe}),at&&at(),URL.createObjectURL(Ue))}catch(et){return rt&&rt(et),null}},xt=async(we,Ue)=>await(0,b.getFile)(we,{fetch:Ue});function ft(we,Ue,ge,pe){switch(we){case"boolean":return(0,b.getBoolean)(Ue,ge);case"datetime":return(0,b.getDatetime)(Ue,ge);case"decimal":return(0,b.getDecimal)(Ue,ge);case"integer":return(0,b.getInteger)(Ue,ge);case"url":return(0,b.getUrl)(Ue,ge);default:return pe?(0,b.getStringWithLocale)(Ue,ge,pe):(0,b.getStringNoLocale)(Ue,ge)}}function Te(we,Ue,ge,pe){switch(we){case"boolean":return(0,b.getBooleanAll)(Ue,ge);case"datetime":return(0,b.getDatetimeAll)(Ue,ge);case"decimal":return(0,b.getDecimalAll)(Ue,ge);case"integer":return(0,b.getIntegerAll)(Ue,ge);case"url":return(0,b.getUrlAll)(Ue,ge);default:return pe?(0,b.getStringWithLocaleAll)(Ue,ge,pe):(0,b.getStringNoLocaleAll)(Ue,ge)}}function He(we,Ue,ge,pe,Me){return pe.find(at=>we(Ue,ge,at,Me))||pe[0]}function st(we){const{dataset:Ue,thing:ge,properties:pe,property:Me,type:at,locale:rt}=we,{solidDataset:et,setDataset:it=()=>{}}=(0,g.useContext)(q),Lt=Ue||et,{thing:Ht,setThing:Bt=()=>{}}=(0,g.useContext)(Fe),qt=ge||Ht||void 0;let sr;qt||(sr=new Error("Thing not found as property or in context"));const Vt=qt&&pe?He(ft,at,qt,pe,rt)||pe[0]:Me;if(!Vt)throw new Error("No property provided");const _t=qt&&Vt?ft(at,qt,Vt,rt):null;return{dataset:Lt,thing:qt,property:Vt,error:sr,value:_t,setDataset:it,setThing:Bt}}function Ct(){const[we,Ue]=(0,g.useState)(null);return(0,g.useEffect)(()=>{const ge=document.createElement("input");ge.type="datetime-local",Ue(ge.type!=="text")},[]),we}async function $e(we,Ue){const ge=await(0,b.getSolidDataset)(we);Ue(ge)}function Je(we){const[Ue,ge]=(0,g.useState)(),[pe,Me]=(0,g.useState)(!1),[at,rt]=(0,g.useState)(),{fetch:et}=(0,g.useContext)(I);return(0,g.useEffect)(()=>{we&&(Me(!0),xt(we,et).then(it=>{rt(it),Me(!1)}).catch(it=>{ge(it),Me(!1)}))},[we,et]),{error:Ue,inProgress:pe,data:at}}var ke=function(we,Ue){var ge={};for(var pe in we)Object.prototype.hasOwnProperty.call(we,pe)&&Ue.indexOf(pe)<0&&(ge[pe]=we[pe]);if(we!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Me=0,pe=Object.getOwnPropertySymbols(we);Me<pe.length;Me++)Ue.indexOf(pe[Me])<0&&Object.prototype.propertyIsEnumerable.call(we,pe[Me])&&(ge[pe[Me]]=we[pe[Me]]);return ge};function Xe(we){var{thing:Ue,property:ge,properties:pe,edit:Me,autosave:at,allowDelete:rt,onSave:et,onError:it,maxSize:Lt,alt:Ht,inputProps:Bt,errorComponent:qt,loadingComponent:sr,deleteComponent:Vt,saveLocation:_t,solidDataset:cr}=we,ht=ke(we,["thing","property","properties","edit","autosave","allowDelete","onSave","onError","maxSize","alt","inputProps","errorComponent","loadingComponent","deleteComponent","saveLocation","solidDataset"]);const{fetch:bt}=(0,g.useContext)(I),Kt=st({thing:Ue,property:ge,properties:pe,type:"url"}),{value:Ft,thing:gr,error:zt}=Kt;let Ur;Ft||(Ur=new Error("No value found for property."));const Xt=!gr&&!zt,[Ut,It]=(0,g.useState)(zt??Ur);(0,g.useEffect)(()=>{Ut&&it&&it(Ut)},[Ut,it,qt]);const[Wr,Or]=(0,g.useState)(),{data:Mr,error:dr,inProgress:Rr}=Je(Ft);(0,g.useEffect)(()=>{if(Rr)return;if(dr){It(dr);return}const ct=Mr&&URL.createObjectURL(Mr);ct&&Or(ct)},[Mr,Rr,dr]);const nn=async()=>{if(!(!Ue||!cr||!ge||typeof Ft!="string"||!at))try{const ct=(0,b.removeUrl)(Ue,ge,Ft),vn=(0,b.setThing)(cr,ct),Ln=(0,b.getSourceUrl)(cr);if(!Ln)return;await(0,b.saveSolidDatasetAt)(Ln,vn,{fetch:bt})}catch(ct){It(ct)}},Xr=async ct=>{const vn=ct.files;if(at&&vn&&vn.length>0){if(Ft){const Ln=await De(Ft,vn[0],ct,bt,Lt,et,it);Ln&&Or(Ln)}else if(!Ft&&_t){const Ln=await(0,b.saveFileInContainer)(_t,vn[0],{fetch:bt}),ui=(0,b.getSourceUrl)(Ln);if(ui&&Ue&&ge&&cr){Or(ui);try{const Tn=(0,b.addUrl)(Ue,ge,ui),bn=(0,b.setThing)(cr,Tn),f=(0,b.getSourceUrl)(cr);if(!f)return;await(0,b.saveSolidDatasetAt)(f,bn,{fetch:bt})}catch(Tn){It(Tn)}}}}};let Br=null;if(Xt||Rr){let ct=sr&&E().createElement(sr,null)||E().createElement("span",null,"fetching data in progress");return sr===null&&(ct=null),ct}return Ut?Br=qt?E().createElement(qt,{error:Ut}):E().createElement("span",null,Ut.toString()):Ft&&(Br=E().createElement("img",Object.assign({src:Wr,alt:Ht??""},ht))),E().createElement(E().Fragment,null,Br,Me&&E().createElement("input",Object.assign({},Bt,{type:"file",accept:"image/*",onChange:ct=>Xr(ct.target)})),rt&&(Vt?E().createElement(Vt,{onClick:nn}):E().createElement("button",{type:"button",onClick:nn},"Delete")))}var vt=function(we,Ue){var ge={};for(var pe in we)Object.prototype.hasOwnProperty.call(we,pe)&&Ue.indexOf(pe)<0&&(ge[pe]=we[pe]);if(we!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Me=0,pe=Object.getOwnPropertySymbols(we);Me<pe.length;Me++)Ue.indexOf(pe[Me])<0&&Object.prototype.propertyIsEnumerable.call(we,pe[Me])&&(ge[pe[Me]]=we[pe[Me]]);return ge};const vr=we=>{var Ue;const{thing:ge,solidDataset:pe,property:Me,properties:at,saveDatasetTo:rt,onSave:et,onError:it,edit:Lt,autosave:Ht,inputProps:Bt}=we,qt=vt(we,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:sr}=(0,g.useContext)(I),{value:Vt,thing:_t,property:cr,dataset:ht,setDataset:bt,error:Kt}=st({dataset:pe,thing:ge,type:"datetime",property:Me,properties:at}),Ft=Ct();(0,g.useEffect)(()=>{Kt&&it&&it(Kt)},[Kt,it]);const gr=Vt?Vt.toISOString().substring(0,Vt.toISOString().length-5):null,[zt,Ur]=(0,g.useState)(gr);let Xt="";Ft||(Xt=zt==null?void 0:zt.split(/T(.+)/)[0].toString());let Ut="00:00";Ft||(Ut=(Ue=zt==null?void 0:zt.split(/T(.+)/)[1])===null||Ue===void 0?void 0:Ue.toString());const[It,Wr]=(0,g.useState)(Ut),[Or,Mr]=(0,g.useState)(Xt);(0,g.useEffect)(()=>{!It&&!Or||Ft||Ur(`${Or??""}T${It??"00:00"}`)},[It,Or,Ft]);const dr=async nn=>{if(gr!==zt&&_t&&ht&&nn.target.reportValidity()){const Xr=zt,Br=(0,b.setDatetime)(_t,cr,new Date(`${Xr}Z`));try{let ct;rt?(ct=await(0,b.saveSolidDatasetAt)(rt,(0,b.setThing)(ht,Br),{fetch:sr}),await $e(rt,bt)):(0,b.hasResourceInfo)(ht)?(ct=await(0,b.saveSolidDatasetAt)((0,b.getSourceUrl)(ht),(0,b.setThing)(ht,Br),{fetch:sr}),await $e((0,b.getSourceUrl)(ht),bt)):it&&it(new Error("Please provide saveDatasetTo location for new data")),!Kt&&et&&et(ct,Br)}catch(ct){it&&it(ct)}}};let Rr;return Ft?Rr="datetime-local":Rr="datetime-workaround",E().createElement(E().Fragment,null,!Lt&&ht&&_t&&E().createElement("span",Object.assign({},qt),`${zt}`),Lt&&ht&&_t&&Rr==="datetime-local"&&E().createElement("input",Object.assign({type:Rr,"aria-label":"Date and Time",step:"any"},Bt,{onChange:nn=>{Ur(nn.target.value)},onBlur:nn=>Ht&&dr(nn),value:zt,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}",placeholder:"yyyy-mm-ddThh:mm"})),Lt&&ht&&_t&&Rr==="datetime-workaround"&&E().createElement(E().Fragment,null,E().createElement("input",Object.assign({type:"date","aria-label":"Date",step:"any"},Bt,{onChange:nn=>{Mr(nn.target.value)},onBlur:nn=>Ht&&dr(nn),value:Or,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}",placeholder:"yyyy-mm-dd"})),E().createElement("input",{type:"time","aria-label":"Time",value:It,onChange:nn=>Wr(nn.target.value),onBlur:nn=>Ht&&dr(nn),pattern:"[0-9]{2}:[0-9]{2}"})))};vr.defaultProps={autosave:!1,edit:!1};const pr=vr;var Nt=function(we,Ue){var ge={};for(var pe in we)Object.prototype.hasOwnProperty.call(we,pe)&&Ue.indexOf(pe)<0&&(ge[pe]=we[pe]);if(we!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Me=0,pe=Object.getOwnPropertySymbols(we);Me<pe.length;Me++)Ue.indexOf(pe[Me])<0&&Object.prototype.propertyIsEnumerable.call(we,pe[Me])&&(ge[pe[Me]]=we[pe[Me]]);return ge};const Fr=we=>{var Ue;const{thing:ge,solidDataset:pe,property:Me,properties:at,saveDatasetTo:rt,locale:et,onSave:it,onError:Lt,edit:Ht,autosave:Bt,inputProps:qt}=we,sr=Nt(we,["thing","solidDataset","property","properties","saveDatasetTo","locale","onSave","onError","edit","autosave","inputProps"]),{fetch:Vt}=(0,g.useContext)(I),{value:_t,thing:cr,property:ht,dataset:bt,setDataset:Kt,error:Ft}=st({dataset:pe,thing:ge,type:"string",property:Me,properties:at,locale:et});(0,g.useEffect)(()=>{Ft&&Lt&&Lt(Ft)},[Ft,Lt]);const gr=(Ue=_t==null?void 0:_t.toString())!==null&&Ue!==void 0?Ue:"",[zt,Ur]=(0,g.useState)(gr),Xt=async Ut=>{if(gr!==zt&&cr&&bt&&Ut.target.reportValidity()){let It;et?It=(0,b.setStringWithLocale)(cr,ht,zt,et):It=(0,b.setStringNoLocale)(cr,ht,zt);try{let Wr;rt?(Wr=await(0,b.saveSolidDatasetAt)(rt,(0,b.setThing)(bt,It),{fetch:Vt}),await $e(rt,Kt)):(0,b.hasResourceInfo)(bt)?(Wr=await(0,b.saveSolidDatasetAt)((0,b.getSourceUrl)(bt),(0,b.setThing)(bt,It),{fetch:Vt}),await $e((0,b.getSourceUrl)(bt),Kt)):Lt&&Lt(new Error("Please provide saveDatasetTo location for new data")),!Ft&&it&&it(Wr,It)}catch(Wr){Lt&&Lt(Wr)}}};return E().createElement(E().Fragment,null,!Ht&&bt&&cr&&E().createElement("span",Object.assign({},sr),zt),Ht&&bt&&cr&&E().createElement("input",Object.assign({type:"text"},qt,{onChange:Ut=>{Ur(Ut.target.value)},onBlur:Ut=>Bt&&Xt(Ut),value:zt})))};Fr.defaultProps={autosave:!1,edit:!1};const ar=Fr;var Pt=function(we,Ue){var ge={};for(var pe in we)Object.prototype.hasOwnProperty.call(we,pe)&&Ue.indexOf(pe)<0&&(ge[pe]=we[pe]);if(we!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Me=0,pe=Object.getOwnPropertySymbols(we);Me<pe.length;Me++)Ue.indexOf(pe[Me])<0&&Object.prototype.propertyIsEnumerable.call(we,pe[Me])&&(ge[pe[Me]]=we[pe[Me]]);return ge};const Ye=we=>{var Ue;const{thing:ge,solidDataset:pe,property:Me,properties:at,saveDatasetTo:rt,onSave:et,onError:it,edit:Lt,autosave:Ht,inputProps:Bt}=we,qt=Pt(we,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:sr}=(0,g.useContext)(I),{value:Vt,thing:_t,property:cr,dataset:ht,setDataset:bt,error:Kt}=st({dataset:pe,thing:ge,type:"boolean",property:Me,properties:at});(0,g.useEffect)(()=>{Kt&&it&&it(Kt)},[Kt,it]);let Ft=Vt,gr=!1;gr=(Ue=Vt)!==null&&Ue!==void 0?Ue:!1,Ft=gr.toString();const[zt,Ur]=(0,g.useState)(Ft),[Xt,Ut]=(0,g.useState)(gr);(0,g.useEffect)(()=>{Ur(Xt.toString())},[Xt]);const It=async Wr=>{if(Ft!==zt&&_t&&ht&&Wr.target.reportValidity()){const Or=(0,b.setBoolean)(_t,cr,Xt);try{let Mr;rt?(Mr=await(0,b.saveSolidDatasetAt)(rt,(0,b.setThing)(ht,Or),{fetch:sr}),await $e(rt,bt)):(0,b.hasResourceInfo)(ht)?(Mr=await(0,b.saveSolidDatasetAt)((0,b.getSourceUrl)(ht),(0,b.setThing)(ht,Or),{fetch:sr}),await $e((0,b.getSourceUrl)(ht),bt)):it&&it(new Error("Please provide saveDatasetTo location for new data")),!Kt&&et&&et(Mr,Or)}catch(Mr){it&&it(Mr)}}};return E().createElement(E().Fragment,null,!Lt&&ht&&_t&&E().createElement("span",Object.assign({},qt),`${zt}`),Lt&&ht&&_t&&E().createElement("input",Object.assign({type:"checkbox",checked:Xt},Bt,{onChange:Wr=>{Ut(Wr.target.checked)},onBlur:Wr=>Ht&&It(Wr),value:zt})))};Ye.defaultProps={autosave:!1,edit:!1};const We=Ye;var ee=function(we,Ue){var ge={};for(var pe in we)Object.prototype.hasOwnProperty.call(we,pe)&&Ue.indexOf(pe)<0&&(ge[pe]=we[pe]);if(we!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Me=0,pe=Object.getOwnPropertySymbols(we);Me<pe.length;Me++)Ue.indexOf(pe[Me])<0&&Object.prototype.propertyIsEnumerable.call(we,pe[Me])&&(ge[pe[Me]]=we[pe[Me]]);return ge};const M=we=>{var Ue;const{thing:ge,solidDataset:pe,property:Me,properties:at,saveDatasetTo:rt,onSave:et,onError:it,edit:Lt,autosave:Ht,inputProps:Bt}=we,qt=ee(we,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:sr}=(0,g.useContext)(I),{value:Vt,thing:_t,property:cr,dataset:ht,setDataset:bt,error:Kt}=st({dataset:pe,thing:ge,type:"url",property:Me,properties:at});(0,g.useEffect)(()=>{Kt&&it&&it(Kt)},[Kt,it]);const Ft=(Ue=Vt==null?void 0:Vt.toString())!==null&&Ue!==void 0?Ue:"",[gr,zt]=(0,g.useState)(Ft),Ur=async Xt=>{if(Ft!==gr&&_t&&ht&&Xt.target.reportValidity()){const Ut=(0,b.setUrl)(_t,cr,gr);try{let It;rt?(It=await(0,b.saveSolidDatasetAt)(rt,(0,b.setThing)(ht,Ut),{fetch:sr}),await $e(rt,bt)):(0,b.hasResourceInfo)(ht)?(It=await(0,b.saveSolidDatasetAt)((0,b.getSourceUrl)(ht),(0,b.setThing)(ht,Ut),{fetch:sr}),await $e((0,b.getSourceUrl)(ht),bt)):it&&it(new Error("Please provide saveDatasetTo location for new data")),!Kt&&et&&et(It,Ut)}catch(It){it&&it(It)}}};return E().createElement(E().Fragment,null,!Lt&&ht&&_t&&E().createElement("span",Object.assign({},qt),`${gr}`),Lt&&ht&&_t&&E().createElement("input",Object.assign({type:"url"},Bt,{onChange:Xt=>{zt(Xt.target.value)},onBlur:Xt=>Ht&&Ur(Xt),value:gr})))};M.defaultProps={autosave:!1,edit:!1};const F=M;var K=function(we,Ue){var ge={};for(var pe in we)Object.prototype.hasOwnProperty.call(we,pe)&&Ue.indexOf(pe)<0&&(ge[pe]=we[pe]);if(we!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Me=0,pe=Object.getOwnPropertySymbols(we);Me<pe.length;Me++)Ue.indexOf(pe[Me])<0&&Object.prototype.propertyIsEnumerable.call(we,pe[Me])&&(ge[pe[Me]]=we[pe[Me]]);return ge};const re=we=>{var Ue;const{thing:ge,solidDataset:pe,property:Me,properties:at,saveDatasetTo:rt,onSave:et,onError:it,edit:Lt,autosave:Ht,inputProps:Bt}=we,qt=K(we,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:sr}=(0,g.useContext)(I),{value:Vt,thing:_t,property:cr,dataset:ht,setDataset:bt,error:Kt}=st({dataset:pe,thing:ge,type:"integer",property:Me,properties:at});(0,g.useEffect)(()=>{Kt&&it&&it(Kt)},[Kt,it]);const Ft=(Ue=Vt==null?void 0:Vt.toString())!==null&&Ue!==void 0?Ue:"",[gr,zt]=(0,g.useState)(Ft),Ur=async Xt=>{if(Ft!==gr&&_t&&ht&&Xt.target.reportValidity()){const Ut=(0,b.setInteger)(_t,cr,parseInt(gr,10));try{let It;rt?(It=await(0,b.saveSolidDatasetAt)(rt,(0,b.setThing)(ht,Ut),{fetch:sr}),await $e(rt,bt)):(0,b.hasResourceInfo)(ht)?(It=await(0,b.saveSolidDatasetAt)((0,b.getSourceUrl)(ht),(0,b.setThing)(ht,Ut),{fetch:sr}),await $e((0,b.getSourceUrl)(ht),bt)):it&&it(new Error("Please provide saveDatasetTo location for new data")),!Kt&&et&&et(It,Ut)}catch(It){it&&it(It)}}};return E().createElement(E().Fragment,null,!Lt&&ht&&_t&&E().createElement("span",Object.assign({},qt),`${gr}`),Lt&&ht&&_t&&E().createElement("input",Object.assign({type:"number",step:"any"},Bt,{onChange:Xt=>{zt(Xt.target.value)},onBlur:Xt=>Ht&&Ur(Xt),value:gr})))};re.defaultProps={autosave:!1,edit:!1};const B=re;var C=function(we,Ue){var ge={};for(var pe in we)Object.prototype.hasOwnProperty.call(we,pe)&&Ue.indexOf(pe)<0&&(ge[pe]=we[pe]);if(we!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Me=0,pe=Object.getOwnPropertySymbols(we);Me<pe.length;Me++)Ue.indexOf(pe[Me])<0&&Object.prototype.propertyIsEnumerable.call(we,pe[Me])&&(ge[pe[Me]]=we[pe[Me]]);return ge};const U=we=>{var Ue;const{thing:ge,solidDataset:pe,property:Me,properties:at,saveDatasetTo:rt,onSave:et,onError:it,edit:Lt,autosave:Ht,inputProps:Bt}=we,qt=C(we,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:sr}=(0,g.useContext)(I),{value:Vt,thing:_t,property:cr,dataset:ht,setDataset:bt,error:Kt}=st({dataset:pe,thing:ge,type:"decimal",property:Me,properties:at});(0,g.useEffect)(()=>{Kt&&it&&it(Kt)},[Kt,it]);const Ft=(Ue=Vt==null?void 0:Vt.toString())!==null&&Ue!==void 0?Ue:"",[gr,zt]=(0,g.useState)(Ft),Ur=async Xt=>{if(Ft!==gr&&_t&&ht&&Xt.target.reportValidity()){const Ut=(0,b.setDecimal)(_t,cr,parseFloat(gr));try{let It;rt?(It=await(0,b.saveSolidDatasetAt)(rt,(0,b.setThing)(ht,Ut),{fetch:sr}),await $e(rt,bt)):(0,b.hasResourceInfo)(ht)?(It=await(0,b.saveSolidDatasetAt)((0,b.getSourceUrl)(ht),(0,b.setThing)(ht,Ut),{fetch:sr}),await $e((0,b.getSourceUrl)(ht),bt)):it&&it(new Error("Please provide saveDatasetTo location for new data")),!Kt&&et&&et(It,Ut)}catch(It){it&&it(It)}}};return E().createElement(E().Fragment,null,!Lt&&ht&&_t&&E().createElement("span",Object.assign({},qt),`${gr}`),Lt&&ht&&_t&&E().createElement("input",Object.assign({type:"number",step:"any"},Bt,{onChange:Xt=>{zt(Xt.target.value)},onBlur:Xt=>Ht&&Ur(Xt),value:gr})))};U.defaultProps={autosave:!1,edit:!1};const ne=U;var Re=function(we,Ue){var ge={};for(var pe in we)Object.prototype.hasOwnProperty.call(we,pe)&&Ue.indexOf(pe)<0&&(ge[pe]=we[pe]);if(we!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Me=0,pe=Object.getOwnPropertySymbols(we);Me<pe.length;Me++)Ue.indexOf(pe[Me])<0&&Object.prototype.propertyIsEnumerable.call(we,pe[Me])&&(ge[pe[Me]]=we[pe[Me]]);return ge};function Le(we){const Ue=we,{dataType:ge}=Ue,pe=Re(Ue,["dataType"]),{thing:Me,solidDataset:at,property:rt,properties:et,edit:it,loadingComponent:Lt,errorComponent:Ht,locale:Bt}=pe,{thing:qt,value:sr,error:Vt}=st({dataset:at,thing:Me,property:rt,properties:et,type:ge,locale:Bt});let _t;!it&&!sr&&ge!=="boolean"&&(_t=new Error("No value found for property."));const cr=!qt&&!Vt,[ht]=(0,g.useState)(Vt??_t);if(cr){let Kt=Lt&&E().createElement(Lt,null)||E().createElement("span",null,"fetching data in progress");return Lt===null&&(Kt=null),Kt}if(ht)return Ht?E().createElement(Ht,{error:ht}):E().createElement("span",null,ht.toString());let bt=ar;switch(ge){case"boolean":bt=We;break;case"datetime":bt=pr;break;case"decimal":bt=ne;break;case"integer":bt=B;break;case"url":bt=F;break;default:bt=ar}return E().createElement(bt,Object.assign({},pe))}Le.defaultProps={autosave:!1,edit:!1};var qe=function(we,Ue){var ge={};for(var pe in we)Object.prototype.hasOwnProperty.call(we,pe)&&Ue.indexOf(pe)<0&&(ge[pe]=we[pe]);if(we!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Me=0,pe=Object.getOwnPropertySymbols(we);Me<pe.length;Me++)Ue.indexOf(pe[Me])<0&&Object.prototype.propertyIsEnumerable.call(we,pe[Me])&&(ge[pe[Me]]=we[pe[Me]]);return ge};function Et(we){var{children:Ue,property:ge,properties:pe,thing:Me,solidDataset:at,autosave:rt,rel:et,target:it,edit:Lt,loadingComponent:Ht,errorComponent:Bt,onSave:qt,onError:sr}=we,Vt=qe(we,["children","property","properties","thing","solidDataset","autosave","rel","target","edit","loadingComponent","errorComponent","onSave","onError"]);const{value:_t,thing:cr,property:ht,dataset:bt,error:Kt}=st({dataset:at,thing:Me,property:ge,properties:pe,type:"url"});let Ft;!Lt&&!_t&&(Ft=new Error("URL not found for given property"));const gr=!cr&&!Kt,[zt]=(0,g.useState)(Kt??Ft);if(gr){let Xt=Ht&&E().createElement(Ht,null)||E().createElement("span",null,"fetching data in progress");return Ht===null&&(Xt=null),Xt}if(zt)return Bt?E().createElement(Bt,{error:zt}):E().createElement("span",null,zt.toString());const Ur=et||(it==="_blank"?"noopener noreferrer":"nofollow");return Lt?E().createElement(Le,{dataType:"url",solidDataset:bt,thing:cr,property:ht,autosave:rt,onSave:qt,onError:sr,edit:!0}):E().createElement("a",Object.assign({href:_t,rel:Ur,target:it},Vt),Ue??_t)}const Wt=({oidcIssuer:we,redirectUrl:Ue,children:ge,authOptions:pe,onError:Me})=>{const at=Object.assign({redirectUrl:Ue,oidcIssuer:we},pe),{login:rt,setSessionRequestInProgress:et}=(0,g.useContext)(I);async function it(){et(!0);try{await rt(at),et(!1)}catch(Ht){et(!1),Me&&Me(Ht)}}function Lt(Ht){return Ht.preventDefault(),Ht.key==="Enter"?it():Promise.resolve()}return ge?E().createElement("div",{role:"button",tabIndex:0,onClick:it,onKeyDown:Lt},ge):E().createElement("button",{type:"button",onClick:it,onKeyDown:Lt},"Log In")},Y=({children:we,onLogout:Ue,onError:ge})=>{const{logout:pe}=(0,g.useContext)(I);async function Me(){try{await pe(),Ue&&Ue()}catch(rt){ge&&ge(rt)}}function at(rt){return rt.preventDefault(),rt.key==="Enter"?Me():Promise.resolve()}return we?E().createElement("div",{role:"button",tabIndex:0,onClick:Me,onKeyDown:at},we):E().createElement("button",{type:"button",onClick:Me,onKeyDown:at},"Log Out")};var te=d(767);function j(we){const{children:Ue,solidDataset:ge,datasetUrl:pe,thing:Me,thingUrl:at,onError:rt,loadingComponent:et}=we;return E().createElement(J,{onError:rt,solidDataset:ge,datasetUrl:pe,loadingComponent:et},E().createElement(z,{thing:Me,thingUrl:at},Ue))}const S=j;var k=function(we,Ue){var ge={};for(var pe in we)Object.prototype.hasOwnProperty.call(we,pe)&&Ue.indexOf(pe)<0&&(ge[pe]=we[pe]);if(we!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Me=0,pe=Object.getOwnPropertySymbols(we);Me<pe.length;Me++)Ue.indexOf(pe[Me])<0&&Object.prototype.propertyIsEnumerable.call(we,pe[Me])&&(ge[pe[Me]]=we[pe[Me]]);return ge};function w(we){throw new Error("Can't use TableColumn outside a Table.")}function ce(we){var{children:Ue,emptyStateComponent:ge,things:pe,filter:Me,ascIndicator:at,descIndicator:rt,getRowProps:et}=we,it=k(we,["children","emptyStateComponent","things","filter","ascIndicator","descIndicator","getRowProps"]);const{columns:Lt,data:Ht}=(0,g.useMemo)(()=>{const ht=[],bt=pe.map(()=>({}));return g.Children.forEach(Ue,(Kt,Ft)=>{if(Kt){const{property:gr,header:zt,body:Ur,dataType:Xt="string",locale:Ut,multiple:It=!1,sortable:Wr,sortFn:Or,filterable:Mr}=Kt.props;if(ht.push({Header:zt??`${gr}`,accessor:`col${Ft}`,disableGlobalFilter:!Mr,disableSortBy:!Wr,Cell:Ur??(({value:dr})=>dr!=null?`${dr}`:"")}),Or){const dr=(Rr,nn,Xr)=>{const Br=Rr.values[Xr],ct=nn.values[Xr];return Or(Br,ct)};ht[Ft].sortType=dr}else Xt==="string"&&(ht[Ft].sortType=Xt),(Xt==="integer"||Xt==="decimal")&&(ht[Ft].sortType="number");pe.forEach((dr,Rr)=>{bt[Rr][`col${Ft}`]=It?Te(Xt,dr.thing,gr,Ut):ft(Xt,dr.thing,gr,Ut)})}}),{columns:ht,data:bt}},[Ue,pe]),Bt=(0,te.useTable)({columns:Lt,data:Ht,initialState:{globalFilter:Me||void 0}},te.useGlobalFilter,te.useSortBy),{getTableProps:qt,getTableBodyProps:sr,headerGroups:Vt,rows:_t,prepareRow:cr}=Bt;return _t.length?E().createElement("table",Object.assign({},qt(),it),E().createElement("thead",null,Vt.map(ht=>E().createElement("tr",Object.assign({},ht.getHeaderGroupProps()),ht.headers.map(bt=>E().createElement("th",Object.assign({},bt.getHeaderProps(bt.getSortByToggleProps())),bt.render("Header"),bt.isSorted&&(bt.isSortedDesc?rt:at)))))),E().createElement("tbody",Object.assign({},sr()),_t.map(ht=>{cr(ht);const bt=pe[ht.index].dataset,Kt=pe[ht.index].thing;return E().createElement("tr",Object.assign({},ht.getRowProps(et(ht,Kt,bt))),E().createElement(S,{solidDataset:bt,thing:Kt},ht.cells.map(Ft=>E().createElement("td",Object.assign({},Ft.getCellProps()),Ft.render("Cell")))))}))):ge?E().createElement(ge,null):null}ce.defaultProps={filter:void 0,ascIndicator:E().createElement("span",{role:"img","aria-label":"Sorted in ascending order"}," ",""),descIndicator:E().createElement("span",{role:"img","aria-label":"Sorted in descending order"}," ",""),getRowProps:()=>({})};var Ae=function(we,Ue){var ge={};for(var pe in we)Object.prototype.hasOwnProperty.call(we,pe)&&Ue.indexOf(pe)<0&&(ge[pe]=we[pe]);if(we!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Me=0,pe=Object.getOwnPropertySymbols(we);Me<pe.length;Me++)Ue.indexOf(pe[Me])<0&&Object.prototype.propertyIsEnumerable.call(we,pe[Me])&&(ge[pe[Me]]=we[pe[Me]]);return ge};function de(we){var{thing:Ue,solidDataset:ge,property:pe,properties:Me,saveDatasetTo:at,locale:rt,onSave:et,onError:it,inputProps:Lt,errorComponent:Ht,loadingComponent:Bt,edit:qt=!1,autosave:sr=!1}=we,Vt=Ae(we,["thing","solidDataset","property","properties","saveDatasetTo","locale","onSave","onError","inputProps","errorComponent","loadingComponent","edit","autosave"]);const{fetch:_t}=(0,g.useContext)(I),{error:cr,value:ht,thing:bt,property:Kt,dataset:Ft,setDataset:gr}=st({dataset:ge,thing:Ue,property:pe,properties:Me,type:"string",locale:rt});let zt;!qt&&!ht&&(zt=new Error("No value found for property."));const Ur=!bt&&!cr,[Xt]=(0,g.useState)(cr??zt);(0,g.useEffect)(()=>{Xt&&it&&it(Xt)},[Xt,it]);const[Ut,It]=(0,g.useState)(ht),[,Wr]=(0,g.useState)(),[Or,Mr]=(0,g.useState)(ht),dr=async Rr=>{if(Or!==Rr.target.value&&bt&&Ft){const nn=Rr.target.value;let Xr;rt?Xr=(0,b.setStringWithLocale)(bt,Kt,nn,rt):Xr=(0,b.setStringNoLocale)(bt,Kt,nn);try{let Br;at?(Br=await(0,b.saveSolidDatasetAt)(at,(0,b.setThing)(Ft,Xr),{fetch:_t}),await $e(at,gr)):(0,b.hasResourceInfo)(Ft)?(Br=await(0,b.saveSolidDatasetAt)((0,b.getSourceUrl)(Ft),(0,b.setThing)(Ft,Xr),{fetch:_t}),await $e((0,b.getSourceUrl)(Ft),gr)):Wr(()=>{throw new Error("Please provide saveDatasetTo location for new data")}),et&&et(Br,Xr)}catch(Br){it&&it(Br)}}};if(Ur){let Rr=Bt&&E().createElement(Bt,null)||E().createElement("span",null,"fetching data in progress");return Bt===null&&(Rr=null),Rr}return Xt?Ht?E().createElement(Ht,{error:Xt}):E().createElement("span",null,Xt.toString()):E().createElement(E().Fragment,null,!qt&&Ft&&bt&&E().createElement("span",Object.assign({},Vt),Ut),qt&&Ft&&bt&&E().createElement("input",Object.assign({type:Lt&&Lt.type?Lt.type:"text"},Lt,{onFocus:Rr=>Mr(Rr.target.value),onChange:Rr=>It(Rr.target.value),onBlur:Rr=>sr&&dr(Rr),value:Ut||""})))}var je=function(we,Ue){var ge={};for(var pe in we)Object.prototype.hasOwnProperty.call(we,pe)&&Ue.indexOf(pe)<0&&(ge[pe]=we[pe]);if(we!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Me=0,pe=Object.getOwnPropertySymbols(we);Me<pe.length;Me++)Ue.indexOf(pe[Me])<0&&Object.prototype.propertyIsEnumerable.call(we,pe[Me])&&(ge[pe[Me]]=we[pe[Me]]);return ge};function Tt(we){var{property:Ue,properties:ge,thing:pe,edit:Me,autosave:at,onSave:rt,onError:et,maxSize:it,inputProps:Lt,errorComponent:Ht,loadingComponent:Bt}=we,qt=je(we,["property","properties","thing","edit","autosave","onSave","onError","maxSize","inputProps","errorComponent","loadingComponent"]);const{fetch:sr}=(0,g.useContext)(I),Vt=st({thing:pe,property:Ue,properties:ge,type:"url"}),{value:_t,thing:cr,error:ht}=Vt;let bt;!Me&&!_t&&(bt=new Error("No value found for property."));const Kt=!cr&&!ht,[Ft,gr]=(0,g.useState)(ht??bt);(0,g.useEffect)(()=>{Ft&&et&&et(Ft)},[Ft,et,Ht]);const[zt,Ur]=(0,g.useState)(""),{data:Xt,error:Ut,inProgress:It}=Je(_t);(0,g.useEffect)(()=>{if(It)return;if(Ut){gr(Ut);return}const Mr=Xt&&URL.createObjectURL(Xt);Mr&&Ur(Mr)},[Xt,It,Ut]);const Wr=async Mr=>{const dr=Mr.files;if(at&&dr&&dr.length>0&&_t){const Rr=await De(_t,dr[0],Mr,sr,it,rt,et);Rr&&Ur(Rr)}};let Or=null;if(Kt||It){let Mr=Bt&&E().createElement(Bt,null)||E().createElement("span",null,"fetching data in progress");return Bt===null&&(Mr=null),Mr}return Ft?Or=Ht?E().createElement(Ht,{error:Ft}):E().createElement("span",null,Ft.toString()):_t&&(Or=E().createElement("video",Object.assign({src:zt||_t,controls:!0},qt))),E().createElement(E().Fragment,null,Or,Me&&E().createElement("input",Object.assign({},Lt,{type:"file",accept:"video/*",onChange:Mr=>Wr(Mr.target)})))}function Yt(){const{session:we,sessionRequestInProgress:Ue,fetch:ge,login:pe,logout:Me}=(0,g.useContext)(I);return{session:we,sessionRequestInProgress:Ue,fetch:ge,login:pe,logout:Me}}function wt(we,Ue,ge){const{dataset:pe,error:Me}=L(we,ge),{thing:at}=(0,g.useContext)(Fe);return Ue?pe?{thing:(0,b.getThing)(pe,Ue),error:Me}:{thing:null,error:Me}:{thing:at||void 0,error:Me}}})(),m})())})(_F);const hD=["Bank Statement","Passport","Drivers License"],ts=(e,t,r,n)=>{r.timeoutID&&clearTimeout(r.timeoutID),n({type:"SET_MESSAGE",payload:e});const i=setTimeout(()=>{n({type:"CLEAR_MESSAGE"}),n({type:"CLEAR_DOCUMENT_LOCATION"})},t*1e3);n({type:"SET_TIMEOUT_ID",payload:i})};var Qn=v2(),ox="http://schema.org/";function wr(e){return ox+e}var Lf={PREFIX:"schema-inrupt",NAMESPACE:ox,PREFIX_AND_NAMESPACE:{"schema-inrupt":"http://schema.org/"},NS:wr,Organization:wr("Organization"),Person:wr("Person"),ImageObject:wr("ImageObject"),URL:wr("URL"),MedicalTherapy:wr("MedicalTherapy"),EducationalOccupationalCredential:wr("EducationalOccupationalCredential"),PostalAddress:wr("PostalAddress"),Product:wr("Product"),Event:wr("Event"),alternateName:wr("alternateName"),givenName:wr("givenName"),familyName:wr("familyName"),additionalName:wr("additionalName"),license:wr("license"),name:wr("name"),text:wr("text"),identifier:wr("identifier"),description:wr("description"),image:wr("image"),url:wr("url"),startTime:wr("startTime"),endTime:wr("endTime"),startDate:wr("startDate"),endDate:wr("endDate"),email:wr("email"),primaryPrevention:wr("primaryPrevention"),qualifications:wr("qualifications"),attendee:wr("attendee"),address:wr("address"),streetAddress:wr("streetAddress"),addressLocality:wr("addressLocality"),addressRegion:wr("addressRegion"),postalCode:wr("postalCode"),addressCountry:wr("addressCountry"),accessCode:wr("accessCode"),accountId:wr("accountId"),serialNumber:wr("serialNumber"),productID:wr("productID"),brand:wr("brand"),model:wr("model"),value:wr("value"),distance:wr("distance"),latitude:wr("latitude"),longitude:wr("longitude"),dateModified:wr("dateModified")};const I0="https://opencommons.net",pD=async(e,t)=>{if(!e.file)throw"File missing from submission!";const n=String(t.info.webId.split("profile")[0])+e.type;await Qn.createContainerAt(n,{fetch:t.fetch}).then(m=>{console.log("Dataset Information",m)});const i=await mD(e,`${n}`,t),s=n;let a=await Qn.getSolidDataset(s,{fetch:t.fetch});console.log(a);const l=gD(a),y=Qn.buildThing(Qn.createThing({name:i})).addStringNoLocale(Lf.name,e.file.name).addStringNoLocale(Lf.identifier,e.type).addStringNoLocale(Lf.endDate,e.date).addStringNoLocale(Lf.description,e.description).build();console.log("TTL url",l);let d;if(l!==null)d=await Qn.getSolidDataset(l,{fetch:t.fetch}),console.log("Call original dataset: ",d),d=Qn.setThing(d,y),await Qn.saveSolidDatasetAt(l,s,d,{fetch:t.fetch}).then(m=>{console.log("New dataset: ",m)});else{let m=Qn.createSolidDataset();m=Qn.setThing(m,y),await Qn.saveSolidDatasetInContainer(s,m,{fetch:t.fetch}).then(g=>{console.log("newly generated and uploaded dataset: ",g)})}console.log(`Uploaded ${e.file.name} to pod successfully and set identifier to ${e.type},
    end date to ${e.date}, and description to ${e.description}`)},gD=e=>{const t=Qn.getThingAll(e);if(!t)return null;const r=t.find(n=>n.url.slice(-3)==="ttl");return r||null},yD=e=>{const t=Qn.getThingAll(e);if(t){let r="",n=[];return t.filter(i=>{i.url.slice(-3).includes("/")?r=i:n.push(i)}),[r,n]}else return null},mD=async(e,t,r)=>{try{const n=await Qn.saveFileInContainer(t,e.file,{slug:e.file.name,contentType:e.type,fetch:r.fetch});console.log(`File saved at ${Qn.getSourceUrl(n)}`)}catch(n){console.log(n)}},vD=async(e,t)=>{const r=sx(e,t);try{return await Qn.getSolidDataset(r,{fetch:e.fetch}),r}catch{throw console.log("No Data Found"),"No Data Found"}},wD=async(e,t)=>{const r=sx(e,t);let n=await Qn.getSolidDataset(r,{fetch:e.fetch});const[i,s]=yD(n);return s.filter(async a=>{a.url.slice(-3).includes("/")||await Qn.deleteFile(a.url,{fetch:e.fetch})}),i.url},_D=async(e,t)=>{await Qn.deleteContainer(t,{fetch:e.fetch})},sx=(e,t)=>{const r=String(e.info.webId.split("profile")[0]);switch(t){case"Bank Statement":return`${r}Bank%20Statement/`;case"Passport":return`${r}Passport/`;case"Drivers License":return`${r}Drivers%20License/`;default:return null}},SD=()=>{const{session:e}=_o.useSession(),[t,r]=Ki.useState("http://localhost:3000");return Ki.useEffect(()=>{r(window.location.href)},[r]),$t("section",{id:"login",className:"panel",children:$r("div",{className:"row",children:[$r("label",{id:"labelLogin",htmlFor:"btnLogin",children:["Click the following login button to log into your pod at [",$t("a",{href:I0,target:"_blank",children:I0}),"]:"," "]}),e.info.isLoggedIn?$t(_o.LogoutButton,{children:$t("button",{children:"Logout"})}):$t(_o.LoginButton,{oidcIssuer:I0,redirectUrl:t,onError:console.error,children:$t("button",{children:"Login"})}),e.info.isLoggedIn?$r("p",{className:"labelStatus",role:"alert",children:["Your session is logged in with the WebID [",$t("a",{href:e.info.webId,target:"_blank",children:e.info.webId}),"]."]}):$t("p",{children:"Not logged in"})]})})},bD=(e,t)=>{switch(t.type){case"SET_DOCUMENT_LOCATION":return{...e,documentLocation:t.payload};case"SET_MESSAGE":return{...e,message:t.payload};case"SET_TIMEOUT_ID":return{...e,timeoutID:t.payload};case"SET_FILE":return{...e,file:t.payload};case"CLEAR_DOCUMENT_LOCATION":return ec;case"CLEAR_MESSAGE":return ec;case"CLEAR_TIMEOUT_ID":return ec;case"CLEAR_FILE":return ec;default:throw new Error("No action")}},ec={documentLocation:null,message:"",timeoutID:null,file:null},ax=e=>{const[t,r]=Ki.useState("");return{type:e,value:t,onChange:s=>{r(s.target.value)},clearValue:()=>{r("")}}},wv=()=>{const[e,t]=Ki.useReducer(bD,ec);return{state:e,dispatch:t}},zc=({htmlId:e})=>$t(fE,{children:$t("select",{id:e,name:"document",children:hD.map((t,r)=>$t("option",{children:t},r))})}),qc=({notification:e,statusType:t,defaultMessage:r,locationUrl:n=""})=>$r("dl",{className:"display",children:[$r("dt",{children:[t,":"]}),e?n?$r("dd",{className:"labelStatus",role:"alert",children:[e," ",$t("a",{href:n,target:"_blank",children:n})]}):$t("dd",{className:"labelStatus",role:"alert",children:e}):$t("dd",{children:r})]}),ED=()=>{const{session:e}=_o.useSession(),{state:t,dispatch:r}=wv(),n=d=>{d.target.files&&r({type:"SET_FILE",payload:d.target.files[0]})},{clearValue:i,_type:s,...a}=ax("textarea"),l=async d=>{d.preventDefault();const m={type:d.target.document.value,date:d.target.date.value||"01/01/1800",description:d.target.description.value||"No Description provided",file:t.file};try{await pD(m,e),ts(`Uploading "${m.file.name}" to Solid`,2,t,r),setTimeout(()=>{ts(`File "${m.file.name}" uploaded to Solid`,7,t,r),d.target.file.value=null,r({type:"CLEAR_FILE"}),i()},2e3)}catch{ts("Submission failed. Reason: missing file",7,t,r),console.log("Submission failed. Reason: missing file")}},y={margin:"20px 0"};return $r("section",{hidden:e.info.isLoggedIn?"":"hidden",className:"panel",children:[$t("strong",{children:"Upload Document"}),$r("form",{onSubmit:l,children:[$r("div",{style:y,children:[$t("label",{htmlFor:"upload-doc",children:"Select document type to upload: "}),$t(zc,{htmlId:"upload-doc"})]}),$r("div",{style:y,children:[$r("label",{htmlFor:"upload-doc-expiration",children:["Expiration date (if applicable):"," "]}),$t("input",{id:"upload-doc-expiration",name:"date",type:"date"})]}),$r("div",{style:y,children:[$t("label",{htmlFor:"upload-doc-desc",children:"Enter description: "}),$t("br",{}),$t("br",{}),$t("textarea",{id:"upload-doc-desc",name:"description",...a})]}),$r("div",{style:y,children:[$t("label",{htmlFor:"upload-doctype",children:"File to upload: "}),$t("input",{id:"upload-doctype",type:"file",name:"file",accept:".pdf, .docx., .doc, .txt, .rtf",onChange:n}),$t("button",{type:"submit",children:"Upload file"})]})]}),$t(qc,{notification:t.message,statusType:"Writing status",defaultMessage:"To be uploaded..."})]})},AD=()=>{const{session:e}=_o.useSession(),{state:t,dispatch:r}=wv(),n=async s=>{s.preventDefault();try{const a=await vD(e,s.target.document.value);t.documentLocation&&r({type:"CLEAR_DOCUMENT_LOCATION"}),ts("Locating document...",2,t,r),setTimeout(()=>{r({type:"SET_DOCUMENT_LOCATION",payload:a}),ts("Document found! Document located at: ",7,t,r)},2e3)}catch{r({type:"CLEAR_DOCUMENT_LOCATION"}),ts("Search failed. Reason: Document not found",7,t,r),console.log("Search failed. Reason: Document not found")}},i={margin:"20px 0"};return $r("section",{hidden:e.info.isLoggedIn?"":"hidden",className:"panel",children:[$t("strong",{children:"Search Document"}),$t("form",{onSubmit:n,children:$r("div",{style:i,children:[$r("label",{htmlFor:"search-doctype",children:["Select document type to search:"," "]}),$t(zc,{htmlId:"search-doctype"})," ",$t("button",{type:"submit",children:"Get Document"})]})}),$t(qc,{notification:t.message,statusType:"Search status",defaultMessage:"To be searched...",locationUrl:t.documentLocation})]})},RD=()=>{const{session:e}=_o.useSession(),{state:t,dispatch:r}=wv(),n=async s=>{s.preventDefault();try{const a=await wD(e,s.target.document.value);ts("File being deleted from Pod...",2,t,r),setTimeout(()=>{_D(e,a),ts("Removing file container from Pod...",7,t,r)},2e3)}catch{ts("Deletion failed. Reason: Data not found",7,t,r),console.log("Deletion failed. Reason: Data not found")}},i={margin:"20px 0"};return $r("section",{hidden:e.info.isLoggedIn?"":"hidden",className:"panel",children:[$t("strong",{children:"Delete Document"}),$t("form",{onSubmit:n,children:$r("div",{style:i,children:[$r("label",{htmlFor:"delete-doctype",children:["Select document type to delete:"," "]}),$t(zc,{htmlId:"delete-doctype"})," ",$t("button",{type:"submit",children:"Delete Document"})]})}),$t(qc,{notification:t.message,statusType:"Deletion status",defaultMessage:"To be searched..."})]})},xD=()=>{const{session:e}=_o.useSession(),t=n=>{n.preventDefault(),console.log(n.target.crossPodQuery.value),console.log(n.target.document.value)},r={margin:"20px 0"};return $r("section",{hidden:e.info.isLoggedIn?"":"hidden",className:"panel",children:[$t("strong",{children:"Cross Pod Search"}),$r("form",{onSubmit:t,children:[$r("div",{style:r,children:[$r("label",{htmlFor:"cross-search-doc",children:["Paste other user's pod url to search from:"," "]}),$t("input",{id:"cross-search-doc",size:"60",type:"text",name:"crossPodQuery"})]}),$r("div",{style:r,children:[$r("label",{htmlFor:"cross-search-doctype",children:["Select document type to search:"," "]}),$t(zc,{htmlId:"cross-search-doctype"})," ",$t("button",{type:"submit",children:"Search Pod"})]})]}),$t(qc,{notification:"",statusType:"Writing status",defaultMessage:"To be searched..."})]})},CD=()=>{const{session:e}=_o.useSession(),{clearValue:t,_type:r,...n}=ax("textarea"),[i,s]=Ki.useState([]),a=d=>{s(d.target.files[0])},l=d=>{d.preventDefault(),console.log(d.target.crossPodUpload.value),console.log(d.target.document.value),console.log(d.target.date.value),console.log(d.target.description.value),console.log(i)},y={margin:"20px 0"};return $r("section",{hidden:e.info.isLoggedIn?"":"hidden",className:"panel",children:[$t("strong",{children:"Cross Pod Upload"}),$r("form",{onSubmit:l,children:[$r("div",{style:y,children:[$r("label",{htmlFor:"cross-upload-doc",children:["Paste other user's pod url to upload to:"," "]}),$t("input",{id:"cross-upload-doc",size:"60",type:"text",name:"crossPodUpload"})]}),$r("div",{style:y,children:[$r("label",{htmlFor:"cross-upload-doctype",children:["Choose document type to upload:"," "]}),$t(zc,{htmlId:"cross-upload-doctype"})]}),$r("div",{style:y,children:[$r("label",{htmlFor:"cross-upload-doc-expiration",children:["Expiration date (if applicable):"," "]}),$t("input",{id:"cross-upload-doc-expiration",name:"date",type:"date"})]}),$r("div",{style:y,children:[$t("label",{htmlFor:"cross-upload-doc-desc",children:"Enter description:"}),$t("br",{}),$t("br",{}),$t("textarea",{id:"cross-upload-doc-desc",name:"description",...n})]}),$r("div",{style:y,children:[$t("label",{htmlFor:"cross-upload-doctype",children:"File to upload: "}),$t("input",{id:"cross-upload-doctype",type:"file",name:"file",accept:".pdf, .docx., .doc, .txt, .rtf",onChange:a}),$t("button",{type:"submit",children:"Upload to Pod"})]})]}),$t(qc,{notification:"",statusType:"Writing status",defaultMessage:"To be uploaded..."})]})},PD=()=>$t("header",{children:$t("h2",{children:"Getting Started with PASS"})}),TD=()=>$r(fE,{children:[$t(PD,{}),$t(_o.SessionProvider,{children:$r("main",{children:[$t(SD,{}),$t(ED,{}),$t(AD,{}),$t(RD,{}),$t(xD,{}),$t(CD,{})]})})]}),FD=k0.createRoot(document.getElementById("root"));FD.render($t(lP.StrictMode,{children:$t(TD,{})}));export{zy as a,mo as c,VC as g,My as r};
